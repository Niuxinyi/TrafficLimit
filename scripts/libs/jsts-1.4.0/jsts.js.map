{"version":3,"file":"jsts.js","sources":["../src/Array.js","../src/Number.js","../src/Math.js","../src/extend.js","../src/org/locationtech/jts/util/NumberUtil.js","../src/java/lang/IllegalArgumentException.js","../src/java/lang/Double.js","../src/java/lang/Comparable.js","../src/java/lang/Cloneable.js","../src/java/util/Comparator.js","../src/java/io/Serializable.js","../src/java/lang/RuntimeException.js","../src/inherits.js","../src/org/locationtech/jts/util/AssertionFailedException.js","../src/org/locationtech/jts/util/Assert.js","../src/org/locationtech/jts/geom/Coordinate.js","../src/java/util/Iterator.js","../src/java/util/Collection.js","../src/java/util/IndexOutOfBoundsException.js","../src/java/util/List.js","../src/java/util/NoSuchElementException.js","../src/java/util/OperationNotSupported.js","../src/java/util/ArrayList.js","../src/org/locationtech/jts/geom/CoordinateList.js","../src/org/locationtech/jts/geom/Envelope.js","../src/java/lang/Exception.js","../src/org/locationtech/jts/algorithm/NotRepresentableException.js","../src/org/locationtech/jts/geom/Location.js","../src/hasInterface.js","../src/org/locationtech/jts/math/MathUtil.js","../src/java/lang/StringBuffer.js","../src/java/lang/Integer.js","../src/java/lang/Character.js","../src/org/locationtech/jts/math/DD.js","../src/org/locationtech/jts/algorithm/CGAlgorithmsDD.js","../src/org/locationtech/jts/geom/CoordinateSequence.js","../src/java/lang/System.js","../src/org/locationtech/jts/algorithm/HCoordinate.js","../src/org/locationtech/jts/geom/CoordinateSequenceFactory.js","../src/org/locationtech/jts/geom/GeometryComponentFilter.js","../src/org/locationtech/jts/geom/Geometry.js","../src/org/locationtech/jts/geom/CoordinateFilter.js","../src/org/locationtech/jts/algorithm/BoundaryNodeRule.js","../src/org/locationtech/jts/geom/CoordinateArrays.js","../src/java/util/Map.js","../src/java/util/SortedMap.js","../src/java/util/Set.js","../src/java/util/HashSet.js","../src/java/util/TreeMap.js","../src/org/locationtech/jts/geom/Lineal.js","../src/java/util/SortedSet.js","../src/java/util/TreeSet.js","../src/java/util/Arrays.js","../src/org/locationtech/jts/geom/Dimension.js","../src/org/locationtech/jts/geom/GeometryFilter.js","../src/org/locationtech/jts/geom/CoordinateSequenceFilter.js","../src/org/locationtech/jts/geom/GeometryCollection.js","../src/org/locationtech/jts/geom/MultiLineString.js","../src/org/locationtech/jts/operation/BoundaryOp.js","../src/java/io/PrintStream.js","../src/java/io/StringReader.js","../src/java/text/DecimalFormat.js","../src/java/io/ByteArrayOutputStream.js","../src/java/io/IOException.js","../src/java/io/LineNumberReader.js","../src/org/locationtech/jts/util/StringUtil.js","../src/org/locationtech/jts/geom/CoordinateSequences.js","../src/org/locationtech/jts/geom/LineString.js","../src/org/locationtech/jts/geom/Puntal.js","../src/org/locationtech/jts/geom/Point.js","../src/org/locationtech/jts/geom/Polygonal.js","../src/org/locationtech/jts/geom/Polygon.js","../src/org/locationtech/jts/geom/MultiPoint.js","../src/org/locationtech/jts/geom/LinearRing.js","../src/org/locationtech/jts/geom/MultiPolygon.js","../src/org/locationtech/jts/geom/util/GeometryEditor.js","../src/org/locationtech/jts/geom/impl/CoordinateArraySequence.js","../src/org/locationtech/jts/geom/impl/CoordinateArraySequenceFactory.js","../src/Map.js","../src/java/util/HashMap.js","../src/org/locationtech/jts/geom/PrecisionModel.js","../src/org/locationtech/jts/geom/GeometryFactory.js","../src/org/locationtech/jts/io/WKTParser.js","../src/org/locationtech/jts/io/WKTWriter.js","../src/org/locationtech/jts/algorithm/LineIntersector.js","../src/org/locationtech/jts/algorithm/RobustLineIntersector.js","../src/org/locationtech/jts/algorithm/RobustDeterminant.js","../src/org/locationtech/jts/algorithm/RayCrossingCounter.js","../src/org/locationtech/jts/algorithm/CGAlgorithms.js","../src/org/locationtech/jts/geom/LineSegment.js","../src/org/locationtech/jts/geom/IntersectionMatrix.js","../src/org/locationtech/jts/algorithm/Centroid.js","../src/java/util/EmptyStackException.js","../src/java/util/Stack.js","../src/org/locationtech/jts/util/UniqueCoordinateArrayFilter.js","../src/org/locationtech/jts/algorithm/ConvexHull.js","../src/org/locationtech/jts/geom/util/GeometryTransformer.js","../src/org/locationtech/jts/operation/overlay/snap/LineStringSnapper.js","../src/org/locationtech/jts/operation/overlay/snap/GeometrySnapper.js","../src/org/locationtech/jts/precision/CommonBits.js","../src/org/locationtech/jts/precision/CommonBitsRemover.js","../src/org/locationtech/jts/geom/GeometryCollectionIterator.js","../src/org/locationtech/jts/algorithm/PointLocator.js","../src/org/locationtech/jts/noding/Octant.js","../src/org/locationtech/jts/noding/SegmentString.js","../src/org/locationtech/jts/noding/BasicSegmentString.js","../src/org/locationtech/jts/index/strtree/Boundable.js","../src/org/locationtech/jts/index/strtree/ItemBoundable.js","../src/org/locationtech/jts/util/PriorityQueue.js","../src/org/locationtech/jts/index/ItemVisitor.js","../src/org/locationtech/jts/index/SpatialIndex.js","../src/org/locationtech/jts/index/strtree/AbstractNode.js","../src/java/util/Collections.js","../src/org/locationtech/jts/index/strtree/BoundablePair.js","../src/org/locationtech/jts/index/strtree/AbstractSTRtree.js","../src/org/locationtech/jts/index/strtree/ItemDistance.js","../src/org/locationtech/jts/index/strtree/STRtree.js","../src/org/locationtech/jts/noding/SegmentPointComparator.js","../src/org/locationtech/jts/noding/SegmentNode.js","../src/org/locationtech/jts/noding/SegmentNodeList.js","../src/org/locationtech/jts/noding/NodableSegmentString.js","../src/org/locationtech/jts/noding/NodedSegmentString.js","../src/org/locationtech/jts/index/chain/MonotoneChainOverlapAction.js","../src/org/locationtech/jts/index/chain/MonotoneChain.js","../src/org/locationtech/jts/geomgraph/Quadrant.js","../src/org/locationtech/jts/index/chain/MonotoneChainBuilder.js","../src/org/locationtech/jts/noding/Noder.js","../src/org/locationtech/jts/noding/SinglePassNoder.js","../src/org/locationtech/jts/noding/MCIndexNoder.js","../src/org/locationtech/jts/geom/TopologyException.js","../src/org/locationtech/jts/noding/SegmentIntersector.js","../src/org/locationtech/jts/noding/InteriorIntersectionFinder.js","../src/org/locationtech/jts/noding/FastNodingValidator.js","../src/org/locationtech/jts/geomgraph/EdgeNodingValidator.js","../src/org/locationtech/jts/geom/util/GeometryCollectionMapper.js","../src/org/locationtech/jts/geomgraph/Position.js","../src/org/locationtech/jts/geomgraph/TopologyLocation.js","../src/org/locationtech/jts/geomgraph/Label.js","../src/org/locationtech/jts/geomgraph/EdgeRing.js","../src/org/locationtech/jts/operation/overlay/MinimalEdgeRing.js","../src/org/locationtech/jts/operation/overlay/MaximalEdgeRing.js","../src/org/locationtech/jts/geomgraph/GraphComponent.js","../src/org/locationtech/jts/geomgraph/Node.js","../src/org/locationtech/jts/geomgraph/NodeMap.js","../src/org/locationtech/jts/geomgraph/EdgeEnd.js","../src/org/locationtech/jts/geomgraph/DirectedEdge.js","../src/org/locationtech/jts/geomgraph/NodeFactory.js","../src/org/locationtech/jts/geomgraph/PlanarGraph.js","../src/org/locationtech/jts/operation/overlay/PolygonBuilder.js","../src/org/locationtech/jts/operation/overlay/LineBuilder.js","../src/org/locationtech/jts/operation/overlay/PointBuilder.js","../src/org/locationtech/jts/algorithm/locate/PointOnGeometryLocator.js","../src/org/locationtech/jts/algorithm/locate/SimplePointInAreaLocator.js","../src/org/locationtech/jts/geomgraph/EdgeEndStar.js","../src/org/locationtech/jts/geomgraph/DirectedEdgeStar.js","../src/org/locationtech/jts/operation/overlay/OverlayNodeFactory.js","../src/org/locationtech/jts/geomgraph/index/MonotoneChain.js","../src/org/locationtech/jts/geomgraph/index/SweepLineEvent.js","../src/org/locationtech/jts/geomgraph/index/EdgeSetIntersector.js","../src/org/locationtech/jts/geomgraph/index/SegmentIntersector.js","../src/org/locationtech/jts/geomgraph/index/SimpleMCSweepLineIntersector.js","../src/org/locationtech/jts/index/intervalrtree/IntervalRTreeNode.js","../src/org/locationtech/jts/index/intervalrtree/IntervalRTreeLeafNode.js","../src/org/locationtech/jts/index/intervalrtree/IntervalRTreeBranchNode.js","../src/org/locationtech/jts/index/intervalrtree/SortedPackedIntervalRTree.js","../src/org/locationtech/jts/geom/util/LinearComponentExtracter.js","../src/org/locationtech/jts/index/ArrayListVisitor.js","../src/org/locationtech/jts/algorithm/locate/IndexedPointInAreaLocator.js","../src/org/locationtech/jts/geomgraph/EdgeIntersection.js","../src/org/locationtech/jts/geomgraph/EdgeIntersectionList.js","../src/org/locationtech/jts/geomgraph/index/MonotoneChainIndexer.js","../src/org/locationtech/jts/geomgraph/index/MonotoneChainEdge.js","../src/org/locationtech/jts/geomgraph/Depth.js","../src/org/locationtech/jts/geomgraph/Edge.js","../src/org/locationtech/jts/geomgraph/GeometryGraph.js","../src/org/locationtech/jts/operation/GeometryGraphOperation.js","../src/org/locationtech/jts/noding/OrientedCoordinateArray.js","../src/org/locationtech/jts/geomgraph/EdgeList.js","../src/org/locationtech/jts/operation/overlay/OverlayOp.js","../src/org/locationtech/jts/operation/overlay/snap/SnapOverlayOp.js","../src/org/locationtech/jts/operation/overlay/snap/SnapIfNeededOverlayOp.js","../src/org/locationtech/jts/algorithm/InteriorPointArea.js","../src/org/locationtech/jts/algorithm/InteriorPointLine.js","../src/org/locationtech/jts/algorithm/InteriorPointPoint.js","../src/org/locationtech/jts/index/chain/MonotoneChainSelectAction.js","../src/org/locationtech/jts/index/bintree/NodeBase.js","../src/org/locationtech/jts/index/bintree/Interval.js","../src/org/locationtech/jts/index/quadtree/DoubleBits.js","../src/org/locationtech/jts/index/bintree/Key.js","../src/org/locationtech/jts/index/bintree/Node.js","../src/org/locationtech/jts/index/quadtree/IntervalSize.js","../src/org/locationtech/jts/index/bintree/Root.js","../src/org/locationtech/jts/index/bintree/Bintree.js","../src/org/locationtech/jts/algorithm/PointInRing.js","../src/org/locationtech/jts/algorithm/MCPointInRing.js","../src/org/locationtech/jts/algorithm/Angle.js","../src/org/locationtech/jts/geom/Triangle.js","../src/org/locationtech/jts/algorithm/MinimumBoundingCircle.js","../src/org/locationtech/jts/algorithm/MinimumDiameter.js","../src/org/locationtech/jts/densify/Densifier.js","../src/org/locationtech/jts/edgegraph/HalfEdge.js","../src/org/locationtech/jts/edgegraph/MarkHalfEdge.js","../src/org/locationtech/jts/edgegraph/EdgeGraph.js","../src/org/locationtech/jts/dissolve/DissolveHalfEdge.js","../src/org/locationtech/jts/dissolve/DissolveEdgeGraph.js","../src/org/locationtech/jts/dissolve/LineDissolver.js","../src/org/locationtech/jts/index/quadtree/NodeBase.js","../src/org/locationtech/jts/index/quadtree/Key.js","../src/org/locationtech/jts/index/quadtree/Node.js","../src/org/locationtech/jts/index/quadtree/Root.js","../src/org/locationtech/jts/index/quadtree/Quadtree.js","../src/org/locationtech/jts/io/GeoJSONParser.js","../src/org/locationtech/jts/io/GeoJSONReader.js","../src/org/locationtech/jts/io/GeoJSONWriter.js","../src/org/locationtech/jts/io/WKTReader.js","../src/org/locationtech/jts/io/OL3Parser.js","../src/org/locationtech/jts/noding/ScaledNoder.js","../src/org/locationtech/jts/operation/IsSimpleOp.js","../src/org/locationtech/jts/operation/buffer/BufferParameters.js","../src/org/locationtech/jts/operation/buffer/RightmostEdgeFinder.js","../src/java/util/LinkedList.js","../src/org/locationtech/jts/operation/buffer/BufferSubgraph.js","../src/org/locationtech/jts/operation/buffer/BufferInputLineSimplifier.js","../src/org/locationtech/jts/operation/buffer/OffsetSegmentString.js","../src/org/locationtech/jts/operation/buffer/OffsetSegmentGenerator.js","../src/org/locationtech/jts/operation/buffer/OffsetCurveBuilder.js","../src/org/locationtech/jts/operation/buffer/SubgraphDepthLocater.js","../src/org/locationtech/jts/operation/buffer/OffsetCurveSetBuilder.js","../src/org/locationtech/jts/noding/IntersectionAdder.js","../src/org/locationtech/jts/operation/buffer/BufferBuilder.js","../src/org/locationtech/jts/noding/NodingValidator.js","../src/org/locationtech/jts/noding/snapround/HotPixel.js","../src/org/locationtech/jts/noding/snapround/MCIndexPointSnapper.js","../src/org/locationtech/jts/noding/InteriorIntersectionFinderAdder.js","../src/org/locationtech/jts/noding/snapround/MCIndexSnapRounder.js","../src/org/locationtech/jts/operation/buffer/BufferOp.js","../src/org/locationtech/jts/geom/util/PolygonExtracter.js","../src/org/locationtech/jts/operation/distance/GeometryLocation.js","../src/org/locationtech/jts/geom/util/PointExtracter.js","../src/org/locationtech/jts/operation/distance/ConnectedElementLocationFilter.js","../src/org/locationtech/jts/operation/distance/DistanceOp.js","../src/org/locationtech/jts/operation/linemerge/EdgeString.js","../src/org/locationtech/jts/planargraph/GraphComponent.js","../src/org/locationtech/jts/planargraph/DirectedEdge.js","../src/org/locationtech/jts/operation/linemerge/LineMergeDirectedEdge.js","../src/org/locationtech/jts/planargraph/Edge.js","../src/org/locationtech/jts/planargraph/DirectedEdgeStar.js","../src/org/locationtech/jts/planargraph/Node.js","../src/org/locationtech/jts/operation/linemerge/LineMergeEdge.js","../src/org/locationtech/jts/planargraph/NodeMap.js","../src/org/locationtech/jts/planargraph/PlanarGraph.js","../src/org/locationtech/jts/operation/linemerge/LineMergeGraph.js","../src/org/locationtech/jts/operation/linemerge/LineMerger.js","../src/org/locationtech/jts/operation/polygonize/PolygonizeDirectedEdge.js","../src/org/locationtech/jts/operation/polygonize/PolygonizeEdge.js","../src/org/locationtech/jts/operation/valid/ConnectedInteriorTester.js","../src/org/locationtech/jts/operation/relate/EdgeEndBuilder.js","../src/org/locationtech/jts/operation/relate/EdgeEndBundle.js","../src/org/locationtech/jts/operation/relate/EdgeEndBundleStar.js","../src/org/locationtech/jts/operation/relate/RelateNode.js","../src/org/locationtech/jts/operation/relate/RelateNodeFactory.js","../src/org/locationtech/jts/operation/relate/RelateNodeGraph.js","../src/org/locationtech/jts/operation/valid/ConsistentAreaTester.js","../src/org/locationtech/jts/operation/valid/IndexedNestedRingTester.js","../src/org/locationtech/jts/operation/valid/TopologyValidationError.js","../src/org/locationtech/jts/operation/valid/IsValidOp.js","../src/org/locationtech/jts/operation/polygonize/EdgeRing.js","../src/org/locationtech/jts/operation/polygonize/PolygonizeGraph.js","../src/org/locationtech/jts/operation/polygonize/Polygonizer.js","../src/org/locationtech/jts/operation/relate/RelateComputer.js","../src/org/locationtech/jts/operation/predicate/RectangleContains.js","../src/org/locationtech/jts/algorithm/RectangleLineIntersector.js","../src/org/locationtech/jts/geom/util/ShortCircuitedGeometryVisitor.js","../src/org/locationtech/jts/operation/predicate/RectangleIntersects.js","../src/org/locationtech/jts/operation/relate/RelateOp.js","../src/org/locationtech/jts/geom/util/GeometryCombiner.js","../src/org/locationtech/jts/operation/union/PointGeometryUnion.js","../src/org/locationtech/jts/geom/util/GeometryExtracter.js","../src/org/locationtech/jts/operation/union/CascadedPolygonUnion.js","../src/org/locationtech/jts/operation/union/UnaryUnionOp.js","../src/org/locationtech/jts/precision/PrecisionReducerCoordinateOperation.js","../src/org/locationtech/jts/precision/GeometryPrecisionReducer.js","../src/org/locationtech/jts/simplify/DouglasPeuckerLineSimplifier.js","../src/org/locationtech/jts/simplify/DouglasPeuckerSimplifier.js","../src/org/locationtech/jts/simplify/TaggedLineSegment.js","../src/org/locationtech/jts/simplify/TaggedLineString.js","../src/org/locationtech/jts/simplify/LineSegmentIndex.js","../src/org/locationtech/jts/simplify/TaggedLineStringSimplifier.js","../src/org/locationtech/jts/simplify/TaggedLinesSimplifier.js","../src/org/locationtech/jts/simplify/TopologyPreservingSimplifier.js","../src/org/locationtech/jts/triangulate/SplitSegment.js","../src/org/locationtech/jts/triangulate/ConstraintSplitPointFinder.js","../src/org/locationtech/jts/triangulate/NonEncroachingSplitPointFinder.js","../src/org/locationtech/jts/triangulate/quadedge/TrianglePredicate.js","../src/org/locationtech/jts/triangulate/quadedge/Vertex.js","../src/org/locationtech/jts/triangulate/ConstraintVertex.js","../src/org/locationtech/jts/triangulate/quadedge/QuadEdge.js","../src/org/locationtech/jts/triangulate/IncrementalDelaunayTriangulator.js","../src/org/locationtech/jts/triangulate/quadedge/QuadEdgeLocator.js","../src/org/locationtech/jts/triangulate/quadedge/LastFoundQuadEdgeLocator.js","../src/org/locationtech/jts/triangulate/quadedge/LocateFailureException.js","../src/org/locationtech/jts/triangulate/quadedge/TriangleVisitor.js","../src/org/locationtech/jts/triangulate/quadedge/QuadEdgeSubdivision.js","../src/org/locationtech/jts/triangulate/Segment.js","../src/org/locationtech/jts/index/kdtree/KdNodeVisitor.js","../src/org/locationtech/jts/index/kdtree/KdNode.js","../src/org/locationtech/jts/index/kdtree/KdTree.js","../src/org/locationtech/jts/triangulate/ConformingDelaunayTriangulator.js","../src/org/locationtech/jts/triangulate/DelaunayTriangulationBuilder.js","../src/org/locationtech/jts/triangulate/ConformingDelaunayTriangulationBuilder.js","../src/org/locationtech/jts/triangulate/VoronoiDiagramBuilder.js","../src/org/locationtech/jts/operation/union/UnionOp.js","../src/org/locationtech/jts/monkey.js","../src/jsts.js"],"sourcesContent":["/* Polyfill service v3.13.0\r\n * For detailed credits and licence information see http://github.com/financial-times/polyfill-service\r\n *\r\n * - Array.prototype.fill, License: CC0 */\r\n\r\nif (!('fill' in Array.prototype)) {\r\n  Object.defineProperty(Array.prototype, 'fill', {\r\n    configurable: true,\r\n    value: function fill(value) {\r\n      if (this === undefined || this === null) {\r\n        throw new TypeError(this + ' is not an object');\r\n      }\r\n\r\n      var arrayLike = Object(this);\r\n\r\n      var length = Math.max(Math.min(arrayLike.length, 9007199254740991), 0) || 0;\r\n\r\n      var relativeStart = 1 in arguments ? parseInt(Number(arguments[1]), 10) || 0 : 0;\r\n\r\n      relativeStart = relativeStart < 0 ? Math.max(length + relativeStart, 0) : Math.min(relativeStart, length);\r\n\r\n      var relativeEnd = 2 in arguments && arguments[2] !== undefined ? parseInt(Number(arguments[2]), 10) || 0 : length;\r\n\r\n      relativeEnd = relativeEnd < 0 ? Math.max(length + arguments[2], 0) : Math.min(relativeEnd, length);\r\n\r\n      while (relativeStart < relativeEnd) {\r\n        arrayLike[relativeStart] = value;\r\n\r\n        ++relativeStart;\r\n      }\r\n\r\n      return arrayLike;\r\n    },\r\n    writable: true\r\n  });\r\n}\r\n","Number.isFinite = Number.isFinite || function (value) {\r\n  return typeof value === 'number' && isFinite(value)\r\n}\r\n\r\nNumber.isInteger = Number.isInteger || function (val) {\r\n  return typeof val === 'number' &&\r\n  isFinite(val) &&\r\n  Math.floor(val) === val\r\n}\r\n\r\nNumber.parseFloat = Number.parseFloat || parseFloat\r\n\r\nNumber.isNaN = Number.isNaN || function (value) {\r\n  return value !== value // eslint-disable-line\r\n}\r\n","Math.trunc = Math.trunc || function(x) {\r\n  return x < 0 ? Math.ceil(x) : Math.floor(x);\r\n}\r\n","export default function (target, source) {\r\n  for (let key in source) {\r\n    if (source.hasOwnProperty(key)) target[key] = source[key]\r\n  }\r\n}\r\n","import extend from '../../../../extend';\r\nexport default function NumberUtil() {}\r\nextend(NumberUtil.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NumberUtil;\r\n\t}\r\n});\r\nNumberUtil.equalsWithTolerance = function (x1, x2, tolerance) {\r\n\treturn Math.abs(x1 - x2) <= tolerance;\r\n};\r\n","export default function IllegalArgumentException () {}\r\n","export default function Double () {}\r\nDouble.isNaN = n => Number.isNaN(n)\r\nDouble.doubleToLongBits = n => n\r\nDouble.longBitsToDouble = n => n\r\nDouble.isInfinite = n => !Number.isFinite(n)\r\nDouble.MAX_VALUE = Number.MAX_VALUE\r\n","export default function Comparable () {}\r\n","export default function Clonable () {}\r\n","export default function Comparator () {}\r\n","export default function Serializable () {}\r\n","export default function RuntimeException (message) {\r\n  this.name = 'RuntimeException'\r\n  this.message = message\r\n  this.stack = (new Error()).stack\r\n  Error.call(this, message)\r\n}\r\n\r\nRuntimeException.prototype = Object.create(Error.prototype)\r\nRuntimeException.prototype.constructor = Error\r\n","export default function (c, p) {\r\n  c.prototype = Object.create(p.prototype)\r\n  c.prototype.constructor = c\r\n}\r\n","import extend from '../../../../extend';\r\nimport RuntimeException from '../../../../java/lang/RuntimeException';\r\nimport inherits from '../../../../inherits';\r\nexport default function AssertionFailedException() {\r\n\tif (arguments.length === 0) {\r\n\t\tRuntimeException.call(this);\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet message = arguments[0];\r\n\t\tRuntimeException.call(this, message);\r\n\t}\r\n}\r\ninherits(AssertionFailedException, RuntimeException);\r\nextend(AssertionFailedException.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn AssertionFailedException;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport AssertionFailedException from './AssertionFailedException';\r\nexport default function Assert() {}\r\nextend(Assert.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Assert;\r\n\t}\r\n});\r\nAssert.shouldNeverReachHere = function () {\r\n\tif (arguments.length === 0) {\r\n\t\tAssert.shouldNeverReachHere(null);\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet message = arguments[0];\r\n\t\tthrow new AssertionFailedException(\"Should never reach here\" + (message !== null ? \": \" + message : \"\"));\r\n\t}\r\n};\r\nAssert.isTrue = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet assertion = arguments[0];\r\n\t\tAssert.isTrue(assertion, null);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet assertion = arguments[0], message = arguments[1];\r\n\t\tif (!assertion) {\r\n\t\t\tif (message === null) {\r\n\t\t\t\tthrow new AssertionFailedException();\r\n\t\t\t} else {\r\n\t\t\t\tthrow new AssertionFailedException(message);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\nAssert.equals = function () {\r\n\tif (arguments.length === 2) {\r\n\t\tlet expectedValue = arguments[0], actualValue = arguments[1];\r\n\t\tAssert.equals(expectedValue, actualValue, null);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet expectedValue = arguments[0], actualValue = arguments[1], message = arguments[2];\r\n\t\tif (!actualValue.equals(expectedValue)) {\r\n\t\t\tthrow new AssertionFailedException(\"Expected \" + expectedValue + \" but encountered \" + actualValue + (message !== null ? \": \" + message : \"\"));\r\n\t\t}\r\n\t}\r\n};\r\n","import NumberUtil from '../util/NumberUtil';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nimport Cloneable from '../../../../java/lang/Cloneable';\r\nimport Comparator from '../../../../java/util/Comparator';\r\nimport Serializable from '../../../../java/io/Serializable';\r\nimport Assert from '../util/Assert';\r\nexport default function Coordinate() {\r\n\tthis.x = null;\r\n\tthis.y = null;\r\n\tthis.z = null;\r\n\tif (arguments.length === 0) {\r\n\t\tCoordinate.call(this, 0.0, 0.0);\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet c = arguments[0];\r\n\t\tCoordinate.call(this, c.x, c.y, c.z);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet x = arguments[0], y = arguments[1];\r\n\t\tCoordinate.call(this, x, y, Coordinate.NULL_ORDINATE);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet x = arguments[0], y = arguments[1], z = arguments[2];\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t}\r\n}\r\nextend(Coordinate.prototype, {\r\n\tsetOrdinate: function (ordinateIndex, value) {\r\n\t\tswitch (ordinateIndex) {\r\n\t\t\tcase Coordinate.X:\r\n\t\t\t\tthis.x = value;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Coordinate.Y:\r\n\t\t\t\tthis.y = value;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Coordinate.Z:\r\n\t\t\t\tthis.z = value;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new IllegalArgumentException(\"Invalid ordinate index: \" + ordinateIndex);\r\n\t\t}\r\n\t},\r\n\tequals2D: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet other = arguments[0];\r\n\t\t\tif (this.x !== other.x) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (this.y !== other.y) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet c = arguments[0], tolerance = arguments[1];\r\n\t\t\tif (!NumberUtil.equalsWithTolerance(this.x, c.x, tolerance)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!NumberUtil.equalsWithTolerance(this.y, c.y, tolerance)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\tgetOrdinate: function (ordinateIndex) {\r\n\t\tswitch (ordinateIndex) {\r\n\t\t\tcase Coordinate.X:\r\n\t\t\t\treturn this.x;\r\n\t\t\tcase Coordinate.Y:\r\n\t\t\t\treturn this.y;\r\n\t\t\tcase Coordinate.Z:\r\n\t\t\t\treturn this.z;\r\n\t\t}\r\n\t\tthrow new IllegalArgumentException(\"Invalid ordinate index: \" + ordinateIndex);\r\n\t},\r\n\tequals3D: function (other) {\r\n\t\treturn this.x === other.x && this.y === other.y && (this.z === other.z || Double.isNaN(this.z) && Double.isNaN(other.z));\r\n\t},\r\n\tequals: function (other) {\r\n\t\tif (!(other instanceof Coordinate)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.equals2D(other);\r\n\t},\r\n\tequalInZ: function (c, tolerance) {\r\n\t\treturn NumberUtil.equalsWithTolerance(this.z, c.z, tolerance);\r\n\t},\r\n\tcompareTo: function (o) {\r\n\t\tvar other = o;\r\n\t\tif (this.x < other.x) return -1;\r\n\t\tif (this.x > other.x) return 1;\r\n\t\tif (this.y < other.y) return -1;\r\n\t\tif (this.y > other.y) return 1;\r\n\t\treturn 0;\r\n\t},\r\n\tclone: function () {\r\n\t\ttry {\r\n\t\t\tvar coord = null;\r\n\t\t\treturn coord;\r\n\t\t} catch (e) {\r\n\t\t\tif (e instanceof CloneNotSupportedException) {\r\n\t\t\t\tAssert.shouldNeverReachHere(\"this shouldn't happen because this class is Cloneable\");\r\n\t\t\t\treturn null;\r\n\t\t\t} else throw e;\r\n\t\t} finally {}\r\n\t},\r\n\tcopy: function () {\r\n\t\treturn new Coordinate(this);\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn \"(\" + this.x + \", \" + this.y + \", \" + this.z + \")\";\r\n\t},\r\n\tdistance3D: function (c) {\r\n\t\tvar dx = this.x - c.x;\r\n\t\tvar dy = this.y - c.y;\r\n\t\tvar dz = this.z - c.z;\r\n\t\treturn Math.sqrt(dx * dx + dy * dy + dz * dz);\r\n\t},\r\n\tdistance: function (c) {\r\n\t\tvar dx = this.x - c.x;\r\n\t\tvar dy = this.y - c.y;\r\n\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t},\r\n\thashCode: function () {\r\n\t\tvar result = 17;\r\n\t\tresult = 37 * result + Coordinate.hashCode(this.x);\r\n\t\tresult = 37 * result + Coordinate.hashCode(this.y);\r\n\t\treturn result;\r\n\t},\r\n\tsetCoordinate: function (other) {\r\n\t\tthis.x = other.x;\r\n\t\tthis.y = other.y;\r\n\t\tthis.z = other.z;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable, Cloneable, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Coordinate;\r\n\t}\r\n});\r\nCoordinate.hashCode = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet x = arguments[0];\r\n\t\tvar f = Double.doubleToLongBits(x);\r\n\t\treturn Math.trunc(f ^ f >>> 32);\r\n\t}\r\n};\r\nfunction DimensionalComparator() {\r\n\tthis.dimensionsToTest = 2;\r\n\tif (arguments.length === 0) {\r\n\t\tDimensionalComparator.call(this, 2);\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet dimensionsToTest = arguments[0];\r\n\t\tif (dimensionsToTest !== 2 && dimensionsToTest !== 3) throw new IllegalArgumentException(\"only 2 or 3 dimensions may be specified\");\r\n\t\tthis.dimensionsToTest = dimensionsToTest;\r\n\t}\r\n}\r\nextend(DimensionalComparator.prototype, {\r\n\tcompare: function (o1, o2) {\r\n\t\tvar c1 = o1;\r\n\t\tvar c2 = o2;\r\n\t\tvar compX = DimensionalComparator.compare(c1.x, c2.x);\r\n\t\tif (compX !== 0) return compX;\r\n\t\tvar compY = DimensionalComparator.compare(c1.y, c2.y);\r\n\t\tif (compY !== 0) return compY;\r\n\t\tif (this.dimensionsToTest <= 2) return 0;\r\n\t\tvar compZ = DimensionalComparator.compare(c1.z, c2.z);\r\n\t\treturn compZ;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DimensionalComparator;\r\n\t}\r\n});\r\nDimensionalComparator.compare = function (a, b) {\r\n\tif (a < b) return -1;\r\n\tif (a > b) return 1;\r\n\tif (Double.isNaN(a)) {\r\n\t\tif (Double.isNaN(b)) return 0;\r\n\t\treturn -1;\r\n\t}\r\n\tif (Double.isNaN(b)) return 1;\r\n\treturn 0;\r\n};\r\nCoordinate.DimensionalComparator = DimensionalComparator;\r\nCoordinate.serialVersionUID = 6683108902428366910;\r\nCoordinate.NULL_ORDINATE = Double.NaN;\r\nCoordinate.X = 0;\r\nCoordinate.Y = 1;\r\nCoordinate.Z = 2;\r\n","/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/Iterator.html\r\n * @constructor\r\n * @private\r\n */\r\nexport default function Iterator() {};\r\n\r\n/**\r\n * Returns true if the iteration has more elements.\r\n * @return {boolean}\r\n */\r\nIterator.prototype.hasNext = function() {};\r\n\r\n/**\r\n * Returns the next element in the iteration.\r\n * @return {Object}\r\n */\r\nIterator.prototype.next = function() {};\r\n\r\n/**\r\n * Removes from the underlying collection the last element returned by the\r\n * iterator (optional operation).\r\n */\r\nIterator.prototype.remove = function() {};\r\n","import Iterator from './Iterator'\r\n\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/Collection.html\r\n *\r\n * @constructor\r\n * @private\r\n */\r\nexport default function Collection() {};\r\n\r\n/**\r\n * Ensures that this collection contains the specified element (optional\r\n * operation).\r\n * @param {Object} e\r\n * @return {boolean}\r\n */\r\nCollection.prototype.add = function() {};\r\n\r\n\r\n/**\r\n * Appends all of the elements in the specified collection to the end of this\r\n * list, in the order that they are returned by the specified collection's\r\n * iterator (optional operation).\r\n * @param {javascript.util.Collection} c\r\n * @return {boolean}\r\n */\r\nCollection.prototype.addAll = function() {};\r\n\r\n\r\n/**\r\n * Returns true if this collection contains no elements.\r\n * @return {boolean}\r\n */\r\nCollection.prototype.isEmpty = function() {};\r\n\r\n\r\n/**\r\n * Returns an iterator over the elements in this collection.\r\n * @return {javascript.util.Iterator}\r\n */\r\nCollection.prototype.iterator = function() {};\r\n\r\n\r\n/**\r\n * Returns an iterator over the elements in this collection.\r\n * @return {number}\r\n */\r\nCollection.prototype.size = function() {};\r\n\r\n\r\n/**\r\n * Returns an array containing all of the elements in this collection.\r\n * @return {Array}\r\n */\r\nCollection.prototype.toArray = function() {};\r\n\r\n\r\n/**\r\n * Removes a single instance of the specified element from this collection if it\r\n * is present. (optional)\r\n * @param {Object} e\r\n * @return {boolean}\r\n */\r\nCollection.prototype.remove = function() {};\r\n","/**\r\n * @param {string=} message Optional message\r\n * @extends {Error}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function IndexOutOfBoundsException(message) {\r\n  this.message = message || '';\r\n};\r\nIndexOutOfBoundsException.prototype = new Error();\r\n\r\n/**\r\n * @type {string}\r\n */\r\nIndexOutOfBoundsException.prototype.name = 'IndexOutOfBoundsException';\r\n","import Collection from './Collection'\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/List.html\r\n *\r\n * @extends {javascript.util.Collection}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function List() { };\r\nList.prototype = Object.create(Collection.prototype);\r\nList.prototype.constructor = List\r\n\r\n/**\r\n * Returns the element at the specified position in this list.\r\n * @param {number} index\r\n * @return {Object}\r\n */\r\nList.prototype.get = function() { };\r\n\r\n\r\n/**\r\n * Replaces the element at the specified position in this list with the\r\n * specified element (optional operation).\r\n * @param {number} index\r\n * @param {Object} e\r\n * @return {Object}\r\n */\r\nList.prototype.set = function() { };\r\n\r\n\r\n/**\r\n * Returns true if this collection contains no elements.\r\n * @return {boolean}\r\n */\r\nList.prototype.isEmpty = function() { };\r\n","/**\r\n * @param {string=} message Optional message\r\n * @extends {Error}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function NoSuchElementException(message) {\r\n  this.message = message || '';\r\n};\r\nNoSuchElementException.prototype = new Error();\r\n\r\n\r\n/**\r\n * @type {string}\r\n */\r\nNoSuchElementException.prototype.name = 'NoSuchElementException';\r\n","/**\r\n * @param {string=} message Optional message\r\n * @extends {Error}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function OperationNotSupported(message) {\r\n  this.message = message || '';\r\n};\r\nOperationNotSupported.prototype = new Error();\r\n\r\n\r\n/**\r\n * @type {string}\r\n */\r\nOperationNotSupported.prototype.name = 'OperationNotSupported';\r\n","import Collection from './Collection'\r\nimport IndexOutOfBoundsException from './IndexOutOfBoundsException'\r\nimport Iterator from './Iterator'\r\nimport List from './List'\r\nimport NoSuchElementException from './NoSuchElementException'\r\nimport OperationNotSupported from './OperationNotSupported'\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/ArrayList.html\r\n *\r\n * @extends List\r\n * @private\r\n */\r\nexport default function ArrayList () {\r\n  /**\r\n   * @type {Array}\r\n   * @private\r\n  */\r\n  this.array_ = [];\r\n\r\n  if (arguments[0] instanceof Collection) {\r\n    this.addAll(arguments[0]);\r\n  }\r\n};\r\nArrayList.prototype = Object.create(List.prototype)\r\nArrayList.prototype.constructor = ArrayList;\r\n\r\nArrayList.prototype.ensureCapacity = function () {}\r\nArrayList.prototype.interfaces_ = function () { return [List, Collection] }\r\n\r\n/**\r\n * @override\r\n */\r\nArrayList.prototype.add = function(e) {\r\n  if (arguments.length === 1) {\r\n    this.array_.push(e)\r\n  } else {\r\n    this.array_.splice(arguments[0], arguments[1])\r\n  }\r\n  return true\r\n};\r\n\r\nArrayList.prototype.clear = function() {\r\n  this.array_ = []\r\n}\r\n\r\n/**\r\n * @override\r\n */\r\nArrayList.prototype.addAll = function(c) {\r\n  for (var i = c.iterator(); i.hasNext();) {\r\n    this.add(i.next());\r\n  }\r\n  return true;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nArrayList.prototype.set = function(index, element) {\r\n  var oldElement = this.array_[index];\r\n  this.array_[index] = element;\r\n  return oldElement;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nArrayList.prototype.iterator = function() {\r\n  return new Iterator_(this);\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nArrayList.prototype.get = function(index) {\r\n  if (index < 0 || index >= this.size()) {\r\n    throw new IndexOutOfBoundsException();\r\n  }\r\n\r\n  return this.array_[index];\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nArrayList.prototype.isEmpty = function() {\r\n  return this.array_.length === 0;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nArrayList.prototype.size = function() {\r\n  return this.array_.length;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nArrayList.prototype.toArray = function() {\r\n  var array = [];\r\n\r\n  for (var i = 0, len = this.array_.length; i < len; i++) {\r\n    array.push(this.array_[i]);\r\n  }\r\n\r\n  return array;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nArrayList.prototype.remove = function(o) {\r\n  var found = false;\r\n\r\n  for (var i = 0, len = this.array_.length; i < len; i++) {\r\n    if (this.array_[i] === o) {\r\n      this.array_.splice(i, 1);\r\n      found = true;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return found;\r\n};\r\n\r\n\r\n\r\n/**\r\n * @extends {Iterator}\r\n * @param {ArrayList} arrayList\r\n * @constructor\r\n * @private\r\n */\r\nvar Iterator_ = function(arrayList) {\r\n  /**\r\n   * @type {ArrayList}\r\n   * @private\r\n  */\r\n  this.arrayList_ = arrayList;\r\n  /**\r\n   * @type {number}\r\n   * @private\r\n  */\r\n  this.position_ = 0;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nIterator_.prototype.next = function() {\r\n  if (this.position_ === this.arrayList_.size()) {\r\n    throw new NoSuchElementException();\r\n  }\r\n  return this.arrayList_.get(this.position_++);\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nIterator_.prototype.hasNext = function() {\r\n  if (this.position_ < this.arrayList_.size()) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * TODO: should be in ListIterator\r\n * @override\r\n */\r\nIterator_.prototype.set = function(element) {\r\n  return this.arrayList_.set(this.position_ - 1, element);\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nIterator_.prototype.remove = function() {\r\n  this.arrayList_.remove(this.arrayList_.get(this.position_));\r\n};\r\n","import Coordinate from './Coordinate';\r\nimport extend from '../../../../extend';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport inherits from '../../../../inherits';\r\nexport default function CoordinateList() {\r\n\tArrayList.apply(this);\r\n\tif (arguments.length === 0) {} else if (arguments.length === 1) {\r\n\t\tlet coord = arguments[0];\r\n\t\tthis.ensureCapacity(coord.length);\r\n\t\tthis.add(coord, true);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet coord = arguments[0], allowRepeated = arguments[1];\r\n\t\tthis.ensureCapacity(coord.length);\r\n\t\tthis.add(coord, allowRepeated);\r\n\t}\r\n}\r\ninherits(CoordinateList, ArrayList);\r\nextend(CoordinateList.prototype, {\r\n\tgetCoordinate: function (i) {\r\n\t\treturn this.get(i);\r\n\t},\r\n\taddAll: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet coll = arguments[0], allowRepeated = arguments[1];\r\n\t\t\tvar isChanged = false;\r\n\t\t\tfor (var i = coll.iterator(); i.hasNext(); ) {\r\n\t\t\t\tthis.add(i.next(), allowRepeated);\r\n\t\t\t\tisChanged = true;\r\n\t\t\t}\r\n\t\t\treturn isChanged;\r\n\t\t} else return ArrayList.prototype.addAll.apply(this, arguments);\r\n\t},\r\n\tclone: function () {\r\n\t\tvar clone = ArrayList.prototype.clone.call(this);\r\n\t\tfor (var i = 0; i < this.size(); i++) {\r\n\t\t\tclone.add(i, this.get(i).copy());\r\n\t\t}\r\n\t\treturn clone;\r\n\t},\r\n\ttoCoordinateArray: function () {\r\n\t\treturn this.toArray(CoordinateList.coordArrayType);\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet coord = arguments[0];\r\n\t\t\tArrayList.prototype.add.call(this, coord);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tif (arguments[0] instanceof Array && typeof arguments[1] === \"boolean\") {\r\n\t\t\t\tlet coord = arguments[0], allowRepeated = arguments[1];\r\n\t\t\t\tthis.add(coord, allowRepeated, true);\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (arguments[0] instanceof Coordinate && typeof arguments[1] === \"boolean\") {\r\n\t\t\t\tlet coord = arguments[0], allowRepeated = arguments[1];\r\n\t\t\t\tif (!allowRepeated) {\r\n\t\t\t\t\tif (this.size() >= 1) {\r\n\t\t\t\t\t\tvar last = this.get(this.size() - 1);\r\n\t\t\t\t\t\tif (last.equals2D(coord)) return null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tArrayList.prototype.add.call(this, coord);\r\n\t\t\t} else if (arguments[0] instanceof Object && typeof arguments[1] === \"boolean\") {\r\n\t\t\t\tlet obj = arguments[0], allowRepeated = arguments[1];\r\n\t\t\t\tthis.add(obj, allowRepeated);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tif (typeof arguments[2] === \"boolean\" && (arguments[0] instanceof Array && typeof arguments[1] === \"boolean\")) {\r\n\t\t\t\tlet coord = arguments[0], allowRepeated = arguments[1], direction = arguments[2];\r\n\t\t\t\tif (direction) {\r\n\t\t\t\t\tfor (var i = 0; i < coord.length; i++) {\r\n\t\t\t\t\t\tthis.add(coord[i], allowRepeated);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i = coord.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tthis.add(coord[i], allowRepeated);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (typeof arguments[2] === \"boolean\" && (Number.isInteger(arguments[0]) && arguments[1] instanceof Coordinate)) {\r\n\t\t\t\tlet i = arguments[0], coord = arguments[1], allowRepeated = arguments[2];\r\n\t\t\t\tif (!allowRepeated) {\r\n\t\t\t\t\tvar size = this.size();\r\n\t\t\t\t\tif (size > 0) {\r\n\t\t\t\t\t\tif (i > 0) {\r\n\t\t\t\t\t\t\tvar prev = this.get(i - 1);\r\n\t\t\t\t\t\t\tif (prev.equals2D(coord)) return null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (i < size) {\r\n\t\t\t\t\t\t\tvar next = this.get(i);\r\n\t\t\t\t\t\t\tif (next.equals2D(coord)) return null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tArrayList.prototype.add.call(this, i, coord);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 4) {\r\n\t\t\tlet coord = arguments[0], allowRepeated = arguments[1], start = arguments[2], end = arguments[3];\r\n\t\t\tvar inc = 1;\r\n\t\t\tif (start > end) inc = -1;\r\n\t\t\tfor (var i = start; i !== end; i += inc) {\r\n\t\t\t\tthis.add(coord[i], allowRepeated);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\tcloseRing: function () {\r\n\t\tif (this.size() > 0) this.add(new Coordinate(this.get(0)), false);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateList;\r\n\t}\r\n});\r\nCoordinateList.coordArrayType = new Array(0).fill(null);\r\n","import Coordinate from './Coordinate';\r\nimport extend from '../../../../extend';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nimport Serializable from '../../../../java/io/Serializable';\r\nexport default function Envelope() {\r\n\tthis.minx = null;\r\n\tthis.maxx = null;\r\n\tthis.miny = null;\r\n\tthis.maxy = null;\r\n\tif (arguments.length === 0) {\r\n\t\tthis.init();\r\n\t} else if (arguments.length === 1) {\r\n\t\tif (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet p = arguments[0];\r\n\t\t\tthis.init(p.x, p.x, p.y, p.y);\r\n\t\t} else if (arguments[0] instanceof Envelope) {\r\n\t\t\tlet env = arguments[0];\r\n\t\t\tthis.init(env);\r\n\t\t}\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet p1 = arguments[0], p2 = arguments[1];\r\n\t\tthis.init(p1.x, p2.x, p1.y, p2.y);\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet x1 = arguments[0], x2 = arguments[1], y1 = arguments[2], y2 = arguments[3];\r\n\t\tthis.init(x1, x2, y1, y2);\r\n\t}\r\n}\r\nextend(Envelope.prototype, {\r\n\tgetArea: function () {\r\n\t\treturn this.getWidth() * this.getHeight();\r\n\t},\r\n\tequals: function (other) {\r\n\t\tif (!(other instanceof Envelope)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar otherEnvelope = other;\r\n\t\tif (this.isNull()) {\r\n\t\t\treturn otherEnvelope.isNull();\r\n\t\t}\r\n\t\treturn this.maxx === otherEnvelope.getMaxX() && this.maxy === otherEnvelope.getMaxY() && this.minx === otherEnvelope.getMinX() && this.miny === otherEnvelope.getMinY();\r\n\t},\r\n\tintersection: function (env) {\r\n\t\tif (this.isNull() || env.isNull() || !this.intersects(env)) return new Envelope();\r\n\t\tvar intMinX = this.minx > env.minx ? this.minx : env.minx;\r\n\t\tvar intMinY = this.miny > env.miny ? this.miny : env.miny;\r\n\t\tvar intMaxX = this.maxx < env.maxx ? this.maxx : env.maxx;\r\n\t\tvar intMaxY = this.maxy < env.maxy ? this.maxy : env.maxy;\r\n\t\treturn new Envelope(intMinX, intMaxX, intMinY, intMaxY);\r\n\t},\r\n\tisNull: function () {\r\n\t\treturn this.maxx < this.minx;\r\n\t},\r\n\tgetMaxX: function () {\r\n\t\treturn this.maxx;\r\n\t},\r\n\tcovers: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Coordinate) {\r\n\t\t\t\tlet p = arguments[0];\r\n\t\t\t\treturn this.covers(p.x, p.y);\r\n\t\t\t} else if (arguments[0] instanceof Envelope) {\r\n\t\t\t\tlet other = arguments[0];\r\n\t\t\t\tif (this.isNull() || other.isNull()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn other.getMinX() >= this.minx && other.getMaxX() <= this.maxx && other.getMinY() >= this.miny && other.getMaxY() <= this.maxy;\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet x = arguments[0], y = arguments[1];\r\n\t\t\tif (this.isNull()) return false;\r\n\t\t\treturn x >= this.minx && x <= this.maxx && y >= this.miny && y <= this.maxy;\r\n\t\t}\r\n\t},\r\n\tintersects: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Envelope) {\r\n\t\t\t\tlet other = arguments[0];\r\n\t\t\t\tif (this.isNull() || other.isNull()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn !(other.minx > this.maxx || other.maxx < this.minx || other.miny > this.maxy || other.maxy < this.miny);\r\n\t\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\t\tlet p = arguments[0];\r\n\t\t\t\treturn this.intersects(p.x, p.y);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet x = arguments[0], y = arguments[1];\r\n\t\t\tif (this.isNull()) return false;\r\n\t\t\treturn !(x > this.maxx || x < this.minx || y > this.maxy || y < this.miny);\r\n\t\t}\r\n\t},\r\n\tgetMinY: function () {\r\n\t\treturn this.miny;\r\n\t},\r\n\tgetMinX: function () {\r\n\t\treturn this.minx;\r\n\t},\r\n\texpandToInclude: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Coordinate) {\r\n\t\t\t\tlet p = arguments[0];\r\n\t\t\t\tthis.expandToInclude(p.x, p.y);\r\n\t\t\t} else if (arguments[0] instanceof Envelope) {\r\n\t\t\t\tlet other = arguments[0];\r\n\t\t\t\tif (other.isNull()) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.isNull()) {\r\n\t\t\t\t\tthis.minx = other.getMinX();\r\n\t\t\t\t\tthis.maxx = other.getMaxX();\r\n\t\t\t\t\tthis.miny = other.getMinY();\r\n\t\t\t\t\tthis.maxy = other.getMaxY();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (other.minx < this.minx) {\r\n\t\t\t\t\t\tthis.minx = other.minx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (other.maxx > this.maxx) {\r\n\t\t\t\t\t\tthis.maxx = other.maxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (other.miny < this.miny) {\r\n\t\t\t\t\t\tthis.miny = other.miny;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (other.maxy > this.maxy) {\r\n\t\t\t\t\t\tthis.maxy = other.maxy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet x = arguments[0], y = arguments[1];\r\n\t\t\tif (this.isNull()) {\r\n\t\t\t\tthis.minx = x;\r\n\t\t\t\tthis.maxx = x;\r\n\t\t\t\tthis.miny = y;\r\n\t\t\t\tthis.maxy = y;\r\n\t\t\t} else {\r\n\t\t\t\tif (x < this.minx) {\r\n\t\t\t\t\tthis.minx = x;\r\n\t\t\t\t}\r\n\t\t\t\tif (x > this.maxx) {\r\n\t\t\t\t\tthis.maxx = x;\r\n\t\t\t\t}\r\n\t\t\t\tif (y < this.miny) {\r\n\t\t\t\t\tthis.miny = y;\r\n\t\t\t\t}\r\n\t\t\t\tif (y > this.maxy) {\r\n\t\t\t\t\tthis.maxy = y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tminExtent: function () {\r\n\t\tif (this.isNull()) return 0.0;\r\n\t\tvar w = this.getWidth();\r\n\t\tvar h = this.getHeight();\r\n\t\tif (w < h) return w;\r\n\t\treturn h;\r\n\t},\r\n\tgetWidth: function () {\r\n\t\tif (this.isNull()) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this.maxx - this.minx;\r\n\t},\r\n\tcompareTo: function (o) {\r\n\t\tvar env = o;\r\n\t\tif (this.isNull()) {\r\n\t\t\tif (env.isNull()) return 0;\r\n\t\t\treturn -1;\r\n\t\t} else {\r\n\t\t\tif (env.isNull()) return 1;\r\n\t\t}\r\n\t\tif (this.minx < env.minx) return -1;\r\n\t\tif (this.minx > env.minx) return 1;\r\n\t\tif (this.miny < env.miny) return -1;\r\n\t\tif (this.miny > env.miny) return 1;\r\n\t\tif (this.maxx < env.maxx) return -1;\r\n\t\tif (this.maxx > env.maxx) return 1;\r\n\t\tif (this.maxy < env.maxy) return -1;\r\n\t\tif (this.maxy > env.maxy) return 1;\r\n\t\treturn 0;\r\n\t},\r\n\ttranslate: function (transX, transY) {\r\n\t\tif (this.isNull()) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tthis.init(this.getMinX() + transX, this.getMaxX() + transX, this.getMinY() + transY, this.getMaxY() + transY);\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn \"Env[\" + this.minx + \" : \" + this.maxx + \", \" + this.miny + \" : \" + this.maxy + \"]\";\r\n\t},\r\n\tsetToNull: function () {\r\n\t\tthis.minx = 0;\r\n\t\tthis.maxx = -1;\r\n\t\tthis.miny = 0;\r\n\t\tthis.maxy = -1;\r\n\t},\r\n\tgetHeight: function () {\r\n\t\tif (this.isNull()) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this.maxy - this.miny;\r\n\t},\r\n\tmaxExtent: function () {\r\n\t\tif (this.isNull()) return 0.0;\r\n\t\tvar w = this.getWidth();\r\n\t\tvar h = this.getHeight();\r\n\t\tif (w > h) return w;\r\n\t\treturn h;\r\n\t},\r\n\texpandBy: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet distance = arguments[0];\r\n\t\t\tthis.expandBy(distance, distance);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet deltaX = arguments[0], deltaY = arguments[1];\r\n\t\t\tif (this.isNull()) return null;\r\n\t\t\tthis.minx -= deltaX;\r\n\t\t\tthis.maxx += deltaX;\r\n\t\t\tthis.miny -= deltaY;\r\n\t\t\tthis.maxy += deltaY;\r\n\t\t\tif (this.minx > this.maxx || this.miny > this.maxy) this.setToNull();\r\n\t\t}\r\n\t},\r\n\tcontains: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Envelope) {\r\n\t\t\t\tlet other = arguments[0];\r\n\t\t\t\treturn this.covers(other);\r\n\t\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\t\tlet p = arguments[0];\r\n\t\t\t\treturn this.covers(p);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet x = arguments[0], y = arguments[1];\r\n\t\t\treturn this.covers(x, y);\r\n\t\t}\r\n\t},\r\n\tcentre: function () {\r\n\t\tif (this.isNull()) return null;\r\n\t\treturn new Coordinate((this.getMinX() + this.getMaxX()) / 2.0, (this.getMinY() + this.getMaxY()) / 2.0);\r\n\t},\r\n\tinit: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tthis.setToNull();\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Coordinate) {\r\n\t\t\t\tlet p = arguments[0];\r\n\t\t\t\tthis.init(p.x, p.x, p.y, p.y);\r\n\t\t\t} else if (arguments[0] instanceof Envelope) {\r\n\t\t\t\tlet env = arguments[0];\r\n\t\t\t\tthis.minx = env.minx;\r\n\t\t\t\tthis.maxx = env.maxx;\r\n\t\t\t\tthis.miny = env.miny;\r\n\t\t\t\tthis.maxy = env.maxy;\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet p1 = arguments[0], p2 = arguments[1];\r\n\t\t\tthis.init(p1.x, p2.x, p1.y, p2.y);\r\n\t\t} else if (arguments.length === 4) {\r\n\t\t\tlet x1 = arguments[0], x2 = arguments[1], y1 = arguments[2], y2 = arguments[3];\r\n\t\t\tif (x1 < x2) {\r\n\t\t\t\tthis.minx = x1;\r\n\t\t\t\tthis.maxx = x2;\r\n\t\t\t} else {\r\n\t\t\t\tthis.minx = x2;\r\n\t\t\t\tthis.maxx = x1;\r\n\t\t\t}\r\n\t\t\tif (y1 < y2) {\r\n\t\t\t\tthis.miny = y1;\r\n\t\t\t\tthis.maxy = y2;\r\n\t\t\t} else {\r\n\t\t\t\tthis.miny = y2;\r\n\t\t\t\tthis.maxy = y1;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetMaxY: function () {\r\n\t\treturn this.maxy;\r\n\t},\r\n\tdistance: function (env) {\r\n\t\tif (this.intersects(env)) return 0;\r\n\t\tvar dx = 0.0;\r\n\t\tif (this.maxx < env.minx) dx = env.minx - this.maxx; else if (this.minx > env.maxx) dx = this.minx - env.maxx;\r\n\t\tvar dy = 0.0;\r\n\t\tif (this.maxy < env.miny) dy = env.miny - this.maxy; else if (this.miny > env.maxy) dy = this.miny - env.maxy;\r\n\t\tif (dx === 0.0) return dy;\r\n\t\tif (dy === 0.0) return dx;\r\n\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t},\r\n\thashCode: function () {\r\n\t\tvar result = 17;\r\n\t\tresult = 37 * result + Coordinate.hashCode(this.minx);\r\n\t\tresult = 37 * result + Coordinate.hashCode(this.maxx);\r\n\t\tresult = 37 * result + Coordinate.hashCode(this.miny);\r\n\t\tresult = 37 * result + Coordinate.hashCode(this.maxy);\r\n\t\treturn result;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Envelope;\r\n\t}\r\n});\r\nEnvelope.intersects = function () {\r\n\tif (arguments.length === 3) {\r\n\t\tlet p1 = arguments[0], p2 = arguments[1], q = arguments[2];\r\n\t\tif (q.x >= (p1.x < p2.x ? p1.x : p2.x) && q.x <= (p1.x > p2.x ? p1.x : p2.x) && (q.y >= (p1.y < p2.y ? p1.y : p2.y) && q.y <= (p1.y > p2.y ? p1.y : p2.y))) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet p1 = arguments[0], p2 = arguments[1], q1 = arguments[2], q2 = arguments[3];\r\n\t\tvar minq = Math.min(q1.x, q2.x);\r\n\t\tvar maxq = Math.max(q1.x, q2.x);\r\n\t\tvar minp = Math.min(p1.x, p2.x);\r\n\t\tvar maxp = Math.max(p1.x, p2.x);\r\n\t\tif (minp > maxq) return false;\r\n\t\tif (maxp < minq) return false;\r\n\t\tminq = Math.min(q1.y, q2.y);\r\n\t\tmaxq = Math.max(q1.y, q2.y);\r\n\t\tminp = Math.min(p1.y, p2.y);\r\n\t\tmaxp = Math.max(p1.y, p2.y);\r\n\t\tif (minp > maxq) return false;\r\n\t\tif (maxp < minq) return false;\r\n\t\treturn true;\r\n\t}\r\n};\r\nEnvelope.serialVersionUID = 5873921885273102420;\r\n","export default function Exception () {}\r\n","import extend from '../../../../extend';\r\nimport Exception from '../../../../java/lang/Exception';\r\nimport inherits from '../../../../inherits';\r\nexport default function NotRepresentableException() {\r\n\tException.call(this, \"Projective point not representable on the Cartesian plane.\");\r\n}\r\ninherits(NotRepresentableException, Exception);\r\nextend(NotRepresentableException.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NotRepresentableException;\r\n\t}\r\n});\r\n","import IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nexport default function Location() {}\r\nextend(Location.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Location;\r\n\t}\r\n});\r\nLocation.toLocationSymbol = function (locationValue) {\r\n\tswitch (locationValue) {\r\n\t\tcase Location.EXTERIOR:\r\n\t\t\treturn 'e';\r\n\t\tcase Location.BOUNDARY:\r\n\t\t\treturn 'b';\r\n\t\tcase Location.INTERIOR:\r\n\t\t\treturn 'i';\r\n\t\tcase Location.NONE:\r\n\t\t\treturn '-';\r\n\t}\r\n\tthrow new IllegalArgumentException(\"Unknown location value: \" + locationValue);\r\n};\r\nLocation.INTERIOR = 0;\r\nLocation.BOUNDARY = 1;\r\nLocation.EXTERIOR = 2;\r\nLocation.NONE = -1;\r\n","export default function (o, i) {\r\n  return o.interfaces_ && o.interfaces_().indexOf(i) > -1\r\n}\r\n","import Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nexport default function MathUtil() {}\r\nextend(MathUtil.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MathUtil;\r\n\t}\r\n});\r\nMathUtil.log10 = function (x) {\r\n\tvar ln = Math.log(x);\r\n\tif (Double.isInfinite(ln)) return ln;\r\n\tif (Double.isNaN(ln)) return ln;\r\n\treturn ln / MathUtil.LOG_10;\r\n};\r\nMathUtil.min = function (v1, v2, v3, v4) {\r\n\tvar min = v1;\r\n\tif (v2 < min) min = v2;\r\n\tif (v3 < min) min = v3;\r\n\tif (v4 < min) min = v4;\r\n\treturn min;\r\n};\r\nMathUtil.clamp = function () {\r\n\tif (typeof arguments[2] === \"number\" && (typeof arguments[0] === \"number\" && typeof arguments[1] === \"number\")) {\r\n\t\tlet x = arguments[0], min = arguments[1], max = arguments[2];\r\n\t\tif (x < min) return min;\r\n\t\tif (x > max) return max;\r\n\t\treturn x;\r\n\t} else if (Number.isInteger(arguments[2]) && (Number.isInteger(arguments[0]) && Number.isInteger(arguments[1]))) {\r\n\t\tlet x = arguments[0], min = arguments[1], max = arguments[2];\r\n\t\tif (x < min) return min;\r\n\t\tif (x > max) return max;\r\n\t\treturn x;\r\n\t}\r\n};\r\nMathUtil.wrap = function (index, max) {\r\n\tif (index < 0) {\r\n\t\treturn max - -index % max;\r\n\t}\r\n\treturn index % max;\r\n};\r\nMathUtil.max = function () {\r\n\tif (arguments.length === 3) {\r\n\t\tlet v1 = arguments[0], v2 = arguments[1], v3 = arguments[2];\r\n\t\tvar max = v1;\r\n\t\tif (v2 > max) max = v2;\r\n\t\tif (v3 > max) max = v3;\r\n\t\treturn max;\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet v1 = arguments[0], v2 = arguments[1], v3 = arguments[2], v4 = arguments[3];\r\n\t\tvar max = v1;\r\n\t\tif (v2 > max) max = v2;\r\n\t\tif (v3 > max) max = v3;\r\n\t\tif (v4 > max) max = v4;\r\n\t\treturn max;\r\n\t}\r\n};\r\nMathUtil.average = function (x1, x2) {\r\n\treturn (x1 + x2) / 2.0;\r\n};\r\nMathUtil.LOG_10 = Math.log(10);\r\n","export default function StringBuffer (str) {\r\n  this.str = str\r\n}\r\n\r\nStringBuffer.prototype.append = function (e) {\r\n  this.str += e\r\n}\r\n\r\nStringBuffer.prototype.setCharAt = function (i, c) {\r\n  this.str = this.str.substr(0, i) + c + this.str.substr(i + 1)\r\n}\r\n\r\nStringBuffer.prototype.toString = function (e) {\r\n  return this.str\r\n}\r\n","export default function Integer (value) {\r\n  this.value = value\r\n}\r\n\r\nInteger.prototype.intValue = function () {\r\n  return this.value\r\n}\r\nInteger.prototype.compareTo = function (o) {\r\n  if (this.value < o) return -1\r\n  if (this.value > o) return 1\r\n  return 0\r\n}\r\n\r\nInteger.isNaN = n => Number.isNaN(n)\r\n","export default function Character () {}\r\nCharacter.isWhitespace = c => ((c <= 32 && c >= 0) || c == 127)\r\nCharacter.toUpperCase = c => c.toUpperCase()\r\n","import StringBuffer from '../../../../java/lang/StringBuffer';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport Integer from '../../../../java/lang/Integer';\r\nimport Character from '../../../../java/lang/Character';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nimport Cloneable from '../../../../java/lang/Cloneable';\r\nimport Serializable from '../../../../java/io/Serializable';\r\nexport default function DD() {\r\n\tthis.hi = 0.0;\r\n\tthis.lo = 0.0;\r\n\tif (arguments.length === 0) {\r\n\t\tthis.init(0.0);\r\n\t} else if (arguments.length === 1) {\r\n\t\tif (typeof arguments[0] === \"number\") {\r\n\t\t\tlet x = arguments[0];\r\n\t\t\tthis.init(x);\r\n\t\t} else if (arguments[0] instanceof DD) {\r\n\t\t\tlet dd = arguments[0];\r\n\t\t\tthis.init(dd);\r\n\t\t} else if (typeof arguments[0] === \"string\") {\r\n\t\t\tlet str = arguments[0];\r\n\t\t\tDD.call(this, DD.parse(str));\r\n\t\t}\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet hi = arguments[0], lo = arguments[1];\r\n\t\tthis.init(hi, lo);\r\n\t}\r\n}\r\nextend(DD.prototype, {\r\n\tle: function (y) {\r\n\t\treturn this.hi < y.hi || this.hi === y.hi && this.lo <= y.lo;\r\n\t},\r\n\textractSignificantDigits: function (insertDecimalPoint, magnitude) {\r\n\t\tvar y = this.abs();\r\n\t\tvar mag = DD.magnitude(y.hi);\r\n\t\tvar scale = DD.TEN.pow(mag);\r\n\t\ty = y.divide(scale);\r\n\t\tif (y.gt(DD.TEN)) {\r\n\t\t\ty = y.divide(DD.TEN);\r\n\t\t\tmag += 1;\r\n\t\t} else if (y.lt(DD.ONE)) {\r\n\t\t\ty = y.multiply(DD.TEN);\r\n\t\t\tmag -= 1;\r\n\t\t}\r\n\t\tvar decimalPointPos = mag + 1;\r\n\t\tvar buf = new StringBuffer();\r\n\t\tvar numDigits = DD.MAX_PRINT_DIGITS - 1;\r\n\t\tfor (var i = 0; i <= numDigits; i++) {\r\n\t\t\tif (insertDecimalPoint && i === decimalPointPos) {\r\n\t\t\t\tbuf.append('.');\r\n\t\t\t}\r\n\t\t\tvar digit = Math.trunc(y.hi);\r\n\t\t\tif (digit < 0 || digit > 9) {}\r\n\t\t\tif (digit < 0) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar rebiasBy10 = false;\r\n\t\t\tvar digitChar = 0;\r\n\t\t\tif (digit > 9) {\r\n\t\t\t\trebiasBy10 = true;\r\n\t\t\t\tdigitChar = '9';\r\n\t\t\t} else {\r\n\t\t\t\tdigitChar = '0' + digit;\r\n\t\t\t}\r\n\t\t\tbuf.append(digitChar);\r\n\t\t\ty = y.subtract(DD.valueOf(digit)).multiply(DD.TEN);\r\n\t\t\tif (rebiasBy10) y.selfAdd(DD.TEN);\r\n\t\t\tvar continueExtractingDigits = true;\r\n\t\t\tvar remMag = DD.magnitude(y.hi);\r\n\t\t\tif (remMag < 0 && Math.abs(remMag) >= numDigits - i) continueExtractingDigits = false;\r\n\t\t\tif (!continueExtractingDigits) break;\r\n\t\t}\r\n\t\tmagnitude[0] = mag;\r\n\t\treturn buf.toString();\r\n\t},\r\n\tsqr: function () {\r\n\t\treturn this.multiply(this);\r\n\t},\r\n\tdoubleValue: function () {\r\n\t\treturn this.hi + this.lo;\r\n\t},\r\n\tsubtract: function () {\r\n\t\tif (arguments[0] instanceof DD) {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\treturn this.add(y.negate());\r\n\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\treturn this.add(-y);\r\n\t\t}\r\n\t},\r\n\tequals: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\treturn this.hi === y.hi && this.lo === y.lo;\r\n\t\t}\r\n\t},\r\n\tisZero: function () {\r\n\t\treturn this.hi === 0.0 && this.lo === 0.0;\r\n\t},\r\n\tselfSubtract: function () {\r\n\t\tif (arguments[0] instanceof DD) {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\tif (this.isNaN()) return this;\r\n\t\t\treturn this.selfAdd(-y.hi, -y.lo);\r\n\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\tif (this.isNaN()) return this;\r\n\t\t\treturn this.selfAdd(-y, 0.0);\r\n\t\t}\r\n\t},\r\n\tgetSpecialNumberString: function () {\r\n\t\tif (this.isZero()) return \"0.0\";\r\n\t\tif (this.isNaN()) return \"NaN \";\r\n\t\treturn null;\r\n\t},\r\n\tmin: function (x) {\r\n\t\tif (this.le(x)) {\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\treturn x;\r\n\t\t}\r\n\t},\r\n\tselfDivide: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof DD) {\r\n\t\t\t\tlet y = arguments[0];\r\n\t\t\t\treturn this.selfDivide(y.hi, y.lo);\r\n\t\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\t\tlet y = arguments[0];\r\n\t\t\t\treturn this.selfDivide(y, 0.0);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet yhi = arguments[0], ylo = arguments[1];\r\n\t\t\tvar hc = null, tc = null, hy = null, ty = null, C = null, c = null, U = null, u = null;\r\n\t\t\tC = this.hi / yhi;\r\n\t\t\tc = DD.SPLIT * C;\r\n\t\t\thc = c - C;\r\n\t\t\tu = DD.SPLIT * yhi;\r\n\t\t\thc = c - hc;\r\n\t\t\ttc = C - hc;\r\n\t\t\thy = u - yhi;\r\n\t\t\tU = C * yhi;\r\n\t\t\thy = u - hy;\r\n\t\t\tty = yhi - hy;\r\n\t\t\tu = hc * hy - U + hc * ty + tc * hy + tc * ty;\r\n\t\t\tc = (this.hi - U - u + this.lo - C * ylo) / yhi;\r\n\t\t\tu = C + c;\r\n\t\t\tthis.hi = u;\r\n\t\t\tthis.lo = C - u + c;\r\n\t\t\treturn this;\r\n\t\t}\r\n\t},\r\n\tdump: function () {\r\n\t\treturn \"DD<\" + this.hi + \", \" + this.lo + \">\";\r\n\t},\r\n\tdivide: function () {\r\n\t\tif (arguments[0] instanceof DD) {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\tvar hc = null, tc = null, hy = null, ty = null, C = null, c = null, U = null, u = null;\r\n\t\t\tC = this.hi / y.hi;\r\n\t\t\tc = DD.SPLIT * C;\r\n\t\t\thc = c - C;\r\n\t\t\tu = DD.SPLIT * y.hi;\r\n\t\t\thc = c - hc;\r\n\t\t\ttc = C - hc;\r\n\t\t\thy = u - y.hi;\r\n\t\t\tU = C * y.hi;\r\n\t\t\thy = u - hy;\r\n\t\t\tty = y.hi - hy;\r\n\t\t\tu = hc * hy - U + hc * ty + tc * hy + tc * ty;\r\n\t\t\tc = (this.hi - U - u + this.lo - C * y.lo) / y.hi;\r\n\t\t\tu = C + c;\r\n\t\t\tvar zhi = u;\r\n\t\t\tvar zlo = C - u + c;\r\n\t\t\treturn new DD(zhi, zlo);\r\n\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\tif (Double.isNaN(y)) return DD.createNaN();\r\n\t\t\treturn DD.copy(this).selfDivide(y, 0.0);\r\n\t\t}\r\n\t},\r\n\tge: function (y) {\r\n\t\treturn this.hi > y.hi || this.hi === y.hi && this.lo >= y.lo;\r\n\t},\r\n\tpow: function (exp) {\r\n\t\tif (exp === 0.0) return DD.valueOf(1.0);\r\n\t\tvar r = new DD(this);\r\n\t\tvar s = DD.valueOf(1.0);\r\n\t\tvar n = Math.abs(exp);\r\n\t\tif (n > 1) {\r\n\t\t\twhile (n > 0) {\r\n\t\t\t\tif (n % 2 === 1) {\r\n\t\t\t\t\ts.selfMultiply(r);\r\n\t\t\t\t}\r\n\t\t\t\tn /= 2;\r\n\t\t\t\tif (n > 0) r = r.sqr();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ts = r;\r\n\t\t}\r\n\t\tif (exp < 0) return s.reciprocal();\r\n\t\treturn s;\r\n\t},\r\n\tceil: function () {\r\n\t\tif (this.isNaN()) return DD.NaN;\r\n\t\tvar fhi = Math.ceil(this.hi);\r\n\t\tvar flo = 0.0;\r\n\t\tif (fhi === this.hi) {\r\n\t\t\tflo = Math.ceil(this.lo);\r\n\t\t}\r\n\t\treturn new DD(fhi, flo);\r\n\t},\r\n\tcompareTo: function (o) {\r\n\t\tvar other = o;\r\n\t\tif (this.hi < other.hi) return -1;\r\n\t\tif (this.hi > other.hi) return 1;\r\n\t\tif (this.lo < other.lo) return -1;\r\n\t\tif (this.lo > other.lo) return 1;\r\n\t\treturn 0;\r\n\t},\r\n\trint: function () {\r\n\t\tif (this.isNaN()) return this;\r\n\t\tvar plus5 = this.add(0.5);\r\n\t\treturn plus5.floor();\r\n\t},\r\n\tsetValue: function () {\r\n\t\tif (arguments[0] instanceof DD) {\r\n\t\t\tlet value = arguments[0];\r\n\t\t\tthis.init(value);\r\n\t\t\treturn this;\r\n\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\tlet value = arguments[0];\r\n\t\t\tthis.init(value);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t},\r\n\tmax: function (x) {\r\n\t\tif (this.ge(x)) {\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\treturn x;\r\n\t\t}\r\n\t},\r\n\tsqrt: function () {\r\n\t\tif (this.isZero()) return DD.valueOf(0.0);\r\n\t\tif (this.isNegative()) {\r\n\t\t\treturn DD.NaN;\r\n\t\t}\r\n\t\tvar x = 1.0 / Math.sqrt(this.hi);\r\n\t\tvar ax = this.hi * x;\r\n\t\tvar axdd = DD.valueOf(ax);\r\n\t\tvar diffSq = this.subtract(axdd.sqr());\r\n\t\tvar d2 = diffSq.hi * (x * 0.5);\r\n\t\treturn axdd.add(d2);\r\n\t},\r\n\tselfAdd: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof DD) {\r\n\t\t\t\tlet y = arguments[0];\r\n\t\t\t\treturn this.selfAdd(y.hi, y.lo);\r\n\t\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\t\tlet y = arguments[0];\r\n\t\t\t\tvar H = null, h = null, S = null, s = null, e = null, f = null;\r\n\t\t\t\tS = this.hi + y;\r\n\t\t\t\te = S - this.hi;\r\n\t\t\t\ts = S - e;\r\n\t\t\t\ts = y - e + (this.hi - s);\r\n\t\t\t\tf = s + this.lo;\r\n\t\t\t\tH = S + f;\r\n\t\t\t\th = f + (S - H);\r\n\t\t\t\tthis.hi = H + h;\r\n\t\t\t\tthis.lo = h + (H - this.hi);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet yhi = arguments[0], ylo = arguments[1];\r\n\t\t\tvar H = null, h = null, T = null, t = null, S = null, s = null, e = null, f = null;\r\n\t\t\tS = this.hi + yhi;\r\n\t\t\tT = this.lo + ylo;\r\n\t\t\te = S - this.hi;\r\n\t\t\tf = T - this.lo;\r\n\t\t\ts = S - e;\r\n\t\t\tt = T - f;\r\n\t\t\ts = yhi - e + (this.hi - s);\r\n\t\t\tt = ylo - f + (this.lo - t);\r\n\t\t\te = s + T;\r\n\t\t\tH = S + e;\r\n\t\t\th = e + (S - H);\r\n\t\t\te = t + h;\r\n\t\t\tvar zhi = H + e;\r\n\t\t\tvar zlo = e + (H - zhi);\r\n\t\t\tthis.hi = zhi;\r\n\t\t\tthis.lo = zlo;\r\n\t\t\treturn this;\r\n\t\t}\r\n\t},\r\n\tselfMultiply: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof DD) {\r\n\t\t\t\tlet y = arguments[0];\r\n\t\t\t\treturn this.selfMultiply(y.hi, y.lo);\r\n\t\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\t\tlet y = arguments[0];\r\n\t\t\t\treturn this.selfMultiply(y, 0.0);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet yhi = arguments[0], ylo = arguments[1];\r\n\t\t\tvar hx = null, tx = null, hy = null, ty = null, C = null, c = null;\r\n\t\t\tC = DD.SPLIT * this.hi;\r\n\t\t\thx = C - this.hi;\r\n\t\t\tc = DD.SPLIT * yhi;\r\n\t\t\thx = C - hx;\r\n\t\t\ttx = this.hi - hx;\r\n\t\t\thy = c - yhi;\r\n\t\t\tC = this.hi * yhi;\r\n\t\t\thy = c - hy;\r\n\t\t\tty = yhi - hy;\r\n\t\t\tc = hx * hy - C + hx * ty + tx * hy + tx * ty + (this.hi * ylo + this.lo * yhi);\r\n\t\t\tvar zhi = C + c;\r\n\t\t\thx = C - zhi;\r\n\t\t\tvar zlo = c + hx;\r\n\t\t\tthis.hi = zhi;\r\n\t\t\tthis.lo = zlo;\r\n\t\t\treturn this;\r\n\t\t}\r\n\t},\r\n\tselfSqr: function () {\r\n\t\treturn this.selfMultiply(this);\r\n\t},\r\n\tfloor: function () {\r\n\t\tif (this.isNaN()) return DD.NaN;\r\n\t\tvar fhi = Math.floor(this.hi);\r\n\t\tvar flo = 0.0;\r\n\t\tif (fhi === this.hi) {\r\n\t\t\tflo = Math.floor(this.lo);\r\n\t\t}\r\n\t\treturn new DD(fhi, flo);\r\n\t},\r\n\tnegate: function () {\r\n\t\tif (this.isNaN()) return this;\r\n\t\treturn new DD(-this.hi, -this.lo);\r\n\t},\r\n\tclone: function () {\r\n\t\ttry {\r\n\t\t\treturn null;\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex instanceof CloneNotSupportedException) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else throw ex;\r\n\t\t} finally {}\r\n\t},\r\n\tmultiply: function () {\r\n\t\tif (arguments[0] instanceof DD) {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\tif (y.isNaN()) return DD.createNaN();\r\n\t\t\treturn DD.copy(this).selfMultiply(y);\r\n\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\tif (Double.isNaN(y)) return DD.createNaN();\r\n\t\t\treturn DD.copy(this).selfMultiply(y, 0.0);\r\n\t\t}\r\n\t},\r\n\tisNaN: function () {\r\n\t\treturn Double.isNaN(this.hi);\r\n\t},\r\n\tintValue: function () {\r\n\t\treturn Math.trunc(this.hi);\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar mag = DD.magnitude(this.hi);\r\n\t\tif (mag >= -3 && mag <= 20) return this.toStandardNotation();\r\n\t\treturn this.toSciNotation();\r\n\t},\r\n\ttoStandardNotation: function () {\r\n\t\tvar specialStr = this.getSpecialNumberString();\r\n\t\tif (specialStr !== null) return specialStr;\r\n\t\tvar magnitude = new Array(1).fill(null);\r\n\t\tvar sigDigits = this.extractSignificantDigits(true, magnitude);\r\n\t\tvar decimalPointPos = magnitude[0] + 1;\r\n\t\tvar num = sigDigits;\r\n\t\tif (sigDigits.charAt(0) === '.') {\r\n\t\t\tnum = \"0\" + sigDigits;\r\n\t\t} else if (decimalPointPos < 0) {\r\n\t\t\tnum = \"0.\" + DD.stringOfChar('0', -decimalPointPos) + sigDigits;\r\n\t\t} else if (sigDigits.indexOf('.') === -1) {\r\n\t\t\tvar numZeroes = decimalPointPos - sigDigits.length;\r\n\t\t\tvar zeroes = DD.stringOfChar('0', numZeroes);\r\n\t\t\tnum = sigDigits + zeroes + \".0\";\r\n\t\t}\r\n\t\tif (this.isNegative()) return \"-\" + num;\r\n\t\treturn num;\r\n\t},\r\n\treciprocal: function () {\r\n\t\tvar hc = null, tc = null, hy = null, ty = null, C = null, c = null, U = null, u = null;\r\n\t\tC = 1.0 / this.hi;\r\n\t\tc = DD.SPLIT * C;\r\n\t\thc = c - C;\r\n\t\tu = DD.SPLIT * this.hi;\r\n\t\thc = c - hc;\r\n\t\ttc = C - hc;\r\n\t\thy = u - this.hi;\r\n\t\tU = C * this.hi;\r\n\t\thy = u - hy;\r\n\t\tty = this.hi - hy;\r\n\t\tu = hc * hy - U + hc * ty + tc * hy + tc * ty;\r\n\t\tc = (1.0 - U - u - C * this.lo) / this.hi;\r\n\t\tvar zhi = C + c;\r\n\t\tvar zlo = C - zhi + c;\r\n\t\treturn new DD(zhi, zlo);\r\n\t},\r\n\ttoSciNotation: function () {\r\n\t\tif (this.isZero()) return DD.SCI_NOT_ZERO;\r\n\t\tvar specialStr = this.getSpecialNumberString();\r\n\t\tif (specialStr !== null) return specialStr;\r\n\t\tvar magnitude = new Array(1).fill(null);\r\n\t\tvar digits = this.extractSignificantDigits(false, magnitude);\r\n\t\tvar expStr = DD.SCI_NOT_EXPONENT_CHAR + magnitude[0];\r\n\t\tif (digits.charAt(0) === '0') {\r\n\t\t\tthrow new IllegalStateException(\"Found leading zero: \" + digits);\r\n\t\t}\r\n\t\tvar trailingDigits = \"\";\r\n\t\tif (digits.length > 1) trailingDigits = digits.substring(1);\r\n\t\tvar digitsWithDecimal = digits.charAt(0) + \".\" + trailingDigits;\r\n\t\tif (this.isNegative()) return \"-\" + digitsWithDecimal + expStr;\r\n\t\treturn digitsWithDecimal + expStr;\r\n\t},\r\n\tabs: function () {\r\n\t\tif (this.isNaN()) return DD.NaN;\r\n\t\tif (this.isNegative()) return this.negate();\r\n\t\treturn new DD(this);\r\n\t},\r\n\tisPositive: function () {\r\n\t\treturn this.hi > 0.0 || this.hi === 0.0 && this.lo > 0.0;\r\n\t},\r\n\tlt: function (y) {\r\n\t\treturn this.hi < y.hi || this.hi === y.hi && this.lo < y.lo;\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments[0] instanceof DD) {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\treturn DD.copy(this).selfAdd(y);\r\n\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\tlet y = arguments[0];\r\n\t\t\treturn DD.copy(this).selfAdd(y);\r\n\t\t}\r\n\t},\r\n\tinit: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (typeof arguments[0] === \"number\") {\r\n\t\t\t\tlet x = arguments[0];\r\n\t\t\t\tthis.hi = x;\r\n\t\t\t\tthis.lo = 0.0;\r\n\t\t\t} else if (arguments[0] instanceof DD) {\r\n\t\t\t\tlet dd = arguments[0];\r\n\t\t\t\tthis.hi = dd.hi;\r\n\t\t\t\tthis.lo = dd.lo;\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet hi = arguments[0], lo = arguments[1];\r\n\t\t\tthis.hi = hi;\r\n\t\t\tthis.lo = lo;\r\n\t\t}\r\n\t},\r\n\tgt: function (y) {\r\n\t\treturn this.hi > y.hi || this.hi === y.hi && this.lo > y.lo;\r\n\t},\r\n\tisNegative: function () {\r\n\t\treturn this.hi < 0.0 || this.hi === 0.0 && this.lo < 0.0;\r\n\t},\r\n\ttrunc: function () {\r\n\t\tif (this.isNaN()) return DD.NaN;\r\n\t\tif (this.isPositive()) return this.floor(); else return this.ceil();\r\n\t},\r\n\tsignum: function () {\r\n\t\tif (this.hi > 0) return 1;\r\n\t\tif (this.hi < 0) return -1;\r\n\t\tif (this.lo > 0) return 1;\r\n\t\tif (this.lo < 0) return -1;\r\n\t\treturn 0;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Serializable, Comparable, Cloneable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DD;\r\n\t}\r\n});\r\nDD.sqr = function (x) {\r\n\treturn DD.valueOf(x).selfMultiply(x);\r\n};\r\nDD.valueOf = function () {\r\n\tif (typeof arguments[0] === \"string\") {\r\n\t\tlet str = arguments[0];\r\n\t\treturn DD.parse(str);\r\n\t} else if (typeof arguments[0] === \"number\") {\r\n\t\tlet x = arguments[0];\r\n\t\treturn new DD(x);\r\n\t}\r\n};\r\nDD.sqrt = function (x) {\r\n\treturn DD.valueOf(x).sqrt();\r\n};\r\nDD.parse = function (str) {\r\n\tvar i = 0;\r\n\tvar strlen = str.length;\r\n\twhile (Character.isWhitespace(str.charAt(i))) i++;\r\n\tvar isNegative = false;\r\n\tif (i < strlen) {\r\n\t\tvar signCh = str.charAt(i);\r\n\t\tif (signCh === '-' || signCh === '+') {\r\n\t\t\ti++;\r\n\t\t\tif (signCh === '-') isNegative = true;\r\n\t\t}\r\n\t}\r\n\tvar val = new DD();\r\n\tvar numDigits = 0;\r\n\tvar numBeforeDec = 0;\r\n\tvar exp = 0;\r\n\twhile (true) {\r\n\t\tif (i >= strlen) break;\r\n\t\tvar ch = str.charAt(i);\r\n\t\ti++;\r\n\t\tif (Character.isDigit(ch)) {\r\n\t\t\tvar d = ch - '0';\r\n\t\t\tval.selfMultiply(DD.TEN);\r\n\t\t\tval.selfAdd(d);\r\n\t\t\tnumDigits++;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (ch === '.') {\r\n\t\t\tnumBeforeDec = numDigits;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (ch === 'e' || ch === 'E') {\r\n\t\t\tvar expStr = str.substring(i);\r\n\t\t\ttry {\r\n\t\t\t\texp = Integer.parseInt(expStr);\r\n\t\t\t} catch (ex) {\r\n\t\t\t\tif (ex instanceof NumberFormatException) {\r\n\t\t\t\t\tthrow new NumberFormatException(\"Invalid exponent \" + expStr + \" in string \" + str);\r\n\t\t\t\t} else throw ex;\r\n\t\t\t} finally {}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tthrow new NumberFormatException(\"Unexpected character '\" + ch + \"' at position \" + i + \" in string \" + str);\r\n\t}\r\n\tvar val2 = val;\r\n\tvar numDecPlaces = numDigits - numBeforeDec - exp;\r\n\tif (numDecPlaces === 0) {\r\n\t\tval2 = val;\r\n\t} else if (numDecPlaces > 0) {\r\n\t\tvar scale = DD.TEN.pow(numDecPlaces);\r\n\t\tval2 = val.divide(scale);\r\n\t} else if (numDecPlaces < 0) {\r\n\t\tvar scale = DD.TEN.pow(-numDecPlaces);\r\n\t\tval2 = val.multiply(scale);\r\n\t}\r\n\tif (isNegative) {\r\n\t\treturn val2.negate();\r\n\t}\r\n\treturn val2;\r\n};\r\nDD.createNaN = function () {\r\n\treturn new DD(Double.NaN, Double.NaN);\r\n};\r\nDD.copy = function (dd) {\r\n\treturn new DD(dd);\r\n};\r\nDD.magnitude = function (x) {\r\n\tvar xAbs = Math.abs(x);\r\n\tvar xLog10 = Math.log(xAbs) / Math.log(10);\r\n\tvar xMag = Math.trunc(Math.floor(xLog10));\r\n\tvar xApprox = Math.pow(10, xMag);\r\n\tif (xApprox * 10 <= xAbs) xMag += 1;\r\n\treturn xMag;\r\n};\r\nDD.stringOfChar = function (ch, len) {\r\n\tvar buf = new StringBuffer();\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tbuf.append(ch);\r\n\t}\r\n\treturn buf.toString();\r\n};\r\nDD.PI = new DD(3.141592653589793116e+00, 1.224646799147353207e-16);\r\nDD.TWO_PI = new DD(6.283185307179586232e+00, 2.449293598294706414e-16);\r\nDD.PI_2 = new DD(1.570796326794896558e+00, 6.123233995736766036e-17);\r\nDD.E = new DD(2.718281828459045091e+00, 1.445646891729250158e-16);\r\nDD.NaN = new DD(Double.NaN, Double.NaN);\r\nDD.EPS = 1.23259516440783e-32;\r\nDD.SPLIT = 134217729.0;\r\nDD.MAX_PRINT_DIGITS = 32;\r\nDD.TEN = DD.valueOf(10.0);\r\nDD.ONE = DD.valueOf(1.0);\r\nDD.SCI_NOT_EXPONENT_CHAR = \"E\";\r\nDD.SCI_NOT_ZERO = \"0.0E0\";\r\n","import Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport DD from '../math/DD';\r\nexport default function CGAlgorithmsDD() {}\r\nextend(CGAlgorithmsDD.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CGAlgorithmsDD;\r\n\t}\r\n});\r\nCGAlgorithmsDD.orientationIndex = function (p1, p2, q) {\r\n\tvar index = CGAlgorithmsDD.orientationIndexFilter(p1, p2, q);\r\n\tif (index <= 1) return index;\r\n\tvar dx1 = DD.valueOf(p2.x).selfAdd(-p1.x);\r\n\tvar dy1 = DD.valueOf(p2.y).selfAdd(-p1.y);\r\n\tvar dx2 = DD.valueOf(q.x).selfAdd(-p2.x);\r\n\tvar dy2 = DD.valueOf(q.y).selfAdd(-p2.y);\r\n\treturn dx1.selfMultiply(dy2).selfSubtract(dy1.selfMultiply(dx2)).signum();\r\n};\r\nCGAlgorithmsDD.signOfDet2x2 = function (x1, y1, x2, y2) {\r\n\tvar det = x1.multiply(y2).selfSubtract(y1.multiply(x2));\r\n\treturn det.signum();\r\n};\r\nCGAlgorithmsDD.intersection = function (p1, p2, q1, q2) {\r\n\tvar denom1 = DD.valueOf(q2.y).selfSubtract(q1.y).selfMultiply(DD.valueOf(p2.x).selfSubtract(p1.x));\r\n\tvar denom2 = DD.valueOf(q2.x).selfSubtract(q1.x).selfMultiply(DD.valueOf(p2.y).selfSubtract(p1.y));\r\n\tvar denom = denom1.subtract(denom2);\r\n\tvar numx1 = DD.valueOf(q2.x).selfSubtract(q1.x).selfMultiply(DD.valueOf(p1.y).selfSubtract(q1.y));\r\n\tvar numx2 = DD.valueOf(q2.y).selfSubtract(q1.y).selfMultiply(DD.valueOf(p1.x).selfSubtract(q1.x));\r\n\tvar numx = numx1.subtract(numx2);\r\n\tvar fracP = numx.selfDivide(denom).doubleValue();\r\n\tvar x = DD.valueOf(p1.x).selfAdd(DD.valueOf(p2.x).selfSubtract(p1.x).selfMultiply(fracP)).doubleValue();\r\n\tvar numy1 = DD.valueOf(p2.x).selfSubtract(p1.x).selfMultiply(DD.valueOf(p1.y).selfSubtract(q1.y));\r\n\tvar numy2 = DD.valueOf(p2.y).selfSubtract(p1.y).selfMultiply(DD.valueOf(p1.x).selfSubtract(q1.x));\r\n\tvar numy = numy1.subtract(numy2);\r\n\tvar fracQ = numy.selfDivide(denom).doubleValue();\r\n\tvar y = DD.valueOf(q1.y).selfAdd(DD.valueOf(q2.y).selfSubtract(q1.y).selfMultiply(fracQ)).doubleValue();\r\n\treturn new Coordinate(x, y);\r\n};\r\nCGAlgorithmsDD.orientationIndexFilter = function (pa, pb, pc) {\r\n\tvar detsum = null;\r\n\tvar detleft = (pa.x - pc.x) * (pb.y - pc.y);\r\n\tvar detright = (pa.y - pc.y) * (pb.x - pc.x);\r\n\tvar det = detleft - detright;\r\n\tif (detleft > 0.0) {\r\n\t\tif (detright <= 0.0) {\r\n\t\t\treturn CGAlgorithmsDD.signum(det);\r\n\t\t} else {\r\n\t\t\tdetsum = detleft + detright;\r\n\t\t}\r\n\t} else if (detleft < 0.0) {\r\n\t\tif (detright >= 0.0) {\r\n\t\t\treturn CGAlgorithmsDD.signum(det);\r\n\t\t} else {\r\n\t\t\tdetsum = -detleft - detright;\r\n\t\t}\r\n\t} else {\r\n\t\treturn CGAlgorithmsDD.signum(det);\r\n\t}\r\n\tvar errbound = CGAlgorithmsDD.DP_SAFE_EPSILON * detsum;\r\n\tif (det >= errbound || -det >= errbound) {\r\n\t\treturn CGAlgorithmsDD.signum(det);\r\n\t}\r\n\treturn 2;\r\n};\r\nCGAlgorithmsDD.signum = function (x) {\r\n\tif (x > 0) return 1;\r\n\tif (x < 0) return -1;\r\n\treturn 0;\r\n};\r\nCGAlgorithmsDD.DP_SAFE_EPSILON = 1e-15;\r\n","import extend from '../../../../extend';\r\nimport Cloneable from '../../../../java/lang/Cloneable';\r\nexport default function CoordinateSequence() {}\r\nextend(CoordinateSequence.prototype, {\r\n\tsetOrdinate: function (index, ordinateIndex, value) {},\r\n\tsize: function () {},\r\n\tgetOrdinate: function (index, ordinateIndex) {},\r\n\tgetCoordinate: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet i = arguments[0];\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet index = arguments[0], coord = arguments[1];\r\n\t\t}\r\n\t},\r\n\tgetCoordinateCopy: function (i) {},\r\n\tgetDimension: function () {},\r\n\tgetX: function (index) {},\r\n\tclone: function () {},\r\n\texpandEnvelope: function (env) {},\r\n\tcopy: function () {},\r\n\tgetY: function (index) {},\r\n\ttoCoordinateArray: function () {},\r\n\tinterfaces_: function () {\r\n\t\treturn [Cloneable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateSequence;\r\n\t}\r\n});\r\nCoordinateSequence.X = 0;\r\nCoordinateSequence.Y = 1;\r\nCoordinateSequence.Z = 2;\r\nCoordinateSequence.M = 3;\r\n","export default function System () { }\r\n\r\nSystem.arraycopy = (src, srcPos, dest, destPos, len) => {\r\n  let c = 0\r\n  for (let i = srcPos; i < srcPos + len; i++) {\r\n    dest[destPos + c] = src[i]\r\n    c++\r\n  }\r\n}\r\n\r\nSystem.getProperty = (name) => {\r\n  return {\r\n    'line.separator': '\\n'\r\n  }[name]\r\n}\r\n","import NotRepresentableException from './NotRepresentableException';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nexport default function HCoordinate() {\r\n\tthis.x = null;\r\n\tthis.y = null;\r\n\tthis.w = null;\r\n\tif (arguments.length === 0) {\r\n\t\tthis.x = 0.0;\r\n\t\tthis.y = 0.0;\r\n\t\tthis.w = 1.0;\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet p = arguments[0];\r\n\t\tthis.x = p.x;\r\n\t\tthis.y = p.y;\r\n\t\tthis.w = 1.0;\r\n\t} else if (arguments.length === 2) {\r\n\t\tif (typeof arguments[0] === \"number\" && typeof arguments[1] === \"number\") {\r\n\t\t\tlet _x = arguments[0], _y = arguments[1];\r\n\t\t\tthis.x = _x;\r\n\t\t\tthis.y = _y;\r\n\t\t\tthis.w = 1.0;\r\n\t\t} else if (arguments[0] instanceof HCoordinate && arguments[1] instanceof HCoordinate) {\r\n\t\t\tlet p1 = arguments[0], p2 = arguments[1];\r\n\t\t\tthis.x = p1.y * p2.w - p2.y * p1.w;\r\n\t\t\tthis.y = p2.x * p1.w - p1.x * p2.w;\r\n\t\t\tthis.w = p1.x * p2.y - p2.x * p1.y;\r\n\t\t} else if (arguments[0] instanceof Coordinate && arguments[1] instanceof Coordinate) {\r\n\t\t\tlet p1 = arguments[0], p2 = arguments[1];\r\n\t\t\tthis.x = p1.y - p2.y;\r\n\t\t\tthis.y = p2.x - p1.x;\r\n\t\t\tthis.w = p1.x * p2.y - p2.x * p1.y;\r\n\t\t}\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet _x = arguments[0], _y = arguments[1], _w = arguments[2];\r\n\t\tthis.x = _x;\r\n\t\tthis.y = _y;\r\n\t\tthis.w = _w;\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet p1 = arguments[0], p2 = arguments[1], q1 = arguments[2], q2 = arguments[3];\r\n\t\tvar px = p1.y - p2.y;\r\n\t\tvar py = p2.x - p1.x;\r\n\t\tvar pw = p1.x * p2.y - p2.x * p1.y;\r\n\t\tvar qx = q1.y - q2.y;\r\n\t\tvar qy = q2.x - q1.x;\r\n\t\tvar qw = q1.x * q2.y - q2.x * q1.y;\r\n\t\tthis.x = py * qw - qy * pw;\r\n\t\tthis.y = qx * pw - px * qw;\r\n\t\tthis.w = px * qy - qx * py;\r\n\t}\r\n}\r\nextend(HCoordinate.prototype, {\r\n\tgetY: function () {\r\n\t\tvar a = this.y / this.w;\r\n\t\tif (Double.isNaN(a) || Double.isInfinite(a)) {\r\n\t\t\tthrow new NotRepresentableException();\r\n\t\t}\r\n\t\treturn a;\r\n\t},\r\n\tgetX: function () {\r\n\t\tvar a = this.x / this.w;\r\n\t\tif (Double.isNaN(a) || Double.isInfinite(a)) {\r\n\t\t\tthrow new NotRepresentableException();\r\n\t\t}\r\n\t\treturn a;\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\tvar p = new Coordinate();\r\n\t\tp.x = this.getX();\r\n\t\tp.y = this.getY();\r\n\t\treturn p;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn HCoordinate;\r\n\t}\r\n});\r\nHCoordinate.intersection = function (p1, p2, q1, q2) {\r\n\tvar px = p1.y - p2.y;\r\n\tvar py = p2.x - p1.x;\r\n\tvar pw = p1.x * p2.y - p2.x * p1.y;\r\n\tvar qx = q1.y - q2.y;\r\n\tvar qy = q2.x - q1.x;\r\n\tvar qw = q1.x * q2.y - q2.x * q1.y;\r\n\tvar x = py * qw - qy * pw;\r\n\tvar y = qx * pw - px * qw;\r\n\tvar w = px * qy - qx * py;\r\n\tvar xInt = x / w;\r\n\tvar yInt = y / w;\r\n\tif (Double.isNaN(xInt) || (Double.isInfinite(xInt) || Double.isNaN(yInt)) || Double.isInfinite(yInt)) {\r\n\t\tthrow new NotRepresentableException();\r\n\t}\r\n\treturn new Coordinate(xInt, yInt);\r\n};\r\n","import hasInterface from '../../../../hasInterface';\r\nimport extend from '../../../../extend';\r\nimport CoordinateSequence from './CoordinateSequence';\r\nexport default function CoordinateSequenceFactory() {}\r\nextend(CoordinateSequenceFactory.prototype, {\r\n\tcreate: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Array) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t} else if (hasInterface(arguments[0], CoordinateSequence)) {\r\n\t\t\t\tlet coordSeq = arguments[0];\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet size = arguments[0], dimension = arguments[1];\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateSequenceFactory;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nexport default function GeometryComponentFilter() {}\r\nextend(GeometryComponentFilter.prototype, {\r\n\tfilter: function (geom) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryComponentFilter;\r\n\t}\r\n});\r\n","import Comparable from '../../../../java/lang/Comparable';\r\nimport Cloneable from '../../../../java/lang/Cloneable';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport Serializable from '../../../../java/io/Serializable';\r\nimport GeometryComponentFilter from './GeometryComponentFilter';\r\nimport Envelope from './Envelope';\r\nimport Assert from '../util/Assert';\r\nimport extend from '../../../../extend';\r\nimport inherits from '../../../../inherits';\r\nexport default function Geometry() {\r\n\tthis.envelope = null;\r\n\tthis.factory = null;\r\n\tthis.SRID = null;\r\n\tthis.userData = null;\r\n\tlet factory = arguments[0];\r\n\tthis.factory = factory;\r\n\tthis.SRID = factory.getSRID();\r\n}\r\nextend(Geometry.prototype, {\r\n\tisGeometryCollection: function () {\r\n\t\treturn this.getSortIndex() === Geometry.SORTINDEX_GEOMETRYCOLLECTION;\r\n\t},\r\n\tgetFactory: function () {\r\n\t\treturn this.factory;\r\n\t},\r\n\tgetGeometryN: function (n) {\r\n\t\treturn this;\r\n\t},\r\n\tgetArea: function () {\r\n\t\treturn 0.0;\r\n\t},\r\n\tisRectangle: function () {\r\n\t\treturn false;\r\n\t},\r\n\tequals: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Geometry) {\r\n\t\t\t\tlet g = arguments[0];\r\n\t\t\t\tif (g === null) return false;\r\n\t\t\t\treturn this.equalsTopo(g);\r\n\t\t\t} else if (arguments[0] instanceof Object) {\r\n\t\t\t\tlet o = arguments[0];\r\n\t\t\t\tif (!(o instanceof Geometry)) return false;\r\n\t\t\t\tvar g = o;\r\n\t\t\t\treturn this.equalsExact(g);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tequalsExact: function (other) {\r\n\t\treturn this === other || this.equalsExact(other, 0);\r\n\t},\r\n\tgeometryChanged: function () {\r\n\t\tthis.apply(Geometry.geometryChangedFilter);\r\n\t},\r\n\tgeometryChangedAction: function () {\r\n\t\tthis.envelope = null;\r\n\t},\r\n\tequalsNorm: function (g) {\r\n\t\tif (g === null) return false;\r\n\t\treturn this.norm().equalsExact(g.norm());\r\n\t},\r\n\tgetLength: function () {\r\n\t\treturn 0.0;\r\n\t},\r\n\tgetNumGeometries: function () {\r\n\t\treturn 1;\r\n\t},\r\n\tcompareTo: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet o = arguments[0];\r\n\t\t\tvar other = o;\r\n\t\t\tif (this.getSortIndex() !== other.getSortIndex()) {\r\n\t\t\t\treturn this.getSortIndex() - other.getSortIndex();\r\n\t\t\t}\r\n\t\t\tif (this.isEmpty() && other.isEmpty()) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tif (this.isEmpty()) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tif (other.isEmpty()) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn this.compareToSameClass(o);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet o = arguments[0], comp = arguments[1];\r\n\t\t\tvar other = o;\r\n\t\t\tif (this.getSortIndex() !== other.getSortIndex()) {\r\n\t\t\t\treturn this.getSortIndex() - other.getSortIndex();\r\n\t\t\t}\r\n\t\t\tif (this.isEmpty() && other.isEmpty()) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tif (this.isEmpty()) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tif (other.isEmpty()) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn this.compareToSameClass(o, comp);\r\n\t\t}\r\n\t},\r\n\tgetUserData: function () {\r\n\t\treturn this.userData;\r\n\t},\r\n\tgetSRID: function () {\r\n\t\treturn this.SRID;\r\n\t},\r\n\tgetEnvelope: function () {\r\n\t\treturn this.getFactory().toGeometry(this.getEnvelopeInternal());\r\n\t},\r\n\tcheckNotGeometryCollection: function (g) {\r\n\t\tif (g.getSortIndex() === Geometry.SORTINDEX_GEOMETRYCOLLECTION) {\r\n\t\t\tthrow new IllegalArgumentException(\"This method does not support GeometryCollection arguments\");\r\n\t\t}\r\n\t},\r\n\tequal: function (a, b, tolerance) {\r\n\t\tif (tolerance === 0) {\r\n\t\t\treturn a.equals(b);\r\n\t\t}\r\n\t\treturn a.distance(b) <= tolerance;\r\n\t},\r\n\tnorm: function () {\r\n\t\tvar copy = this.copy();\r\n\t\tcopy.normalize();\r\n\t\treturn copy;\r\n\t},\r\n\tgetPrecisionModel: function () {\r\n\t\treturn this.factory.getPrecisionModel();\r\n\t},\r\n\tgetEnvelopeInternal: function () {\r\n\t\tif (this.envelope === null) {\r\n\t\t\tthis.envelope = this.computeEnvelopeInternal();\r\n\t\t}\r\n\t\treturn new Envelope(this.envelope);\r\n\t},\r\n\tsetSRID: function (SRID) {\r\n\t\tthis.SRID = SRID;\r\n\t},\r\n\tsetUserData: function (userData) {\r\n\t\tthis.userData = userData;\r\n\t},\r\n\tcompare: function (a, b) {\r\n\t\tvar i = a.iterator();\r\n\t\tvar j = b.iterator();\r\n\t\twhile (i.hasNext() && j.hasNext()) {\r\n\t\t\tvar aElement = i.next();\r\n\t\t\tvar bElement = j.next();\r\n\t\t\tvar comparison = aElement.compareTo(bElement);\r\n\t\t\tif (comparison !== 0) {\r\n\t\t\t\treturn comparison;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (i.hasNext()) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif (j.hasNext()) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\thashCode: function () {\r\n\t\treturn this.getEnvelopeInternal().hashCode();\r\n\t},\r\n\tisGeometryCollectionOrDerived: function () {\r\n\t\tif (this.getSortIndex() === Geometry.SORTINDEX_GEOMETRYCOLLECTION || this.getSortIndex() === Geometry.SORTINDEX_MULTIPOINT || this.getSortIndex() === Geometry.SORTINDEX_MULTILINESTRING || this.getSortIndex() === Geometry.SORTINDEX_MULTIPOLYGON) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Cloneable, Comparable, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Geometry;\r\n\t}\r\n});\r\nGeometry.hasNonEmptyElements = function (geometries) {\r\n\tfor (var i = 0; i < geometries.length; i++) {\r\n\t\tif (!geometries[i].isEmpty()) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};\r\nGeometry.hasNullElements = function (array) {\r\n\tfor (var i = 0; i < array.length; i++) {\r\n\t\tif (array[i] === null) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};\r\nGeometry.serialVersionUID = 8763622679187376702;\r\nGeometry.SORTINDEX_POINT = 0;\r\nGeometry.SORTINDEX_MULTIPOINT = 1;\r\nGeometry.SORTINDEX_LINESTRING = 2;\r\nGeometry.SORTINDEX_LINEARRING = 3;\r\nGeometry.SORTINDEX_MULTILINESTRING = 4;\r\nGeometry.SORTINDEX_POLYGON = 5;\r\nGeometry.SORTINDEX_MULTIPOLYGON = 6;\r\nGeometry.SORTINDEX_GEOMETRYCOLLECTION = 7;\r\nGeometry.geometryChangedFilter = {\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryComponentFilter];\r\n\t},\r\n\tfilter: function (geom) {\r\n\t\tgeom.geometryChangedAction();\r\n\t}\r\n};\r\n","import extend from '../../../../extend';\r\nexport default function CoordinateFilter() {}\r\nextend(CoordinateFilter.prototype, {\r\n\tfilter: function (coord) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateFilter;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nexport default function BoundaryNodeRule() {}\r\nextend(BoundaryNodeRule.prototype, {\r\n\tisInBoundary: function (boundaryCount) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BoundaryNodeRule;\r\n\t}\r\n});\r\nfunction Mod2BoundaryNodeRule() {}\r\nextend(Mod2BoundaryNodeRule.prototype, {\r\n\tisInBoundary: function (boundaryCount) {\r\n\t\treturn boundaryCount % 2 === 1;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [BoundaryNodeRule];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Mod2BoundaryNodeRule;\r\n\t}\r\n});\r\nfunction EndPointBoundaryNodeRule() {}\r\nextend(EndPointBoundaryNodeRule.prototype, {\r\n\tisInBoundary: function (boundaryCount) {\r\n\t\treturn boundaryCount > 0;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [BoundaryNodeRule];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EndPointBoundaryNodeRule;\r\n\t}\r\n});\r\nfunction MultiValentEndPointBoundaryNodeRule() {}\r\nextend(MultiValentEndPointBoundaryNodeRule.prototype, {\r\n\tisInBoundary: function (boundaryCount) {\r\n\t\treturn boundaryCount > 1;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [BoundaryNodeRule];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MultiValentEndPointBoundaryNodeRule;\r\n\t}\r\n});\r\nfunction MonoValentEndPointBoundaryNodeRule() {}\r\nextend(MonoValentEndPointBoundaryNodeRule.prototype, {\r\n\tisInBoundary: function (boundaryCount) {\r\n\t\treturn boundaryCount === 1;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [BoundaryNodeRule];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MonoValentEndPointBoundaryNodeRule;\r\n\t}\r\n});\r\nBoundaryNodeRule.Mod2BoundaryNodeRule = Mod2BoundaryNodeRule;\r\nBoundaryNodeRule.EndPointBoundaryNodeRule = EndPointBoundaryNodeRule;\r\nBoundaryNodeRule.MultiValentEndPointBoundaryNodeRule = MultiValentEndPointBoundaryNodeRule;\r\nBoundaryNodeRule.MonoValentEndPointBoundaryNodeRule = MonoValentEndPointBoundaryNodeRule;\r\nBoundaryNodeRule.MOD2_BOUNDARY_RULE = new Mod2BoundaryNodeRule();\r\nBoundaryNodeRule.ENDPOINT_BOUNDARY_RULE = new EndPointBoundaryNodeRule();\r\nBoundaryNodeRule.MULTIVALENT_ENDPOINT_BOUNDARY_RULE = new MultiValentEndPointBoundaryNodeRule();\r\nBoundaryNodeRule.MONOVALENT_ENDPOINT_BOUNDARY_RULE = new MonoValentEndPointBoundaryNodeRule();\r\nBoundaryNodeRule.OGC_SFS_BOUNDARY_RULE = BoundaryNodeRule.MOD2_BOUNDARY_RULE;\r\n","import CoordinateList from './CoordinateList';\r\nimport Coordinate from './Coordinate';\r\nimport extend from '../../../../extend';\r\nimport MathUtil from '../math/MathUtil';\r\nimport System from '../../../../java/lang/System';\r\nimport Comparator from '../../../../java/util/Comparator';\r\nimport Envelope from './Envelope';\r\nexport default function CoordinateArrays() {}\r\nextend(CoordinateArrays.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateArrays;\r\n\t}\r\n});\r\nCoordinateArrays.isRing = function (pts) {\r\n\tif (pts.length < 4) return false;\r\n\tif (!pts[0].equals2D(pts[pts.length - 1])) return false;\r\n\treturn true;\r\n};\r\nCoordinateArrays.ptNotInList = function (testPts, pts) {\r\n\tfor (var i = 0; i < testPts.length; i++) {\r\n\t\tvar testPt = testPts[i];\r\n\t\tif (CoordinateArrays.indexOf(testPt, pts) < 0) return testPt;\r\n\t}\r\n\treturn null;\r\n};\r\nCoordinateArrays.scroll = function (coordinates, firstCoordinate) {\r\n\tvar i = CoordinateArrays.indexOf(firstCoordinate, coordinates);\r\n\tif (i < 0) return null;\r\n\tvar newCoordinates = new Array(coordinates.length).fill(null);\r\n\tSystem.arraycopy(coordinates, i, newCoordinates, 0, coordinates.length - i);\r\n\tSystem.arraycopy(coordinates, 0, newCoordinates, coordinates.length - i, i);\r\n\tSystem.arraycopy(newCoordinates, 0, coordinates, 0, coordinates.length);\r\n};\r\nCoordinateArrays.equals = function () {\r\n\tif (arguments.length === 2) {\r\n\t\tlet coord1 = arguments[0], coord2 = arguments[1];\r\n\t\tif (coord1 === coord2) return true;\r\n\t\tif (coord1 === null || coord2 === null) return false;\r\n\t\tif (coord1.length !== coord2.length) return false;\r\n\t\tfor (var i = 0; i < coord1.length; i++) {\r\n\t\t\tif (!coord1[i].equals(coord2[i])) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet coord1 = arguments[0], coord2 = arguments[1], coordinateComparator = arguments[2];\r\n\t\tif (coord1 === coord2) return true;\r\n\t\tif (coord1 === null || coord2 === null) return false;\r\n\t\tif (coord1.length !== coord2.length) return false;\r\n\t\tfor (var i = 0; i < coord1.length; i++) {\r\n\t\t\tif (coordinateComparator.compare(coord1[i], coord2[i]) !== 0) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n};\r\nCoordinateArrays.intersection = function (coordinates, env) {\r\n\tvar coordList = new CoordinateList();\r\n\tfor (var i = 0; i < coordinates.length; i++) {\r\n\t\tif (env.intersects(coordinates[i])) coordList.add(coordinates[i], true);\r\n\t}\r\n\treturn coordList.toCoordinateArray();\r\n};\r\nCoordinateArrays.hasRepeatedPoints = function (coord) {\r\n\tfor (var i = 1; i < coord.length; i++) {\r\n\t\tif (coord[i - 1].equals(coord[i])) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};\r\nCoordinateArrays.removeRepeatedPoints = function (coord) {\r\n\tif (!CoordinateArrays.hasRepeatedPoints(coord)) return coord;\r\n\tvar coordList = new CoordinateList(coord, false);\r\n\treturn coordList.toCoordinateArray();\r\n};\r\nCoordinateArrays.reverse = function (coord) {\r\n\tvar last = coord.length - 1;\r\n\tvar mid = Math.trunc(last / 2);\r\n\tfor (var i = 0; i <= mid; i++) {\r\n\t\tvar tmp = coord[i];\r\n\t\tcoord[i] = coord[last - i];\r\n\t\tcoord[last - i] = tmp;\r\n\t}\r\n};\r\nCoordinateArrays.removeNull = function (coord) {\r\n\tvar nonNull = 0;\r\n\tfor (var i = 0; i < coord.length; i++) {\r\n\t\tif (coord[i] !== null) nonNull++;\r\n\t}\r\n\tvar newCoord = new Array(nonNull).fill(null);\r\n\tif (nonNull === 0) return newCoord;\r\n\tvar j = 0;\r\n\tfor (var i = 0; i < coord.length; i++) {\r\n\t\tif (coord[i] !== null) newCoord[j++] = coord[i];\r\n\t}\r\n\treturn newCoord;\r\n};\r\nCoordinateArrays.copyDeep = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet coordinates = arguments[0];\r\n\t\tvar copy = new Array(coordinates.length).fill(null);\r\n\t\tfor (var i = 0; i < coordinates.length; i++) {\r\n\t\t\tcopy[i] = new Coordinate(coordinates[i]);\r\n\t\t}\r\n\t\treturn copy;\r\n\t} else if (arguments.length === 5) {\r\n\t\tlet src = arguments[0], srcStart = arguments[1], dest = arguments[2], destStart = arguments[3], length = arguments[4];\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tdest[destStart + i] = new Coordinate(src[srcStart + i]);\r\n\t\t}\r\n\t}\r\n};\r\nCoordinateArrays.isEqualReversed = function (pts1, pts2) {\r\n\tfor (var i = 0; i < pts1.length; i++) {\r\n\t\tvar p1 = pts1[i];\r\n\t\tvar p2 = pts2[pts1.length - i - 1];\r\n\t\tif (p1.compareTo(p2) !== 0) return false;\r\n\t}\r\n\treturn true;\r\n};\r\nCoordinateArrays.envelope = function (coordinates) {\r\n\tvar env = new Envelope();\r\n\tfor (var i = 0; i < coordinates.length; i++) {\r\n\t\tenv.expandToInclude(coordinates[i]);\r\n\t}\r\n\treturn env;\r\n};\r\nCoordinateArrays.toCoordinateArray = function (coordList) {\r\n\treturn coordList.toArray(CoordinateArrays.coordArrayType);\r\n};\r\nCoordinateArrays.atLeastNCoordinatesOrNothing = function (n, c) {\r\n\treturn c.length >= n ? c : [];\r\n};\r\nCoordinateArrays.indexOf = function (coordinate, coordinates) {\r\n\tfor (var i = 0; i < coordinates.length; i++) {\r\n\t\tif (coordinate.equals(coordinates[i])) {\r\n\t\t\treturn i;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n};\r\nCoordinateArrays.increasingDirection = function (pts) {\r\n\tfor (var i = 0; i < Math.trunc(pts.length / 2); i++) {\r\n\t\tvar j = pts.length - 1 - i;\r\n\t\tvar comp = pts[i].compareTo(pts[j]);\r\n\t\tif (comp !== 0) return comp;\r\n\t}\r\n\treturn 1;\r\n};\r\nCoordinateArrays.compare = function (pts1, pts2) {\r\n\tvar i = 0;\r\n\twhile (i < pts1.length && i < pts2.length) {\r\n\t\tvar compare = pts1[i].compareTo(pts2[i]);\r\n\t\tif (compare !== 0) return compare;\r\n\t\ti++;\r\n\t}\r\n\tif (i < pts2.length) return -1;\r\n\tif (i < pts1.length) return 1;\r\n\treturn 0;\r\n};\r\nCoordinateArrays.minCoordinate = function (coordinates) {\r\n\tvar minCoord = null;\r\n\tfor (var i = 0; i < coordinates.length; i++) {\r\n\t\tif (minCoord === null || minCoord.compareTo(coordinates[i]) > 0) {\r\n\t\t\tminCoord = coordinates[i];\r\n\t\t}\r\n\t}\r\n\treturn minCoord;\r\n};\r\nCoordinateArrays.extract = function (pts, start, end) {\r\n\tstart = MathUtil.clamp(start, 0, pts.length);\r\n\tend = MathUtil.clamp(end, -1, pts.length);\r\n\tvar npts = end - start + 1;\r\n\tif (end < 0) npts = 0;\r\n\tif (start >= pts.length) npts = 0;\r\n\tif (end < start) npts = 0;\r\n\tvar extractPts = new Array(npts).fill(null);\r\n\tif (npts === 0) return extractPts;\r\n\tvar iPts = 0;\r\n\tfor (var i = start; i <= end; i++) {\r\n\t\textractPts[iPts++] = pts[i];\r\n\t}\r\n\treturn extractPts;\r\n};\r\nfunction ForwardComparator() {}\r\nextend(ForwardComparator.prototype, {\r\n\tcompare: function (o1, o2) {\r\n\t\tvar pts1 = o1;\r\n\t\tvar pts2 = o2;\r\n\t\treturn CoordinateArrays.compare(pts1, pts2);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ForwardComparator;\r\n\t}\r\n});\r\nfunction BidirectionalComparator() {}\r\nextend(BidirectionalComparator.prototype, {\r\n\tcompare: function (o1, o2) {\r\n\t\tvar pts1 = o1;\r\n\t\tvar pts2 = o2;\r\n\t\tif (pts1.length < pts2.length) return -1;\r\n\t\tif (pts1.length > pts2.length) return 1;\r\n\t\tif (pts1.length === 0) return 0;\r\n\t\tvar forwardComp = CoordinateArrays.compare(pts1, pts2);\r\n\t\tvar isEqualRev = CoordinateArrays.isEqualReversed(pts1, pts2);\r\n\t\tif (isEqualRev) return 0;\r\n\t\treturn forwardComp;\r\n\t},\r\n\tOLDcompare: function (o1, o2) {\r\n\t\tvar pts1 = o1;\r\n\t\tvar pts2 = o2;\r\n\t\tif (pts1.length < pts2.length) return -1;\r\n\t\tif (pts1.length > pts2.length) return 1;\r\n\t\tif (pts1.length === 0) return 0;\r\n\t\tvar dir1 = CoordinateArrays.increasingDirection(pts1);\r\n\t\tvar dir2 = CoordinateArrays.increasingDirection(pts2);\r\n\t\tvar i1 = dir1 > 0 ? 0 : pts1.length - 1;\r\n\t\tvar i2 = dir2 > 0 ? 0 : pts1.length - 1;\r\n\t\tfor (var i = 0; i < pts1.length; i++) {\r\n\t\t\tvar comparePt = pts1[i1].compareTo(pts2[i2]);\r\n\t\t\tif (comparePt !== 0) return comparePt;\r\n\t\t\ti1 += dir1;\r\n\t\t\ti2 += dir2;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BidirectionalComparator;\r\n\t}\r\n});\r\nCoordinateArrays.ForwardComparator = ForwardComparator;\r\nCoordinateArrays.BidirectionalComparator = BidirectionalComparator;\r\nCoordinateArrays.coordArrayType = new Array(0).fill(null);\r\n","/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/Map.html\r\n *\r\n * @constructor\r\n * @private\r\n */\r\nexport default function Map() {};\r\n\r\n\r\n/**\r\n * Returns the value to which the specified key is mapped, or null if this map\r\n * contains no mapping for the key.\r\n * @param {Object} key\r\n * @return {Object}\r\n */\r\nMap.prototype.get = function() {};\r\n\r\n\r\n/**\r\n * Associates the specified value with the specified key in this map (optional\r\n * operation).\r\n * @param {Object} key\r\n * @param {Object} value\r\n * @return {Object}\r\n */\r\nMap.prototype.put = function() {};\r\n\r\n\r\n/**\r\n * Returns the number of key-value mappings in this map.\r\n * @return {number}\r\n */\r\nMap.prototype.size = function() {};\r\n\r\n\r\n/**\r\n * Returns a Collection view of the values contained in this map.\r\n * @return {javascript.util.Collection}\r\n */\r\nMap.prototype.values = function() {};\r\n\r\n/**\r\n * Returns a {@link Set} view of the mappings contained in this map.\r\n * The set is backed by the map, so changes to the map are\r\n * reflected in the set, and vice-versa.  If the map is modified\r\n * while an iteration over the set is in progress (except through\r\n * the iterator's own <tt>remove</tt> operation, or through the\r\n * <tt>setValue</tt> operation on a map entry returned by the\r\n * iterator) the results of the iteration are undefined.  The set\r\n * supports element removal, which removes the corresponding\r\n * mapping from the map, via the <tt>Iterator.remove</tt>,\r\n * <tt>Set.remove</tt>, <tt>removeAll</tt>, <tt>retainAll</tt> and\r\n * <tt>clear</tt> operations.  It does not support the\r\n * <tt>add</tt> or <tt>addAll</tt> operations.\r\n *\r\n * @return {Set} a set view of the mappings contained in this map\r\n */\r\nMap.prototype.entrySet = function() {};\r\n","import Map from './Map'\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/SortedMap.html\r\n *\r\n * @extends {Map}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function SortedMap() {};\r\nSortedMap.prototype = new Map();\r\n","import Collection from './Collection'\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/Set.html\r\n *\r\n * @extends {Collection}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function Set() {};\r\nSet.prototype = new Collection();\r\n\r\n\r\n/**\r\n * Returns true if this set contains the specified element. More formally,\r\n * returns true if and only if this set contains an element e such that (o==null ?\r\n * e==null : o.equals(e)).\r\n * @param {Object} e\r\n * @return {boolean}\r\n */\r\nSet.prototype.contains = function() {};\r\n","import Collection from './Collection'\r\nimport Iterator from './Iterator'\r\nimport NoSuchElementException from './NoSuchElementException'\r\nimport OperationNotSupported from './OperationNotSupported'\r\nimport Set from './Set'\r\n\r\n/**\r\n * @see http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html\r\n *\r\n * @extends {javascript.util.Set}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function HashSet() {\r\n  /**\r\n   * @type {Array}\r\n   * @private\r\n  */\r\n  this.array_ = [];\r\n\r\n  if (arguments[0] instanceof Collection) {\r\n    this.addAll(arguments[0]);\r\n  }\r\n};\r\nHashSet.prototype = new Set();\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nHashSet.prototype.contains = function(o) {\r\n  for (var i = 0, len = this.array_.length; i < len; i++) {\r\n    var e = this.array_[i];\r\n    if (e === o) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nHashSet.prototype.add = function(o) {\r\n  if (this.contains(o)) {\r\n    return false;\r\n  }\r\n\r\n  this.array_.push(o);\r\n\r\n  return true;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nHashSet.prototype.addAll = function(c) {\r\n  for (var i = c.iterator(); i.hasNext();) {\r\n    this.add(i.next());\r\n  }\r\n  return true;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nHashSet.prototype.remove = function(o) {\r\n  throw new javascript.util.OperationNotSupported();\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nHashSet.prototype.size = function() {\r\n  return this.array_.length;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nHashSet.prototype.isEmpty = function() {\r\n  return this.array_.length === 0;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nHashSet.prototype.toArray = function() {\r\n  var array = [];\r\n\r\n  for (var i = 0, len = this.array_.length; i < len; i++) {\r\n    array.push(this.array_[i]);\r\n  }\r\n\r\n  return array;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nHashSet.prototype.iterator = function() {\r\n  return new Iterator_(this);\r\n};\r\n\r\n\r\n\r\n/**\r\n * @extends {Iterator}\r\n * @param {HashSet} hashSet\r\n * @constructor\r\n * @private\r\n */\r\nvar Iterator_ = function(hashSet) {\r\n  /**\r\n   * @type {HashSet}\r\n   * @private\r\n   */\r\n  this.hashSet_ = hashSet;\r\n  /**\r\n   * @type {number}\r\n   * @private\r\n   */\r\n  this.position_ = 0;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nIterator_.prototype.next = function() {\r\n  if (this.position_ === this.hashSet_.size()) {\r\n    throw new NoSuchElementException();\r\n  }\r\n  return this.hashSet_.array_[this.position_++];\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nIterator_.prototype.hasNext = function() {\r\n  if (this.position_ < this.hashSet_.size()) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nIterator_.prototype.remove = function() {\r\n  throw new OperationNotSupported();\r\n};\r\n","import ArrayList from './ArrayList'\r\nimport SortedMap from './SortedMap'\r\nimport HashSet from './HashSet'\r\n\r\nconst BLACK = 0\r\nconst RED = 1\r\nfunction colorOf (p) { return (p == null ? BLACK : p.color) }\r\nfunction parentOf (p) { return (p == null ? null : p.parent) }\r\nfunction setColor (p, c) { if (p !== null) p.color = c }\r\nfunction leftOf (p) { return (p == null ? null : p.left) }\r\nfunction rightOf (p) { return (p == null ? null : p.right) }\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html\r\n *\r\n * @extends {SortedMap}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function TreeMap() {\r\n  /**\r\n   * @type {Object}\r\n   * @private\r\n   */\r\n  this.root_ = null;\r\n  /**\r\n   * @type {number}\r\n   * @private\r\n  */\r\n  this.size_ = 0;\r\n};\r\nTreeMap.prototype = new SortedMap();\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeMap.prototype.get = function(key) {\r\n  var p = this.root_;\r\n  while (p !== null) {\r\n    var cmp = key['compareTo'](p.key);\r\n    if (cmp < 0) {\r\n      p = p.left;\r\n    } else if (cmp > 0) {\r\n      p = p.right;\r\n    } else {\r\n      return p.value;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeMap.prototype.put = function(key, value) {\r\n  if (this.root_ === null) {\r\n    this.root_ = {\r\n      key: key,\r\n      value: value,\r\n      left: null,\r\n      right: null,\r\n      parent: null,\r\n      color: BLACK,\r\n      getValue() { return this.value },\r\n      getKey() { return this.key }\r\n    };\r\n    this.size_ = 1;\r\n    return null;\r\n  }\r\n  var t = this.root_, parent, cmp;\r\n  do {\r\n    parent = t;\r\n    cmp = key['compareTo'](t.key);\r\n    if (cmp < 0) {\r\n      t = t.left;\r\n    } else if (cmp > 0) {\r\n      t = t.right;\r\n    } else {\r\n      var oldValue = t.value;\r\n      t.value = value;\r\n      return oldValue;\r\n    }\r\n  } while (t !== null);\r\n  var e = {\r\n    key: key,\r\n    left: null,\r\n    right: null,\r\n    value: value,\r\n    parent: parent,\r\n    color: BLACK,\r\n    getValue() { return this.value },\r\n    getKey() { return this.key }\r\n  };\r\n  if (cmp < 0) {\r\n    parent.left = e;\r\n  } else {\r\n    parent.right = e;\r\n  }\r\n  this.fixAfterInsertion(e);\r\n  this.size_++;\r\n  return null;\r\n};\r\n\r\n\r\n/**\r\n * @param {Object} x\r\n */\r\nTreeMap.prototype.fixAfterInsertion = function(x) {\r\n  x.color = RED;\r\n  while (x != null && x != this.root_ && x.parent.color == RED) {\r\n    if (parentOf(x) == leftOf(parentOf(parentOf(x)))) {\r\n      var y = rightOf(parentOf(parentOf(x)));\r\n      if (colorOf(y) == RED) {\r\n        setColor(parentOf(x), BLACK);\r\n        setColor(y, BLACK);\r\n        setColor(parentOf(parentOf(x)), RED);\r\n        x = parentOf(parentOf(x));\r\n      } else {\r\n        if (x == rightOf(parentOf(x))) {\r\n          x = parentOf(x);\r\n          this.rotateLeft(x);\r\n        }\r\n        setColor(parentOf(x), BLACK);\r\n        setColor(parentOf(parentOf(x)), RED);\r\n        this.rotateRight(parentOf(parentOf(x)));\r\n      }\r\n    } else {\r\n      var y = leftOf(parentOf(parentOf(x)));\r\n      if (colorOf(y) == RED) {\r\n        setColor(parentOf(x), BLACK);\r\n        setColor(y, BLACK);\r\n        setColor(parentOf(parentOf(x)), RED);\r\n        x = parentOf(parentOf(x));\r\n      } else {\r\n        if (x == leftOf(parentOf(x))) {\r\n          x = parentOf(x);\r\n          this.rotateRight(x);\r\n        }\r\n        setColor(parentOf(x), BLACK);\r\n        setColor(parentOf(parentOf(x)), RED);\r\n        this.rotateLeft(parentOf(parentOf(x)));\r\n      }\r\n    }\r\n  }\r\n  this.root_.color = BLACK;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeMap.prototype.values = function() {\r\n  var arrayList = new ArrayList();\r\n  var p = this.getFirstEntry();\r\n  if (p !== null) {\r\n    arrayList.add(p.value);\r\n    while ((p = TreeMap.successor(p)) !== null) {\r\n      arrayList.add(p.value);\r\n    }\r\n  }\r\n  return arrayList;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeMap.prototype.entrySet = function() {\r\n  var hashSet = new HashSet();\r\n  var p = this.getFirstEntry();\r\n  if (p !== null) {\r\n    hashSet.add(p);\r\n    while ((p = TreeMap.successor(p)) !== null) {\r\n      hashSet.add(p);\r\n    }\r\n  }\r\n  return hashSet;\r\n};\r\n\r\n\r\n/**\r\n * @param {Object} p\r\n */\r\nTreeMap.prototype.rotateLeft = function(p) {\r\n  if (p != null) {\r\n    var r = p.right;\r\n    p.right = r.left;\r\n    if (r.left != null)\r\n      r.left.parent = p;\r\n    r.parent = p.parent;\r\n    if (p.parent == null)\r\n      this.root_ = r;\r\n    else if (p.parent.left == p)\r\n      p.parent.left = r;\r\n    else\r\n      p.parent.right = r;\r\n    r.left = p;\r\n    p.parent = r;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * @param {Object} p\r\n */\r\nTreeMap.prototype.rotateRight = function(p) {\r\n  if (p != null) {\r\n    var l = p.left;\r\n    p.left = l.right;\r\n    if (l.right != null) l.right.parent = p;\r\n    l.parent = p.parent;\r\n    if (p.parent == null)\r\n      this.root_ = l;\r\n    else if (p.parent.right == p)\r\n      p.parent.right = l;\r\n    else p.parent.left = l;\r\n    l.right = p;\r\n    p.parent = l;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * @return {Object}\r\n */\r\nTreeMap.prototype.getFirstEntry = function() {\r\n  var p = this.root_;\r\n  if (p != null) {\r\n    while (p.left != null) {\r\n      p = p.left;\r\n    }\r\n  }\r\n  return p;\r\n};\r\n\r\n\r\n/**\r\n * @param {Object} t\r\n * @return {Object}\r\n * @private\r\n */\r\nTreeMap.successor = function(t) {\r\n  if (t === null)\r\n    return null;\r\n  else if (t.right !== null) {\r\n    var p = t.right;\r\n    while (p.left !== null) {\r\n      p = p.left;\r\n    }\r\n    return p;\r\n  } else {\r\n    var p = t.parent;\r\n    var ch = t;\r\n    while (p !== null && ch === p.right) {\r\n      ch = p;\r\n      p = p.parent;\r\n    }\r\n    return p;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeMap.prototype.size = function() {\r\n  return this.size_;\r\n};\r\n","import extend from '../../../../extend';\r\nexport default function Lineal() {}\r\nextend(Lineal.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Lineal;\r\n\t}\r\n});\r\n","import Set from './Set'\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/SortedSet.html\r\n *\r\n * @extends {Set}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function SortedSet() {};\r\nSortedSet.prototype = new Set();\r\n","import Collection from './Collection'\r\nimport Iterator from './Iterator'\r\nimport NoSuchElementException from './NoSuchElementException'\r\nimport OperationNotSupported from './OperationNotSupported'\r\nimport SortedSet from './SortedSet'\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/TreeSet.html\r\n *\r\n * @extends {SortedSet}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function TreeSet() {\r\n  /**\r\n   * @type {Array}\r\n   * @private\r\n  */\r\n  this.array_ = [];\r\n\r\n  if (arguments[0] instanceof Collection) {\r\n    this.addAll(arguments[0]);\r\n  }\r\n};\r\nTreeSet.prototype = new SortedSet();\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeSet.prototype.contains = function(o) {\r\n  for (var i = 0, len = this.array_.length; i < len; i++) {\r\n    var e = this.array_[i];\r\n    if (e['compareTo'](o) === 0) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeSet.prototype.add = function(o) {\r\n  if (this.contains(o)) {\r\n    return false;\r\n  }\r\n\r\n  for (var i = 0, len = this.array_.length; i < len; i++) {\r\n    var e = this.array_[i];\r\n    if (e['compareTo'](o) === 1) {\r\n      this.array_.splice(i, 0, o);\r\n      return true;\r\n    }\r\n  }\r\n\r\n  this.array_.push(o);\r\n\r\n  return true;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeSet.prototype.addAll = function(c) {\r\n  for (var i = c.iterator(); i.hasNext();) {\r\n    this.add(i.next());\r\n  }\r\n  return true;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeSet.prototype.remove = function(e) {\r\n  throw new OperationNotSupported();\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeSet.prototype.size = function() {\r\n  return this.array_.length;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeSet.prototype.isEmpty = function() {\r\n  return this.array_.length === 0;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeSet.prototype.toArray = function() {\r\n  var array = [];\r\n\r\n  for (var i = 0, len = this.array_.length; i < len; i++) {\r\n    array.push(this.array_[i]);\r\n  }\r\n\r\n  return array;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nTreeSet.prototype.iterator = function() {\r\n  return new Iterator_(this);\r\n};\r\n\r\n\r\n\r\n/**\r\n * @extends {javascript.util.Iterator}\r\n * @param {javascript.util.TreeSet} treeSet\r\n * @constructor\r\n * @private\r\n */\r\nvar Iterator_ = function(treeSet) {\r\n  /**\r\n   * @type {javascript.util.TreeSet}\r\n   * @private\r\n   */\r\n  this.treeSet_ = treeSet;\r\n  /**\r\n   * @type {number}\r\n   * @private\r\n   */\r\n  this.position_ = 0;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nIterator_.prototype.next = function() {\r\n  if (this.position_ === this.treeSet_.size()) {\r\n    throw new NoSuchElementException();\r\n  }\r\n  return this.treeSet_.array_[this.position_++];\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nIterator_.prototype.hasNext = function() {\r\n  if (this.position_ < this.treeSet_.size()) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nIterator_.prototype.remove = function() {\r\n  throw new OperationNotSupported();\r\n};\r\n","import ArrayList from './ArrayList'\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html\r\n *\r\n * @constructor\r\n * @private\r\n */\r\nexport default function Arrays() {};\r\n\r\n/**\r\n */\r\nArrays.sort = function() {\r\n  var a = arguments[0], i, t, comparator, compare;\r\n  if (arguments.length === 1) {\r\n    compare = function(a, b) {\r\n      return a.compareTo(b);\r\n    }\r\n    a.sort(compare);\r\n    return;\r\n  } else if (arguments.length === 2) {\r\n    comparator = arguments[1];\r\n    compare = function(a, b) {\r\n      return comparator['compare'](a, b);\r\n    };\r\n    a.sort(compare);\r\n  } else if (arguments.length === 3) {\r\n    t = a.slice(arguments[1], arguments[2]);\r\n    t.sort();\r\n    var r = a.slice(0, arguments[1]).concat(t, a.slice(arguments[2], a.length));\r\n    a.splice(0, a.length);\r\n    for (i = 0; i < r.length; i++) {\r\n      a.push(r[i]);\r\n    }\r\n    return;\r\n  } else if (arguments.length === 4) {\r\n    t = a.slice(arguments[1], arguments[2]);\r\n    comparator = arguments[3];\r\n    compare = function(a, b) {\r\n      return comparator['compare'](a, b);\r\n    };\r\n    t.sort(compare);\r\n    r = a.slice(0, arguments[1]).concat(t, a.slice(arguments[2], a.length));\r\n    a.splice(0, a.length);\r\n    for (i = 0; i < r.length; i++) {\r\n      a.push(r[i]);\r\n    }\r\n    return;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * @param {Array} array\r\n * @return {ArrayList}\r\n */\r\nArrays.asList = function(array) {\r\n  var arrayList = new ArrayList();\r\n  for (var i = 0, len = array.length; i < len; i++) {\r\n    arrayList.add(array[i]);\r\n  }\r\n  return arrayList;\r\n};\r\n","import IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport Character from '../../../../java/lang/Character';\r\nexport default function Dimension() {}\r\nextend(Dimension.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Dimension;\r\n\t}\r\n});\r\nDimension.toDimensionSymbol = function (dimensionValue) {\r\n\tswitch (dimensionValue) {\r\n\t\tcase Dimension.FALSE:\r\n\t\t\treturn Dimension.SYM_FALSE;\r\n\t\tcase Dimension.TRUE:\r\n\t\t\treturn Dimension.SYM_TRUE;\r\n\t\tcase Dimension.DONTCARE:\r\n\t\t\treturn Dimension.SYM_DONTCARE;\r\n\t\tcase Dimension.P:\r\n\t\t\treturn Dimension.SYM_P;\r\n\t\tcase Dimension.L:\r\n\t\t\treturn Dimension.SYM_L;\r\n\t\tcase Dimension.A:\r\n\t\t\treturn Dimension.SYM_A;\r\n\t}\r\n\tthrow new IllegalArgumentException(\"Unknown dimension value: \" + dimensionValue);\r\n};\r\nDimension.toDimensionValue = function (dimensionSymbol) {\r\n\tswitch (Character.toUpperCase(dimensionSymbol)) {\r\n\t\tcase Dimension.SYM_FALSE:\r\n\t\t\treturn Dimension.FALSE;\r\n\t\tcase Dimension.SYM_TRUE:\r\n\t\t\treturn Dimension.TRUE;\r\n\t\tcase Dimension.SYM_DONTCARE:\r\n\t\t\treturn Dimension.DONTCARE;\r\n\t\tcase Dimension.SYM_P:\r\n\t\t\treturn Dimension.P;\r\n\t\tcase Dimension.SYM_L:\r\n\t\t\treturn Dimension.L;\r\n\t\tcase Dimension.SYM_A:\r\n\t\t\treturn Dimension.A;\r\n\t}\r\n\tthrow new IllegalArgumentException(\"Unknown dimension symbol: \" + dimensionSymbol);\r\n};\r\nDimension.P = 0;\r\nDimension.L = 1;\r\nDimension.A = 2;\r\nDimension.FALSE = -1;\r\nDimension.TRUE = -2;\r\nDimension.DONTCARE = -3;\r\nDimension.SYM_FALSE = 'F';\r\nDimension.SYM_TRUE = 'T';\r\nDimension.SYM_DONTCARE = '*';\r\nDimension.SYM_P = '0';\r\nDimension.SYM_L = '1';\r\nDimension.SYM_A = '2';\r\n","import extend from '../../../../extend';\r\nexport default function GeometryFilter() {}\r\nextend(GeometryFilter.prototype, {\r\n\tfilter: function (geom) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryFilter;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nexport default function CoordinateSequenceFilter() {}\r\nextend(CoordinateSequenceFilter.prototype, {\r\n\tfilter: function (seq, i) {},\r\n\tisDone: function () {},\r\n\tisGeometryChanged: function () {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateSequenceFilter;\r\n\t}\r\n});\r\n","import TreeSet from '../../../../java/util/TreeSet';\r\nimport Geometry from './Geometry';\r\nimport Arrays from '../../../../java/util/Arrays';\r\nimport CoordinateFilter from './CoordinateFilter';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport GeometryComponentFilter from './GeometryComponentFilter';\r\nimport Dimension from './Dimension';\r\nimport GeometryFilter from './GeometryFilter';\r\nimport CoordinateSequenceFilter from './CoordinateSequenceFilter';\r\nimport Envelope from './Envelope';\r\nimport Assert from '../util/Assert';\r\nimport inherits from '../../../../inherits';\r\nexport default function GeometryCollection() {\r\n\tthis.geometries = null;\r\n\tlet geometries = arguments[0], factory = arguments[1];\r\n\tGeometry.call(this, factory);\r\n\tif (geometries === null) {\r\n\t\tgeometries = [];\r\n\t}\r\n\tif (Geometry.hasNullElements(geometries)) {\r\n\t\tthrow new IllegalArgumentException(\"geometries must not contain null elements\");\r\n\t}\r\n\tthis.geometries = geometries;\r\n}\r\ninherits(GeometryCollection, Geometry);\r\nextend(GeometryCollection.prototype, {\r\n\tcomputeEnvelopeInternal: function () {\r\n\t\tvar envelope = new Envelope();\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tenvelope.expandToInclude(this.geometries[i].getEnvelopeInternal());\r\n\t\t}\r\n\t\treturn envelope;\r\n\t},\r\n\tgetGeometryN: function (n) {\r\n\t\treturn this.geometries[n];\r\n\t},\r\n\tgetSortIndex: function () {\r\n\t\treturn Geometry.SORTINDEX_GEOMETRYCOLLECTION;\r\n\t},\r\n\tgetCoordinates: function () {\r\n\t\tvar coordinates = new Array(this.getNumPoints()).fill(null);\r\n\t\tvar k = -1;\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tvar childCoordinates = this.geometries[i].getCoordinates();\r\n\t\t\tfor (var j = 0; j < childCoordinates.length; j++) {\r\n\t\t\t\tk++;\r\n\t\t\t\tcoordinates[k] = childCoordinates[j];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn coordinates;\r\n\t},\r\n\tgetArea: function () {\r\n\t\tvar area = 0.0;\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tarea += this.geometries[i].getArea();\r\n\t\t}\r\n\t\treturn area;\r\n\t},\r\n\tequalsExact: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet other = arguments[0], tolerance = arguments[1];\r\n\t\t\tif (!this.isEquivalentClass(other)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar otherCollection = other;\r\n\t\t\tif (this.geometries.length !== otherCollection.geometries.length) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\t\tif (!this.geometries[i].equalsExact(otherCollection.geometries[i], tolerance)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} else return Geometry.prototype.equalsExact.apply(this, arguments);\r\n\t},\r\n\tnormalize: function () {\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tthis.geometries[i].normalize();\r\n\t\t}\r\n\t\tArrays.sort(this.geometries);\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\tif (this.isEmpty()) return null;\r\n\t\treturn this.geometries[0].getCoordinate();\r\n\t},\r\n\tgetBoundaryDimension: function () {\r\n\t\tvar dimension = Dimension.FALSE;\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tdimension = Math.max(dimension, this.geometries[i].getBoundaryDimension());\r\n\t\t}\r\n\t\treturn dimension;\r\n\t},\r\n\tgetDimension: function () {\r\n\t\tvar dimension = Dimension.FALSE;\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tdimension = Math.max(dimension, this.geometries[i].getDimension());\r\n\t\t}\r\n\t\treturn dimension;\r\n\t},\r\n\tgetLength: function () {\r\n\t\tvar sum = 0.0;\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tsum += this.geometries[i].getLength();\r\n\t\t}\r\n\t\treturn sum;\r\n\t},\r\n\tgetNumPoints: function () {\r\n\t\tvar numPoints = 0;\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tnumPoints += this.geometries[i].getNumPoints();\r\n\t\t}\r\n\t\treturn numPoints;\r\n\t},\r\n\tgetNumGeometries: function () {\r\n\t\treturn this.geometries.length;\r\n\t},\r\n\treverse: function () {\r\n\t\tvar n = this.geometries.length;\r\n\t\tvar revGeoms = new Array(n).fill(null);\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\trevGeoms[i] = this.geometries[i].reverse();\r\n\t\t}\r\n\t\treturn this.getFactory().createGeometryCollection(revGeoms);\r\n\t},\r\n\tcompareToSameClass: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet o = arguments[0];\r\n\t\t\tvar theseElements = new TreeSet(Arrays.asList(this.geometries));\r\n\t\t\tvar otherElements = new TreeSet(Arrays.asList(o.geometries));\r\n\t\t\treturn this.compare(theseElements, otherElements);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet o = arguments[0], comp = arguments[1];\r\n\t\t\tvar gc = o;\r\n\t\t\tvar n1 = this.getNumGeometries();\r\n\t\t\tvar n2 = gc.getNumGeometries();\r\n\t\t\tvar i = 0;\r\n\t\t\twhile (i < n1 && i < n2) {\r\n\t\t\t\tvar thisGeom = this.getGeometryN(i);\r\n\t\t\t\tvar otherGeom = gc.getGeometryN(i);\r\n\t\t\t\tvar holeComp = thisGeom.compareToSameClass(otherGeom, comp);\r\n\t\t\t\tif (holeComp !== 0) return holeComp;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i < n1) return 1;\r\n\t\t\tif (i < n2) return -1;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t},\r\n\tapply: function () {\r\n\t\tif (hasInterface(arguments[0], CoordinateFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\t\tthis.geometries[i].apply(filter);\r\n\t\t\t}\r\n\t\t} else if (hasInterface(arguments[0], CoordinateSequenceFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tif (this.geometries.length === 0) return null;\r\n\t\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\t\tthis.geometries[i].apply(filter);\r\n\t\t\t\tif (filter.isDone()) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (filter.isGeometryChanged()) this.geometryChanged();\r\n\t\t} else if (hasInterface(arguments[0], GeometryFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfilter.filter(this);\r\n\t\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\t\tthis.geometries[i].apply(filter);\r\n\t\t\t}\r\n\t\t} else if (hasInterface(arguments[0], GeometryComponentFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfilter.filter(this);\r\n\t\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\t\tthis.geometries[i].apply(filter);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetBoundary: function () {\r\n\t\tthis.checkNotGeometryCollection(this);\r\n\t\tAssert.shouldNeverReachHere();\r\n\t\treturn null;\r\n\t},\r\n\tclone: function () {\r\n\t\tvar gc = Geometry.prototype.clone.call(this);\r\n\t\tgc.geometries = new Array(this.geometries.length).fill(null);\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tgc.geometries[i] = this.geometries[i].clone();\r\n\t\t}\r\n\t\treturn gc;\r\n\t},\r\n\tgetGeometryType: function () {\r\n\t\treturn \"GeometryCollection\";\r\n\t},\r\n\tcopy: function () {\r\n\t\tvar geometries = new Array(this.geometries.length).fill(null);\r\n\t\tfor (var i = 0; i < geometries.length; i++) {\r\n\t\t\tgeometries[i] = this.geometries[i].copy();\r\n\t\t}\r\n\t\treturn new GeometryCollection(geometries, this.factory);\r\n\t},\r\n\tisEmpty: function () {\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tif (!this.geometries[i].isEmpty()) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryCollection;\r\n\t}\r\n});\r\nGeometryCollection.serialVersionUID = -5694727726395021467;\r\n","import Geometry from './Geometry';\r\nimport BoundaryOp from '../operation/BoundaryOp';\r\nimport extend from '../../../../extend';\r\nimport Lineal from './Lineal';\r\nimport GeometryCollection from './GeometryCollection';\r\nimport Dimension from './Dimension';\r\nimport inherits from '../../../../inherits';\r\nexport default function MultiLineString() {\r\n\tlet lineStrings = arguments[0], factory = arguments[1];\r\n\tGeometryCollection.call(this, lineStrings, factory);\r\n}\r\ninherits(MultiLineString, GeometryCollection);\r\nextend(MultiLineString.prototype, {\r\n\tgetSortIndex: function () {\r\n\t\treturn Geometry.SORTINDEX_MULTILINESTRING;\r\n\t},\r\n\tequalsExact: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet other = arguments[0], tolerance = arguments[1];\r\n\t\t\tif (!this.isEquivalentClass(other)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn GeometryCollection.prototype.equalsExact.call(this, other, tolerance);\r\n\t\t} else return GeometryCollection.prototype.equalsExact.apply(this, arguments);\r\n\t},\r\n\tgetBoundaryDimension: function () {\r\n\t\tif (this.isClosed()) {\r\n\t\t\treturn Dimension.FALSE;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\tisClosed: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tif (!this.geometries[i].isClosed()) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tgetDimension: function () {\r\n\t\treturn 1;\r\n\t},\r\n\treverse: function () {\r\n\t\tvar nLines = this.geometries.length;\r\n\t\tvar revLines = new Array(nLines).fill(null);\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\trevLines[nLines - 1 - i] = this.geometries[i].reverse();\r\n\t\t}\r\n\t\treturn this.getFactory().createMultiLineString(revLines);\r\n\t},\r\n\tgetBoundary: function () {\r\n\t\treturn new BoundaryOp(this).getBoundary();\r\n\t},\r\n\tgetGeometryType: function () {\r\n\t\treturn \"MultiLineString\";\r\n\t},\r\n\tcopy: function () {\r\n\t\tvar lineStrings = new Array(this.geometries.length).fill(null);\r\n\t\tfor (var i = 0; i < lineStrings.length; i++) {\r\n\t\t\tlineStrings[i] = this.geometries[i].copy();\r\n\t\t}\r\n\t\treturn new MultiLineString(lineStrings, this.factory);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Lineal];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MultiLineString;\r\n\t}\r\n});\r\nMultiLineString.serialVersionUID = 8166665132445433741;\r\n","import LineString from '../geom/LineString';\r\nimport BoundaryNodeRule from '../algorithm/BoundaryNodeRule';\r\nimport extend from '../../../../extend';\r\nimport CoordinateArrays from '../geom/CoordinateArrays';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport TreeMap from '../../../../java/util/TreeMap';\r\nimport MultiLineString from '../geom/MultiLineString';\r\nexport default function BoundaryOp() {\r\n\tthis.geom = null;\r\n\tthis.geomFact = null;\r\n\tthis.bnRule = null;\r\n\tthis.endpointMap = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet geom = arguments[0];\r\n\t\tBoundaryOp.call(this, geom, BoundaryNodeRule.MOD2_BOUNDARY_RULE);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet geom = arguments[0], bnRule = arguments[1];\r\n\t\tthis.geom = geom;\r\n\t\tthis.geomFact = geom.getFactory();\r\n\t\tthis.bnRule = bnRule;\r\n\t}\r\n}\r\nextend(BoundaryOp.prototype, {\r\n\tboundaryMultiLineString: function (mLine) {\r\n\t\tif (this.geom.isEmpty()) {\r\n\t\t\treturn this.getEmptyMultiPoint();\r\n\t\t}\r\n\t\tvar bdyPts = this.computeBoundaryCoordinates(mLine);\r\n\t\tif (bdyPts.length === 1) {\r\n\t\t\treturn this.geomFact.createPoint(bdyPts[0]);\r\n\t\t}\r\n\t\treturn this.geomFact.createMultiPointFromCoords(bdyPts);\r\n\t},\r\n\tgetBoundary: function () {\r\n\t\tif (this.geom instanceof LineString) return this.boundaryLineString(this.geom);\r\n\t\tif (this.geom instanceof MultiLineString) return this.boundaryMultiLineString(this.geom);\r\n\t\treturn this.geom.getBoundary();\r\n\t},\r\n\tboundaryLineString: function (line) {\r\n\t\tif (this.geom.isEmpty()) {\r\n\t\t\treturn this.getEmptyMultiPoint();\r\n\t\t}\r\n\t\tif (line.isClosed()) {\r\n\t\t\tvar closedEndpointOnBoundary = this.bnRule.isInBoundary(2);\r\n\t\t\tif (closedEndpointOnBoundary) {\r\n\t\t\t\treturn line.getStartPoint();\r\n\t\t\t} else {\r\n\t\t\t\treturn this.geomFact.createMultiPoint();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.geomFact.createMultiPoint([line.getStartPoint(), line.getEndPoint()]);\r\n\t},\r\n\tgetEmptyMultiPoint: function () {\r\n\t\treturn this.geomFact.createMultiPoint();\r\n\t},\r\n\tcomputeBoundaryCoordinates: function (mLine) {\r\n\t\tvar bdyPts = new ArrayList();\r\n\t\tthis.endpointMap = new TreeMap();\r\n\t\tfor (var i = 0; i < mLine.getNumGeometries(); i++) {\r\n\t\t\tvar line = mLine.getGeometryN(i);\r\n\t\t\tif (line.getNumPoints() === 0) continue;\r\n\t\t\tthis.addEndpoint(line.getCoordinateN(0));\r\n\t\t\tthis.addEndpoint(line.getCoordinateN(line.getNumPoints() - 1));\r\n\t\t}\r\n\t\tfor (var it = this.endpointMap.entrySet().iterator(); it.hasNext(); ) {\r\n\t\t\tvar entry = it.next();\r\n\t\t\tvar counter = entry.getValue();\r\n\t\t\tvar valence = counter.count;\r\n\t\t\tif (this.bnRule.isInBoundary(valence)) {\r\n\t\t\t\tbdyPts.add(entry.getKey());\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn CoordinateArrays.toCoordinateArray(bdyPts);\r\n\t},\r\n\taddEndpoint: function (pt) {\r\n\t\tvar counter = this.endpointMap.get(pt);\r\n\t\tif (counter === null) {\r\n\t\t\tcounter = new Counter();\r\n\t\t\tthis.endpointMap.put(pt, counter);\r\n\t\t}\r\n\t\tcounter.count++;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BoundaryOp;\r\n\t}\r\n});\r\nBoundaryOp.getBoundary = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet g = arguments[0];\r\n\t\tvar bop = new BoundaryOp(g);\r\n\t\treturn bop.getBoundary();\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet g = arguments[0], bnRule = arguments[1];\r\n\t\tvar bop = new BoundaryOp(g, bnRule);\r\n\t\treturn bop.getBoundary();\r\n\t}\r\n};\r\nfunction Counter() {\r\n\tthis.count = null;\r\n}\r\nextend(Counter.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Counter;\r\n\t}\r\n});\r\n","export default function PrintStream () {}\r\n","export default function StringReader () {}\r\n","export default function DecimalFormat () {}\r\n","export default function ByteArrayOutputStream () {}\r\n","export default function IOException () {}\r\n","export default function LineNumberReader () {}\r\n","import PrintStream from '../../../../java/io/PrintStream';\r\nimport StringReader from '../../../../java/io/StringReader';\r\nimport DecimalFormat from '../../../../java/text/DecimalFormat';\r\nimport extend from '../../../../extend';\r\nimport System from '../../../../java/lang/System';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport ByteArrayOutputStream from '../../../../java/io/ByteArrayOutputStream';\r\nimport Assert from './Assert';\r\nimport IOException from '../../../../java/io/IOException';\r\nimport LineNumberReader from '../../../../java/io/LineNumberReader';\r\nexport default function StringUtil() {}\r\nextend(StringUtil.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn StringUtil;\r\n\t}\r\n});\r\nStringUtil.chars = function (c, n) {\r\n\tvar ch = new Array(n).fill(null);\r\n\tfor (var i = 0; i < n; i++) {\r\n\t\tch[i] = c;\r\n\t}\r\n\treturn new String(ch);\r\n};\r\nStringUtil.getStackTrace = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet t = arguments[0];\r\n\t\tvar os = new ByteArrayOutputStream();\r\n\t\tvar ps = new PrintStream(os);\r\n\t\tt.printStackTrace(ps);\r\n\t\treturn os.toString();\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet t = arguments[0], depth = arguments[1];\r\n\t\tvar stackTrace = \"\";\r\n\t\tvar stringReader = new StringReader(StringUtil.getStackTrace(t));\r\n\t\tvar lineNumberReader = new LineNumberReader(stringReader);\r\n\t\tfor (var i = 0; i < depth; i++) {\r\n\t\t\ttry {\r\n\t\t\t\tstackTrace += lineNumberReader.readLine() + StringUtil.NEWLINE;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (e instanceof IOException) {\r\n\t\t\t\t\tAssert.shouldNeverReachHere();\r\n\t\t\t\t} else throw e;\r\n\t\t\t} finally {}\r\n\t\t}\r\n\t\treturn stackTrace;\r\n\t}\r\n};\r\nStringUtil.split = function (s, separator) {\r\n\tvar separatorlen = separator.length;\r\n\tvar tokenList = new ArrayList();\r\n\tvar tmpString = \"\" + s;\r\n\tvar pos = tmpString.indexOf(separator);\r\n\twhile (pos >= 0) {\r\n\t\tvar token = tmpString.substring(0, pos);\r\n\t\ttokenList.add(token);\r\n\t\ttmpString = tmpString.substring(pos + separatorlen);\r\n\t\tpos = tmpString.indexOf(separator);\r\n\t}\r\n\tif (tmpString.length > 0) tokenList.add(tmpString);\r\n\tvar res = new Array(tokenList.size()).fill(null);\r\n\tfor (var i = 0; i < res.length; i++) {\r\n\t\tres[i] = tokenList.get(i);\r\n\t}\r\n\treturn res;\r\n};\r\nStringUtil.toString = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet d = arguments[0];\r\n\t\treturn StringUtil.SIMPLE_ORDINATE_FORMAT.format(d);\r\n\t}\r\n};\r\nStringUtil.spaces = function (n) {\r\n\treturn StringUtil.chars(' ', n);\r\n};\r\nStringUtil.NEWLINE = System.getProperty(\"line.separator\");\r\nStringUtil.SIMPLE_ORDINATE_FORMAT = new DecimalFormat(\"0.#\");\r\n","import StringBuffer from '../../../../java/lang/StringBuffer';\r\nimport StringUtil from '../util/StringUtil';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport CoordinateSequence from './CoordinateSequence';\r\nexport default function CoordinateSequences() {}\r\nextend(CoordinateSequences.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateSequences;\r\n\t}\r\n});\r\nCoordinateSequences.copyCoord = function (src, srcPos, dest, destPos) {\r\n\tvar minDim = Math.min(src.getDimension(), dest.getDimension());\r\n\tfor (var dim = 0; dim < minDim; dim++) {\r\n\t\tdest.setOrdinate(destPos, dim, src.getOrdinate(srcPos, dim));\r\n\t}\r\n};\r\nCoordinateSequences.isRing = function (seq) {\r\n\tvar n = seq.size();\r\n\tif (n === 0) return true;\r\n\tif (n <= 3) return false;\r\n\treturn seq.getOrdinate(0, CoordinateSequence.X) === seq.getOrdinate(n - 1, CoordinateSequence.X) && seq.getOrdinate(0, CoordinateSequence.Y) === seq.getOrdinate(n - 1, CoordinateSequence.Y);\r\n};\r\nCoordinateSequences.isEqual = function (cs1, cs2) {\r\n\tvar cs1Size = cs1.size();\r\n\tvar cs2Size = cs2.size();\r\n\tif (cs1Size !== cs2Size) return false;\r\n\tvar dim = Math.min(cs1.getDimension(), cs2.getDimension());\r\n\tfor (var i = 0; i < cs1Size; i++) {\r\n\t\tfor (var d = 0; d < dim; d++) {\r\n\t\t\tvar v1 = cs1.getOrdinate(i, d);\r\n\t\t\tvar v2 = cs2.getOrdinate(i, d);\r\n\t\t\tif (cs1.getOrdinate(i, d) === cs2.getOrdinate(i, d)) continue;\r\n\t\t\tif (Double.isNaN(v1) && Double.isNaN(v2)) continue;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n};\r\nCoordinateSequences.extend = function (fact, seq, size) {\r\n\tvar newseq = fact.create(size, seq.getDimension());\r\n\tvar n = seq.size();\r\n\tCoordinateSequences.copy(seq, 0, newseq, 0, n);\r\n\tif (n > 0) {\r\n\t\tfor (var i = n; i < size; i++) CoordinateSequences.copy(seq, n - 1, newseq, i, 1);\r\n\t}\r\n\treturn newseq;\r\n};\r\nCoordinateSequences.reverse = function (seq) {\r\n\tvar last = seq.size() - 1;\r\n\tvar mid = Math.trunc(last / 2);\r\n\tfor (var i = 0; i <= mid; i++) {\r\n\t\tCoordinateSequences.swap(seq, i, last - i);\r\n\t}\r\n};\r\nCoordinateSequences.swap = function (seq, i, j) {\r\n\tif (i === j) return null;\r\n\tfor (var dim = 0; dim < seq.getDimension(); dim++) {\r\n\t\tvar tmp = seq.getOrdinate(i, dim);\r\n\t\tseq.setOrdinate(i, dim, seq.getOrdinate(j, dim));\r\n\t\tseq.setOrdinate(j, dim, tmp);\r\n\t}\r\n};\r\nCoordinateSequences.copy = function (src, srcPos, dest, destPos, length) {\r\n\tfor (var i = 0; i < length; i++) {\r\n\t\tCoordinateSequences.copyCoord(src, srcPos + i, dest, destPos + i);\r\n\t}\r\n};\r\nCoordinateSequences.toString = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet cs = arguments[0];\r\n\t\tvar size = cs.size();\r\n\t\tif (size === 0) return \"()\";\r\n\t\tvar dim = cs.getDimension();\r\n\t\tvar buf = new StringBuffer();\r\n\t\tbuf.append('(');\r\n\t\tfor (var i = 0; i < size; i++) {\r\n\t\t\tif (i > 0) buf.append(\" \");\r\n\t\t\tfor (var d = 0; d < dim; d++) {\r\n\t\t\t\tif (d > 0) buf.append(\",\");\r\n\t\t\t\tbuf.append(StringUtil.toString(cs.getOrdinate(i, d)));\r\n\t\t\t}\r\n\t\t}\r\n\t\tbuf.append(')');\r\n\t\treturn buf.toString();\r\n\t}\r\n};\r\nCoordinateSequences.ensureValidRing = function (fact, seq) {\r\n\tvar n = seq.size();\r\n\tif (n === 0) return seq;\r\n\tif (n <= 3) return CoordinateSequences.createClosedRing(fact, seq, 4);\r\n\tvar isClosed = seq.getOrdinate(0, CoordinateSequence.X) === seq.getOrdinate(n - 1, CoordinateSequence.X) && seq.getOrdinate(0, CoordinateSequence.Y) === seq.getOrdinate(n - 1, CoordinateSequence.Y);\r\n\tif (isClosed) return seq;\r\n\treturn CoordinateSequences.createClosedRing(fact, seq, n + 1);\r\n};\r\nCoordinateSequences.createClosedRing = function (fact, seq, size) {\r\n\tvar newseq = fact.create(size, seq.getDimension());\r\n\tvar n = seq.size();\r\n\tCoordinateSequences.copy(seq, 0, newseq, 0, n);\r\n\tfor (var i = n; i < size; i++) CoordinateSequences.copy(seq, 0, newseq, i, 1);\r\n\treturn newseq;\r\n};\r\n","import CGAlgorithms from '../algorithm/CGAlgorithms';\r\nimport Geometry from './Geometry';\r\nimport CoordinateFilter from './CoordinateFilter';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport BoundaryOp from '../operation/BoundaryOp';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport Lineal from './Lineal';\r\nimport CoordinateSequences from './CoordinateSequences';\r\nimport GeometryComponentFilter from './GeometryComponentFilter';\r\nimport Dimension from './Dimension';\r\nimport GeometryFilter from './GeometryFilter';\r\nimport CoordinateSequenceFilter from './CoordinateSequenceFilter';\r\nimport Envelope from './Envelope';\r\nimport inherits from '../../../../inherits';\r\nexport default function LineString() {\r\n\tthis.points = null;\r\n\tlet points = arguments[0], factory = arguments[1];\r\n\tGeometry.call(this, factory);\r\n\tthis.init(points);\r\n}\r\ninherits(LineString, Geometry);\r\nextend(LineString.prototype, {\r\n\tcomputeEnvelopeInternal: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn new Envelope();\r\n\t\t}\r\n\t\treturn this.points.expandEnvelope(new Envelope());\r\n\t},\r\n\tisRing: function () {\r\n\t\treturn this.isClosed() && this.isSimple();\r\n\t},\r\n\tgetSortIndex: function () {\r\n\t\treturn Geometry.SORTINDEX_LINESTRING;\r\n\t},\r\n\tgetCoordinates: function () {\r\n\t\treturn this.points.toCoordinateArray();\r\n\t},\r\n\tequalsExact: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet other = arguments[0], tolerance = arguments[1];\r\n\t\t\tif (!this.isEquivalentClass(other)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar otherLineString = other;\r\n\t\t\tif (this.points.size() !== otherLineString.points.size()) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < this.points.size(); i++) {\r\n\t\t\t\tif (!this.equal(this.points.getCoordinate(i), otherLineString.points.getCoordinate(i), tolerance)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} else return Geometry.prototype.equalsExact.apply(this, arguments);\r\n\t},\r\n\tnormalize: function () {\r\n\t\tfor (var i = 0; i < Math.trunc(this.points.size() / 2); i++) {\r\n\t\t\tvar j = this.points.size() - 1 - i;\r\n\t\t\tif (!this.points.getCoordinate(i).equals(this.points.getCoordinate(j))) {\r\n\t\t\t\tif (this.points.getCoordinate(i).compareTo(this.points.getCoordinate(j)) > 0) {\r\n\t\t\t\t\tCoordinateSequences.reverse(this.points);\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\tif (this.isEmpty()) return null;\r\n\t\treturn this.points.getCoordinate(0);\r\n\t},\r\n\tgetBoundaryDimension: function () {\r\n\t\tif (this.isClosed()) {\r\n\t\t\treturn Dimension.FALSE;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\tisClosed: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints() - 1));\r\n\t},\r\n\tgetEndPoint: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.getPointN(this.getNumPoints() - 1);\r\n\t},\r\n\tgetDimension: function () {\r\n\t\treturn 1;\r\n\t},\r\n\tgetLength: function () {\r\n\t\treturn CGAlgorithms.computeLength(this.points);\r\n\t},\r\n\tgetNumPoints: function () {\r\n\t\treturn this.points.size();\r\n\t},\r\n\treverse: function () {\r\n\t\tvar seq = this.points.copy();\r\n\t\tCoordinateSequences.reverse(seq);\r\n\t\tvar revLine = this.getFactory().createLineString(seq);\r\n\t\treturn revLine;\r\n\t},\r\n\tcompareToSameClass: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet o = arguments[0];\r\n\t\t\tvar line = o;\r\n\t\t\tvar i = 0;\r\n\t\t\tvar j = 0;\r\n\t\t\twhile (i < this.points.size() && j < line.points.size()) {\r\n\t\t\t\tvar comparison = this.points.getCoordinate(i).compareTo(line.points.getCoordinate(j));\r\n\t\t\t\tif (comparison !== 0) {\r\n\t\t\t\t\treturn comparison;\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\tif (i < this.points.size()) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\tif (j < line.points.size()) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet o = arguments[0], comp = arguments[1];\r\n\t\t\tvar line = o;\r\n\t\t\treturn comp.compare(this.points, line.points);\r\n\t\t}\r\n\t},\r\n\tapply: function () {\r\n\t\tif (hasInterface(arguments[0], CoordinateFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfor (var i = 0; i < this.points.size(); i++) {\r\n\t\t\t\tfilter.filter(this.points.getCoordinate(i));\r\n\t\t\t}\r\n\t\t} else if (hasInterface(arguments[0], CoordinateSequenceFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tif (this.points.size() === 0) return null;\r\n\t\t\tfor (var i = 0; i < this.points.size(); i++) {\r\n\t\t\t\tfilter.filter(this.points, i);\r\n\t\t\t\tif (filter.isDone()) break;\r\n\t\t\t}\r\n\t\t\tif (filter.isGeometryChanged()) this.geometryChanged();\r\n\t\t} else if (hasInterface(arguments[0], GeometryFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfilter.filter(this);\r\n\t\t} else if (hasInterface(arguments[0], GeometryComponentFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfilter.filter(this);\r\n\t\t}\r\n\t},\r\n\tgetBoundary: function () {\r\n\t\treturn new BoundaryOp(this).getBoundary();\r\n\t},\r\n\tisEquivalentClass: function (other) {\r\n\t\treturn other instanceof LineString;\r\n\t},\r\n\tclone: function () {\r\n\t\tvar ls = Geometry.prototype.clone.call(this);\r\n\t\tls.points = this.points.clone();\r\n\t\treturn ls;\r\n\t},\r\n\tgetCoordinateN: function (n) {\r\n\t\treturn this.points.getCoordinate(n);\r\n\t},\r\n\tgetGeometryType: function () {\r\n\t\treturn \"LineString\";\r\n\t},\r\n\tcopy: function () {\r\n\t\treturn new LineString(this.points.copy(), this.factory);\r\n\t},\r\n\tgetCoordinateSequence: function () {\r\n\t\treturn this.points;\r\n\t},\r\n\tisEmpty: function () {\r\n\t\treturn this.points.size() === 0;\r\n\t},\r\n\tinit: function (points) {\r\n\t\tif (points === null) {\r\n\t\t\tpoints = this.getFactory().getCoordinateSequenceFactory().create([]);\r\n\t\t}\r\n\t\tif (points.size() === 1) {\r\n\t\t\tthrow new IllegalArgumentException(\"Invalid number of points in LineString (found \" + points.size() + \" - must be 0 or >= 2)\");\r\n\t\t}\r\n\t\tthis.points = points;\r\n\t},\r\n\tisCoordinate: function (pt) {\r\n\t\tfor (var i = 0; i < this.points.size(); i++) {\r\n\t\t\tif (this.points.getCoordinate(i).equals(pt)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tgetStartPoint: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.getPointN(0);\r\n\t},\r\n\tgetPointN: function (n) {\r\n\t\treturn this.getFactory().createPoint(this.points.getCoordinate(n));\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Lineal];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineString;\r\n\t}\r\n});\r\nLineString.serialVersionUID = 3110669828065365560;\r\n","import extend from '../../../../extend';\r\nexport default function Puntal() {}\r\nextend(Puntal.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Puntal;\r\n\t}\r\n});\r\n","import Geometry from './Geometry';\r\nimport CoordinateFilter from './CoordinateFilter';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport extend from '../../../../extend';\r\nimport GeometryComponentFilter from './GeometryComponentFilter';\r\nimport Dimension from './Dimension';\r\nimport GeometryFilter from './GeometryFilter';\r\nimport CoordinateSequenceFilter from './CoordinateSequenceFilter';\r\nimport Puntal from './Puntal';\r\nimport Envelope from './Envelope';\r\nimport Assert from '../util/Assert';\r\nimport inherits from '../../../../inherits';\r\nexport default function Point() {\r\n\tthis.coordinates = null;\r\n\tlet coordinates = arguments[0], factory = arguments[1];\r\n\tGeometry.call(this, factory);\r\n\tthis.init(coordinates);\r\n}\r\ninherits(Point, Geometry);\r\nextend(Point.prototype, {\r\n\tcomputeEnvelopeInternal: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn new Envelope();\r\n\t\t}\r\n\t\tvar env = new Envelope();\r\n\t\tenv.expandToInclude(this.coordinates.getX(0), this.coordinates.getY(0));\r\n\t\treturn env;\r\n\t},\r\n\tgetSortIndex: function () {\r\n\t\treturn Geometry.SORTINDEX_POINT;\r\n\t},\r\n\tgetCoordinates: function () {\r\n\t\treturn this.isEmpty() ? [] : [this.getCoordinate()];\r\n\t},\r\n\tequalsExact: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet other = arguments[0], tolerance = arguments[1];\r\n\t\t\tif (!this.isEquivalentClass(other)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (this.isEmpty() && other.isEmpty()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (this.isEmpty() !== other.isEmpty()) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn this.equal(other.getCoordinate(), this.getCoordinate(), tolerance);\r\n\t\t} else return Geometry.prototype.equalsExact.apply(this, arguments);\r\n\t},\r\n\tnormalize: function () {},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.coordinates.size() !== 0 ? this.coordinates.getCoordinate(0) : null;\r\n\t},\r\n\tgetBoundaryDimension: function () {\r\n\t\treturn Dimension.FALSE;\r\n\t},\r\n\tgetDimension: function () {\r\n\t\treturn 0;\r\n\t},\r\n\tgetNumPoints: function () {\r\n\t\treturn this.isEmpty() ? 0 : 1;\r\n\t},\r\n\treverse: function () {\r\n\t\treturn this.copy();\r\n\t},\r\n\tgetX: function () {\r\n\t\tif (this.getCoordinate() === null) {\r\n\t\t\tthrow new IllegalStateException(\"getX called on empty Point\");\r\n\t\t}\r\n\t\treturn this.getCoordinate().x;\r\n\t},\r\n\tcompareToSameClass: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet other = arguments[0];\r\n\t\t\tvar point = other;\r\n\t\t\treturn this.getCoordinate().compareTo(point.getCoordinate());\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet other = arguments[0], comp = arguments[1];\r\n\t\t\tvar point = other;\r\n\t\t\treturn comp.compare(this.coordinates, point.coordinates);\r\n\t\t}\r\n\t},\r\n\tapply: function () {\r\n\t\tif (hasInterface(arguments[0], CoordinateFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tif (this.isEmpty()) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tfilter.filter(this.getCoordinate());\r\n\t\t} else if (hasInterface(arguments[0], CoordinateSequenceFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tif (this.isEmpty()) return null;\r\n\t\t\tfilter.filter(this.coordinates, 0);\r\n\t\t\tif (filter.isGeometryChanged()) this.geometryChanged();\r\n\t\t} else if (hasInterface(arguments[0], GeometryFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfilter.filter(this);\r\n\t\t} else if (hasInterface(arguments[0], GeometryComponentFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfilter.filter(this);\r\n\t\t}\r\n\t},\r\n\tgetBoundary: function () {\r\n\t\treturn this.getFactory().createGeometryCollection(null);\r\n\t},\r\n\tclone: function () {\r\n\t\tvar p = Geometry.prototype.clone.call(this);\r\n\t\tp.coordinates = this.coordinates.clone();\r\n\t\treturn p;\r\n\t},\r\n\tgetGeometryType: function () {\r\n\t\treturn \"Point\";\r\n\t},\r\n\tcopy: function () {\r\n\t\treturn new Point(this.coordinates.copy(), this.factory);\r\n\t},\r\n\tgetCoordinateSequence: function () {\r\n\t\treturn this.coordinates;\r\n\t},\r\n\tgetY: function () {\r\n\t\tif (this.getCoordinate() === null) {\r\n\t\t\tthrow new IllegalStateException(\"getY called on empty Point\");\r\n\t\t}\r\n\t\treturn this.getCoordinate().y;\r\n\t},\r\n\tisEmpty: function () {\r\n\t\treturn this.coordinates.size() === 0;\r\n\t},\r\n\tinit: function (coordinates) {\r\n\t\tif (coordinates === null) {\r\n\t\t\tcoordinates = this.getFactory().getCoordinateSequenceFactory().create([]);\r\n\t\t}\r\n\t\tAssert.isTrue(coordinates.size() <= 1);\r\n\t\tthis.coordinates = coordinates;\r\n\t},\r\n\tisSimple: function () {\r\n\t\treturn true;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Puntal];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Point;\r\n\t}\r\n});\r\nPoint.serialVersionUID = 4902022702746614570;\r\n","import extend from '../../../../extend';\r\nexport default function Polygonal() {}\r\nextend(Polygonal.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Polygonal;\r\n\t}\r\n});\r\n","import CGAlgorithms from '../algorithm/CGAlgorithms';\r\nimport Geometry from './Geometry';\r\nimport Arrays from '../../../../java/util/Arrays';\r\nimport CoordinateFilter from './CoordinateFilter';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport System from '../../../../java/lang/System';\r\nimport GeometryComponentFilter from './GeometryComponentFilter';\r\nimport CoordinateArrays from './CoordinateArrays';\r\nimport Polygonal from './Polygonal';\r\nimport GeometryFilter from './GeometryFilter';\r\nimport CoordinateSequenceFilter from './CoordinateSequenceFilter';\r\nimport inherits from '../../../../inherits';\r\nexport default function Polygon() {\r\n\tthis.shell = null;\r\n\tthis.holes = null;\r\n\tlet shell = arguments[0], holes = arguments[1], factory = arguments[2];\r\n\tGeometry.call(this, factory);\r\n\tif (shell === null) {\r\n\t\tshell = this.getFactory().createLinearRing();\r\n\t}\r\n\tif (holes === null) {\r\n\t\tholes = [];\r\n\t}\r\n\tif (Geometry.hasNullElements(holes)) {\r\n\t\tthrow new IllegalArgumentException(\"holes must not contain null elements\");\r\n\t}\r\n\tif (shell.isEmpty() && Geometry.hasNonEmptyElements(holes)) {\r\n\t\tthrow new IllegalArgumentException(\"shell is empty but holes are not\");\r\n\t}\r\n\tthis.shell = shell;\r\n\tthis.holes = holes;\r\n}\r\ninherits(Polygon, Geometry);\r\nextend(Polygon.prototype, {\r\n\tcomputeEnvelopeInternal: function () {\r\n\t\treturn this.shell.getEnvelopeInternal();\r\n\t},\r\n\tgetSortIndex: function () {\r\n\t\treturn Geometry.SORTINDEX_POLYGON;\r\n\t},\r\n\tgetCoordinates: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tvar coordinates = new Array(this.getNumPoints()).fill(null);\r\n\t\tvar k = -1;\r\n\t\tvar shellCoordinates = this.shell.getCoordinates();\r\n\t\tfor (var x = 0; x < shellCoordinates.length; x++) {\r\n\t\t\tk++;\r\n\t\t\tcoordinates[k] = shellCoordinates[x];\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\tvar childCoordinates = this.holes[i].getCoordinates();\r\n\t\t\tfor (var j = 0; j < childCoordinates.length; j++) {\r\n\t\t\t\tk++;\r\n\t\t\t\tcoordinates[k] = childCoordinates[j];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn coordinates;\r\n\t},\r\n\tgetArea: function () {\r\n\t\tvar area = 0.0;\r\n\t\tarea += Math.abs(CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));\r\n\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\tarea -= Math.abs(CGAlgorithms.signedArea(this.holes[i].getCoordinateSequence()));\r\n\t\t}\r\n\t\treturn area;\r\n\t},\r\n\tisRectangle: function () {\r\n\t\tif (this.getNumInteriorRing() !== 0) return false;\r\n\t\tif (this.shell === null) return false;\r\n\t\tif (this.shell.getNumPoints() !== 5) return false;\r\n\t\tvar seq = this.shell.getCoordinateSequence();\r\n\t\tvar env = this.getEnvelopeInternal();\r\n\t\tfor (var i = 0; i < 5; i++) {\r\n\t\t\tvar x = seq.getX(i);\r\n\t\t\tif (!(x === env.getMinX() || x === env.getMaxX())) return false;\r\n\t\t\tvar y = seq.getY(i);\r\n\t\t\tif (!(y === env.getMinY() || y === env.getMaxY())) return false;\r\n\t\t}\r\n\t\tvar prevX = seq.getX(0);\r\n\t\tvar prevY = seq.getY(0);\r\n\t\tfor (var i = 1; i <= 4; i++) {\r\n\t\t\tvar x = seq.getX(i);\r\n\t\t\tvar y = seq.getY(i);\r\n\t\t\tvar xChanged = x !== prevX;\r\n\t\t\tvar yChanged = y !== prevY;\r\n\t\t\tif (xChanged === yChanged) return false;\r\n\t\t\tprevX = x;\r\n\t\t\tprevY = y;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tequalsExact: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet other = arguments[0], tolerance = arguments[1];\r\n\t\t\tif (!this.isEquivalentClass(other)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar otherPolygon = other;\r\n\t\t\tvar thisShell = this.shell;\r\n\t\t\tvar otherPolygonShell = otherPolygon.shell;\r\n\t\t\tif (!thisShell.equalsExact(otherPolygonShell, tolerance)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (this.holes.length !== otherPolygon.holes.length) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\t\tif (!this.holes[i].equalsExact(otherPolygon.holes[i], tolerance)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} else return Geometry.prototype.equalsExact.apply(this, arguments);\r\n\t},\r\n\tnormalize: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tthis.normalize(this.shell, true);\r\n\t\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\t\tthis.normalize(this.holes[i], false);\r\n\t\t\t}\r\n\t\t\tArrays.sort(this.holes);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet ring = arguments[0], clockwise = arguments[1];\r\n\t\t\tif (ring.isEmpty()) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tvar uniqueCoordinates = new Array(ring.getCoordinates().length - 1).fill(null);\r\n\t\t\tSystem.arraycopy(ring.getCoordinates(), 0, uniqueCoordinates, 0, uniqueCoordinates.length);\r\n\t\t\tvar minCoordinate = CoordinateArrays.minCoordinate(ring.getCoordinates());\r\n\t\t\tCoordinateArrays.scroll(uniqueCoordinates, minCoordinate);\r\n\t\t\tSystem.arraycopy(uniqueCoordinates, 0, ring.getCoordinates(), 0, uniqueCoordinates.length);\r\n\t\t\tring.getCoordinates()[uniqueCoordinates.length] = uniqueCoordinates[0];\r\n\t\t\tif (CGAlgorithms.isCCW(ring.getCoordinates()) === clockwise) {\r\n\t\t\t\tCoordinateArrays.reverse(ring.getCoordinates());\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.shell.getCoordinate();\r\n\t},\r\n\tgetNumInteriorRing: function () {\r\n\t\treturn this.holes.length;\r\n\t},\r\n\tgetBoundaryDimension: function () {\r\n\t\treturn 1;\r\n\t},\r\n\tgetDimension: function () {\r\n\t\treturn 2;\r\n\t},\r\n\tgetLength: function () {\r\n\t\tvar len = 0.0;\r\n\t\tlen += this.shell.getLength();\r\n\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\tlen += this.holes[i].getLength();\r\n\t\t}\r\n\t\treturn len;\r\n\t},\r\n\tgetNumPoints: function () {\r\n\t\tvar numPoints = this.shell.getNumPoints();\r\n\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\tnumPoints += this.holes[i].getNumPoints();\r\n\t\t}\r\n\t\treturn numPoints;\r\n\t},\r\n\treverse: function () {\r\n\t\tvar poly = this.copy();\r\n\t\tpoly.shell = this.shell.copy().reverse();\r\n\t\tpoly.holes = new Array(this.holes.length).fill(null);\r\n\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\tpoly.holes[i] = this.holes[i].copy().reverse();\r\n\t\t}\r\n\t\treturn poly;\r\n\t},\r\n\tconvexHull: function () {\r\n\t\treturn this.getExteriorRing().convexHull();\r\n\t},\r\n\tcompareToSameClass: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet o = arguments[0];\r\n\t\t\tvar thisShell = this.shell;\r\n\t\t\tvar otherShell = o.shell;\r\n\t\t\treturn thisShell.compareToSameClass(otherShell);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet o = arguments[0], comp = arguments[1];\r\n\t\t\tvar poly = o;\r\n\t\t\tvar thisShell = this.shell;\r\n\t\t\tvar otherShell = poly.shell;\r\n\t\t\tvar shellComp = thisShell.compareToSameClass(otherShell, comp);\r\n\t\t\tif (shellComp !== 0) return shellComp;\r\n\t\t\tvar nHole1 = this.getNumInteriorRing();\r\n\t\t\tvar nHole2 = poly.getNumInteriorRing();\r\n\t\t\tvar i = 0;\r\n\t\t\twhile (i < nHole1 && i < nHole2) {\r\n\t\t\t\tvar thisHole = this.getInteriorRingN(i);\r\n\t\t\t\tvar otherHole = poly.getInteriorRingN(i);\r\n\t\t\t\tvar holeComp = thisHole.compareToSameClass(otherHole, comp);\r\n\t\t\t\tif (holeComp !== 0) return holeComp;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i < nHole1) return 1;\r\n\t\t\tif (i < nHole2) return -1;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t},\r\n\tapply: function () {\r\n\t\tif (hasInterface(arguments[0], CoordinateFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tthis.shell.apply(filter);\r\n\t\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\t\tthis.holes[i].apply(filter);\r\n\t\t\t}\r\n\t\t} else if (hasInterface(arguments[0], CoordinateSequenceFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tthis.shell.apply(filter);\r\n\t\t\tif (!filter.isDone()) {\r\n\t\t\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\t\t\tthis.holes[i].apply(filter);\r\n\t\t\t\t\tif (filter.isDone()) break;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (filter.isGeometryChanged()) this.geometryChanged();\r\n\t\t} else if (hasInterface(arguments[0], GeometryFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfilter.filter(this);\r\n\t\t} else if (hasInterface(arguments[0], GeometryComponentFilter)) {\r\n\t\t\tlet filter = arguments[0];\r\n\t\t\tfilter.filter(this);\r\n\t\t\tthis.shell.apply(filter);\r\n\t\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\t\tthis.holes[i].apply(filter);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetBoundary: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn this.getFactory().createMultiLineString();\r\n\t\t}\r\n\t\tvar rings = new Array(this.holes.length + 1).fill(null);\r\n\t\trings[0] = this.shell;\r\n\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\trings[i + 1] = this.holes[i];\r\n\t\t}\r\n\t\tif (rings.length <= 1) return this.getFactory().createLinearRing(rings[0].getCoordinateSequence());\r\n\t\treturn this.getFactory().createMultiLineString(rings);\r\n\t},\r\n\tclone: function () {\r\n\t\tvar poly = Geometry.prototype.clone.call(this);\r\n\t\tpoly.shell = this.shell.clone();\r\n\t\tpoly.holes = new Array(this.holes.length).fill(null);\r\n\t\tfor (var i = 0; i < this.holes.length; i++) {\r\n\t\t\tpoly.holes[i] = this.holes[i].clone();\r\n\t\t}\r\n\t\treturn poly;\r\n\t},\r\n\tgetGeometryType: function () {\r\n\t\treturn \"Polygon\";\r\n\t},\r\n\tcopy: function () {\r\n\t\tvar shell = this.shell.copy();\r\n\t\tvar holes = new Array(this.holes.length).fill(null);\r\n\t\tfor (var i = 0; i < holes.length; i++) {\r\n\t\t\tholes[i] = this.holes[i].copy();\r\n\t\t}\r\n\t\treturn new Polygon(shell, holes, this.factory);\r\n\t},\r\n\tgetExteriorRing: function () {\r\n\t\treturn this.shell;\r\n\t},\r\n\tisEmpty: function () {\r\n\t\treturn this.shell.isEmpty();\r\n\t},\r\n\tgetInteriorRingN: function (n) {\r\n\t\treturn this.holes[n];\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Polygonal];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Polygon;\r\n\t}\r\n});\r\nPolygon.serialVersionUID = -3494792200821764533;\r\n","import Geometry from './Geometry';\r\nimport extend from '../../../../extend';\r\nimport GeometryCollection from './GeometryCollection';\r\nimport Dimension from './Dimension';\r\nimport Puntal from './Puntal';\r\nimport inherits from '../../../../inherits';\r\nexport default function MultiPoint() {\r\n\tlet points = arguments[0], factory = arguments[1];\r\n\tGeometryCollection.call(this, points, factory);\r\n}\r\ninherits(MultiPoint, GeometryCollection);\r\nextend(MultiPoint.prototype, {\r\n\tgetSortIndex: function () {\r\n\t\treturn Geometry.SORTINDEX_MULTIPOINT;\r\n\t},\r\n\tisValid: function () {\r\n\t\treturn true;\r\n\t},\r\n\tequalsExact: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet other = arguments[0], tolerance = arguments[1];\r\n\t\t\tif (!this.isEquivalentClass(other)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn GeometryCollection.prototype.equalsExact.call(this, other, tolerance);\r\n\t\t} else return GeometryCollection.prototype.equalsExact.apply(this, arguments);\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet n = arguments[0];\r\n\t\t\treturn this.geometries[n].getCoordinate();\r\n\t\t} else return GeometryCollection.prototype.getCoordinate.apply(this, arguments);\r\n\t},\r\n\tgetBoundaryDimension: function () {\r\n\t\treturn Dimension.FALSE;\r\n\t},\r\n\tgetDimension: function () {\r\n\t\treturn 0;\r\n\t},\r\n\tgetBoundary: function () {\r\n\t\treturn this.getFactory().createGeometryCollection(null);\r\n\t},\r\n\tgetGeometryType: function () {\r\n\t\treturn \"MultiPoint\";\r\n\t},\r\n\tcopy: function () {\r\n\t\tvar points = new Array(this.geometries.length).fill(null);\r\n\t\tfor (var i = 0; i < points.length; i++) {\r\n\t\t\tpoints[i] = this.geometries[i].copy();\r\n\t\t}\r\n\t\treturn new MultiPoint(points, this.factory);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Puntal];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MultiPoint;\r\n\t}\r\n});\r\nMultiPoint.serialVersionUID = -8048474874175355449;\r\n","import LineString from './LineString';\r\nimport Geometry from './Geometry';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport GeometryFactory from './GeometryFactory';\r\nimport Coordinate from './Coordinate';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport CoordinateSequences from './CoordinateSequences';\r\nimport CoordinateSequence from './CoordinateSequence';\r\nimport Dimension from './Dimension';\r\nimport inherits from '../../../../inherits';\r\nexport default function LinearRing() {\r\n\tif (arguments[0] instanceof Coordinate && arguments[1] instanceof GeometryFactory) {\r\n\t\tlet points = arguments[0], factory = arguments[1];\r\n\t\tLinearRing.call(this, factory.getCoordinateSequenceFactory().create(points), factory);\r\n\t} else if (hasInterface(arguments[0], CoordinateSequence) && arguments[1] instanceof GeometryFactory) {\r\n\t\tlet points = arguments[0], factory = arguments[1];\r\n\t\tLineString.call(this, points, factory);\r\n\t\tthis.validateConstruction();\r\n\t}\r\n}\r\ninherits(LinearRing, LineString);\r\nextend(LinearRing.prototype, {\r\n\tgetSortIndex: function () {\r\n\t\treturn Geometry.SORTINDEX_LINEARRING;\r\n\t},\r\n\tgetBoundaryDimension: function () {\r\n\t\treturn Dimension.FALSE;\r\n\t},\r\n\tisClosed: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn LineString.prototype.isClosed.call(this);\r\n\t},\r\n\treverse: function () {\r\n\t\tvar seq = this.points.copy();\r\n\t\tCoordinateSequences.reverse(seq);\r\n\t\tvar rev = this.getFactory().createLinearRing(seq);\r\n\t\treturn rev;\r\n\t},\r\n\tvalidateConstruction: function () {\r\n\t\tif (!this.isEmpty() && !LineString.prototype.isClosed.call(this)) {\r\n\t\t\tthrow new IllegalArgumentException(\"Points of LinearRing do not form a closed linestring\");\r\n\t\t}\r\n\t\tif (this.getCoordinateSequence().size() >= 1 && this.getCoordinateSequence().size() < LinearRing.MINIMUM_VALID_SIZE) {\r\n\t\t\tthrow new IllegalArgumentException(\"Invalid number of points in LinearRing (found \" + this.getCoordinateSequence().size() + \" - must be 0 or >= 4)\");\r\n\t\t}\r\n\t},\r\n\tgetGeometryType: function () {\r\n\t\treturn \"LinearRing\";\r\n\t},\r\n\tcopy: function () {\r\n\t\treturn new LinearRing(this.points.copy(), this.factory);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LinearRing;\r\n\t}\r\n});\r\nLinearRing.MINIMUM_VALID_SIZE = 4;\r\nLinearRing.serialVersionUID = -4261142084085851829;\r\n","import Geometry from './Geometry';\r\nimport extend from '../../../../extend';\r\nimport GeometryCollection from './GeometryCollection';\r\nimport Polygonal from './Polygonal';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport inherits from '../../../../inherits';\r\nexport default function MultiPolygon() {\r\n\tlet polygons = arguments[0], factory = arguments[1];\r\n\tGeometryCollection.call(this, polygons, factory);\r\n}\r\ninherits(MultiPolygon, GeometryCollection);\r\nextend(MultiPolygon.prototype, {\r\n\tgetSortIndex: function () {\r\n\t\treturn Geometry.SORTINDEX_MULTIPOLYGON;\r\n\t},\r\n\tequalsExact: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet other = arguments[0], tolerance = arguments[1];\r\n\t\t\tif (!this.isEquivalentClass(other)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn GeometryCollection.prototype.equalsExact.call(this, other, tolerance);\r\n\t\t} else return GeometryCollection.prototype.equalsExact.apply(this, arguments);\r\n\t},\r\n\tgetBoundaryDimension: function () {\r\n\t\treturn 1;\r\n\t},\r\n\tgetDimension: function () {\r\n\t\treturn 2;\r\n\t},\r\n\treverse: function () {\r\n\t\tvar n = this.geometries.length;\r\n\t\tvar revGeoms = new Array(n).fill(null);\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\trevGeoms[i] = this.geometries[i].reverse();\r\n\t\t}\r\n\t\treturn this.getFactory().createMultiPolygon(revGeoms);\r\n\t},\r\n\tgetBoundary: function () {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\treturn this.getFactory().createMultiLineString();\r\n\t\t}\r\n\t\tvar allRings = new ArrayList();\r\n\t\tfor (var i = 0; i < this.geometries.length; i++) {\r\n\t\t\tvar polygon = this.geometries[i];\r\n\t\t\tvar rings = polygon.getBoundary();\r\n\t\t\tfor (var j = 0; j < rings.getNumGeometries(); j++) {\r\n\t\t\t\tallRings.add(rings.getGeometryN(j));\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar allRingsArray = new Array(allRings.size()).fill(null);\r\n\t\treturn this.getFactory().createMultiLineString(allRings.toArray(allRingsArray));\r\n\t},\r\n\tgetGeometryType: function () {\r\n\t\treturn \"MultiPolygon\";\r\n\t},\r\n\tcopy: function () {\r\n\t\tvar polygons = new Array(this.geometries.length).fill(null);\r\n\t\tfor (var i = 0; i < polygons.length; i++) {\r\n\t\t\tpolygons[i] = this.geometries[i].copy();\r\n\t\t}\r\n\t\treturn new MultiPolygon(polygons, this.factory);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Polygonal];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MultiPolygon;\r\n\t}\r\n});\r\nMultiPolygon.serialVersionUID = -551033529766975875;\r\n","import LineString from '../LineString';\r\nimport Point from '../Point';\r\nimport Polygon from '../Polygon';\r\nimport MultiPoint from '../MultiPoint';\r\nimport LinearRing from '../LinearRing';\r\nimport extend from '../../../../../extend';\r\nimport MultiPolygon from '../MultiPolygon';\r\nimport GeometryCollection from '../GeometryCollection';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Assert from '../../util/Assert';\r\nimport MultiLineString from '../MultiLineString';\r\nexport default function GeometryEditor() {\r\n\tthis.factory = null;\r\n\tthis.isUserDataCopied = false;\r\n\tif (arguments.length === 0) {} else if (arguments.length === 1) {\r\n\t\tlet factory = arguments[0];\r\n\t\tthis.factory = factory;\r\n\t}\r\n}\r\nextend(GeometryEditor.prototype, {\r\n\tsetCopyUserData: function (isUserDataCopied) {\r\n\t\tthis.isUserDataCopied = isUserDataCopied;\r\n\t},\r\n\tedit: function (geometry, operation) {\r\n\t\tif (geometry === null) return null;\r\n\t\tvar result = this.editInternal(geometry, operation);\r\n\t\tif (this.isUserDataCopied) {\r\n\t\t\tresult.setUserData(geometry.getUserData());\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\teditInternal: function (geometry, operation) {\r\n\t\tif (this.factory === null) this.factory = geometry.getFactory();\r\n\t\tif (geometry instanceof GeometryCollection) {\r\n\t\t\treturn this.editGeometryCollection(geometry, operation);\r\n\t\t}\r\n\t\tif (geometry instanceof Polygon) {\r\n\t\t\treturn this.editPolygon(geometry, operation);\r\n\t\t}\r\n\t\tif (geometry instanceof Point) {\r\n\t\t\treturn operation.edit(geometry, this.factory);\r\n\t\t}\r\n\t\tif (geometry instanceof LineString) {\r\n\t\t\treturn operation.edit(geometry, this.factory);\r\n\t\t}\r\n\t\tAssert.shouldNeverReachHere(\"Unsupported Geometry class: \" + geometry.getClass().getName());\r\n\t\treturn null;\r\n\t},\r\n\teditGeometryCollection: function (collection, operation) {\r\n\t\tvar collectionForType = operation.edit(collection, this.factory);\r\n\t\tvar geometries = new ArrayList();\r\n\t\tfor (var i = 0; i < collectionForType.getNumGeometries(); i++) {\r\n\t\t\tvar geometry = this.edit(collectionForType.getGeometryN(i), operation);\r\n\t\t\tif (geometry === null || geometry.isEmpty()) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tgeometries.add(geometry);\r\n\t\t}\r\n\t\tif (collectionForType.getClass() === MultiPoint) {\r\n\t\t\treturn this.factory.createMultiPoint(geometries.toArray([]));\r\n\t\t}\r\n\t\tif (collectionForType.getClass() === MultiLineString) {\r\n\t\t\treturn this.factory.createMultiLineString(geometries.toArray([]));\r\n\t\t}\r\n\t\tif (collectionForType.getClass() === MultiPolygon) {\r\n\t\t\treturn this.factory.createMultiPolygon(geometries.toArray([]));\r\n\t\t}\r\n\t\treturn this.factory.createGeometryCollection(geometries.toArray([]));\r\n\t},\r\n\teditPolygon: function (polygon, operation) {\r\n\t\tvar newPolygon = operation.edit(polygon, this.factory);\r\n\t\tif (newPolygon === null) newPolygon = this.factory.createPolygon(null);\r\n\t\tif (newPolygon.isEmpty()) {\r\n\t\t\treturn newPolygon;\r\n\t\t}\r\n\t\tvar shell = this.edit(newPolygon.getExteriorRing(), operation);\r\n\t\tif (shell === null || shell.isEmpty()) {\r\n\t\t\treturn this.factory.createPolygon();\r\n\t\t}\r\n\t\tvar holes = new ArrayList();\r\n\t\tfor (var i = 0; i < newPolygon.getNumInteriorRing(); i++) {\r\n\t\t\tvar hole = this.edit(newPolygon.getInteriorRingN(i), operation);\r\n\t\t\tif (hole === null || hole.isEmpty()) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tholes.add(hole);\r\n\t\t}\r\n\t\treturn this.factory.createPolygon(shell, holes.toArray([]));\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryEditor;\r\n\t}\r\n});\r\nfunction GeometryEditorOperation() {}\r\nGeometryEditor.GeometryEditorOperation = GeometryEditorOperation;\r\nfunction NoOpGeometryOperation() {}\r\nextend(NoOpGeometryOperation.prototype, {\r\n\tedit: function (geometry, factory) {\r\n\t\treturn geometry;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryEditorOperation];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NoOpGeometryOperation;\r\n\t}\r\n});\r\nfunction CoordinateOperation() {}\r\nextend(CoordinateOperation.prototype, {\r\n\tedit: function (geometry, factory) {\r\n\t\tvar coords = this.editCoordinates(geometry.getCoordinates(), geometry);\r\n\t\tif (coords === null) return geometry;\r\n\t\tif (geometry instanceof LinearRing) {\r\n\t\t\treturn factory.createLinearRing(coords);\r\n\t\t}\r\n\t\tif (geometry instanceof LineString) {\r\n\t\t\treturn factory.createLineString(coords);\r\n\t\t}\r\n\t\tif (geometry instanceof Point) {\r\n\t\t\tif (coords.length > 0) {\r\n\t\t\t\treturn factory.createPoint(coords[0]);\r\n\t\t\t} else {\r\n\t\t\t\treturn factory.createPoint();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn geometry;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryEditorOperation];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateOperation;\r\n\t}\r\n});\r\nfunction CoordinateSequenceOperation() {}\r\nextend(CoordinateSequenceOperation.prototype, {\r\n\tedit: function (geometry, factory) {\r\n\t\tif (geometry instanceof LinearRing) {\r\n\t\t\treturn factory.createLinearRing(this.edit(geometry.getCoordinateSequence(), geometry));\r\n\t\t}\r\n\t\tif (geometry instanceof LineString) {\r\n\t\t\treturn factory.createLineString(this.edit(geometry.getCoordinateSequence(), geometry));\r\n\t\t}\r\n\t\tif (geometry instanceof Point) {\r\n\t\t\treturn factory.createPoint(this.edit(geometry.getCoordinateSequence(), geometry));\r\n\t\t}\r\n\t\treturn geometry;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryEditorOperation];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateSequenceOperation;\r\n\t}\r\n});\r\nGeometryEditor.NoOpGeometryOperation = NoOpGeometryOperation;\r\nGeometryEditor.CoordinateOperation = CoordinateOperation;\r\nGeometryEditor.CoordinateSequenceOperation = CoordinateSequenceOperation;\r\n","import StringBuffer from '../../../../../java/lang/StringBuffer';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport Coordinate from '../Coordinate';\r\nimport IllegalArgumentException from '../../../../../java/lang/IllegalArgumentException';\r\nimport Double from '../../../../../java/lang/Double';\r\nimport extend from '../../../../../extend';\r\nimport CoordinateSequence from '../CoordinateSequence';\r\nimport Serializable from '../../../../../java/io/Serializable';\r\nexport default function CoordinateArraySequence() {\r\n\tthis.dimension = 3;\r\n\tthis.coordinates = null;\r\n\tif (arguments.length === 1) {\r\n\t\tif (arguments[0] instanceof Array) {\r\n\t\t\tlet coordinates = arguments[0];\r\n\t\t\tCoordinateArraySequence.call(this, coordinates, 3);\r\n\t\t} else if (Number.isInteger(arguments[0])) {\r\n\t\t\tlet size = arguments[0];\r\n\t\t\tthis.coordinates = new Array(size).fill(null);\r\n\t\t\tfor (var i = 0; i < size; i++) {\r\n\t\t\t\tthis.coordinates[i] = new Coordinate();\r\n\t\t\t}\r\n\t\t} else if (hasInterface(arguments[0], CoordinateSequence)) {\r\n\t\t\tlet coordSeq = arguments[0];\r\n\t\t\tif (coordSeq === null) {\r\n\t\t\t\tthis.coordinates = new Array(0).fill(null);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tthis.dimension = coordSeq.getDimension();\r\n\t\t\tthis.coordinates = new Array(coordSeq.size()).fill(null);\r\n\t\t\tfor (var i = 0; i < this.coordinates.length; i++) {\r\n\t\t\t\tthis.coordinates[i] = coordSeq.getCoordinateCopy(i);\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (arguments.length === 2) {\r\n\t\tif (arguments[0] instanceof Array && Number.isInteger(arguments[1])) {\r\n\t\t\tlet coordinates = arguments[0], dimension = arguments[1];\r\n\t\t\tthis.coordinates = coordinates;\r\n\t\t\tthis.dimension = dimension;\r\n\t\t\tif (coordinates === null) this.coordinates = new Array(0).fill(null);\r\n\t\t} else if (Number.isInteger(arguments[0]) && Number.isInteger(arguments[1])) {\r\n\t\t\tlet size = arguments[0], dimension = arguments[1];\r\n\t\t\tthis.coordinates = new Array(size).fill(null);\r\n\t\t\tthis.dimension = dimension;\r\n\t\t\tfor (var i = 0; i < size; i++) {\r\n\t\t\t\tthis.coordinates[i] = new Coordinate();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nextend(CoordinateArraySequence.prototype, {\r\n\tsetOrdinate: function (index, ordinateIndex, value) {\r\n\t\tswitch (ordinateIndex) {\r\n\t\t\tcase CoordinateSequence.X:\r\n\t\t\t\tthis.coordinates[index].x = value;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CoordinateSequence.Y:\r\n\t\t\t\tthis.coordinates[index].y = value;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CoordinateSequence.Z:\r\n\t\t\t\tthis.coordinates[index].z = value;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new IllegalArgumentException(\"invalid ordinateIndex\");\r\n\t\t}\r\n\t},\r\n\tsize: function () {\r\n\t\treturn this.coordinates.length;\r\n\t},\r\n\tgetOrdinate: function (index, ordinateIndex) {\r\n\t\tswitch (ordinateIndex) {\r\n\t\t\tcase CoordinateSequence.X:\r\n\t\t\t\treturn this.coordinates[index].x;\r\n\t\t\tcase CoordinateSequence.Y:\r\n\t\t\t\treturn this.coordinates[index].y;\r\n\t\t\tcase CoordinateSequence.Z:\r\n\t\t\t\treturn this.coordinates[index].z;\r\n\t\t}\r\n\t\treturn Double.NaN;\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet i = arguments[0];\r\n\t\t\treturn this.coordinates[i];\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet index = arguments[0], coord = arguments[1];\r\n\t\t\tcoord.x = this.coordinates[index].x;\r\n\t\t\tcoord.y = this.coordinates[index].y;\r\n\t\t\tcoord.z = this.coordinates[index].z;\r\n\t\t}\r\n\t},\r\n\tgetCoordinateCopy: function (i) {\r\n\t\treturn new Coordinate(this.coordinates[i]);\r\n\t},\r\n\tgetDimension: function () {\r\n\t\treturn this.dimension;\r\n\t},\r\n\tgetX: function (index) {\r\n\t\treturn this.coordinates[index].x;\r\n\t},\r\n\tclone: function () {\r\n\t\tvar cloneCoordinates = new Array(this.size()).fill(null);\r\n\t\tfor (var i = 0; i < this.coordinates.length; i++) {\r\n\t\t\tcloneCoordinates[i] = this.coordinates[i].clone();\r\n\t\t}\r\n\t\treturn new CoordinateArraySequence(cloneCoordinates, this.dimension);\r\n\t},\r\n\texpandEnvelope: function (env) {\r\n\t\tfor (var i = 0; i < this.coordinates.length; i++) {\r\n\t\t\tenv.expandToInclude(this.coordinates[i]);\r\n\t\t}\r\n\t\treturn env;\r\n\t},\r\n\tcopy: function () {\r\n\t\tvar cloneCoordinates = new Array(this.size()).fill(null);\r\n\t\tfor (var i = 0; i < this.coordinates.length; i++) {\r\n\t\t\tcloneCoordinates[i] = this.coordinates[i].copy();\r\n\t\t}\r\n\t\treturn new CoordinateArraySequence(cloneCoordinates, this.dimension);\r\n\t},\r\n\ttoString: function () {\r\n\t\tif (this.coordinates.length > 0) {\r\n\t\t\tvar strBuf = new StringBuffer(17 * this.coordinates.length);\r\n\t\t\tstrBuf.append('(');\r\n\t\t\tstrBuf.append(this.coordinates[0]);\r\n\t\t\tfor (var i = 1; i < this.coordinates.length; i++) {\r\n\t\t\t\tstrBuf.append(\", \");\r\n\t\t\t\tstrBuf.append(this.coordinates[i]);\r\n\t\t\t}\r\n\t\t\tstrBuf.append(')');\r\n\t\t\treturn strBuf.toString();\r\n\t\t} else {\r\n\t\t\treturn \"()\";\r\n\t\t}\r\n\t},\r\n\tgetY: function (index) {\r\n\t\treturn this.coordinates[index].y;\r\n\t},\r\n\ttoCoordinateArray: function () {\r\n\t\treturn this.coordinates;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [CoordinateSequence, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateArraySequence;\r\n\t}\r\n});\r\nCoordinateArraySequence.serialVersionUID = -915438501601840650;\r\n","import CoordinateSequenceFactory from '../CoordinateSequenceFactory';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport CoordinateArraySequence from './CoordinateArraySequence';\r\nimport extend from '../../../../../extend';\r\nimport CoordinateSequence from '../CoordinateSequence';\r\nimport Serializable from '../../../../../java/io/Serializable';\r\nexport default function CoordinateArraySequenceFactory() {}\r\nextend(CoordinateArraySequenceFactory.prototype, {\r\n\treadResolve: function () {\r\n\t\treturn CoordinateArraySequenceFactory.instance();\r\n\t},\r\n\tcreate: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Array) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\treturn new CoordinateArraySequence(coordinates);\r\n\t\t\t} else if (hasInterface(arguments[0], CoordinateSequence)) {\r\n\t\t\t\tlet coordSeq = arguments[0];\r\n\t\t\t\treturn new CoordinateArraySequence(coordSeq);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet size = arguments[0], dimension = arguments[1];\r\n\t\t\tif (dimension > 3) dimension = 3;\r\n\t\t\tif (dimension < 2) return new CoordinateArraySequence(size);\r\n\t\t\treturn new CoordinateArraySequence(size, dimension);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [CoordinateSequenceFactory, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CoordinateArraySequenceFactory;\r\n\t}\r\n});\r\nCoordinateArraySequenceFactory.instance = function () {\r\n\treturn CoordinateArraySequenceFactory.instanceObject;\r\n};\r\nCoordinateArraySequenceFactory.serialVersionUID = -4099577099607551657;\r\nCoordinateArraySequenceFactory.instanceObject = new CoordinateArraySequenceFactory();\r\n","// shared pointer\r\nvar i\r\n// shortcuts\r\nvar defineProperty = Object.defineProperty\r\nfunction is (a, b) { return (a === b) || (a !== a && b !== b) } // eslint-disable-line\r\n\r\nexport default createCollection({\r\n  // WeakMap#delete(key:void*):boolean\r\n  'delete': sharedDelete,\r\n  // :was Map#get(key:void*[, d3fault:void*]):void*\r\n  // Map#has(key:void*):boolean\r\n  has: mapHas,\r\n  // Map#get(key:void*):boolean\r\n  get: sharedGet,\r\n  // Map#set(key:void*, value:void*):void\r\n  set: sharedSet,\r\n  // Map#keys(void):Iterator\r\n  keys: sharedKeys,\r\n  // Map#values(void):Iterator\r\n  values: sharedValues,\r\n  // Map#entries(void):Iterator\r\n  entries: mapEntries,\r\n  // Map#forEach(callback:Function, context:void*):void ==> callback.call(context, key, value, mapObject) === not in specs`\r\n  forEach: sharedForEach,\r\n  // Map#clear():\r\n  clear: sharedClear\r\n})\r\n\r\n/**\r\n * ES6 collection constructor\r\n * @return {Function} a collection class\r\n */\r\nfunction createCollection (proto, objectOnly) {\r\n  function Collection (a) {\r\n    if (!this || this.constructor !== Collection) return new Collection(a)\r\n    this._keys = []\r\n    this._values = []\r\n    this._itp = [] // iteration pointers\r\n    this.objectOnly = objectOnly\r\n\r\n    // parse initial iterable argument passed\r\n    if (a) init.call(this, a)\r\n  }\r\n\r\n  // define size for non object-only collections\r\n  if (!objectOnly) {\r\n    defineProperty(proto, 'size', {\r\n      get: sharedSize\r\n    })\r\n  }\r\n\r\n  // set prototype\r\n  proto.constructor = Collection\r\n  Collection.prototype = proto\r\n\r\n  return Collection\r\n}\r\n\r\n/** parse initial iterable argument passed */\r\nfunction init (a) {\r\n  // init Set argument, like `[1,2,3,{}]`\r\n  if (this.add) a.forEach(this.add, this)\r\n  // init Map argument like `[[1,2], [{}, 4]]`\r\n  else a.forEach(function (a) { this.set(a[0], a[1]) }, this)\r\n}\r\n\r\n/** delete */\r\nfunction sharedDelete (key) {\r\n  if (this.has(key)) {\r\n    this._keys.splice(i, 1)\r\n    this._values.splice(i, 1)\r\n    // update iteration pointers\r\n    this._itp.forEach(function (p) { if (i < p[0]) p[0]-- })\r\n  }\r\n  // Aurora here does it while Canary doesn't\r\n  return i > -1\r\n}\r\n\r\nfunction sharedGet (key) {\r\n  return this.has(key) ? this._values[i] : undefined\r\n}\r\n\r\nfunction has (list, key) {\r\n  if (this.objectOnly && key !== Object(key)) throw new TypeError('Invalid value used as weak collection key')\r\n  // NaN or 0 passed\r\n  if (key !== key || key === 0) for (i = list.length; i-- && !is(list[i], key);) {} // eslint-disable-line\r\n  else i = list.indexOf(key)\r\n  return i > -1\r\n}\r\n\r\nfunction mapHas (value) {\r\n  return has.call(this, this._keys, value)\r\n}\r\n\r\n/** @chainable */\r\nfunction sharedSet (key, value) {\r\n  this.has(key) ? this._values[i] = value : this._values[this._keys.push(key) - 1] = value\r\n  return this\r\n}\r\n\r\nfunction sharedClear () {\r\n  (this._keys || 0).length =\r\n    this._values.length = 0\r\n}\r\n\r\n/** keys, values, and iterate related methods */\r\nfunction sharedKeys () {\r\n  return sharedIterator(this._itp, this._keys)\r\n}\r\n\r\nfunction sharedValues () {\r\n  return sharedIterator(this._itp, this._values)\r\n}\r\n\r\nfunction mapEntries () {\r\n  return sharedIterator(this._itp, this._keys, this._values)\r\n}\r\n\r\nfunction sharedIterator (itp, array, array2) {\r\n  var p = [0]\r\n  var done = false\r\n  itp.push(p)\r\n  return {\r\n    next: function () {\r\n      var v\r\n      var k = p[0]\r\n      if (!done && k < array.length) {\r\n        v = array2 ? [array[k], array2[k]] : array[k]\r\n        p[0]++\r\n      } else {\r\n        done = true\r\n        itp.splice(itp.indexOf(p), 1)\r\n      }\r\n      return { done: done, value: v }\r\n    }\r\n  }\r\n}\r\n\r\nfunction sharedSize () {\r\n  return this._values.length\r\n}\r\n\r\nfunction sharedForEach (callback, context) {\r\n  var it = this.entries()\r\n  for (;;) {\r\n    var r = it.next()\r\n    if (r.done) break\r\n    callback.call(context, r.value[1], r.value[0], this)\r\n  }\r\n}\r\n","import ArrayList from './ArrayList'\r\nimport MapInterface from './Map'\r\nimport HashSet from './HashSet'\r\nimport MapPolyfill from '../../Map'\r\n\r\nlet MapImpl = typeof Map === 'undefined' || !Map.prototype.values ? MapPolyfill : Map\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/HashMap.html\r\n *\r\n * @extends {javascript.util.Map}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function HashMap () {\r\n  /**\r\n   * @type {Object}\r\n   * @private\r\n  */\r\n  this.map_ = new MapImpl()\r\n}\r\nHashMap.prototype = new MapInterface()\r\n\r\n/**\r\n * @override\r\n */\r\nHashMap.prototype.get = function (key) {\r\n  return this.map_.get(key) || null\r\n}\r\n\r\n/**\r\n * @override\r\n */\r\nHashMap.prototype.put = function (key, value) {\r\n  this.map_.set(key, value)\r\n  return value\r\n}\r\n\r\n/**\r\n * @override\r\n */\r\nHashMap.prototype.values = function () {\r\n  const arrayList = new ArrayList()\r\n  const it = this.map_.values()\r\n  let o = it.next()\r\n  while (!o.done) {\r\n    arrayList.add(o.value)\r\n    o = it.next()\r\n  }\r\n  return arrayList\r\n}\r\n\r\n/**\r\n * @override\r\n */\r\nHashMap.prototype.entrySet = function () {\r\n  const hashSet = new HashSet()\r\n  this.map_.entries().forEach(entry => hashSet.add(entry))\r\n  return hashSet\r\n}\r\n\r\n/**\r\n * @override\r\n */\r\nHashMap.prototype.size = function () {\r\n  return this.map_.size()\r\n}\r\n","import HashMap from '../../../../java/util/HashMap';\r\nimport Coordinate from './Coordinate';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport Integer from '../../../../java/lang/Integer';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nimport Serializable from '../../../../java/io/Serializable';\r\nexport default function PrecisionModel() {\r\n\tthis.modelType = null;\r\n\tthis.scale = null;\r\n\tif (arguments.length === 0) {\r\n\t\tthis.modelType = PrecisionModel.FLOATING;\r\n\t} else if (arguments.length === 1) {\r\n\t\tif (arguments[0] instanceof Type) {\r\n\t\t\tlet modelType = arguments[0];\r\n\t\t\tthis.modelType = modelType;\r\n\t\t\tif (modelType === PrecisionModel.FIXED) {\r\n\t\t\t\tthis.setScale(1.0);\r\n\t\t\t}\r\n\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\tlet scale = arguments[0];\r\n\t\t\tthis.modelType = PrecisionModel.FIXED;\r\n\t\t\tthis.setScale(scale);\r\n\t\t} else if (arguments[0] instanceof PrecisionModel) {\r\n\t\t\tlet pm = arguments[0];\r\n\t\t\tthis.modelType = pm.modelType;\r\n\t\t\tthis.scale = pm.scale;\r\n\t\t}\r\n\t}\r\n}\r\nextend(PrecisionModel.prototype, {\r\n\tequals: function (other) {\r\n\t\tif (!(other instanceof PrecisionModel)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar otherPrecisionModel = other;\r\n\t\treturn this.modelType === otherPrecisionModel.modelType && this.scale === otherPrecisionModel.scale;\r\n\t},\r\n\tcompareTo: function (o) {\r\n\t\tvar other = o;\r\n\t\tvar sigDigits = this.getMaximumSignificantDigits();\r\n\t\tvar otherSigDigits = other.getMaximumSignificantDigits();\r\n\t\treturn new Integer(sigDigits).compareTo(new Integer(otherSigDigits));\r\n\t},\r\n\tgetScale: function () {\r\n\t\treturn this.scale;\r\n\t},\r\n\tisFloating: function () {\r\n\t\treturn this.modelType === PrecisionModel.FLOATING || this.modelType === PrecisionModel.FLOATING_SINGLE;\r\n\t},\r\n\tgetType: function () {\r\n\t\treturn this.modelType;\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar description = \"UNKNOWN\";\r\n\t\tif (this.modelType === PrecisionModel.FLOATING) {\r\n\t\t\tdescription = \"Floating\";\r\n\t\t} else if (this.modelType === PrecisionModel.FLOATING_SINGLE) {\r\n\t\t\tdescription = \"Floating-Single\";\r\n\t\t} else if (this.modelType === PrecisionModel.FIXED) {\r\n\t\t\tdescription = \"Fixed (Scale=\" + this.getScale() + \")\";\r\n\t\t}\r\n\t\treturn description;\r\n\t},\r\n\tmakePrecise: function () {\r\n\t\tif (typeof arguments[0] === \"number\") {\r\n\t\t\tlet val = arguments[0];\r\n\t\t\tif (Double.isNaN(val)) return val;\r\n\t\t\tif (this.modelType === PrecisionModel.FLOATING_SINGLE) {\r\n\t\t\t\tvar floatSingleVal = val;\r\n\t\t\t\treturn floatSingleVal;\r\n\t\t\t}\r\n\t\t\tif (this.modelType === PrecisionModel.FIXED) {\r\n\t\t\t\treturn Math.round(val * this.scale) / this.scale;\r\n\t\t\t}\r\n\t\t\treturn val;\r\n\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet coord = arguments[0];\r\n\t\t\tif (this.modelType === PrecisionModel.FLOATING) return null;\r\n\t\t\tcoord.x = this.makePrecise(coord.x);\r\n\t\t\tcoord.y = this.makePrecise(coord.y);\r\n\t\t}\r\n\t},\r\n\tgetMaximumSignificantDigits: function () {\r\n\t\tvar maxSigDigits = 16;\r\n\t\tif (this.modelType === PrecisionModel.FLOATING) {\r\n\t\t\tmaxSigDigits = 16;\r\n\t\t} else if (this.modelType === PrecisionModel.FLOATING_SINGLE) {\r\n\t\t\tmaxSigDigits = 6;\r\n\t\t} else if (this.modelType === PrecisionModel.FIXED) {\r\n\t\t\tmaxSigDigits = 1 + Math.trunc(Math.ceil(Math.log(this.getScale()) / Math.log(10)));\r\n\t\t}\r\n\t\treturn maxSigDigits;\r\n\t},\r\n\tsetScale: function (scale) {\r\n\t\tthis.scale = Math.abs(scale);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Serializable, Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PrecisionModel;\r\n\t}\r\n});\r\nPrecisionModel.mostPrecise = function (pm1, pm2) {\r\n\tif (pm1.compareTo(pm2) >= 0) return pm1;\r\n\treturn pm2;\r\n};\r\nfunction Type() {\r\n\tthis.name = null;\r\n\tlet name = arguments[0];\r\n\tthis.name = name;\r\n\tType.nameToTypeMap.put(name, this);\r\n}\r\nextend(Type.prototype, {\r\n\treadResolve: function () {\r\n\t\treturn Type.nameToTypeMap.get(this.name);\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn this.name;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Type;\r\n\t}\r\n});\r\nType.serialVersionUID = -5528602631731589822;\r\nType.nameToTypeMap = new HashMap();\r\nPrecisionModel.Type = Type;\r\nPrecisionModel.serialVersionUID = 7777263578777803835;\r\nPrecisionModel.FIXED = new Type(\"FIXED\");\r\nPrecisionModel.FLOATING = new Type(\"FLOATING\");\r\nPrecisionModel.FLOATING_SINGLE = new Type(\"FLOATING SINGLE\");\r\nPrecisionModel.maximumPreciseValue = 9007199254740992.0;\r\n","import CoordinateSequenceFactory from './CoordinateSequenceFactory';\r\nimport LineString from './LineString';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport Coordinate from './Coordinate';\r\nimport Point from './Point';\r\nimport Polygon from './Polygon';\r\nimport MultiPoint from './MultiPoint';\r\nimport GeometryEditor from './util/GeometryEditor';\r\nimport LinearRing from './LinearRing';\r\nimport extend from '../../../../extend';\r\nimport CoordinateArraySequenceFactory from './impl/CoordinateArraySequenceFactory';\r\nimport MultiPolygon from './MultiPolygon';\r\nimport CoordinateSequences from './CoordinateSequences';\r\nimport CoordinateSequence from './CoordinateSequence';\r\nimport GeometryCollection from './GeometryCollection';\r\nimport PrecisionModel from './PrecisionModel';\r\nimport Serializable from '../../../../java/io/Serializable';\r\nimport Assert from '../util/Assert';\r\nimport MultiLineString from './MultiLineString';\r\nexport default function GeometryFactory() {\r\n\tthis.precisionModel = null;\r\n\tthis.coordinateSequenceFactory = null;\r\n\tthis.SRID = null;\r\n\tif (arguments.length === 0) {\r\n\t\tGeometryFactory.call(this, new PrecisionModel(), 0);\r\n\t} else if (arguments.length === 1) {\r\n\t\tif (hasInterface(arguments[0], CoordinateSequenceFactory)) {\r\n\t\t\tlet coordinateSequenceFactory = arguments[0];\r\n\t\t\tGeometryFactory.call(this, new PrecisionModel(), 0, coordinateSequenceFactory);\r\n\t\t} else if (arguments[0] instanceof PrecisionModel) {\r\n\t\t\tlet precisionModel = arguments[0];\r\n\t\t\tGeometryFactory.call(this, precisionModel, 0, GeometryFactory.getDefaultCoordinateSequenceFactory());\r\n\t\t}\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet precisionModel = arguments[0], SRID = arguments[1];\r\n\t\tGeometryFactory.call(this, precisionModel, SRID, GeometryFactory.getDefaultCoordinateSequenceFactory());\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet precisionModel = arguments[0], SRID = arguments[1], coordinateSequenceFactory = arguments[2];\r\n\t\tthis.precisionModel = precisionModel;\r\n\t\tthis.coordinateSequenceFactory = coordinateSequenceFactory;\r\n\t\tthis.SRID = SRID;\r\n\t}\r\n}\r\nextend(GeometryFactory.prototype, {\r\n\ttoGeometry: function (envelope) {\r\n\t\tif (envelope.isNull()) {\r\n\t\t\treturn this.createPoint(null);\r\n\t\t}\r\n\t\tif (envelope.getMinX() === envelope.getMaxX() && envelope.getMinY() === envelope.getMaxY()) {\r\n\t\t\treturn this.createPoint(new Coordinate(envelope.getMinX(), envelope.getMinY()));\r\n\t\t}\r\n\t\tif (envelope.getMinX() === envelope.getMaxX() || envelope.getMinY() === envelope.getMaxY()) {\r\n\t\t\treturn this.createLineString([new Coordinate(envelope.getMinX(), envelope.getMinY()), new Coordinate(envelope.getMaxX(), envelope.getMaxY())]);\r\n\t\t}\r\n\t\treturn this.createPolygon(this.createLinearRing([new Coordinate(envelope.getMinX(), envelope.getMinY()), new Coordinate(envelope.getMinX(), envelope.getMaxY()), new Coordinate(envelope.getMaxX(), envelope.getMaxY()), new Coordinate(envelope.getMaxX(), envelope.getMinY()), new Coordinate(envelope.getMinX(), envelope.getMinY())]), null);\r\n\t},\r\n\tcreateLineString: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn this.createLineString(this.getCoordinateSequenceFactory().create([]));\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Array) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\treturn this.createLineString(coordinates !== null ? this.getCoordinateSequenceFactory().create(coordinates) : null);\r\n\t\t\t} else if (hasInterface(arguments[0], CoordinateSequence)) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\treturn new LineString(coordinates, this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreateMultiLineString: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn new MultiLineString(null, this);\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet lineStrings = arguments[0];\r\n\t\t\treturn new MultiLineString(lineStrings, this);\r\n\t\t}\r\n\t},\r\n\tbuildGeometry: function (geomList) {\r\n\t\tvar geomClass = null;\r\n\t\tvar isHeterogeneous = false;\r\n\t\tvar hasGeometryCollection = false;\r\n\t\tfor (var i = geomList.iterator(); i.hasNext(); ) {\r\n\t\t\tvar geom = i.next();\r\n\t\t\tvar partClass = geom.getClass();\r\n\t\t\tif (geomClass === null) {\r\n\t\t\t\tgeomClass = partClass;\r\n\t\t\t}\r\n\t\t\tif (partClass !== geomClass) {\r\n\t\t\t\tisHeterogeneous = true;\r\n\t\t\t}\r\n\t\t\tif (geom.isGeometryCollectionOrDerived()) hasGeometryCollection = true;\r\n\t\t}\r\n\t\tif (geomClass === null) {\r\n\t\t\treturn this.createGeometryCollection();\r\n\t\t}\r\n\t\tif (isHeterogeneous || hasGeometryCollection) {\r\n\t\t\treturn this.createGeometryCollection(GeometryFactory.toGeometryArray(geomList));\r\n\t\t}\r\n\t\tvar geom0 = geomList.iterator().next();\r\n\t\tvar isCollection = geomList.size() > 1;\r\n\t\tif (isCollection) {\r\n\t\t\tif (geom0 instanceof Polygon) {\r\n\t\t\t\treturn this.createMultiPolygon(GeometryFactory.toPolygonArray(geomList));\r\n\t\t\t} else if (geom0 instanceof LineString) {\r\n\t\t\t\treturn this.createMultiLineString(GeometryFactory.toLineStringArray(geomList));\r\n\t\t\t} else if (geom0 instanceof Point) {\r\n\t\t\t\treturn this.createMultiPoint(GeometryFactory.toPointArray(geomList));\r\n\t\t\t}\r\n\t\t\tAssert.shouldNeverReachHere(\"Unhandled class: \" + geom0.getClass().getName());\r\n\t\t}\r\n\t\treturn geom0;\r\n\t},\r\n\tcreateMultiPointFromCoords: function (coordinates) {\r\n\t\treturn this.createMultiPoint(coordinates !== null ? this.getCoordinateSequenceFactory().create(coordinates) : null);\r\n\t},\r\n\tcreatePoint: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn this.createPoint(this.getCoordinateSequenceFactory().create([]));\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Coordinate) {\r\n\t\t\t\tlet coordinate = arguments[0];\r\n\t\t\t\treturn this.createPoint(coordinate !== null ? this.getCoordinateSequenceFactory().create([coordinate]) : null);\r\n\t\t\t} else if (hasInterface(arguments[0], CoordinateSequence)) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\treturn new Point(coordinates, this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetCoordinateSequenceFactory: function () {\r\n\t\treturn this.coordinateSequenceFactory;\r\n\t},\r\n\tcreatePolygon: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn new Polygon(null, null, this);\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tif (hasInterface(arguments[0], CoordinateSequence)) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\treturn this.createPolygon(this.createLinearRing(coordinates));\r\n\t\t\t} else if (arguments[0] instanceof Array) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\treturn this.createPolygon(this.createLinearRing(coordinates));\r\n\t\t\t} else if (arguments[0] instanceof LinearRing) {\r\n\t\t\t\tlet shell = arguments[0];\r\n\t\t\t\treturn this.createPolygon(shell, null);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet shell = arguments[0], holes = arguments[1];\r\n\t\t\treturn new Polygon(shell, holes, this);\r\n\t\t}\r\n\t},\r\n\tgetSRID: function () {\r\n\t\treturn this.SRID;\r\n\t},\r\n\tcreateGeometryCollection: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn new GeometryCollection(null, this);\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet geometries = arguments[0];\r\n\t\t\treturn new GeometryCollection(geometries, this);\r\n\t\t}\r\n\t},\r\n\tcreateGeometry: function (g) {\r\n\t\tvar editor = new GeometryEditor(this);\r\n\t\treturn editor.edit(g, {\r\n\t\t\tedit: function () {\r\n\t\t\t\tif (arguments.length === 2) {\r\n\t\t\t\t\tlet coordSeq = arguments[0], geometry = arguments[1];\r\n\t\t\t\t\treturn this.coordinateSequenceFactory.create(coordSeq);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tgetPrecisionModel: function () {\r\n\t\treturn this.precisionModel;\r\n\t},\r\n\tcreateLinearRing: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn this.createLinearRing(this.getCoordinateSequenceFactory().create([]));\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Array) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\treturn this.createLinearRing(coordinates !== null ? this.getCoordinateSequenceFactory().create(coordinates) : null);\r\n\t\t\t} else if (hasInterface(arguments[0], CoordinateSequence)) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\treturn new LinearRing(coordinates, this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreateMultiPolygon: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn new MultiPolygon(null, this);\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet polygons = arguments[0];\r\n\t\t\treturn new MultiPolygon(polygons, this);\r\n\t\t}\r\n\t},\r\n\tcreateMultiPoint: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn new MultiPoint(null, this);\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Array) {\r\n\t\t\t\tlet point = arguments[0];\r\n\t\t\t\treturn new MultiPoint(point, this);\r\n\t\t\t} else if (arguments[0] instanceof Array) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\treturn this.createMultiPoint(coordinates !== null ? this.getCoordinateSequenceFactory().create(coordinates) : null);\r\n\t\t\t} else if (hasInterface(arguments[0], CoordinateSequence)) {\r\n\t\t\t\tlet coordinates = arguments[0];\r\n\t\t\t\tif (coordinates === null) {\r\n\t\t\t\t\treturn this.createMultiPoint(new Array(0).fill(null));\r\n\t\t\t\t}\r\n\t\t\t\tvar points = new Array(coordinates.size()).fill(null);\r\n\t\t\t\tfor (var i = 0; i < coordinates.size(); i++) {\r\n\t\t\t\t\tvar ptSeq = this.getCoordinateSequenceFactory().create(1, coordinates.getDimension());\r\n\t\t\t\t\tCoordinateSequences.copy(coordinates, i, ptSeq, 0, 1);\r\n\t\t\t\t\tpoints[i] = this.createPoint(ptSeq);\r\n\t\t\t\t}\r\n\t\t\t\treturn this.createMultiPoint(points);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryFactory;\r\n\t}\r\n});\r\nGeometryFactory.toMultiPolygonArray = function (multiPolygons) {\r\n\tvar multiPolygonArray = new Array(multiPolygons.size()).fill(null);\r\n\treturn multiPolygons.toArray(multiPolygonArray);\r\n};\r\nGeometryFactory.toGeometryArray = function (geometries) {\r\n\tif (geometries === null) return null;\r\n\tvar geometryArray = new Array(geometries.size()).fill(null);\r\n\treturn geometries.toArray(geometryArray);\r\n};\r\nGeometryFactory.getDefaultCoordinateSequenceFactory = function () {\r\n\treturn CoordinateArraySequenceFactory.instance();\r\n};\r\nGeometryFactory.toMultiLineStringArray = function (multiLineStrings) {\r\n\tvar multiLineStringArray = new Array(multiLineStrings.size()).fill(null);\r\n\treturn multiLineStrings.toArray(multiLineStringArray);\r\n};\r\nGeometryFactory.toLineStringArray = function (lineStrings) {\r\n\tvar lineStringArray = new Array(lineStrings.size()).fill(null);\r\n\treturn lineStrings.toArray(lineStringArray);\r\n};\r\nGeometryFactory.toMultiPointArray = function (multiPoints) {\r\n\tvar multiPointArray = new Array(multiPoints.size()).fill(null);\r\n\treturn multiPoints.toArray(multiPointArray);\r\n};\r\nGeometryFactory.toLinearRingArray = function (linearRings) {\r\n\tvar linearRingArray = new Array(linearRings.size()).fill(null);\r\n\treturn linearRings.toArray(linearRingArray);\r\n};\r\nGeometryFactory.toPointArray = function (points) {\r\n\tvar pointArray = new Array(points.size()).fill(null);\r\n\treturn points.toArray(pointArray);\r\n};\r\nGeometryFactory.toPolygonArray = function (polygons) {\r\n\tvar polygonArray = new Array(polygons.size()).fill(null);\r\n\treturn polygons.toArray(polygonArray);\r\n};\r\nGeometryFactory.createPointFromInternalCoord = function (coord, exemplar) {\r\n\texemplar.getPrecisionModel().makePrecise(coord);\r\n\treturn exemplar.getFactory().createPoint(coord);\r\n};\r\nGeometryFactory.serialVersionUID = -6820524753094095635;\r\n","import Coordinate from '../geom/Coordinate'\r\nimport GeometryFactory from '../geom/GeometryFactory'\r\nimport extend from '../../../../extend'\r\n\r\nconst regExes = {\r\n  'typeStr': /^\\s*(\\w+)\\s*\\(\\s*(.*)\\s*\\)\\s*$/,\r\n  'emptyTypeStr': /^\\s*(\\w+)\\s*EMPTY\\s*$/,\r\n  'spaces': /\\s+/,\r\n  'parenComma': /\\)\\s*,\\s*\\(/,\r\n  'doubleParenComma': /\\)\\s*\\)\\s*,\\s*\\(\\s*\\(/, // can't use {2} here\r\n  'trimParens': /^\\s*\\(?(.*?)\\)?\\s*$/\r\n}\r\n\r\n/**\r\n * Class for reading and writing Well-Known Text.\r\n *\r\n * NOTE: Adapted from OpenLayers 2.11 implementation.\r\n */\r\n\r\n/** Create a new parser for WKT\r\n *\r\n * @param {GeometryFactory} geometryFactory\r\n * @return An instance of WKTParser.\r\n * @constructor\r\n * @private\r\n */\r\nexport default function WKTParser (geometryFactory) {\r\n  this.geometryFactory = geometryFactory || new GeometryFactory()\r\n}\r\n\r\nextend(WKTParser.prototype, {\r\n  /**\r\n   * Deserialize a WKT string and return a geometry. Supports WKT for POINT,\r\n   * MULTIPOINT, LINESTRING, LINEARRING, MULTILINESTRING, POLYGON, MULTIPOLYGON,\r\n   * and GEOMETRYCOLLECTION.\r\n   *\r\n   * @param {String} wkt A WKT string.\r\n   * @return {Geometry} A geometry instance.\r\n   * @private\r\n   */\r\n  read (wkt) {\r\n    var geometry, type, str\r\n    wkt = wkt.replace(/[\\n\\r]/g, ' ')\r\n    var matches = regExes.typeStr.exec(wkt)\r\n    if (wkt.search('EMPTY') !== -1) {\r\n      matches = regExes.emptyTypeStr.exec(wkt)\r\n      matches[2] = undefined\r\n    }\r\n    if (matches) {\r\n      type = matches[1].toLowerCase()\r\n      str = matches[2]\r\n      if (parse[type]) {\r\n        geometry = parse[type].apply(this, [str])\r\n      }\r\n    }\r\n\r\n    if (geometry === undefined) throw new Error('Could not parse WKT ' + wkt)\r\n\r\n    return geometry\r\n  },\r\n\r\n  /**\r\n   * Serialize a geometry into a WKT string.\r\n   *\r\n   * @param {Geometry} geometry A feature or array of features.\r\n   * @return {String} The WKT string representation of the input geometries.\r\n   * @private\r\n   */\r\n  write (geometry) {\r\n    return this.extractGeometry(geometry)\r\n  },\r\n\r\n  /**\r\n   * Entry point to construct the WKT for a single Geometry object.\r\n   *\r\n   * @param {Geometry} geometry\r\n   * @return {String} A WKT string of representing the geometry.\r\n   * @private\r\n   */\r\n  extractGeometry (geometry) {\r\n    var type = geometry.getGeometryType().toLowerCase()\r\n    if (!extract[type]) {\r\n      return null\r\n    }\r\n    var wktType = type.toUpperCase()\r\n    var data\r\n    if (geometry.isEmpty()) {\r\n      data = wktType + ' EMPTY'\r\n    } else {\r\n      data = wktType + '(' + extract[type].apply(this, [geometry]) + ')'\r\n    }\r\n    return data\r\n  }\r\n})\r\n\r\n/**\r\n * Object with properties corresponding to the geometry types. Property values\r\n * are functions that do the actual data extraction.\r\n * @private\r\n */\r\nconst extract = {\r\n  coordinate (coordinate) {\r\n    return coordinate.x + ' ' + coordinate.y\r\n  },\r\n\r\n  /**\r\n   * Return a space delimited string of point coordinates.\r\n   *\r\n   * @param {Point}\r\n   *          point\r\n   * @return {String} A string of coordinates representing the point.\r\n   */\r\n  point (point) {\r\n    return extract.coordinate.call(this, point.coordinates.coordinates[0])\r\n  },\r\n\r\n  /**\r\n   * Return a comma delimited string of point coordinates from a multipoint.\r\n   *\r\n   * @param {MultiPoint}\r\n   *          multipoint\r\n   * @return {String} A string of point coordinate strings representing the\r\n   *         multipoint.\r\n   */\r\n  multipoint (multipoint) {\r\n    var array = []\r\n    for (let i = 0, len = multipoint.geometries.length; i < len; ++i) {\r\n      array.push('(' + extract.point.apply(this, [multipoint.geometries[i]]) + ')')\r\n    }\r\n    return array.join(',')\r\n  },\r\n\r\n  /**\r\n   * Return a comma delimited string of point coordinates from a line.\r\n   *\r\n   * @param {LineString} linestring\r\n   * @return {String} A string of point coordinate strings representing the linestring.\r\n   */\r\n  linestring (linestring) {\r\n    var array = []\r\n    for (let i = 0, len = linestring.points.coordinates.length; i < len; ++i) {\r\n      array.push(extract.coordinate.apply(this, [linestring.points.coordinates[i]]))\r\n    }\r\n    return array.join(',')\r\n  },\r\n\r\n  linearring (linearring) {\r\n    var array = []\r\n    for (let i = 0, len = linearring.points.coordinates.length; i < len; ++i) {\r\n      array.push(extract.coordinate.apply(this, [linearring.points.coordinates[i]]))\r\n    }\r\n    return array.join(',')\r\n  },\r\n\r\n  /**\r\n   * Return a comma delimited string of linestring strings from a\r\n   * multilinestring.\r\n   *\r\n   * @param {MultiLineString} multilinestring\r\n   * @return {String} A string of of linestring strings representing the multilinestring.\r\n   */\r\n  multilinestring (multilinestring) {\r\n    var array = []\r\n    for (let i = 0, len = multilinestring.geometries.length; i < len; ++i) {\r\n      array.push('(' +\r\n        extract.linestring.apply(this, [multilinestring.geometries[i]]) +\r\n        ')')\r\n    }\r\n    return array.join(',')\r\n  },\r\n\r\n  /**\r\n   * Return a comma delimited string of linear ring arrays from a polygon.\r\n   *\r\n   * @param {Polygon} polygon\r\n   * @return {String} An array of linear ring arrays representing the polygon.\r\n   */\r\n  polygon (polygon) {\r\n    var array = []\r\n    array.push('(' + extract.linestring.apply(this, [polygon.shell]) + ')')\r\n    for (let i = 0, len = polygon.holes.length; i < len; ++i) {\r\n      array.push('(' + extract.linestring.apply(this, [polygon.holes[i]]) + ')')\r\n    }\r\n    return array.join(',')\r\n  },\r\n\r\n  /**\r\n   * Return an array of polygon arrays from a multipolygon.\r\n   *\r\n   * @param {MultiPolygon} multipolygon\r\n   * @return {String} An array of polygon arrays representing the multipolygon.\r\n   */\r\n  multipolygon (multipolygon) {\r\n    var array = []\r\n    for (let i = 0, len = multipolygon.geometries.length; i < len; ++i) {\r\n      array.push('(' + extract.polygon.apply(this, [multipolygon.geometries[i]]) + ')')\r\n    }\r\n    return array.join(',')\r\n  },\r\n\r\n  /**\r\n   * Return the WKT portion between 'GEOMETRYCOLLECTION(' and ')' for an\r\n   * geometrycollection.\r\n   *\r\n   * @param {GeometryCollection} collection\r\n   * @return {String} internal WKT representation of the collection.\r\n   */\r\n  geometrycollection (collection) {\r\n    var array = []\r\n    for (let i = 0, len = collection.geometries.length; i < len; ++i) {\r\n      array.push(this.extractGeometry(collection.geometries[i]))\r\n    }\r\n    return array.join(',')\r\n  }\r\n}\r\n\r\n/**\r\n * Object with properties corresponding to the geometry types. Property values\r\n * are functions that do the actual parsing.\r\n * @private\r\n */\r\nconst parse = {\r\n  /**\r\n   * Return point geometry given a point WKT fragment.\r\n   *\r\n   * @param {String} str A WKT fragment representing the point.\r\n   * @return {Point} A point geometry.\r\n   * @private\r\n   */\r\n  point (str) {\r\n    if (str === undefined) {\r\n      return this.geometryFactory.createPoint()\r\n    }\r\n\r\n    var coords = str.trim().split(regExes.spaces)\r\n    return this.geometryFactory.createPoint(new Coordinate(Number.parseFloat(coords[0]),\r\n      Number.parseFloat(coords[1])))\r\n  },\r\n\r\n  /**\r\n   * Return a multipoint geometry given a multipoint WKT fragment.\r\n   *\r\n   * @param {String} str A WKT fragment representing the multipoint.\r\n   * @return {Point} A multipoint feature.\r\n   * @private\r\n   */\r\n  multipoint (str) {\r\n    if (str === undefined) {\r\n      return this.geometryFactory.createMultiPoint()\r\n    }\r\n\r\n    var point\r\n    var points = str.trim().split(',')\r\n    var components = []\r\n    for (let i = 0, len = points.length; i < len; ++i) {\r\n      point = points[i].replace(regExes.trimParens, '$1')\r\n      components.push(parse.point.apply(this, [point]))\r\n    }\r\n    return this.geometryFactory.createMultiPoint(components)\r\n  },\r\n\r\n  /**\r\n   * Return a linestring geometry given a linestring WKT fragment.\r\n   *\r\n   * @param {String} str A WKT fragment representing the linestring.\r\n   * @return {LineString} A linestring geometry.\r\n   * @private\r\n   */\r\n  linestring (str) {\r\n    if (str === undefined) {\r\n      return this.geometryFactory.createLineString()\r\n    }\r\n\r\n    var points = str.trim().split(',')\r\n    var components = []\r\n    var coords\r\n    for (let i = 0, len = points.length; i < len; ++i) {\r\n      coords = points[i].trim().split(regExes.spaces)\r\n      components.push(new Coordinate(Number.parseFloat(coords[0]), Number.parseFloat(coords[1])))\r\n    }\r\n    return this.geometryFactory.createLineString(components)\r\n  },\r\n\r\n  /**\r\n   * Return a linearring geometry given a linearring WKT fragment.\r\n   *\r\n   * @param {String} str A WKT fragment representing the linearring.\r\n   * @return {LinearRing} A linearring geometry.\r\n   * @private\r\n   */\r\n  linearring (str) {\r\n    if (str === undefined) {\r\n      return this.geometryFactory.createLinearRing()\r\n    }\r\n\r\n    var points = str.trim().split(',')\r\n    var components = []\r\n    var coords\r\n    for (let i = 0, len = points.length; i < len; ++i) {\r\n      coords = points[i].trim().split(regExes.spaces)\r\n      components.push(new Coordinate(Number.parseFloat(coords[0]), Number.parseFloat(coords[1])))\r\n    }\r\n    return this.geometryFactory.createLinearRing(components)\r\n  },\r\n\r\n  /**\r\n   * Return a multilinestring geometry given a multilinestring WKT fragment.\r\n   *\r\n   * @param {String} str A WKT fragment representing the multilinestring.\r\n   * @return {MultiLineString} A multilinestring geometry.\r\n   * @private\r\n   */\r\n  multilinestring (str) {\r\n    if (str === undefined) {\r\n      return this.geometryFactory.createMultiLineString()\r\n    }\r\n\r\n    var line\r\n    var lines = str.trim().split(regExes.parenComma)\r\n    var components = []\r\n    for (let i = 0, len = lines.length; i < len; ++i) {\r\n      line = lines[i].replace(regExes.trimParens, '$1')\r\n      components.push(parse.linestring.apply(this, [line]))\r\n    }\r\n    return this.geometryFactory.createMultiLineString(components)\r\n  },\r\n\r\n  /**\r\n   * Return a polygon geometry given a polygon WKT fragment.\r\n   *\r\n   * @param {String} str A WKT fragment representing the polygon.\r\n   * @return {Polygon} A polygon geometry.\r\n   * @private\r\n   */\r\n  polygon (str) {\r\n    if (str === undefined) {\r\n      return this.geometryFactory.createPolygon()\r\n    }\r\n\r\n    var ring, linestring, linearring\r\n    var rings = str.trim().split(regExes.parenComma)\r\n    var shell\r\n    var holes = []\r\n    for (let i = 0, len = rings.length; i < len; ++i) {\r\n      ring = rings[i].replace(regExes.trimParens, '$1')\r\n      linestring = parse.linestring.apply(this, [ring])\r\n      linearring = this.geometryFactory.createLinearRing(linestring.points)\r\n      if (i === 0) {\r\n        shell = linearring\r\n      } else {\r\n        holes.push(linearring)\r\n      }\r\n    }\r\n    return this.geometryFactory.createPolygon(shell, holes)\r\n  },\r\n\r\n  /**\r\n   * Return a multipolygon geometry given a multipolygon WKT fragment.\r\n   *\r\n   * @param {String} str A WKT fragment representing the multipolygon.\r\n   * @return {MultiPolygon} A multipolygon geometry.\r\n   * @private\r\n   */\r\n  multipolygon (str) {\r\n    if (str === undefined) {\r\n      return this.geometryFactory.createMultiPolygon()\r\n    }\r\n\r\n    var polygon\r\n    var polygons = str.trim().split(regExes.doubleParenComma)\r\n    var components = []\r\n    for (let i = 0, len = polygons.length; i < len; ++i) {\r\n      polygon = polygons[i].replace(regExes.trimParens, '$1')\r\n      components.push(parse.polygon.apply(this, [polygon]))\r\n    }\r\n    return this.geometryFactory.createMultiPolygon(components)\r\n  },\r\n\r\n  /**\r\n   * Return a geometrycollection given a geometrycollection WKT fragment.\r\n   *\r\n   * @param {String} str A WKT fragment representing the geometrycollection.\r\n   * @return {GeometryCollection}\r\n   * @private\r\n   */\r\n  geometrycollection (str) {\r\n    if (str === undefined) {\r\n      return this.geometryFactory.createGeometryCollection()\r\n    }\r\n\r\n    // separate components of the collection with |\r\n    str = str.replace(/,\\s*([A-Za-z])/g, '|$1')\r\n    var wktArray = str.trim().split('|')\r\n    var components = []\r\n    for (let i = 0, len = wktArray.length; i < len; ++i) {\r\n      components.push(this.read(wktArray[i]))\r\n    }\r\n    return this.geometryFactory.createGeometryCollection(components)\r\n  }\r\n}\r\n","import WKTParser from './WKTParser'\r\nimport extend from '../../../../extend'\r\n\r\n/**\r\n * Writes the Well-Known Text representation of a {@link Geometry}. The\r\n * Well-Known Text format is defined in the <A\r\n * HREF=\"http://www.opengis.org/techno/specs.htm\"> OGC Simple Features\r\n * Specification for SQL</A>.\r\n * <p>\r\n * The <code>WKTWriter</code> outputs coordinates rounded to the precision\r\n * model. Only the maximum number of decimal places necessary to represent the\r\n * ordinates to the required precision will be output.\r\n * <p>\r\n * The SFS WKT spec does not define a special tag for {@link LinearRing}s.\r\n * Under the spec, rings are output as <code>LINESTRING</code>s.\r\n */\r\n\r\n/**\r\n * @param {GeometryFactory} geometryFactory\r\n * @constructor\r\n */\r\nexport default function WKTWriter (geometryFactory) {\r\n  this.parser = new WKTParser(geometryFactory)\r\n}\r\n\r\nextend(WKTWriter.prototype, {\r\n  /**\r\n   * Converts a <code>Geometry</code> to its Well-known Text representation.\r\n   *\r\n   * @param {Geometry} geometry a <code>Geometry</code> to process.\r\n   * @return {string} a <Geometry Tagged Text> string (see the OpenGIS Simple\r\n   *         Features Specification).\r\n   * @memberof WKTWriter\r\n   */\r\n  write (geometry) {\r\n    return this.parser.write(geometry)\r\n  }\r\n})\r\n\r\nextend(WKTWriter, {\r\n  /**\r\n   * Generates the WKT for a <tt>LINESTRING</tt> specified by two\r\n   * {@link Coordinate}s.\r\n   *\r\n   * @param p0 the first coordinate.\r\n   * @param p1 the second coordinate.\r\n   *\r\n   * @return the WKT.\r\n   * @private\r\n   */\r\n  toLineString (p0, p1) {\r\n    if (arguments.length !== 2) {\r\n      throw new Error('Not implemented')\r\n    }\r\n\r\n    return 'LINESTRING ( ' + p0.x + ' ' + p0.y + ', ' + p1.x + ' ' + p1.y + ' )'\r\n  }\r\n})\r\n","import StringBuffer from '../../../../java/lang/StringBuffer';\r\nimport WKTWriter from '../io/WKTWriter';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport Assert from '../util/Assert';\r\nexport default function LineIntersector() {\r\n\tthis.result = null;\r\n\tthis.inputLines = Array(2).fill().map(() => Array(2));\r\n\tthis.intPt = new Array(2).fill(null);\r\n\tthis.intLineIndex = null;\r\n\tthis._isProper = null;\r\n\tthis.pa = null;\r\n\tthis.pb = null;\r\n\tthis.precisionModel = null;\r\n\tthis.intPt[0] = new Coordinate();\r\n\tthis.intPt[1] = new Coordinate();\r\n\tthis.pa = this.intPt[0];\r\n\tthis.pb = this.intPt[1];\r\n\tthis.result = 0;\r\n}\r\nextend(LineIntersector.prototype, {\r\n\tgetIndexAlongSegment: function (segmentIndex, intIndex) {\r\n\t\tthis.computeIntLineIndex();\r\n\t\treturn this.intLineIndex[segmentIndex][intIndex];\r\n\t},\r\n\tgetTopologySummary: function () {\r\n\t\tvar catBuf = new StringBuffer();\r\n\t\tif (this.isEndPoint()) catBuf.append(\" endpoint\");\r\n\t\tif (this._isProper) catBuf.append(\" proper\");\r\n\t\tif (this.isCollinear()) catBuf.append(\" collinear\");\r\n\t\treturn catBuf.toString();\r\n\t},\r\n\tcomputeIntersection: function (p1, p2, p3, p4) {\r\n\t\tthis.inputLines[0][0] = p1;\r\n\t\tthis.inputLines[0][1] = p2;\r\n\t\tthis.inputLines[1][0] = p3;\r\n\t\tthis.inputLines[1][1] = p4;\r\n\t\tthis.result = this.computeIntersect(p1, p2, p3, p4);\r\n\t},\r\n\tgetIntersectionNum: function () {\r\n\t\treturn this.result;\r\n\t},\r\n\tcomputeIntLineIndex: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tif (this.intLineIndex === null) {\r\n\t\t\t\tthis.intLineIndex = Array(2).fill().map(() => Array(2));\r\n\t\t\t\tthis.computeIntLineIndex(0);\r\n\t\t\t\tthis.computeIntLineIndex(1);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet segmentIndex = arguments[0];\r\n\t\t\tvar dist0 = this.getEdgeDistance(segmentIndex, 0);\r\n\t\t\tvar dist1 = this.getEdgeDistance(segmentIndex, 1);\r\n\t\t\tif (dist0 > dist1) {\r\n\t\t\t\tthis.intLineIndex[segmentIndex][0] = 0;\r\n\t\t\t\tthis.intLineIndex[segmentIndex][1] = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.intLineIndex[segmentIndex][0] = 1;\r\n\t\t\t\tthis.intLineIndex[segmentIndex][1] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisProper: function () {\r\n\t\treturn this.hasIntersection() && this._isProper;\r\n\t},\r\n\tsetPrecisionModel: function (precisionModel) {\r\n\t\tthis.precisionModel = precisionModel;\r\n\t},\r\n\tisInteriorIntersection: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tif (this.isInteriorIntersection(0)) return true;\r\n\t\t\tif (this.isInteriorIntersection(1)) return true;\r\n\t\t\treturn false;\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet inputLineIndex = arguments[0];\r\n\t\t\tfor (var i = 0; i < this.result; i++) {\r\n\t\t\t\tif (!(this.intPt[i].equals2D(this.inputLines[inputLineIndex][0]) || this.intPt[i].equals2D(this.inputLines[inputLineIndex][1]))) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\tgetIntersection: function (intIndex) {\r\n\t\treturn this.intPt[intIndex];\r\n\t},\r\n\tisEndPoint: function () {\r\n\t\treturn this.hasIntersection() && !this._isProper;\r\n\t},\r\n\thasIntersection: function () {\r\n\t\treturn this.result !== LineIntersector.NO_INTERSECTION;\r\n\t},\r\n\tgetEdgeDistance: function (segmentIndex, intIndex) {\r\n\t\tvar dist = LineIntersector.computeEdgeDistance(this.intPt[intIndex], this.inputLines[segmentIndex][0], this.inputLines[segmentIndex][1]);\r\n\t\treturn dist;\r\n\t},\r\n\tisCollinear: function () {\r\n\t\treturn this.result === LineIntersector.COLLINEAR_INTERSECTION;\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn WKTWriter.toLineString(this.inputLines[0][0], this.inputLines[0][1]) + \" - \" + WKTWriter.toLineString(this.inputLines[1][0], this.inputLines[1][1]) + this.getTopologySummary();\r\n\t},\r\n\tgetEndpoint: function (segmentIndex, ptIndex) {\r\n\t\treturn this.inputLines[segmentIndex][ptIndex];\r\n\t},\r\n\tisIntersection: function (pt) {\r\n\t\tfor (var i = 0; i < this.result; i++) {\r\n\t\t\tif (this.intPt[i].equals2D(pt)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tgetIntersectionAlongSegment: function (segmentIndex, intIndex) {\r\n\t\tthis.computeIntLineIndex();\r\n\t\treturn this.intPt[this.intLineIndex[segmentIndex][intIndex]];\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineIntersector;\r\n\t}\r\n});\r\nLineIntersector.computeEdgeDistance = function (p, p0, p1) {\r\n\tvar dx = Math.abs(p1.x - p0.x);\r\n\tvar dy = Math.abs(p1.y - p0.y);\r\n\tvar dist = -1.0;\r\n\tif (p.equals(p0)) {\r\n\t\tdist = 0.0;\r\n\t} else if (p.equals(p1)) {\r\n\t\tif (dx > dy) dist = dx; else dist = dy;\r\n\t} else {\r\n\t\tvar pdx = Math.abs(p.x - p0.x);\r\n\t\tvar pdy = Math.abs(p.y - p0.y);\r\n\t\tif (dx > dy) dist = pdx; else dist = pdy;\r\n\t\tif (dist === 0.0 && !p.equals(p0)) {\r\n\t\t\tdist = Math.max(pdx, pdy);\r\n\t\t}\r\n\t}\r\n\tAssert.isTrue(!(dist === 0.0 && !p.equals(p0)), \"Bad distance calculation\");\r\n\treturn dist;\r\n};\r\nLineIntersector.nonRobustComputeEdgeDistance = function (p, p1, p2) {\r\n\tvar dx = p.x - p1.x;\r\n\tvar dy = p.y - p1.y;\r\n\tvar dist = Math.sqrt(dx * dx + dy * dy);\r\n\tAssert.isTrue(!(dist === 0.0 && !p.equals(p1)), \"Invalid distance calculation\");\r\n\treturn dist;\r\n};\r\nLineIntersector.DONT_INTERSECT = 0;\r\nLineIntersector.DO_INTERSECT = 1;\r\nLineIntersector.COLLINEAR = 2;\r\nLineIntersector.NO_INTERSECTION = 0;\r\nLineIntersector.POINT_INTERSECTION = 1;\r\nLineIntersector.COLLINEAR_INTERSECTION = 2;\r\n","import NotRepresentableException from './NotRepresentableException';\r\nimport CGAlgorithms from './CGAlgorithms';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport CGAlgorithmsDD from './CGAlgorithmsDD';\r\nimport System from '../../../../java/lang/System';\r\nimport HCoordinate from './HCoordinate';\r\nimport Envelope from '../geom/Envelope';\r\nimport inherits from '../../../../inherits';\r\nimport LineIntersector from './LineIntersector';\r\nexport default function RobustLineIntersector() {\r\n\tLineIntersector.apply(this);\r\n}\r\ninherits(RobustLineIntersector, LineIntersector);\r\nextend(RobustLineIntersector.prototype, {\r\n\tisInSegmentEnvelopes: function (intPt) {\r\n\t\tvar env0 = new Envelope(this.inputLines[0][0], this.inputLines[0][1]);\r\n\t\tvar env1 = new Envelope(this.inputLines[1][0], this.inputLines[1][1]);\r\n\t\treturn env0.contains(intPt) && env1.contains(intPt);\r\n\t},\r\n\tcomputeIntersection: function () {\r\n\t\tif (arguments.length === 3) {\r\n\t\t\tlet p = arguments[0], p1 = arguments[1], p2 = arguments[2];\r\n\t\t\tthis._isProper = false;\r\n\t\t\tif (Envelope.intersects(p1, p2, p)) {\r\n\t\t\t\tif (CGAlgorithms.orientationIndex(p1, p2, p) === 0 && CGAlgorithms.orientationIndex(p2, p1, p) === 0) {\r\n\t\t\t\t\tthis._isProper = true;\r\n\t\t\t\t\tif (p.equals(p1) || p.equals(p2)) {\r\n\t\t\t\t\t\tthis._isProper = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.result = LineIntersector.POINT_INTERSECTION;\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.result = LineIntersector.NO_INTERSECTION;\r\n\t\t} else return LineIntersector.prototype.computeIntersection.apply(this, arguments);\r\n\t},\r\n\tnormalizeToMinimum: function (n1, n2, n3, n4, normPt) {\r\n\t\tnormPt.x = this.smallestInAbsValue(n1.x, n2.x, n3.x, n4.x);\r\n\t\tnormPt.y = this.smallestInAbsValue(n1.y, n2.y, n3.y, n4.y);\r\n\t\tn1.x -= normPt.x;\r\n\t\tn1.y -= normPt.y;\r\n\t\tn2.x -= normPt.x;\r\n\t\tn2.y -= normPt.y;\r\n\t\tn3.x -= normPt.x;\r\n\t\tn3.y -= normPt.y;\r\n\t\tn4.x -= normPt.x;\r\n\t\tn4.y -= normPt.y;\r\n\t},\r\n\tsafeHCoordinateIntersection: function (p1, p2, q1, q2) {\r\n\t\tvar intPt = null;\r\n\t\ttry {\r\n\t\t\tintPt = HCoordinate.intersection(p1, p2, q1, q2);\r\n\t\t} catch (e) {\r\n\t\t\tif (e instanceof NotRepresentableException) {\r\n\t\t\t\tintPt = RobustLineIntersector.nearestEndpoint(p1, p2, q1, q2);\r\n\t\t\t} else throw e;\r\n\t\t} finally {}\r\n\t\treturn intPt;\r\n\t},\r\n\tintersection: function (p1, p2, q1, q2) {\r\n\t\tvar intPt = this.intersectionWithNormalization(p1, p2, q1, q2);\r\n\t\tif (!this.isInSegmentEnvelopes(intPt)) {\r\n\t\t\tintPt = new Coordinate(RobustLineIntersector.nearestEndpoint(p1, p2, q1, q2));\r\n\t\t}\r\n\t\tif (this.precisionModel !== null) {\r\n\t\t\tthis.precisionModel.makePrecise(intPt);\r\n\t\t}\r\n\t\treturn intPt;\r\n\t},\r\n\tsmallestInAbsValue: function (x1, x2, x3, x4) {\r\n\t\tvar x = x1;\r\n\t\tvar xabs = Math.abs(x);\r\n\t\tif (Math.abs(x2) < xabs) {\r\n\t\t\tx = x2;\r\n\t\t\txabs = Math.abs(x2);\r\n\t\t}\r\n\t\tif (Math.abs(x3) < xabs) {\r\n\t\t\tx = x3;\r\n\t\t\txabs = Math.abs(x3);\r\n\t\t}\r\n\t\tif (Math.abs(x4) < xabs) {\r\n\t\t\tx = x4;\r\n\t\t}\r\n\t\treturn x;\r\n\t},\r\n\tcheckDD: function (p1, p2, q1, q2, intPt) {\r\n\t\tvar intPtDD = CGAlgorithmsDD.intersection(p1, p2, q1, q2);\r\n\t\tvar isIn = this.isInSegmentEnvelopes(intPtDD);\r\n\t\tSystem.out.println(\"DD in env = \" + isIn + \"  --------------------- \" + intPtDD);\r\n\t\tif (intPt.distance(intPtDD) > 0.0001) {\r\n\t\t\tSystem.out.println(\"Distance = \" + intPt.distance(intPtDD));\r\n\t\t}\r\n\t},\r\n\tintersectionWithNormalization: function (p1, p2, q1, q2) {\r\n\t\tvar n1 = new Coordinate(p1);\r\n\t\tvar n2 = new Coordinate(p2);\r\n\t\tvar n3 = new Coordinate(q1);\r\n\t\tvar n4 = new Coordinate(q2);\r\n\t\tvar normPt = new Coordinate();\r\n\t\tthis.normalizeToEnvCentre(n1, n2, n3, n4, normPt);\r\n\t\tvar intPt = this.safeHCoordinateIntersection(n1, n2, n3, n4);\r\n\t\tintPt.x += normPt.x;\r\n\t\tintPt.y += normPt.y;\r\n\t\treturn intPt;\r\n\t},\r\n\tcomputeCollinearIntersection: function (p1, p2, q1, q2) {\r\n\t\tvar p1q1p2 = Envelope.intersects(p1, p2, q1);\r\n\t\tvar p1q2p2 = Envelope.intersects(p1, p2, q2);\r\n\t\tvar q1p1q2 = Envelope.intersects(q1, q2, p1);\r\n\t\tvar q1p2q2 = Envelope.intersects(q1, q2, p2);\r\n\t\tif (p1q1p2 && p1q2p2) {\r\n\t\t\tthis.intPt[0] = q1;\r\n\t\t\tthis.intPt[1] = q2;\r\n\t\t\treturn LineIntersector.COLLINEAR_INTERSECTION;\r\n\t\t}\r\n\t\tif (q1p1q2 && q1p2q2) {\r\n\t\t\tthis.intPt[0] = p1;\r\n\t\t\tthis.intPt[1] = p2;\r\n\t\t\treturn LineIntersector.COLLINEAR_INTERSECTION;\r\n\t\t}\r\n\t\tif (p1q1p2 && q1p1q2) {\r\n\t\t\tthis.intPt[0] = q1;\r\n\t\t\tthis.intPt[1] = p1;\r\n\t\t\treturn q1.equals(p1) && !p1q2p2 && !q1p2q2 ? LineIntersector.POINT_INTERSECTION : LineIntersector.COLLINEAR_INTERSECTION;\r\n\t\t}\r\n\t\tif (p1q1p2 && q1p2q2) {\r\n\t\t\tthis.intPt[0] = q1;\r\n\t\t\tthis.intPt[1] = p2;\r\n\t\t\treturn q1.equals(p2) && !p1q2p2 && !q1p1q2 ? LineIntersector.POINT_INTERSECTION : LineIntersector.COLLINEAR_INTERSECTION;\r\n\t\t}\r\n\t\tif (p1q2p2 && q1p1q2) {\r\n\t\t\tthis.intPt[0] = q2;\r\n\t\t\tthis.intPt[1] = p1;\r\n\t\t\treturn q2.equals(p1) && !p1q1p2 && !q1p2q2 ? LineIntersector.POINT_INTERSECTION : LineIntersector.COLLINEAR_INTERSECTION;\r\n\t\t}\r\n\t\tif (p1q2p2 && q1p2q2) {\r\n\t\t\tthis.intPt[0] = q2;\r\n\t\t\tthis.intPt[1] = p2;\r\n\t\t\treturn q2.equals(p2) && !p1q1p2 && !q1p1q2 ? LineIntersector.POINT_INTERSECTION : LineIntersector.COLLINEAR_INTERSECTION;\r\n\t\t}\r\n\t\treturn LineIntersector.NO_INTERSECTION;\r\n\t},\r\n\tnormalizeToEnvCentre: function (n00, n01, n10, n11, normPt) {\r\n\t\tvar minX0 = n00.x < n01.x ? n00.x : n01.x;\r\n\t\tvar minY0 = n00.y < n01.y ? n00.y : n01.y;\r\n\t\tvar maxX0 = n00.x > n01.x ? n00.x : n01.x;\r\n\t\tvar maxY0 = n00.y > n01.y ? n00.y : n01.y;\r\n\t\tvar minX1 = n10.x < n11.x ? n10.x : n11.x;\r\n\t\tvar minY1 = n10.y < n11.y ? n10.y : n11.y;\r\n\t\tvar maxX1 = n10.x > n11.x ? n10.x : n11.x;\r\n\t\tvar maxY1 = n10.y > n11.y ? n10.y : n11.y;\r\n\t\tvar intMinX = minX0 > minX1 ? minX0 : minX1;\r\n\t\tvar intMaxX = maxX0 < maxX1 ? maxX0 : maxX1;\r\n\t\tvar intMinY = minY0 > minY1 ? minY0 : minY1;\r\n\t\tvar intMaxY = maxY0 < maxY1 ? maxY0 : maxY1;\r\n\t\tvar intMidX = (intMinX + intMaxX) / 2.0;\r\n\t\tvar intMidY = (intMinY + intMaxY) / 2.0;\r\n\t\tnormPt.x = intMidX;\r\n\t\tnormPt.y = intMidY;\r\n\t\tn00.x -= normPt.x;\r\n\t\tn00.y -= normPt.y;\r\n\t\tn01.x -= normPt.x;\r\n\t\tn01.y -= normPt.y;\r\n\t\tn10.x -= normPt.x;\r\n\t\tn10.y -= normPt.y;\r\n\t\tn11.x -= normPt.x;\r\n\t\tn11.y -= normPt.y;\r\n\t},\r\n\tcomputeIntersect: function (p1, p2, q1, q2) {\r\n\t\tthis._isProper = false;\r\n\t\tif (!Envelope.intersects(p1, p2, q1, q2)) return LineIntersector.NO_INTERSECTION;\r\n\t\tvar Pq1 = CGAlgorithms.orientationIndex(p1, p2, q1);\r\n\t\tvar Pq2 = CGAlgorithms.orientationIndex(p1, p2, q2);\r\n\t\tif (Pq1 > 0 && Pq2 > 0 || Pq1 < 0 && Pq2 < 0) {\r\n\t\t\treturn LineIntersector.NO_INTERSECTION;\r\n\t\t}\r\n\t\tvar Qp1 = CGAlgorithms.orientationIndex(q1, q2, p1);\r\n\t\tvar Qp2 = CGAlgorithms.orientationIndex(q1, q2, p2);\r\n\t\tif (Qp1 > 0 && Qp2 > 0 || Qp1 < 0 && Qp2 < 0) {\r\n\t\t\treturn LineIntersector.NO_INTERSECTION;\r\n\t\t}\r\n\t\tvar collinear = Pq1 === 0 && Pq2 === 0 && Qp1 === 0 && Qp2 === 0;\r\n\t\tif (collinear) {\r\n\t\t\treturn this.computeCollinearIntersection(p1, p2, q1, q2);\r\n\t\t}\r\n\t\tif (Pq1 === 0 || Pq2 === 0 || Qp1 === 0 || Qp2 === 0) {\r\n\t\t\tthis._isProper = false;\r\n\t\t\tif (p1.equals2D(q1) || p1.equals2D(q2)) {\r\n\t\t\t\tthis.intPt[0] = p1;\r\n\t\t\t} else if (p2.equals2D(q1) || p2.equals2D(q2)) {\r\n\t\t\t\tthis.intPt[0] = p2;\r\n\t\t\t} else if (Pq1 === 0) {\r\n\t\t\t\tthis.intPt[0] = new Coordinate(q1);\r\n\t\t\t} else if (Pq2 === 0) {\r\n\t\t\t\tthis.intPt[0] = new Coordinate(q2);\r\n\t\t\t} else if (Qp1 === 0) {\r\n\t\t\t\tthis.intPt[0] = new Coordinate(p1);\r\n\t\t\t} else if (Qp2 === 0) {\r\n\t\t\t\tthis.intPt[0] = new Coordinate(p2);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._isProper = true;\r\n\t\t\tthis.intPt[0] = this.intersection(p1, p2, q1, q2);\r\n\t\t}\r\n\t\treturn LineIntersector.POINT_INTERSECTION;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RobustLineIntersector;\r\n\t}\r\n});\r\nRobustLineIntersector.nearestEndpoint = function (p1, p2, q1, q2) {\r\n\tvar nearestPt = p1;\r\n\tvar minDist = CGAlgorithms.distancePointLine(p1, q1, q2);\r\n\tvar dist = CGAlgorithms.distancePointLine(p2, q1, q2);\r\n\tif (dist < minDist) {\r\n\t\tminDist = dist;\r\n\t\tnearestPt = p2;\r\n\t}\r\n\tdist = CGAlgorithms.distancePointLine(q1, p1, p2);\r\n\tif (dist < minDist) {\r\n\t\tminDist = dist;\r\n\t\tnearestPt = q1;\r\n\t}\r\n\tdist = CGAlgorithms.distancePointLine(q2, p1, p2);\r\n\tif (dist < minDist) {\r\n\t\tminDist = dist;\r\n\t\tnearestPt = q2;\r\n\t}\r\n\treturn nearestPt;\r\n};\r\n","import extend from '../../../../extend';\r\nexport default function RobustDeterminant() {}\r\nextend(RobustDeterminant.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RobustDeterminant;\r\n\t}\r\n});\r\nRobustDeterminant.orientationIndex = function (p1, p2, q) {\r\n\tvar dx1 = p2.x - p1.x;\r\n\tvar dy1 = p2.y - p1.y;\r\n\tvar dx2 = q.x - p2.x;\r\n\tvar dy2 = q.y - p2.y;\r\n\treturn RobustDeterminant.signOfDet2x2(dx1, dy1, dx2, dy2);\r\n};\r\nRobustDeterminant.signOfDet2x2 = function (x1, y1, x2, y2) {\r\n\tvar sign = null;\r\n\tvar swap = null;\r\n\tvar k = null;\r\n\tvar count = 0;\r\n\tsign = 1;\r\n\tif (x1 === 0.0 || y2 === 0.0) {\r\n\t\tif (y1 === 0.0 || x2 === 0.0) {\r\n\t\t\treturn 0;\r\n\t\t} else if (y1 > 0) {\r\n\t\t\tif (x2 > 0) {\r\n\t\t\t\treturn -sign;\r\n\t\t\t} else {\r\n\t\t\t\treturn sign;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (x2 > 0) {\r\n\t\t\t\treturn sign;\r\n\t\t\t} else {\r\n\t\t\t\treturn -sign;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (y1 === 0.0 || x2 === 0.0) {\r\n\t\tif (y2 > 0) {\r\n\t\t\tif (x1 > 0) {\r\n\t\t\t\treturn sign;\r\n\t\t\t} else {\r\n\t\t\t\treturn -sign;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (x1 > 0) {\r\n\t\t\t\treturn -sign;\r\n\t\t\t} else {\r\n\t\t\t\treturn sign;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (0.0 < y1) {\r\n\t\tif (0.0 < y2) {\r\n\t\t\tif (y1 <= y2) {\r\n\t\t\t\t;\r\n\t\t\t} else {\r\n\t\t\t\tsign = -sign;\r\n\t\t\t\tswap = x1;\r\n\t\t\t\tx1 = x2;\r\n\t\t\t\tx2 = swap;\r\n\t\t\t\tswap = y1;\r\n\t\t\t\ty1 = y2;\r\n\t\t\t\ty2 = swap;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (y1 <= -y2) {\r\n\t\t\t\tsign = -sign;\r\n\t\t\t\tx2 = -x2;\r\n\t\t\t\ty2 = -y2;\r\n\t\t\t} else {\r\n\t\t\t\tswap = x1;\r\n\t\t\t\tx1 = -x2;\r\n\t\t\t\tx2 = swap;\r\n\t\t\t\tswap = y1;\r\n\t\t\t\ty1 = -y2;\r\n\t\t\t\ty2 = swap;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tif (0.0 < y2) {\r\n\t\t\tif (-y1 <= y2) {\r\n\t\t\t\tsign = -sign;\r\n\t\t\t\tx1 = -x1;\r\n\t\t\t\ty1 = -y1;\r\n\t\t\t} else {\r\n\t\t\t\tswap = -x1;\r\n\t\t\t\tx1 = x2;\r\n\t\t\t\tx2 = swap;\r\n\t\t\t\tswap = -y1;\r\n\t\t\t\ty1 = y2;\r\n\t\t\t\ty2 = swap;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (y1 >= y2) {\r\n\t\t\t\tx1 = -x1;\r\n\t\t\t\ty1 = -y1;\r\n\t\t\t\tx2 = -x2;\r\n\t\t\t\ty2 = -y2;\r\n\t\t\t\t;\r\n\t\t\t} else {\r\n\t\t\t\tsign = -sign;\r\n\t\t\t\tswap = -x1;\r\n\t\t\t\tx1 = -x2;\r\n\t\t\t\tx2 = swap;\r\n\t\t\t\tswap = -y1;\r\n\t\t\t\ty1 = -y2;\r\n\t\t\t\ty2 = swap;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (0.0 < x1) {\r\n\t\tif (0.0 < x2) {\r\n\t\t\tif (x1 <= x2) {\r\n\t\t\t\t;\r\n\t\t\t} else {\r\n\t\t\t\treturn sign;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn sign;\r\n\t\t}\r\n\t} else {\r\n\t\tif (0.0 < x2) {\r\n\t\t\treturn -sign;\r\n\t\t} else {\r\n\t\t\tif (x1 >= x2) {\r\n\t\t\t\tsign = -sign;\r\n\t\t\t\tx1 = -x1;\r\n\t\t\t\tx2 = -x2;\r\n\t\t\t\t;\r\n\t\t\t} else {\r\n\t\t\t\treturn -sign;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\twhile (true) {\r\n\t\tcount = count + 1;\r\n\t\tk = Math.floor(x2 / x1);\r\n\t\tx2 = x2 - k * x1;\r\n\t\ty2 = y2 - k * y1;\r\n\t\tif (y2 < 0.0) {\r\n\t\t\treturn -sign;\r\n\t\t}\r\n\t\tif (y2 > y1) {\r\n\t\t\treturn sign;\r\n\t\t}\r\n\t\tif (x1 > x2 + x2) {\r\n\t\t\tif (y1 < y2 + y2) {\r\n\t\t\t\treturn sign;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (y1 > y2 + y2) {\r\n\t\t\t\treturn -sign;\r\n\t\t\t} else {\r\n\t\t\t\tx2 = x1 - x2;\r\n\t\t\t\ty2 = y1 - y2;\r\n\t\t\t\tsign = -sign;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (y2 === 0.0) {\r\n\t\t\tif (x2 === 0.0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t} else {\r\n\t\t\t\treturn -sign;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (x2 === 0.0) {\r\n\t\t\treturn sign;\r\n\t\t}\r\n\t\tk = Math.floor(x1 / x2);\r\n\t\tx1 = x1 - k * x2;\r\n\t\ty1 = y1 - k * y2;\r\n\t\tif (y1 < 0.0) {\r\n\t\t\treturn sign;\r\n\t\t}\r\n\t\tif (y1 > y2) {\r\n\t\t\treturn -sign;\r\n\t\t}\r\n\t\tif (x2 > x1 + x1) {\r\n\t\t\tif (y2 < y1 + y1) {\r\n\t\t\t\treturn -sign;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (y2 > y1 + y1) {\r\n\t\t\t\treturn sign;\r\n\t\t\t} else {\r\n\t\t\t\tx1 = x2 - x1;\r\n\t\t\t\ty1 = y2 - y1;\r\n\t\t\t\tsign = -sign;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (y1 === 0.0) {\r\n\t\t\tif (x1 === 0.0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t} else {\r\n\t\t\t\treturn sign;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (x1 === 0.0) {\r\n\t\t\treturn -sign;\r\n\t\t}\r\n\t}\r\n};\r\n","import Location from '../geom/Location';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport CoordinateSequence from '../geom/CoordinateSequence';\r\nimport RobustDeterminant from './RobustDeterminant';\r\nexport default function RayCrossingCounter() {\r\n\tthis.p = null;\r\n\tthis.crossingCount = 0;\r\n\tthis.isPointOnSegment = false;\r\n\tlet p = arguments[0];\r\n\tthis.p = p;\r\n}\r\nextend(RayCrossingCounter.prototype, {\r\n\tcountSegment: function (p1, p2) {\r\n\t\tif (p1.x < this.p.x && p2.x < this.p.x) return null;\r\n\t\tif (this.p.x === p2.x && this.p.y === p2.y) {\r\n\t\t\tthis.isPointOnSegment = true;\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (p1.y === this.p.y && p2.y === this.p.y) {\r\n\t\t\tvar minx = p1.x;\r\n\t\t\tvar maxx = p2.x;\r\n\t\t\tif (minx > maxx) {\r\n\t\t\t\tminx = p2.x;\r\n\t\t\t\tmaxx = p1.x;\r\n\t\t\t}\r\n\t\t\tif (this.p.x >= minx && this.p.x <= maxx) {\r\n\t\t\t\tthis.isPointOnSegment = true;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (p1.y > this.p.y && p2.y <= this.p.y || p2.y > this.p.y && p1.y <= this.p.y) {\r\n\t\t\tvar x1 = p1.x - this.p.x;\r\n\t\t\tvar y1 = p1.y - this.p.y;\r\n\t\t\tvar x2 = p2.x - this.p.x;\r\n\t\t\tvar y2 = p2.y - this.p.y;\r\n\t\t\tvar xIntSign = RobustDeterminant.signOfDet2x2(x1, y1, x2, y2);\r\n\t\t\tif (xIntSign === 0.0) {\r\n\t\t\t\tthis.isPointOnSegment = true;\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (y2 < y1) xIntSign = -xIntSign;\r\n\t\t\tif (xIntSign > 0.0) {\r\n\t\t\t\tthis.crossingCount++;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisPointInPolygon: function () {\r\n\t\treturn this.getLocation() !== Location.EXTERIOR;\r\n\t},\r\n\tgetLocation: function () {\r\n\t\tif (this.isPointOnSegment) return Location.BOUNDARY;\r\n\t\tif (this.crossingCount % 2 === 1) {\r\n\t\t\treturn Location.INTERIOR;\r\n\t\t}\r\n\t\treturn Location.EXTERIOR;\r\n\t},\r\n\tisOnSegment: function () {\r\n\t\treturn this.isPointOnSegment;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RayCrossingCounter;\r\n\t}\r\n});\r\nRayCrossingCounter.locatePointInRing = function () {\r\n\tif (arguments[0] instanceof Coordinate && hasInterface(arguments[1], CoordinateSequence)) {\r\n\t\tlet p = arguments[0], ring = arguments[1];\r\n\t\tvar counter = new RayCrossingCounter(p);\r\n\t\tvar p1 = new Coordinate();\r\n\t\tvar p2 = new Coordinate();\r\n\t\tfor (var i = 1; i < ring.size(); i++) {\r\n\t\t\tring.getCoordinate(i, p1);\r\n\t\t\tring.getCoordinate(i - 1, p2);\r\n\t\t\tcounter.countSegment(p1, p2);\r\n\t\t\tif (counter.isOnSegment()) return counter.getLocation();\r\n\t\t}\r\n\t\treturn counter.getLocation();\r\n\t} else if (arguments[0] instanceof Coordinate && arguments[1] instanceof Array) {\r\n\t\tlet p = arguments[0], ring = arguments[1];\r\n\t\tvar counter = new RayCrossingCounter(p);\r\n\t\tfor (var i = 1; i < ring.length; i++) {\r\n\t\t\tvar p1 = ring[i];\r\n\t\t\tvar p2 = ring[i - 1];\r\n\t\t\tcounter.countSegment(p1, p2);\r\n\t\t\tif (counter.isOnSegment()) return counter.getLocation();\r\n\t\t}\r\n\t\treturn counter.getLocation();\r\n\t}\r\n};\r\n","import Location from '../geom/Location';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport MathUtil from '../math/MathUtil';\r\nimport CGAlgorithmsDD from './CGAlgorithmsDD';\r\nimport CoordinateSequence from '../geom/CoordinateSequence';\r\nimport RobustLineIntersector from './RobustLineIntersector';\r\nimport Envelope from '../geom/Envelope';\r\nimport RayCrossingCounter from './RayCrossingCounter';\r\nexport default function CGAlgorithms() {}\r\nextend(CGAlgorithms.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CGAlgorithms;\r\n\t}\r\n});\r\nCGAlgorithms.orientationIndex = function (p1, p2, q) {\r\n\treturn CGAlgorithmsDD.orientationIndex(p1, p2, q);\r\n};\r\nCGAlgorithms.signedArea = function () {\r\n\tif (arguments[0] instanceof Array) {\r\n\t\tlet ring = arguments[0];\r\n\t\tif (ring.length < 3) return 0.0;\r\n\t\tvar sum = 0.0;\r\n\t\tvar x0 = ring[0].x;\r\n\t\tfor (var i = 1; i < ring.length - 1; i++) {\r\n\t\t\tvar x = ring[i].x - x0;\r\n\t\t\tvar y1 = ring[i + 1].y;\r\n\t\t\tvar y2 = ring[i - 1].y;\r\n\t\t\tsum += x * (y2 - y1);\r\n\t\t}\r\n\t\treturn sum / 2.0;\r\n\t} else if (hasInterface(arguments[0], CoordinateSequence)) {\r\n\t\tlet ring = arguments[0];\r\n\t\tvar n = ring.size();\r\n\t\tif (n < 3) return 0.0;\r\n\t\tvar p0 = new Coordinate();\r\n\t\tvar p1 = new Coordinate();\r\n\t\tvar p2 = new Coordinate();\r\n\t\tring.getCoordinate(0, p1);\r\n\t\tring.getCoordinate(1, p2);\r\n\t\tvar x0 = p1.x;\r\n\t\tp2.x -= x0;\r\n\t\tvar sum = 0.0;\r\n\t\tfor (var i = 1; i < n - 1; i++) {\r\n\t\t\tp0.y = p1.y;\r\n\t\t\tp1.x = p2.x;\r\n\t\t\tp1.y = p2.y;\r\n\t\t\tring.getCoordinate(i + 1, p2);\r\n\t\t\tp2.x -= x0;\r\n\t\t\tsum += p1.x * (p0.y - p2.y);\r\n\t\t}\r\n\t\treturn sum / 2.0;\r\n\t}\r\n};\r\nCGAlgorithms.distanceLineLine = function (A, B, C, D) {\r\n\tif (A.equals(B)) return CGAlgorithms.distancePointLine(A, C, D);\r\n\tif (C.equals(D)) return CGAlgorithms.distancePointLine(D, A, B);\r\n\tvar noIntersection = false;\r\n\tif (!Envelope.intersects(A, B, C, D)) {\r\n\t\tnoIntersection = true;\r\n\t} else {\r\n\t\tvar denom = (B.x - A.x) * (D.y - C.y) - (B.y - A.y) * (D.x - C.x);\r\n\t\tif (denom === 0) {\r\n\t\t\tnoIntersection = true;\r\n\t\t} else {\r\n\t\t\tvar r_num = (A.y - C.y) * (D.x - C.x) - (A.x - C.x) * (D.y - C.y);\r\n\t\t\tvar s_num = (A.y - C.y) * (B.x - A.x) - (A.x - C.x) * (B.y - A.y);\r\n\t\t\tvar s = s_num / denom;\r\n\t\t\tvar r = r_num / denom;\r\n\t\t\tif (r < 0 || r > 1 || s < 0 || s > 1) {\r\n\t\t\t\tnoIntersection = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (noIntersection) {\r\n\t\treturn MathUtil.min(CGAlgorithms.distancePointLine(A, C, D), CGAlgorithms.distancePointLine(B, C, D), CGAlgorithms.distancePointLine(C, A, B), CGAlgorithms.distancePointLine(D, A, B));\r\n\t}\r\n\treturn 0.0;\r\n};\r\nCGAlgorithms.isPointInRing = function (p, ring) {\r\n\treturn CGAlgorithms.locatePointInRing(p, ring) !== Location.EXTERIOR;\r\n};\r\nCGAlgorithms.computeLength = function (pts) {\r\n\tvar n = pts.size();\r\n\tif (n <= 1) return 0.0;\r\n\tvar len = 0.0;\r\n\tvar p = new Coordinate();\r\n\tpts.getCoordinate(0, p);\r\n\tvar x0 = p.x;\r\n\tvar y0 = p.y;\r\n\tfor (var i = 1; i < n; i++) {\r\n\t\tpts.getCoordinate(i, p);\r\n\t\tvar x1 = p.x;\r\n\t\tvar y1 = p.y;\r\n\t\tvar dx = x1 - x0;\r\n\t\tvar dy = y1 - y0;\r\n\t\tlen += Math.sqrt(dx * dx + dy * dy);\r\n\t\tx0 = x1;\r\n\t\ty0 = y1;\r\n\t}\r\n\treturn len;\r\n};\r\nCGAlgorithms.isCCW = function (ring) {\r\n\tvar nPts = ring.length - 1;\r\n\tif (nPts < 3) throw new IllegalArgumentException(\"Ring has fewer than 4 points, so orientation cannot be determined\");\r\n\tvar hiPt = ring[0];\r\n\tvar hiIndex = 0;\r\n\tfor (var i = 1; i <= nPts; i++) {\r\n\t\tvar p = ring[i];\r\n\t\tif (p.y > hiPt.y) {\r\n\t\t\thiPt = p;\r\n\t\t\thiIndex = i;\r\n\t\t}\r\n\t}\r\n\tvar iPrev = hiIndex;\r\n\tdo {\r\n\t\tiPrev = iPrev - 1;\r\n\t\tif (iPrev < 0) iPrev = nPts;\r\n\t} while (ring[iPrev].equals2D(hiPt) && iPrev !== hiIndex);\r\n\tvar iNext = hiIndex;\r\n\tdo {\r\n\t\tiNext = (iNext + 1) % nPts;\r\n\t} while (ring[iNext].equals2D(hiPt) && iNext !== hiIndex);\r\n\tvar prev = ring[iPrev];\r\n\tvar next = ring[iNext];\r\n\tif (prev.equals2D(hiPt) || next.equals2D(hiPt) || prev.equals2D(next)) return false;\r\n\tvar disc = CGAlgorithms.computeOrientation(prev, hiPt, next);\r\n\tvar isCCW = false;\r\n\tif (disc === 0) {\r\n\t\tisCCW = prev.x > next.x;\r\n\t} else {\r\n\t\tisCCW = disc > 0;\r\n\t}\r\n\treturn isCCW;\r\n};\r\nCGAlgorithms.locatePointInRing = function (p, ring) {\r\n\treturn RayCrossingCounter.locatePointInRing(p, ring);\r\n};\r\nCGAlgorithms.distancePointLinePerpendicular = function (p, A, B) {\r\n\tvar len2 = (B.x - A.x) * (B.x - A.x) + (B.y - A.y) * (B.y - A.y);\r\n\tvar s = ((A.y - p.y) * (B.x - A.x) - (A.x - p.x) * (B.y - A.y)) / len2;\r\n\treturn Math.abs(s) * Math.sqrt(len2);\r\n};\r\nCGAlgorithms.computeOrientation = function (p1, p2, q) {\r\n\treturn CGAlgorithms.orientationIndex(p1, p2, q);\r\n};\r\nCGAlgorithms.distancePointLine = function () {\r\n\tif (arguments.length === 2) {\r\n\t\tlet p = arguments[0], line = arguments[1];\r\n\t\tif (line.length === 0) throw new IllegalArgumentException(\"Line array must contain at least one vertex\");\r\n\t\tvar minDistance = p.distance(line[0]);\r\n\t\tfor (var i = 0; i < line.length - 1; i++) {\r\n\t\t\tvar dist = CGAlgorithms.distancePointLine(p, line[i], line[i + 1]);\r\n\t\t\tif (dist < minDistance) {\r\n\t\t\t\tminDistance = dist;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn minDistance;\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet p = arguments[0], A = arguments[1], B = arguments[2];\r\n\t\tif (A.x === B.x && A.y === B.y) return p.distance(A);\r\n\t\tvar len2 = (B.x - A.x) * (B.x - A.x) + (B.y - A.y) * (B.y - A.y);\r\n\t\tvar r = ((p.x - A.x) * (B.x - A.x) + (p.y - A.y) * (B.y - A.y)) / len2;\r\n\t\tif (r <= 0.0) return p.distance(A);\r\n\t\tif (r >= 1.0) return p.distance(B);\r\n\t\tvar s = ((A.y - p.y) * (B.x - A.x) - (A.x - p.x) * (B.y - A.y)) / len2;\r\n\t\treturn Math.abs(s) * Math.sqrt(len2);\r\n\t}\r\n};\r\nCGAlgorithms.isOnLine = function (p, pt) {\r\n\tvar lineIntersector = new RobustLineIntersector();\r\n\tfor (var i = 1; i < pt.length; i++) {\r\n\t\tvar p0 = pt[i - 1];\r\n\t\tvar p1 = pt[i];\r\n\t\tlineIntersector.computeIntersection(p, p0, p1);\r\n\t\tif (lineIntersector.hasIntersection()) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};\r\nCGAlgorithms.CLOCKWISE = -1;\r\nCGAlgorithms.RIGHT = CGAlgorithms.CLOCKWISE;\r\nCGAlgorithms.COUNTERCLOCKWISE = 1;\r\nCGAlgorithms.LEFT = CGAlgorithms.COUNTERCLOCKWISE;\r\nCGAlgorithms.COLLINEAR = 0;\r\nCGAlgorithms.STRAIGHT = CGAlgorithms.COLLINEAR;\r\n","import NotRepresentableException from '../algorithm/NotRepresentableException';\r\nimport CGAlgorithms from '../algorithm/CGAlgorithms';\r\nimport Coordinate from './Coordinate';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nimport RobustLineIntersector from '../algorithm/RobustLineIntersector';\r\nimport HCoordinate from '../algorithm/HCoordinate';\r\nimport Serializable from '../../../../java/io/Serializable';\r\nexport default function LineSegment() {\r\n\tthis.p0 = null;\r\n\tthis.p1 = null;\r\n\tif (arguments.length === 0) {\r\n\t\tLineSegment.call(this, new Coordinate(), new Coordinate());\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet ls = arguments[0];\r\n\t\tLineSegment.call(this, ls.p0, ls.p1);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet p0 = arguments[0], p1 = arguments[1];\r\n\t\tthis.p0 = p0;\r\n\t\tthis.p1 = p1;\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet x0 = arguments[0], y0 = arguments[1], x1 = arguments[2], y1 = arguments[3];\r\n\t\tLineSegment.call(this, new Coordinate(x0, y0), new Coordinate(x1, y1));\r\n\t}\r\n}\r\nextend(LineSegment.prototype, {\r\n\tminX: function () {\r\n\t\treturn Math.min(this.p0.x, this.p1.x);\r\n\t},\r\n\torientationIndex: function () {\r\n\t\tif (arguments[0] instanceof LineSegment) {\r\n\t\t\tlet seg = arguments[0];\r\n\t\t\tvar orient0 = CGAlgorithms.orientationIndex(this.p0, this.p1, seg.p0);\r\n\t\t\tvar orient1 = CGAlgorithms.orientationIndex(this.p0, this.p1, seg.p1);\r\n\t\t\tif (orient0 >= 0 && orient1 >= 0) return Math.max(orient0, orient1);\r\n\t\t\tif (orient0 <= 0 && orient1 <= 0) return Math.max(orient0, orient1);\r\n\t\t\treturn 0;\r\n\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet p = arguments[0];\r\n\t\t\treturn CGAlgorithms.orientationIndex(this.p0, this.p1, p);\r\n\t\t}\r\n\t},\r\n\ttoGeometry: function (geomFactory) {\r\n\t\treturn geomFactory.createLineString([this.p0, this.p1]);\r\n\t},\r\n\tisVertical: function () {\r\n\t\treturn this.p0.x === this.p1.x;\r\n\t},\r\n\tequals: function (o) {\r\n\t\tif (!(o instanceof LineSegment)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar other = o;\r\n\t\treturn this.p0.equals(other.p0) && this.p1.equals(other.p1);\r\n\t},\r\n\tintersection: function (line) {\r\n\t\tvar li = new RobustLineIntersector();\r\n\t\tli.computeIntersection(this.p0, this.p1, line.p0, line.p1);\r\n\t\tif (li.hasIntersection()) return li.getIntersection(0);\r\n\t\treturn null;\r\n\t},\r\n\tproject: function () {\r\n\t\tif (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet p = arguments[0];\r\n\t\t\tif (p.equals(this.p0) || p.equals(this.p1)) return new Coordinate(p);\r\n\t\t\tvar r = this.projectionFactor(p);\r\n\t\t\tvar coord = new Coordinate();\r\n\t\t\tcoord.x = this.p0.x + r * (this.p1.x - this.p0.x);\r\n\t\t\tcoord.y = this.p0.y + r * (this.p1.y - this.p0.y);\r\n\t\t\treturn coord;\r\n\t\t} else if (arguments[0] instanceof LineSegment) {\r\n\t\t\tlet seg = arguments[0];\r\n\t\t\tvar pf0 = this.projectionFactor(seg.p0);\r\n\t\t\tvar pf1 = this.projectionFactor(seg.p1);\r\n\t\t\tif (pf0 >= 1.0 && pf1 >= 1.0) return null;\r\n\t\t\tif (pf0 <= 0.0 && pf1 <= 0.0) return null;\r\n\t\t\tvar newp0 = this.project(seg.p0);\r\n\t\t\tif (pf0 < 0.0) newp0 = this.p0;\r\n\t\t\tif (pf0 > 1.0) newp0 = this.p1;\r\n\t\t\tvar newp1 = this.project(seg.p1);\r\n\t\t\tif (pf1 < 0.0) newp1 = this.p0;\r\n\t\t\tif (pf1 > 1.0) newp1 = this.p1;\r\n\t\t\treturn new LineSegment(newp0, newp1);\r\n\t\t}\r\n\t},\r\n\tnormalize: function () {\r\n\t\tif (this.p1.compareTo(this.p0) < 0) this.reverse();\r\n\t},\r\n\tangle: function () {\r\n\t\treturn Math.atan2(this.p1.y - this.p0.y, this.p1.x - this.p0.x);\r\n\t},\r\n\tgetCoordinate: function (i) {\r\n\t\tif (i === 0) return this.p0;\r\n\t\treturn this.p1;\r\n\t},\r\n\tdistancePerpendicular: function (p) {\r\n\t\treturn CGAlgorithms.distancePointLinePerpendicular(p, this.p0, this.p1);\r\n\t},\r\n\tminY: function () {\r\n\t\treturn Math.min(this.p0.y, this.p1.y);\r\n\t},\r\n\tmidPoint: function () {\r\n\t\treturn LineSegment.midPoint(this.p0, this.p1);\r\n\t},\r\n\tprojectionFactor: function (p) {\r\n\t\tif (p.equals(this.p0)) return 0.0;\r\n\t\tif (p.equals(this.p1)) return 1.0;\r\n\t\tvar dx = this.p1.x - this.p0.x;\r\n\t\tvar dy = this.p1.y - this.p0.y;\r\n\t\tvar len = dx * dx + dy * dy;\r\n\t\tif (len <= 0.0) return Double.NaN;\r\n\t\tvar r = ((p.x - this.p0.x) * dx + (p.y - this.p0.y) * dy) / len;\r\n\t\treturn r;\r\n\t},\r\n\tclosestPoints: function (line) {\r\n\t\tvar intPt = this.intersection(line);\r\n\t\tif (intPt !== null) {\r\n\t\t\treturn [intPt, intPt];\r\n\t\t}\r\n\t\tvar closestPt = new Array(2).fill(null);\r\n\t\tvar minDistance = Double.MAX_VALUE;\r\n\t\tvar dist = null;\r\n\t\tvar close00 = this.closestPoint(line.p0);\r\n\t\tminDistance = close00.distance(line.p0);\r\n\t\tclosestPt[0] = close00;\r\n\t\tclosestPt[1] = line.p0;\r\n\t\tvar close01 = this.closestPoint(line.p1);\r\n\t\tdist = close01.distance(line.p1);\r\n\t\tif (dist < minDistance) {\r\n\t\t\tminDistance = dist;\r\n\t\t\tclosestPt[0] = close01;\r\n\t\t\tclosestPt[1] = line.p1;\r\n\t\t}\r\n\t\tvar close10 = line.closestPoint(this.p0);\r\n\t\tdist = close10.distance(this.p0);\r\n\t\tif (dist < minDistance) {\r\n\t\t\tminDistance = dist;\r\n\t\t\tclosestPt[0] = this.p0;\r\n\t\t\tclosestPt[1] = close10;\r\n\t\t}\r\n\t\tvar close11 = line.closestPoint(this.p1);\r\n\t\tdist = close11.distance(this.p1);\r\n\t\tif (dist < minDistance) {\r\n\t\t\tminDistance = dist;\r\n\t\t\tclosestPt[0] = this.p1;\r\n\t\t\tclosestPt[1] = close11;\r\n\t\t}\r\n\t\treturn closestPt;\r\n\t},\r\n\tclosestPoint: function (p) {\r\n\t\tvar factor = this.projectionFactor(p);\r\n\t\tif (factor > 0 && factor < 1) {\r\n\t\t\treturn this.project(p);\r\n\t\t}\r\n\t\tvar dist0 = this.p0.distance(p);\r\n\t\tvar dist1 = this.p1.distance(p);\r\n\t\tif (dist0 < dist1) return this.p0;\r\n\t\treturn this.p1;\r\n\t},\r\n\tmaxX: function () {\r\n\t\treturn Math.max(this.p0.x, this.p1.x);\r\n\t},\r\n\tgetLength: function () {\r\n\t\treturn this.p0.distance(this.p1);\r\n\t},\r\n\tcompareTo: function (o) {\r\n\t\tvar other = o;\r\n\t\tvar comp0 = this.p0.compareTo(other.p0);\r\n\t\tif (comp0 !== 0) return comp0;\r\n\t\treturn this.p1.compareTo(other.p1);\r\n\t},\r\n\treverse: function () {\r\n\t\tvar temp = this.p0;\r\n\t\tthis.p0 = this.p1;\r\n\t\tthis.p1 = temp;\r\n\t},\r\n\tequalsTopo: function (other) {\r\n\t\treturn this.p0.equals(other.p0) && this.p1.equals(other.p1) || this.p0.equals(other.p1) && this.p1.equals(other.p0);\r\n\t},\r\n\tlineIntersection: function (line) {\r\n\t\ttry {\r\n\t\t\tvar intPt = HCoordinate.intersection(this.p0, this.p1, line.p0, line.p1);\r\n\t\t\treturn intPt;\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex instanceof NotRepresentableException) {} else throw ex;\r\n\t\t} finally {}\r\n\t\treturn null;\r\n\t},\r\n\tmaxY: function () {\r\n\t\treturn Math.max(this.p0.y, this.p1.y);\r\n\t},\r\n\tpointAlongOffset: function (segmentLengthFraction, offsetDistance) {\r\n\t\tvar segx = this.p0.x + segmentLengthFraction * (this.p1.x - this.p0.x);\r\n\t\tvar segy = this.p0.y + segmentLengthFraction * (this.p1.y - this.p0.y);\r\n\t\tvar dx = this.p1.x - this.p0.x;\r\n\t\tvar dy = this.p1.y - this.p0.y;\r\n\t\tvar len = Math.sqrt(dx * dx + dy * dy);\r\n\t\tvar ux = 0.0;\r\n\t\tvar uy = 0.0;\r\n\t\tif (offsetDistance !== 0.0) {\r\n\t\t\tif (len <= 0.0) throw new IllegalStateException(\"Cannot compute offset from zero-length line segment\");\r\n\t\t\tux = offsetDistance * dx / len;\r\n\t\t\tuy = offsetDistance * dy / len;\r\n\t\t}\r\n\t\tvar offsetx = segx - uy;\r\n\t\tvar offsety = segy + ux;\r\n\t\tvar coord = new Coordinate(offsetx, offsety);\r\n\t\treturn coord;\r\n\t},\r\n\tsetCoordinates: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet ls = arguments[0];\r\n\t\t\tthis.setCoordinates(ls.p0, ls.p1);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet p0 = arguments[0], p1 = arguments[1];\r\n\t\t\tthis.p0.x = p0.x;\r\n\t\t\tthis.p0.y = p0.y;\r\n\t\t\tthis.p1.x = p1.x;\r\n\t\t\tthis.p1.y = p1.y;\r\n\t\t}\r\n\t},\r\n\tsegmentFraction: function (inputPt) {\r\n\t\tvar segFrac = this.projectionFactor(inputPt);\r\n\t\tif (segFrac < 0.0) segFrac = 0.0; else if (segFrac > 1.0 || Double.isNaN(segFrac)) segFrac = 1.0;\r\n\t\treturn segFrac;\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn \"LINESTRING( \" + this.p0.x + \" \" + this.p0.y + \", \" + this.p1.x + \" \" + this.p1.y + \")\";\r\n\t},\r\n\tisHorizontal: function () {\r\n\t\treturn this.p0.y === this.p1.y;\r\n\t},\r\n\tdistance: function () {\r\n\t\tif (arguments[0] instanceof LineSegment) {\r\n\t\t\tlet ls = arguments[0];\r\n\t\t\treturn CGAlgorithms.distanceLineLine(this.p0, this.p1, ls.p0, ls.p1);\r\n\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet p = arguments[0];\r\n\t\t\treturn CGAlgorithms.distancePointLine(p, this.p0, this.p1);\r\n\t\t}\r\n\t},\r\n\tpointAlong: function (segmentLengthFraction) {\r\n\t\tvar coord = new Coordinate();\r\n\t\tcoord.x = this.p0.x + segmentLengthFraction * (this.p1.x - this.p0.x);\r\n\t\tcoord.y = this.p0.y + segmentLengthFraction * (this.p1.y - this.p0.y);\r\n\t\treturn coord;\r\n\t},\r\n\thashCode: function () {\r\n\t\tvar bits0 = java.lang.Double.doubleToLongBits(this.p0.x);\r\n\t\tbits0 ^= java.lang.Double.doubleToLongBits(this.p0.y) * 31;\r\n\t\tvar hash0 = Math.trunc(bits0) ^ Math.trunc(bits0 >> 32);\r\n\t\tvar bits1 = java.lang.Double.doubleToLongBits(this.p1.x);\r\n\t\tbits1 ^= java.lang.Double.doubleToLongBits(this.p1.y) * 31;\r\n\t\tvar hash1 = Math.trunc(bits1) ^ Math.trunc(bits1 >> 32);\r\n\t\treturn hash0 ^ hash1;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineSegment;\r\n\t}\r\n});\r\nLineSegment.midPoint = function (p0, p1) {\r\n\treturn new Coordinate((p0.x + p1.x) / 2, (p0.y + p1.y) / 2);\r\n};\r\nLineSegment.serialVersionUID = 3252005833466256227;\r\n","import StringBuffer from '../../../../java/lang/StringBuffer';\r\nimport Location from './Location';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport Dimension from './Dimension';\r\nimport Cloneable from '../../../../java/lang/Cloneable';\r\nexport default function IntersectionMatrix() {\r\n\tthis.matrix = null;\r\n\tif (arguments.length === 0) {\r\n\t\tthis.matrix = Array(3).fill().map(() => Array(3));\r\n\t\tthis.setAll(Dimension.FALSE);\r\n\t} else if (arguments.length === 1) {\r\n\t\tif (typeof arguments[0] === \"string\") {\r\n\t\t\tlet elements = arguments[0];\r\n\t\t\tIntersectionMatrix.call(this);\r\n\t\t\tthis.set(elements);\r\n\t\t} else if (arguments[0] instanceof IntersectionMatrix) {\r\n\t\t\tlet other = arguments[0];\r\n\t\t\tIntersectionMatrix.call(this);\r\n\t\t\tthis.matrix[Location.INTERIOR][Location.INTERIOR] = other.matrix[Location.INTERIOR][Location.INTERIOR];\r\n\t\t\tthis.matrix[Location.INTERIOR][Location.BOUNDARY] = other.matrix[Location.INTERIOR][Location.BOUNDARY];\r\n\t\t\tthis.matrix[Location.INTERIOR][Location.EXTERIOR] = other.matrix[Location.INTERIOR][Location.EXTERIOR];\r\n\t\t\tthis.matrix[Location.BOUNDARY][Location.INTERIOR] = other.matrix[Location.BOUNDARY][Location.INTERIOR];\r\n\t\t\tthis.matrix[Location.BOUNDARY][Location.BOUNDARY] = other.matrix[Location.BOUNDARY][Location.BOUNDARY];\r\n\t\t\tthis.matrix[Location.BOUNDARY][Location.EXTERIOR] = other.matrix[Location.BOUNDARY][Location.EXTERIOR];\r\n\t\t\tthis.matrix[Location.EXTERIOR][Location.INTERIOR] = other.matrix[Location.EXTERIOR][Location.INTERIOR];\r\n\t\t\tthis.matrix[Location.EXTERIOR][Location.BOUNDARY] = other.matrix[Location.EXTERIOR][Location.BOUNDARY];\r\n\t\t\tthis.matrix[Location.EXTERIOR][Location.EXTERIOR] = other.matrix[Location.EXTERIOR][Location.EXTERIOR];\r\n\t\t}\r\n\t}\r\n}\r\nextend(IntersectionMatrix.prototype, {\r\n\tisIntersects: function () {\r\n\t\treturn !this.isDisjoint();\r\n\t},\r\n\tisCovers: function () {\r\n\t\tvar hasPointInCommon = IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR]) || IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.BOUNDARY]) || IntersectionMatrix.isTrue(this.matrix[Location.BOUNDARY][Location.INTERIOR]) || IntersectionMatrix.isTrue(this.matrix[Location.BOUNDARY][Location.BOUNDARY]);\r\n\t\treturn hasPointInCommon && this.matrix[Location.EXTERIOR][Location.INTERIOR] === Dimension.FALSE && this.matrix[Location.EXTERIOR][Location.BOUNDARY] === Dimension.FALSE;\r\n\t},\r\n\tisCoveredBy: function () {\r\n\t\tvar hasPointInCommon = IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR]) || IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.BOUNDARY]) || IntersectionMatrix.isTrue(this.matrix[Location.BOUNDARY][Location.INTERIOR]) || IntersectionMatrix.isTrue(this.matrix[Location.BOUNDARY][Location.BOUNDARY]);\r\n\t\treturn hasPointInCommon && this.matrix[Location.INTERIOR][Location.EXTERIOR] === Dimension.FALSE && this.matrix[Location.BOUNDARY][Location.EXTERIOR] === Dimension.FALSE;\r\n\t},\r\n\tset: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet dimensionSymbols = arguments[0];\r\n\t\t\tfor (var i = 0; i < dimensionSymbols.length; i++) {\r\n\t\t\t\tvar row = Math.trunc(i / 3);\r\n\t\t\t\tvar col = i % 3;\r\n\t\t\t\tthis.matrix[row][col] = Dimension.toDimensionValue(dimensionSymbols.charAt(i));\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet row = arguments[0], column = arguments[1], dimensionValue = arguments[2];\r\n\t\t\tthis.matrix[row][column] = dimensionValue;\r\n\t\t}\r\n\t},\r\n\tisContains: function () {\r\n\t\treturn IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR]) && this.matrix[Location.EXTERIOR][Location.INTERIOR] === Dimension.FALSE && this.matrix[Location.EXTERIOR][Location.BOUNDARY] === Dimension.FALSE;\r\n\t},\r\n\tsetAtLeast: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet minimumDimensionSymbols = arguments[0];\r\n\t\t\tfor (var i = 0; i < minimumDimensionSymbols.length; i++) {\r\n\t\t\t\tvar row = Math.trunc(i / 3);\r\n\t\t\t\tvar col = i % 3;\r\n\t\t\t\tthis.setAtLeast(row, col, Dimension.toDimensionValue(minimumDimensionSymbols.charAt(i)));\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet row = arguments[0], column = arguments[1], minimumDimensionValue = arguments[2];\r\n\t\t\tif (this.matrix[row][column] < minimumDimensionValue) {\r\n\t\t\t\tthis.matrix[row][column] = minimumDimensionValue;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tsetAtLeastIfValid: function (row, column, minimumDimensionValue) {\r\n\t\tif (row >= 0 && column >= 0) {\r\n\t\t\tthis.setAtLeast(row, column, minimumDimensionValue);\r\n\t\t}\r\n\t},\r\n\tisWithin: function () {\r\n\t\treturn IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR]) && this.matrix[Location.INTERIOR][Location.EXTERIOR] === Dimension.FALSE && this.matrix[Location.BOUNDARY][Location.EXTERIOR] === Dimension.FALSE;\r\n\t},\r\n\tisTouches: function (dimensionOfGeometryA, dimensionOfGeometryB) {\r\n\t\tif (dimensionOfGeometryA > dimensionOfGeometryB) {\r\n\t\t\treturn this.isTouches(dimensionOfGeometryB, dimensionOfGeometryA);\r\n\t\t}\r\n\t\tif (dimensionOfGeometryA === Dimension.A && dimensionOfGeometryB === Dimension.A || dimensionOfGeometryA === Dimension.L && dimensionOfGeometryB === Dimension.L || dimensionOfGeometryA === Dimension.L && dimensionOfGeometryB === Dimension.A || dimensionOfGeometryA === Dimension.P && dimensionOfGeometryB === Dimension.A || dimensionOfGeometryA === Dimension.P && dimensionOfGeometryB === Dimension.L) {\r\n\t\t\treturn this.matrix[Location.INTERIOR][Location.INTERIOR] === Dimension.FALSE && (IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.BOUNDARY]) || IntersectionMatrix.isTrue(this.matrix[Location.BOUNDARY][Location.INTERIOR]) || IntersectionMatrix.isTrue(this.matrix[Location.BOUNDARY][Location.BOUNDARY]));\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tisOverlaps: function (dimensionOfGeometryA, dimensionOfGeometryB) {\r\n\t\tif (dimensionOfGeometryA === Dimension.P && dimensionOfGeometryB === Dimension.P || dimensionOfGeometryA === Dimension.A && dimensionOfGeometryB === Dimension.A) {\r\n\t\t\treturn IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR]) && IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.EXTERIOR]) && IntersectionMatrix.isTrue(this.matrix[Location.EXTERIOR][Location.INTERIOR]);\r\n\t\t}\r\n\t\tif (dimensionOfGeometryA === Dimension.L && dimensionOfGeometryB === Dimension.L) {\r\n\t\t\treturn this.matrix[Location.INTERIOR][Location.INTERIOR] === 1 && IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.EXTERIOR]) && IntersectionMatrix.isTrue(this.matrix[Location.EXTERIOR][Location.INTERIOR]);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tisEquals: function (dimensionOfGeometryA, dimensionOfGeometryB) {\r\n\t\tif (dimensionOfGeometryA !== dimensionOfGeometryB) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR]) && this.matrix[Location.INTERIOR][Location.EXTERIOR] === Dimension.FALSE && this.matrix[Location.BOUNDARY][Location.EXTERIOR] === Dimension.FALSE && this.matrix[Location.EXTERIOR][Location.INTERIOR] === Dimension.FALSE && this.matrix[Location.EXTERIOR][Location.BOUNDARY] === Dimension.FALSE;\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar buf = new StringBuffer(\"123456789\");\r\n\t\tfor (var ai = 0; ai < 3; ai++) {\r\n\t\t\tfor (var bi = 0; bi < 3; bi++) {\r\n\t\t\t\tbuf.setCharAt(3 * ai + bi, Dimension.toDimensionSymbol(this.matrix[ai][bi]));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn buf.toString();\r\n\t},\r\n\tsetAll: function (dimensionValue) {\r\n\t\tfor (var ai = 0; ai < 3; ai++) {\r\n\t\t\tfor (var bi = 0; bi < 3; bi++) {\r\n\t\t\t\tthis.matrix[ai][bi] = dimensionValue;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tget: function (row, column) {\r\n\t\treturn this.matrix[row][column];\r\n\t},\r\n\ttranspose: function () {\r\n\t\tvar temp = this.matrix[1][0];\r\n\t\tthis.matrix[1][0] = this.matrix[0][1];\r\n\t\tthis.matrix[0][1] = temp;\r\n\t\ttemp = this.matrix[2][0];\r\n\t\tthis.matrix[2][0] = this.matrix[0][2];\r\n\t\tthis.matrix[0][2] = temp;\r\n\t\ttemp = this.matrix[2][1];\r\n\t\tthis.matrix[2][1] = this.matrix[1][2];\r\n\t\tthis.matrix[1][2] = temp;\r\n\t\treturn this;\r\n\t},\r\n\tmatches: function (requiredDimensionSymbols) {\r\n\t\tif (requiredDimensionSymbols.length !== 9) {\r\n\t\t\tthrow new IllegalArgumentException(\"Should be length 9: \" + requiredDimensionSymbols);\r\n\t\t}\r\n\t\tfor (var ai = 0; ai < 3; ai++) {\r\n\t\t\tfor (var bi = 0; bi < 3; bi++) {\r\n\t\t\t\tif (!IntersectionMatrix.matches(this.matrix[ai][bi], requiredDimensionSymbols.charAt(3 * ai + bi))) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tadd: function (im) {\r\n\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\tfor (var j = 0; j < 3; j++) {\r\n\t\t\t\tthis.setAtLeast(i, j, im.get(i, j));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisDisjoint: function () {\r\n\t\treturn this.matrix[Location.INTERIOR][Location.INTERIOR] === Dimension.FALSE && this.matrix[Location.INTERIOR][Location.BOUNDARY] === Dimension.FALSE && this.matrix[Location.BOUNDARY][Location.INTERIOR] === Dimension.FALSE && this.matrix[Location.BOUNDARY][Location.BOUNDARY] === Dimension.FALSE;\r\n\t},\r\n\tisCrosses: function (dimensionOfGeometryA, dimensionOfGeometryB) {\r\n\t\tif (dimensionOfGeometryA === Dimension.P && dimensionOfGeometryB === Dimension.L || dimensionOfGeometryA === Dimension.P && dimensionOfGeometryB === Dimension.A || dimensionOfGeometryA === Dimension.L && dimensionOfGeometryB === Dimension.A) {\r\n\t\t\treturn IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR]) && IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.EXTERIOR]);\r\n\t\t}\r\n\t\tif (dimensionOfGeometryA === Dimension.L && dimensionOfGeometryB === Dimension.P || dimensionOfGeometryA === Dimension.A && dimensionOfGeometryB === Dimension.P || dimensionOfGeometryA === Dimension.A && dimensionOfGeometryB === Dimension.L) {\r\n\t\t\treturn IntersectionMatrix.isTrue(this.matrix[Location.INTERIOR][Location.INTERIOR]) && IntersectionMatrix.isTrue(this.matrix[Location.EXTERIOR][Location.INTERIOR]);\r\n\t\t}\r\n\t\tif (dimensionOfGeometryA === Dimension.L && dimensionOfGeometryB === Dimension.L) {\r\n\t\t\treturn this.matrix[Location.INTERIOR][Location.INTERIOR] === 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Cloneable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IntersectionMatrix;\r\n\t}\r\n});\r\nIntersectionMatrix.matches = function () {\r\n\tif (Number.isInteger(arguments[0]) && typeof arguments[1] === \"string\") {\r\n\t\tlet actualDimensionValue = arguments[0], requiredDimensionSymbol = arguments[1];\r\n\t\tif (requiredDimensionSymbol === Dimension.SYM_DONTCARE) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (requiredDimensionSymbol === Dimension.SYM_TRUE && (actualDimensionValue >= 0 || actualDimensionValue === Dimension.TRUE)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (requiredDimensionSymbol === Dimension.SYM_FALSE && actualDimensionValue === Dimension.FALSE) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (requiredDimensionSymbol === Dimension.SYM_P && actualDimensionValue === Dimension.P) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (requiredDimensionSymbol === Dimension.SYM_L && actualDimensionValue === Dimension.L) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (requiredDimensionSymbol === Dimension.SYM_A && actualDimensionValue === Dimension.A) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t} else if (typeof arguments[0] === \"string\" && typeof arguments[1] === \"string\") {\r\n\t\tlet actualDimensionSymbols = arguments[0], requiredDimensionSymbols = arguments[1];\r\n\t\tvar m = new IntersectionMatrix(actualDimensionSymbols);\r\n\t\treturn m.matches(requiredDimensionSymbols);\r\n\t}\r\n};\r\nIntersectionMatrix.isTrue = function (actualDimensionValue) {\r\n\tif (actualDimensionValue >= 0 || actualDimensionValue === Dimension.TRUE) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n};\r\n","import LineString from '../geom/LineString';\r\nimport CGAlgorithms from './CGAlgorithms';\r\nimport Geometry from '../geom/Geometry';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport Point from '../geom/Point';\r\nimport Polygon from '../geom/Polygon';\r\nimport extend from '../../../../extend';\r\nimport GeometryCollection from '../geom/GeometryCollection';\r\nexport default function Centroid() {\r\n\tthis.areaBasePt = null;\r\n\tthis.triangleCent3 = new Coordinate();\r\n\tthis.areasum2 = 0;\r\n\tthis.cg3 = new Coordinate();\r\n\tthis.lineCentSum = new Coordinate();\r\n\tthis.totalLength = 0.0;\r\n\tthis.ptCount = 0;\r\n\tthis.ptCentSum = new Coordinate();\r\n\tlet geom = arguments[0];\r\n\tthis.areaBasePt = null;\r\n\tthis.add(geom);\r\n}\r\nextend(Centroid.prototype, {\r\n\taddPoint: function (pt) {\r\n\t\tthis.ptCount += 1;\r\n\t\tthis.ptCentSum.x += pt.x;\r\n\t\tthis.ptCentSum.y += pt.y;\r\n\t},\r\n\tsetBasePoint: function (basePt) {\r\n\t\tif (this.areaBasePt === null) this.areaBasePt = basePt;\r\n\t},\r\n\taddLineSegments: function (pts) {\r\n\t\tvar lineLen = 0.0;\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tvar segmentLen = pts[i].distance(pts[i + 1]);\r\n\t\t\tif (segmentLen === 0.0) continue;\r\n\t\t\tlineLen += segmentLen;\r\n\t\t\tvar midx = (pts[i].x + pts[i + 1].x) / 2;\r\n\t\t\tthis.lineCentSum.x += segmentLen * midx;\r\n\t\t\tvar midy = (pts[i].y + pts[i + 1].y) / 2;\r\n\t\t\tthis.lineCentSum.y += segmentLen * midy;\r\n\t\t}\r\n\t\tthis.totalLength += lineLen;\r\n\t\tif (lineLen === 0.0 && pts.length > 0) this.addPoint(pts[0]);\r\n\t},\r\n\taddHole: function (pts) {\r\n\t\tvar isPositiveArea = CGAlgorithms.isCCW(pts);\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tthis.addTriangle(this.areaBasePt, pts[i], pts[i + 1], isPositiveArea);\r\n\t\t}\r\n\t\tthis.addLineSegments(pts);\r\n\t},\r\n\tgetCentroid: function () {\r\n\t\tvar cent = new Coordinate();\r\n\t\tif (Math.abs(this.areasum2) > 0.0) {\r\n\t\t\tcent.x = this.cg3.x / 3 / this.areasum2;\r\n\t\t\tcent.y = this.cg3.y / 3 / this.areasum2;\r\n\t\t} else if (this.totalLength > 0.0) {\r\n\t\t\tcent.x = this.lineCentSum.x / this.totalLength;\r\n\t\t\tcent.y = this.lineCentSum.y / this.totalLength;\r\n\t\t} else if (this.ptCount > 0) {\r\n\t\t\tcent.x = this.ptCentSum.x / this.ptCount;\r\n\t\t\tcent.y = this.ptCentSum.y / this.ptCount;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn cent;\r\n\t},\r\n\taddShell: function (pts) {\r\n\t\tif (pts.length > 0) this.setBasePoint(pts[0]);\r\n\t\tvar isPositiveArea = !CGAlgorithms.isCCW(pts);\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tthis.addTriangle(this.areaBasePt, pts[i], pts[i + 1], isPositiveArea);\r\n\t\t}\r\n\t\tthis.addLineSegments(pts);\r\n\t},\r\n\taddTriangle: function (p0, p1, p2, isPositiveArea) {\r\n\t\tvar sign = isPositiveArea ? 1.0 : -1.0;\r\n\t\tCentroid.centroid3(p0, p1, p2, this.triangleCent3);\r\n\t\tvar area2 = Centroid.area2(p0, p1, p2);\r\n\t\tthis.cg3.x += sign * area2 * this.triangleCent3.x;\r\n\t\tthis.cg3.y += sign * area2 * this.triangleCent3.y;\r\n\t\tthis.areasum2 += sign * area2;\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments[0] instanceof Polygon) {\r\n\t\t\tlet poly = arguments[0];\r\n\t\t\tthis.addShell(poly.getExteriorRing().getCoordinates());\r\n\t\t\tfor (var i = 0; i < poly.getNumInteriorRing(); i++) {\r\n\t\t\t\tthis.addHole(poly.getInteriorRingN(i).getCoordinates());\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geom = arguments[0];\r\n\t\t\tif (geom.isEmpty()) return null;\r\n\t\t\tif (geom instanceof Point) {\r\n\t\t\t\tthis.addPoint(geom.getCoordinate());\r\n\t\t\t} else if (geom instanceof LineString) {\r\n\t\t\t\tthis.addLineSegments(geom.getCoordinates());\r\n\t\t\t} else if (geom instanceof Polygon) {\r\n\t\t\t\tvar poly = geom;\r\n\t\t\t\tthis.add(poly);\r\n\t\t\t} else if (geom instanceof GeometryCollection) {\r\n\t\t\t\tvar gc = geom;\r\n\t\t\t\tfor (var i = 0; i < gc.getNumGeometries(); i++) {\r\n\t\t\t\t\tthis.add(gc.getGeometryN(i));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Centroid;\r\n\t}\r\n});\r\nCentroid.area2 = function (p1, p2, p3) {\r\n\treturn (p2.x - p1.x) * (p3.y - p1.y) - (p3.x - p1.x) * (p2.y - p1.y);\r\n};\r\nCentroid.centroid3 = function (p1, p2, p3, c) {\r\n\tc.x = p1.x + p2.x + p3.x;\r\n\tc.y = p1.y + p2.y + p3.y;\r\n\treturn null;\r\n};\r\nCentroid.getCentroid = function (geom) {\r\n\tvar cent = new Centroid(geom);\r\n\treturn cent.getCentroid();\r\n};\r\n","/**\r\n * @param {string=} message Optional message\r\n * @extends {Error}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function EmptyStackException(message) {\r\n  this.message = message || '';\r\n};\r\nEmptyStackException.prototype = new Error();\r\n\r\n\r\n/**\r\n * @type {string}\r\n */\r\nEmptyStackException.prototype.name = 'EmptyStackException';\r\n","import EmptyStackException from './EmptyStackException'\r\nimport List from './List'\r\n\r\n/**\r\n * @see http://download.oracle.com/javase/6/docs/api/java/util/Stack.html\r\n *\r\n * @extends {List}\r\n * @constructor\r\n * @private\r\n */\r\nexport default function Stack() {\r\n  /**\r\n   * @type {Array}\r\n   * @private\r\n   */\r\n  this.array_ = [];\r\n};\r\nStack.prototype = new List();\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nStack.prototype.add = function(e) {\r\n  this.array_.push(e);\r\n  return true;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nStack.prototype.get = function(index) {\r\n  if (index < 0 || index >= this.size()) {\r\n    throw new IndexOutOfBoundsException();\r\n  }\r\n\r\n  return this.array_[index];\r\n};\r\n\r\n\r\n/**\r\n * Pushes an item onto the top of this stack.\r\n * @param {Object} e\r\n * @return {Object}\r\n */\r\nStack.prototype.push = function(e) {\r\n  this.array_.push(e);\r\n  return e;\r\n};\r\n\r\n\r\n/**\r\n * Pushes an item onto the top of this stack.\r\n * @param {Object} e\r\n * @return {Object}\r\n */\r\nStack.prototype.pop = function(e) {\r\n  if (this.array_.length === 0) {\r\n    throw new EmptyStackException();\r\n  }\r\n\r\n  return this.array_.pop();\r\n};\r\n\r\n\r\n/**\r\n * Looks at the object at the top of this stack without removing it from the\r\n * stack.\r\n * @return {Object}\r\n */\r\nStack.prototype.peek = function() {\r\n  if (this.array_.length === 0) {\r\n    throw new EmptyStackException();\r\n  }\r\n\r\n  return this.array_[this.array_.length - 1];\r\n};\r\n\r\n\r\n/**\r\n * Tests if this stack is empty.\r\n * @return {boolean} true if and only if this stack contains no items; false\r\n *         otherwise.\r\n */\r\nStack.prototype.empty = function() {\r\n  if (this.array_.length === 0) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * @return {boolean}\r\n */\r\nStack.prototype.isEmpty = function() {\r\n  return this.empty();\r\n};\r\n\r\n\r\n/**\r\n * Returns the 1-based position where an object is on this stack. If the object\r\n * o occurs as an item in this stack, this method returns the distance from the\r\n * top of the stack of the occurrence nearest the top of the stack; the topmost\r\n * item on the stack is considered to be at distance 1. The equals method is\r\n * used to compare o to the items in this stack.\r\n *\r\n * NOTE: does not currently actually use equals. (=== is used)\r\n *\r\n * @param {Object} o\r\n * @return {number} the 1-based position from the top of the stack where the\r\n *         object is located; the return value -1 indicates that the object is\r\n *         not on the stack.\r\n */\r\nStack.prototype.search = function(o) {\r\n  return this.array_.indexOf(o);\r\n};\r\n\r\n\r\n/**\r\n * @return {number}\r\n * @export\r\n */\r\nStack.prototype.size = function() {\r\n  return this.array_.length;\r\n};\r\n\r\n\r\n/**\r\n * @return {Array}\r\n */\r\nStack.prototype.toArray = function() {\r\n  var array = [];\r\n\r\n  for (var i = 0, len = this.array_.length; i < len; i++) {\r\n    array.push(this.array_[i]);\r\n  }\r\n\r\n  return array;\r\n};\r\n","import TreeSet from '../../../../java/util/TreeSet';\r\nimport CoordinateFilter from '../geom/CoordinateFilter';\r\nimport extend from '../../../../extend';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function UniqueCoordinateArrayFilter() {\r\n\tthis.treeSet = new TreeSet();\r\n\tthis.list = new ArrayList();\r\n}\r\nextend(UniqueCoordinateArrayFilter.prototype, {\r\n\tfilter: function (coord) {\r\n\t\tif (!this.treeSet.contains(coord)) {\r\n\t\t\tthis.list.add(coord);\r\n\t\t\tthis.treeSet.add(coord);\r\n\t\t}\r\n\t},\r\n\tgetCoordinates: function () {\r\n\t\tvar coordinates = new Array(this.list.size()).fill(null);\r\n\t\treturn this.list.toArray(coordinates);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [CoordinateFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn UniqueCoordinateArrayFilter;\r\n\t}\r\n});\r\nUniqueCoordinateArrayFilter.filterCoordinates = function (coords) {\r\n\tvar filter = new UniqueCoordinateArrayFilter();\r\n\tfor (var i = 0; i < coords.length; i++) {\r\n\t\tfilter.filter(coords[i]);\r\n\t}\r\n\treturn filter.getCoordinates();\r\n};\r\n","import TreeSet from '../../../../java/util/TreeSet';\r\nimport CGAlgorithms from './CGAlgorithms';\r\nimport CoordinateList from '../geom/CoordinateList';\r\nimport Arrays from '../../../../java/util/Arrays';\r\nimport Stack from '../../../../java/util/Stack';\r\nimport extend from '../../../../extend';\r\nimport CoordinateArrays from '../geom/CoordinateArrays';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Comparator from '../../../../java/util/Comparator';\r\nimport UniqueCoordinateArrayFilter from '../util/UniqueCoordinateArrayFilter';\r\nimport Assert from '../util/Assert';\r\nexport default function ConvexHull() {\r\n\tthis.geomFactory = null;\r\n\tthis.inputPts = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet geometry = arguments[0];\r\n\t\tConvexHull.call(this, ConvexHull.extractCoordinates(geometry), geometry.getFactory());\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet pts = arguments[0], geomFactory = arguments[1];\r\n\t\tthis.inputPts = UniqueCoordinateArrayFilter.filterCoordinates(pts);\r\n\t\tthis.geomFactory = geomFactory;\r\n\t}\r\n}\r\nextend(ConvexHull.prototype, {\r\n\tpreSort: function (pts) {\r\n\t\tvar t = null;\r\n\t\tfor (var i = 1; i < pts.length; i++) {\r\n\t\t\tif (pts[i].y < pts[0].y || pts[i].y === pts[0].y && pts[i].x < pts[0].x) {\r\n\t\t\t\tt = pts[0];\r\n\t\t\t\tpts[0] = pts[i];\r\n\t\t\t\tpts[i] = t;\r\n\t\t\t}\r\n\t\t}\r\n\t\tArrays.sort(pts, 1, pts.length, new RadialComparator(pts[0]));\r\n\t\treturn pts;\r\n\t},\r\n\tcomputeOctRing: function (inputPts) {\r\n\t\tvar octPts = this.computeOctPts(inputPts);\r\n\t\tvar coordList = new CoordinateList();\r\n\t\tcoordList.add(octPts, false);\r\n\t\tif (coordList.size() < 3) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tcoordList.closeRing();\r\n\t\treturn coordList.toCoordinateArray();\r\n\t},\r\n\tlineOrPolygon: function (coordinates) {\r\n\t\tcoordinates = this.cleanRing(coordinates);\r\n\t\tif (coordinates.length === 3) {\r\n\t\t\treturn this.geomFactory.createLineString([coordinates[0], coordinates[1]]);\r\n\t\t}\r\n\t\tvar linearRing = this.geomFactory.createLinearRing(coordinates);\r\n\t\treturn this.geomFactory.createPolygon(linearRing, null);\r\n\t},\r\n\tcleanRing: function (original) {\r\n\t\tAssert.equals(original[0], original[original.length - 1]);\r\n\t\tvar cleanedRing = new ArrayList();\r\n\t\tvar previousDistinctCoordinate = null;\r\n\t\tfor (var i = 0; i <= original.length - 2; i++) {\r\n\t\t\tvar currentCoordinate = original[i];\r\n\t\t\tvar nextCoordinate = original[i + 1];\r\n\t\t\tif (currentCoordinate.equals(nextCoordinate)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (previousDistinctCoordinate !== null && this.isBetween(previousDistinctCoordinate, currentCoordinate, nextCoordinate)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tcleanedRing.add(currentCoordinate);\r\n\t\t\tpreviousDistinctCoordinate = currentCoordinate;\r\n\t\t}\r\n\t\tcleanedRing.add(original[original.length - 1]);\r\n\t\tvar cleanedRingCoordinates = new Array(cleanedRing.size()).fill(null);\r\n\t\treturn cleanedRing.toArray(cleanedRingCoordinates);\r\n\t},\r\n\tisBetween: function (c1, c2, c3) {\r\n\t\tif (CGAlgorithms.computeOrientation(c1, c2, c3) !== 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (c1.x !== c3.x) {\r\n\t\t\tif (c1.x <= c2.x && c2.x <= c3.x) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (c3.x <= c2.x && c2.x <= c1.x) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (c1.y !== c3.y) {\r\n\t\t\tif (c1.y <= c2.y && c2.y <= c3.y) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (c3.y <= c2.y && c2.y <= c1.y) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\treduce: function (inputPts) {\r\n\t\tvar polyPts = this.computeOctRing(inputPts);\r\n\t\tif (polyPts === null) return inputPts;\r\n\t\tvar reducedSet = new TreeSet();\r\n\t\tfor (var i = 0; i < polyPts.length; i++) {\r\n\t\t\treducedSet.add(polyPts[i]);\r\n\t\t}\r\n\t\tfor (var i = 0; i < inputPts.length; i++) {\r\n\t\t\tif (!CGAlgorithms.isPointInRing(inputPts[i], polyPts)) {\r\n\t\t\t\treducedSet.add(inputPts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar reducedPts = CoordinateArrays.toCoordinateArray(reducedSet);\r\n\t\tif (reducedPts.length < 3) return this.padArray3(reducedPts);\r\n\t\treturn reducedPts;\r\n\t},\r\n\tgetConvexHull: function () {\r\n\t\tif (this.inputPts.length === 0) {\r\n\t\t\treturn this.geomFactory.createGeometryCollection(null);\r\n\t\t}\r\n\t\tif (this.inputPts.length === 1) {\r\n\t\t\treturn this.geomFactory.createPoint(this.inputPts[0]);\r\n\t\t}\r\n\t\tif (this.inputPts.length === 2) {\r\n\t\t\treturn this.geomFactory.createLineString(this.inputPts);\r\n\t\t}\r\n\t\tvar reducedPts = this.inputPts;\r\n\t\tif (this.inputPts.length > 50) {\r\n\t\t\treducedPts = this.reduce(this.inputPts);\r\n\t\t}\r\n\t\tvar sortedPts = this.preSort(reducedPts);\r\n\t\tvar cHS = this.grahamScan(sortedPts);\r\n\t\tvar cH = this.toCoordinateArray(cHS);\r\n\t\treturn this.lineOrPolygon(cH);\r\n\t},\r\n\tpadArray3: function (pts) {\r\n\t\tvar pad = new Array(3).fill(null);\r\n\t\tfor (var i = 0; i < pad.length; i++) {\r\n\t\t\tif (i < pts.length) {\r\n\t\t\t\tpad[i] = pts[i];\r\n\t\t\t} else pad[i] = pts[0];\r\n\t\t}\r\n\t\treturn pad;\r\n\t},\r\n\tcomputeOctPts: function (inputPts) {\r\n\t\tvar pts = new Array(8).fill(null);\r\n\t\tfor (var j = 0; j < pts.length; j++) {\r\n\t\t\tpts[j] = inputPts[0];\r\n\t\t}\r\n\t\tfor (var i = 1; i < inputPts.length; i++) {\r\n\t\t\tif (inputPts[i].x < pts[0].x) {\r\n\t\t\t\tpts[0] = inputPts[i];\r\n\t\t\t}\r\n\t\t\tif (inputPts[i].x - inputPts[i].y < pts[1].x - pts[1].y) {\r\n\t\t\t\tpts[1] = inputPts[i];\r\n\t\t\t}\r\n\t\t\tif (inputPts[i].y > pts[2].y) {\r\n\t\t\t\tpts[2] = inputPts[i];\r\n\t\t\t}\r\n\t\t\tif (inputPts[i].x + inputPts[i].y > pts[3].x + pts[3].y) {\r\n\t\t\t\tpts[3] = inputPts[i];\r\n\t\t\t}\r\n\t\t\tif (inputPts[i].x > pts[4].x) {\r\n\t\t\t\tpts[4] = inputPts[i];\r\n\t\t\t}\r\n\t\t\tif (inputPts[i].x - inputPts[i].y > pts[5].x - pts[5].y) {\r\n\t\t\t\tpts[5] = inputPts[i];\r\n\t\t\t}\r\n\t\t\tif (inputPts[i].y < pts[6].y) {\r\n\t\t\t\tpts[6] = inputPts[i];\r\n\t\t\t}\r\n\t\t\tif (inputPts[i].x + inputPts[i].y < pts[7].x + pts[7].y) {\r\n\t\t\t\tpts[7] = inputPts[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn pts;\r\n\t},\r\n\ttoCoordinateArray: function (stack) {\r\n\t\tvar coordinates = new Array(stack.size()).fill(null);\r\n\t\tfor (var i = 0; i < stack.size(); i++) {\r\n\t\t\tvar coordinate = stack.get(i);\r\n\t\t\tcoordinates[i] = coordinate;\r\n\t\t}\r\n\t\treturn coordinates;\r\n\t},\r\n\tgrahamScan: function (c) {\r\n\t\tvar p = null;\r\n\t\tvar ps = new Stack();\r\n\t\tp = ps.push(c[0]);\r\n\t\tp = ps.push(c[1]);\r\n\t\tp = ps.push(c[2]);\r\n\t\tfor (var i = 3; i < c.length; i++) {\r\n\t\t\tp = ps.pop();\r\n\t\t\twhile (!ps.empty() && CGAlgorithms.computeOrientation(ps.peek(), p, c[i]) > 0) {\r\n\t\t\t\tp = ps.pop();\r\n\t\t\t}\r\n\t\t\tp = ps.push(p);\r\n\t\t\tp = ps.push(c[i]);\r\n\t\t}\r\n\t\tp = ps.push(c[0]);\r\n\t\treturn ps;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ConvexHull;\r\n\t}\r\n});\r\nConvexHull.extractCoordinates = function (geom) {\r\n\tvar filter = new UniqueCoordinateArrayFilter();\r\n\tgeom.apply(filter);\r\n\treturn filter.getCoordinates();\r\n};\r\nfunction RadialComparator() {\r\n\tthis.origin = null;\r\n\tlet origin = arguments[0];\r\n\tthis.origin = origin;\r\n}\r\nextend(RadialComparator.prototype, {\r\n\tcompare: function (o1, o2) {\r\n\t\tvar p1 = o1;\r\n\t\tvar p2 = o2;\r\n\t\treturn RadialComparator.polarCompare(this.origin, p1, p2);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RadialComparator;\r\n\t}\r\n});\r\nRadialComparator.polarCompare = function (o, p, q) {\r\n\tvar dxp = p.x - o.x;\r\n\tvar dyp = p.y - o.y;\r\n\tvar dxq = q.x - o.x;\r\n\tvar dyq = q.y - o.y;\r\n\tvar orient = CGAlgorithms.computeOrientation(o, p, q);\r\n\tif (orient === CGAlgorithms.COUNTERCLOCKWISE) return 1;\r\n\tif (orient === CGAlgorithms.CLOCKWISE) return -1;\r\n\tvar op = dxp * dxp + dyp * dyp;\r\n\tvar oq = dxq * dxq + dyq * dyq;\r\n\tif (op < oq) {\r\n\t\treturn -1;\r\n\t}\r\n\tif (op > oq) {\r\n\t\treturn 1;\r\n\t}\r\n\treturn 0;\r\n};\r\nConvexHull.RadialComparator = RadialComparator;\r\n","import LineString from '../LineString';\r\nimport GeometryFactory from '../GeometryFactory';\r\nimport IllegalArgumentException from '../../../../../java/lang/IllegalArgumentException';\r\nimport Point from '../Point';\r\nimport Polygon from '../Polygon';\r\nimport MultiPoint from '../MultiPoint';\r\nimport LinearRing from '../LinearRing';\r\nimport extend from '../../../../../extend';\r\nimport MultiPolygon from '../MultiPolygon';\r\nimport GeometryCollection from '../GeometryCollection';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport MultiLineString from '../MultiLineString';\r\nexport default function GeometryTransformer() {\r\n\tthis.inputGeom = null;\r\n\tthis.factory = null;\r\n\tthis.pruneEmptyGeometry = true;\r\n\tthis.preserveGeometryCollectionType = true;\r\n\tthis.preserveCollections = false;\r\n\tthis.preserveType = false;\r\n}\r\nextend(GeometryTransformer.prototype, {\r\n\ttransformPoint: function (geom, parent) {\r\n\t\treturn this.factory.createPoint(this.transformCoordinates(geom.getCoordinateSequence(), geom));\r\n\t},\r\n\ttransformPolygon: function (geom, parent) {\r\n\t\tvar isAllValidLinearRings = true;\r\n\t\tvar shell = this.transformLinearRing(geom.getExteriorRing(), geom);\r\n\t\tif (shell === null || !(shell instanceof LinearRing) || shell.isEmpty()) isAllValidLinearRings = false;\r\n\t\tvar holes = new ArrayList();\r\n\t\tfor (var i = 0; i < geom.getNumInteriorRing(); i++) {\r\n\t\t\tvar hole = this.transformLinearRing(geom.getInteriorRingN(i), geom);\r\n\t\t\tif (hole === null || hole.isEmpty()) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (!(hole instanceof LinearRing)) isAllValidLinearRings = false;\r\n\t\t\tholes.add(hole);\r\n\t\t}\r\n\t\tif (isAllValidLinearRings) return this.factory.createPolygon(shell, holes.toArray([])); else {\r\n\t\t\tvar components = new ArrayList();\r\n\t\t\tif (shell !== null) components.add(shell);\r\n\t\t\tcomponents.addAll(holes);\r\n\t\t\treturn this.factory.buildGeometry(components);\r\n\t\t}\r\n\t},\r\n\tcreateCoordinateSequence: function (coords) {\r\n\t\treturn this.factory.getCoordinateSequenceFactory().create(coords);\r\n\t},\r\n\tgetInputGeometry: function () {\r\n\t\treturn this.inputGeom;\r\n\t},\r\n\ttransformMultiLineString: function (geom, parent) {\r\n\t\tvar transGeomList = new ArrayList();\r\n\t\tfor (var i = 0; i < geom.getNumGeometries(); i++) {\r\n\t\t\tvar transformGeom = this.transformLineString(geom.getGeometryN(i), geom);\r\n\t\t\tif (transformGeom === null) continue;\r\n\t\t\tif (transformGeom.isEmpty()) continue;\r\n\t\t\ttransGeomList.add(transformGeom);\r\n\t\t}\r\n\t\treturn this.factory.buildGeometry(transGeomList);\r\n\t},\r\n\ttransformCoordinates: function (coords, parent) {\r\n\t\treturn this.copy(coords);\r\n\t},\r\n\ttransformLineString: function (geom, parent) {\r\n\t\treturn this.factory.createLineString(this.transformCoordinates(geom.getCoordinateSequence(), geom));\r\n\t},\r\n\ttransformMultiPoint: function (geom, parent) {\r\n\t\tvar transGeomList = new ArrayList();\r\n\t\tfor (var i = 0; i < geom.getNumGeometries(); i++) {\r\n\t\t\tvar transformGeom = this.transformPoint(geom.getGeometryN(i), geom);\r\n\t\t\tif (transformGeom === null) continue;\r\n\t\t\tif (transformGeom.isEmpty()) continue;\r\n\t\t\ttransGeomList.add(transformGeom);\r\n\t\t}\r\n\t\treturn this.factory.buildGeometry(transGeomList);\r\n\t},\r\n\ttransformMultiPolygon: function (geom, parent) {\r\n\t\tvar transGeomList = new ArrayList();\r\n\t\tfor (var i = 0; i < geom.getNumGeometries(); i++) {\r\n\t\t\tvar transformGeom = this.transformPolygon(geom.getGeometryN(i), geom);\r\n\t\t\tif (transformGeom === null) continue;\r\n\t\t\tif (transformGeom.isEmpty()) continue;\r\n\t\t\ttransGeomList.add(transformGeom);\r\n\t\t}\r\n\t\treturn this.factory.buildGeometry(transGeomList);\r\n\t},\r\n\tcopy: function (seq) {\r\n\t\treturn seq.copy();\r\n\t},\r\n\ttransformGeometryCollection: function (geom, parent) {\r\n\t\tvar transGeomList = new ArrayList();\r\n\t\tfor (var i = 0; i < geom.getNumGeometries(); i++) {\r\n\t\t\tvar transformGeom = this.transform(geom.getGeometryN(i));\r\n\t\t\tif (transformGeom === null) continue;\r\n\t\t\tif (this.pruneEmptyGeometry && transformGeom.isEmpty()) continue;\r\n\t\t\ttransGeomList.add(transformGeom);\r\n\t\t}\r\n\t\tif (this.preserveGeometryCollectionType) return this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(transGeomList));\r\n\t\treturn this.factory.buildGeometry(transGeomList);\r\n\t},\r\n\ttransform: function (inputGeom) {\r\n\t\tthis.inputGeom = inputGeom;\r\n\t\tthis.factory = inputGeom.getFactory();\r\n\t\tif (inputGeom instanceof Point) return this.transformPoint(inputGeom, null);\r\n\t\tif (inputGeom instanceof MultiPoint) return this.transformMultiPoint(inputGeom, null);\r\n\t\tif (inputGeom instanceof LinearRing) return this.transformLinearRing(inputGeom, null);\r\n\t\tif (inputGeom instanceof LineString) return this.transformLineString(inputGeom, null);\r\n\t\tif (inputGeom instanceof MultiLineString) return this.transformMultiLineString(inputGeom, null);\r\n\t\tif (inputGeom instanceof Polygon) return this.transformPolygon(inputGeom, null);\r\n\t\tif (inputGeom instanceof MultiPolygon) return this.transformMultiPolygon(inputGeom, null);\r\n\t\tif (inputGeom instanceof GeometryCollection) return this.transformGeometryCollection(inputGeom, null);\r\n\t\tthrow new IllegalArgumentException(\"Unknown Geometry subtype: \" + inputGeom.getClass().getName());\r\n\t},\r\n\ttransformLinearRing: function (geom, parent) {\r\n\t\tvar seq = this.transformCoordinates(geom.getCoordinateSequence(), geom);\r\n\t\tif (seq === null) return this.factory.createLinearRing(null);\r\n\t\tvar seqSize = seq.size();\r\n\t\tif (seqSize > 0 && seqSize < 4 && !this.preserveType) return this.factory.createLineString(seq);\r\n\t\treturn this.factory.createLinearRing(seq);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryTransformer;\r\n\t}\r\n});\r\n","import LineString from '../../../geom/LineString';\r\nimport CoordinateList from '../../../geom/CoordinateList';\r\nimport Coordinate from '../../../geom/Coordinate';\r\nimport Double from '../../../../../../java/lang/Double';\r\nimport extend from '../../../../../../extend';\r\nimport LineSegment from '../../../geom/LineSegment';\r\nexport default function LineStringSnapper() {\r\n\tthis.snapTolerance = 0.0;\r\n\tthis.srcPts = null;\r\n\tthis.seg = new LineSegment();\r\n\tthis.allowSnappingToSourceVertices = false;\r\n\tthis._isClosed = false;\r\n\tif (arguments[0] instanceof LineString && typeof arguments[1] === \"number\") {\r\n\t\tlet srcLine = arguments[0], snapTolerance = arguments[1];\r\n\t\tLineStringSnapper.call(this, srcLine.getCoordinates(), snapTolerance);\r\n\t} else if (arguments[0] instanceof Array && typeof arguments[1] === \"number\") {\r\n\t\tlet srcPts = arguments[0], snapTolerance = arguments[1];\r\n\t\tthis.srcPts = srcPts;\r\n\t\tthis._isClosed = LineStringSnapper.isClosed(srcPts);\r\n\t\tthis.snapTolerance = snapTolerance;\r\n\t}\r\n}\r\nextend(LineStringSnapper.prototype, {\r\n\tsnapVertices: function (srcCoords, snapPts) {\r\n\t\tvar end = this._isClosed ? srcCoords.size() - 1 : srcCoords.size();\r\n\t\tfor (var i = 0; i < end; i++) {\r\n\t\t\tvar srcPt = srcCoords.get(i);\r\n\t\t\tvar snapVert = this.findSnapForVertex(srcPt, snapPts);\r\n\t\t\tif (snapVert !== null) {\r\n\t\t\t\tsrcCoords.set(i, new Coordinate(snapVert));\r\n\t\t\t\tif (i === 0 && this._isClosed) srcCoords.set(srcCoords.size() - 1, new Coordinate(snapVert));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfindSnapForVertex: function (pt, snapPts) {\r\n\t\tfor (var i = 0; i < snapPts.length; i++) {\r\n\t\t\tif (pt.equals2D(snapPts[i])) return null;\r\n\t\t\tif (pt.distance(snapPts[i]) < this.snapTolerance) return snapPts[i];\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tsnapTo: function (snapPts) {\r\n\t\tvar coordList = new CoordinateList(this.srcPts);\r\n\t\tthis.snapVertices(coordList, snapPts);\r\n\t\tthis.snapSegments(coordList, snapPts);\r\n\t\tvar newPts = coordList.toCoordinateArray();\r\n\t\treturn newPts;\r\n\t},\r\n\tsnapSegments: function (srcCoords, snapPts) {\r\n\t\tif (snapPts.length === 0) return null;\r\n\t\tvar distinctPtCount = snapPts.length;\r\n\t\tif (snapPts[0].equals2D(snapPts[snapPts.length - 1])) distinctPtCount = snapPts.length - 1;\r\n\t\tfor (var i = 0; i < distinctPtCount; i++) {\r\n\t\t\tvar snapPt = snapPts[i];\r\n\t\t\tvar index = this.findSegmentIndexToSnap(snapPt, srcCoords);\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\tsrcCoords.add(index + 1, new Coordinate(snapPt), false);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfindSegmentIndexToSnap: function (snapPt, srcCoords) {\r\n\t\tvar minDist = Double.MAX_VALUE;\r\n\t\tvar snapIndex = -1;\r\n\t\tfor (var i = 0; i < srcCoords.size() - 1; i++) {\r\n\t\t\tthis.seg.p0 = srcCoords.get(i);\r\n\t\t\tthis.seg.p1 = srcCoords.get(i + 1);\r\n\t\t\tif (this.seg.p0.equals2D(snapPt) || this.seg.p1.equals2D(snapPt)) {\r\n\t\t\t\tif (this.allowSnappingToSourceVertices) continue; else return -1;\r\n\t\t\t}\r\n\t\t\tvar dist = this.seg.distance(snapPt);\r\n\t\t\tif (dist < this.snapTolerance && dist < minDist) {\r\n\t\t\t\tminDist = dist;\r\n\t\t\t\tsnapIndex = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn snapIndex;\r\n\t},\r\n\tsetAllowSnappingToSourceVertices: function (allowSnappingToSourceVertices) {\r\n\t\tthis.allowSnappingToSourceVertices = allowSnappingToSourceVertices;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineStringSnapper;\r\n\t}\r\n});\r\nLineStringSnapper.isClosed = function (pts) {\r\n\tif (pts.length <= 1) return false;\r\n\treturn pts[0].equals2D(pts[pts.length - 1]);\r\n};\r\n","import TreeSet from '../../../../../../java/util/TreeSet';\r\nimport GeometryTransformer from '../../../geom/util/GeometryTransformer';\r\nimport hasInterface from '../../../../../../hasInterface';\r\nimport Double from '../../../../../../java/lang/Double';\r\nimport extend from '../../../../../../extend';\r\nimport LineStringSnapper from './LineStringSnapper';\r\nimport PrecisionModel from '../../../geom/PrecisionModel';\r\nimport Polygonal from '../../../geom/Polygonal';\r\nimport inherits from '../../../../../../inherits';\r\nexport default function GeometrySnapper() {\r\n\tthis.srcGeom = null;\r\n\tlet srcGeom = arguments[0];\r\n\tthis.srcGeom = srcGeom;\r\n}\r\nextend(GeometrySnapper.prototype, {\r\n\tsnapTo: function (snapGeom, snapTolerance) {\r\n\t\tvar snapPts = this.extractTargetCoordinates(snapGeom);\r\n\t\tvar snapTrans = new SnapTransformer(snapTolerance, snapPts);\r\n\t\treturn snapTrans.transform(this.srcGeom);\r\n\t},\r\n\tsnapToSelf: function (snapTolerance, cleanResult) {\r\n\t\tvar snapPts = this.extractTargetCoordinates(this.srcGeom);\r\n\t\tvar snapTrans = new SnapTransformer(snapTolerance, snapPts, true);\r\n\t\tvar snappedGeom = snapTrans.transform(this.srcGeom);\r\n\t\tvar result = snappedGeom;\r\n\t\tif (cleanResult && hasInterface(result, Polygonal)) {\r\n\t\t\tresult = snappedGeom.buffer(0);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tcomputeSnapTolerance: function (ringPts) {\r\n\t\tvar minSegLen = this.computeMinimumSegmentLength(ringPts);\r\n\t\tvar snapTol = minSegLen / 10;\r\n\t\treturn snapTol;\r\n\t},\r\n\textractTargetCoordinates: function (g) {\r\n\t\tvar ptSet = new TreeSet();\r\n\t\tvar pts = g.getCoordinates();\r\n\t\tfor (var i = 0; i < pts.length; i++) {\r\n\t\t\tptSet.add(pts[i]);\r\n\t\t}\r\n\t\treturn ptSet.toArray(new Array(0).fill(null));\r\n\t},\r\n\tcomputeMinimumSegmentLength: function (pts) {\r\n\t\tvar minSegLen = Double.MAX_VALUE;\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tvar segLen = pts[i].distance(pts[i + 1]);\r\n\t\t\tif (segLen < minSegLen) minSegLen = segLen;\r\n\t\t}\r\n\t\treturn minSegLen;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometrySnapper;\r\n\t}\r\n});\r\nGeometrySnapper.snap = function (g0, g1, snapTolerance) {\r\n\tvar snapGeom = new Array(2).fill(null);\r\n\tvar snapper0 = new GeometrySnapper(g0);\r\n\tsnapGeom[0] = snapper0.snapTo(g1, snapTolerance);\r\n\tvar snapper1 = new GeometrySnapper(g1);\r\n\tsnapGeom[1] = snapper1.snapTo(snapGeom[0], snapTolerance);\r\n\treturn snapGeom;\r\n};\r\nGeometrySnapper.computeOverlaySnapTolerance = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet g = arguments[0];\r\n\t\tvar snapTolerance = GeometrySnapper.computeSizeBasedSnapTolerance(g);\r\n\t\tvar pm = g.getPrecisionModel();\r\n\t\tif (pm.getType() === PrecisionModel.FIXED) {\r\n\t\t\tvar fixedSnapTol = 1 / pm.getScale() * 2 / 1.415;\r\n\t\t\tif (fixedSnapTol > snapTolerance) snapTolerance = fixedSnapTol;\r\n\t\t}\r\n\t\treturn snapTolerance;\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet g0 = arguments[0], g1 = arguments[1];\r\n\t\treturn Math.min(GeometrySnapper.computeOverlaySnapTolerance(g0), GeometrySnapper.computeOverlaySnapTolerance(g1));\r\n\t}\r\n};\r\nGeometrySnapper.computeSizeBasedSnapTolerance = function (g) {\r\n\tvar env = g.getEnvelopeInternal();\r\n\tvar minDimension = Math.min(env.getHeight(), env.getWidth());\r\n\tvar snapTol = minDimension * GeometrySnapper.SNAP_PRECISION_FACTOR;\r\n\treturn snapTol;\r\n};\r\nGeometrySnapper.snapToSelf = function (geom, snapTolerance, cleanResult) {\r\n\tvar snapper0 = new GeometrySnapper(geom);\r\n\treturn snapper0.snapToSelf(snapTolerance, cleanResult);\r\n};\r\nGeometrySnapper.SNAP_PRECISION_FACTOR = 1e-9;\r\nfunction SnapTransformer() {\r\n\tGeometryTransformer.apply(this);\r\n\tthis.snapTolerance = null;\r\n\tthis.snapPts = null;\r\n\tthis.isSelfSnap = false;\r\n\tif (arguments.length === 2) {\r\n\t\tlet snapTolerance = arguments[0], snapPts = arguments[1];\r\n\t\tthis.snapTolerance = snapTolerance;\r\n\t\tthis.snapPts = snapPts;\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet snapTolerance = arguments[0], snapPts = arguments[1], isSelfSnap = arguments[2];\r\n\t\tthis.snapTolerance = snapTolerance;\r\n\t\tthis.snapPts = snapPts;\r\n\t\tthis.isSelfSnap = isSelfSnap;\r\n\t}\r\n}\r\ninherits(SnapTransformer, GeometryTransformer);\r\nextend(SnapTransformer.prototype, {\r\n\tsnapLine: function (srcPts, snapPts) {\r\n\t\tvar snapper = new LineStringSnapper(srcPts, this.snapTolerance);\r\n\t\tsnapper.setAllowSnappingToSourceVertices(this.isSelfSnap);\r\n\t\treturn snapper.snapTo(snapPts);\r\n\t},\r\n\ttransformCoordinates: function (coords, parent) {\r\n\t\tvar srcPts = coords.toCoordinateArray();\r\n\t\tvar newPts = this.snapLine(srcPts, this.snapPts);\r\n\t\treturn this.factory.getCoordinateSequenceFactory().create(newPts);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SnapTransformer;\r\n\t}\r\n});\r\n","import Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nexport default function CommonBits() {\r\n\tthis.isFirst = true;\r\n\tthis.commonMantissaBitsCount = 53;\r\n\tthis.commonBits = 0;\r\n\tthis.commonSignExp = null;\r\n}\r\nextend(CommonBits.prototype, {\r\n\tgetCommon: function () {\r\n\t\treturn Double.longBitsToDouble(this.commonBits);\r\n\t},\r\n\tadd: function (num) {\r\n\t\tvar numBits = Double.doubleToLongBits(num);\r\n\t\tif (this.isFirst) {\r\n\t\t\tthis.commonBits = numBits;\r\n\t\t\tthis.commonSignExp = CommonBits.signExpBits(this.commonBits);\r\n\t\t\tthis.isFirst = false;\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar numSignExp = CommonBits.signExpBits(numBits);\r\n\t\tif (numSignExp !== this.commonSignExp) {\r\n\t\t\tthis.commonBits = 0;\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tthis.commonMantissaBitsCount = CommonBits.numCommonMostSigMantissaBits(this.commonBits, numBits);\r\n\t\tthis.commonBits = CommonBits.zeroLowerBits(this.commonBits, 64 - (12 + this.commonMantissaBitsCount));\r\n\t},\r\n\ttoString: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet bits = arguments[0];\r\n\t\t\tvar x = Double.longBitsToDouble(bits);\r\n\t\t\tvar numStr = Long.toBinaryString(bits);\r\n\t\t\tvar padStr = \"0000000000000000000000000000000000000000000000000000000000000000\" + numStr;\r\n\t\t\tvar bitStr = padStr.substring(padStr.length - 64);\r\n\t\t\tvar str = bitStr.substring(0, 1) + \"  \" + bitStr.substring(1, 12) + \"(exp) \" + bitStr.substring(12) + \" [ \" + x + \" ]\";\r\n\t\t\treturn str;\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CommonBits;\r\n\t}\r\n});\r\nCommonBits.getBit = function (bits, i) {\r\n\tvar mask = 1 << i;\r\n\treturn (bits & mask) !== 0 ? 1 : 0;\r\n};\r\nCommonBits.signExpBits = function (num) {\r\n\treturn num >> 52;\r\n};\r\nCommonBits.zeroLowerBits = function (bits, nBits) {\r\n\tvar invMask = (1 << nBits) - 1;\r\n\tvar mask = ~invMask;\r\n\tvar zeroed = bits & mask;\r\n\treturn zeroed;\r\n};\r\nCommonBits.numCommonMostSigMantissaBits = function (num1, num2) {\r\n\tvar count = 0;\r\n\tfor (var i = 52; i >= 0; i--) {\r\n\t\tif (CommonBits.getBit(num1, i) !== CommonBits.getBit(num2, i)) return count;\r\n\t\tcount++;\r\n\t}\r\n\treturn 52;\r\n};\r\n","import CommonBits from './CommonBits';\r\nimport CoordinateFilter from '../geom/CoordinateFilter';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport CoordinateSequenceFilter from '../geom/CoordinateSequenceFilter';\r\nexport default function CommonBitsRemover() {\r\n\tthis.commonCoord = null;\r\n\tthis.ccFilter = new CommonCoordinateFilter();\r\n}\r\nextend(CommonBitsRemover.prototype, {\r\n\taddCommonBits: function (geom) {\r\n\t\tvar trans = new Translater(this.commonCoord);\r\n\t\tgeom.apply(trans);\r\n\t\tgeom.geometryChanged();\r\n\t},\r\n\tremoveCommonBits: function (geom) {\r\n\t\tif (this.commonCoord.x === 0.0 && this.commonCoord.y === 0.0) return geom;\r\n\t\tvar invCoord = new Coordinate(this.commonCoord);\r\n\t\tinvCoord.x = -invCoord.x;\r\n\t\tinvCoord.y = -invCoord.y;\r\n\t\tvar trans = new Translater(invCoord);\r\n\t\tgeom.apply(trans);\r\n\t\tgeom.geometryChanged();\r\n\t\treturn geom;\r\n\t},\r\n\tgetCommonCoordinate: function () {\r\n\t\treturn this.commonCoord;\r\n\t},\r\n\tadd: function (geom) {\r\n\t\tgeom.apply(this.ccFilter);\r\n\t\tthis.commonCoord = this.ccFilter.getCommonCoordinate();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CommonBitsRemover;\r\n\t}\r\n});\r\nfunction CommonCoordinateFilter() {\r\n\tthis.commonBitsX = new CommonBits();\r\n\tthis.commonBitsY = new CommonBits();\r\n}\r\nextend(CommonCoordinateFilter.prototype, {\r\n\tfilter: function (coord) {\r\n\t\tthis.commonBitsX.add(coord.x);\r\n\t\tthis.commonBitsY.add(coord.y);\r\n\t},\r\n\tgetCommonCoordinate: function () {\r\n\t\treturn new Coordinate(this.commonBitsX.getCommon(), this.commonBitsY.getCommon());\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [CoordinateFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CommonCoordinateFilter;\r\n\t}\r\n});\r\nfunction Translater() {\r\n\tthis.trans = null;\r\n\tlet trans = arguments[0];\r\n\tthis.trans = trans;\r\n}\r\nextend(Translater.prototype, {\r\n\tfilter: function (seq, i) {\r\n\t\tvar xp = seq.getOrdinate(i, 0) + this.trans.x;\r\n\t\tvar yp = seq.getOrdinate(i, 1) + this.trans.y;\r\n\t\tseq.setOrdinate(i, 0, xp);\r\n\t\tseq.setOrdinate(i, 1, yp);\r\n\t},\r\n\tisDone: function () {\r\n\t\treturn false;\r\n\t},\r\n\tisGeometryChanged: function () {\r\n\t\treturn true;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [CoordinateSequenceFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Translater;\r\n\t}\r\n});\r\nCommonBitsRemover.CommonCoordinateFilter = CommonCoordinateFilter;\r\nCommonBitsRemover.Translater = Translater;\r\n","import Iterator from '../../../../java/util/Iterator';\r\nimport NoSuchElementException from '../../../../java/util/NoSuchElementException';\r\nimport extend from '../../../../extend';\r\nimport GeometryCollection from './GeometryCollection';\r\nexport default function GeometryCollectionIterator() {\r\n\tthis.parent = null;\r\n\tthis.atStart = null;\r\n\tthis.max = null;\r\n\tthis.index = null;\r\n\tthis.subcollectionIterator = null;\r\n\tlet parent = arguments[0];\r\n\tthis.parent = parent;\r\n\tthis.atStart = true;\r\n\tthis.index = 0;\r\n\tthis.max = parent.getNumGeometries();\r\n}\r\nextend(GeometryCollectionIterator.prototype, {\r\n\tnext: function () {\r\n\t\tif (this.atStart) {\r\n\t\t\tthis.atStart = false;\r\n\t\t\tif (GeometryCollectionIterator.isAtomic(this.parent)) this.index++;\r\n\t\t\treturn this.parent;\r\n\t\t}\r\n\t\tif (this.subcollectionIterator !== null) {\r\n\t\t\tif (this.subcollectionIterator.hasNext()) {\r\n\t\t\t\treturn this.subcollectionIterator.next();\r\n\t\t\t} else {\r\n\t\t\t\tthis.subcollectionIterator = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.index >= this.max) {\r\n\t\t\tthrow new NoSuchElementException();\r\n\t\t}\r\n\t\tvar obj = this.parent.getGeometryN(this.index++);\r\n\t\tif (obj instanceof GeometryCollection) {\r\n\t\t\tthis.subcollectionIterator = new GeometryCollectionIterator(obj);\r\n\t\t\treturn this.subcollectionIterator.next();\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\tremove: function () {\r\n\t\tthrow new UnsupportedOperationException(this.getClass().getName());\r\n\t},\r\n\thasNext: function () {\r\n\t\tif (this.atStart) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (this.subcollectionIterator !== null) {\r\n\t\t\tif (this.subcollectionIterator.hasNext()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis.subcollectionIterator = null;\r\n\t\t}\r\n\t\tif (this.index >= this.max) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Iterator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryCollectionIterator;\r\n\t}\r\n});\r\nGeometryCollectionIterator.isAtomic = function (geom) {\r\n\treturn !(geom instanceof GeometryCollection);\r\n};\r\n","import Location from '../geom/Location';\r\nimport LineString from '../geom/LineString';\r\nimport CGAlgorithms from './CGAlgorithms';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport Point from '../geom/Point';\r\nimport Polygon from '../geom/Polygon';\r\nimport BoundaryNodeRule from './BoundaryNodeRule';\r\nimport extend from '../../../../extend';\r\nimport MultiPolygon from '../geom/MultiPolygon';\r\nimport GeometryCollectionIterator from '../geom/GeometryCollectionIterator';\r\nimport GeometryCollection from '../geom/GeometryCollection';\r\nimport MultiLineString from '../geom/MultiLineString';\r\nexport default function PointLocator() {\r\n\tthis.boundaryRule = BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;\r\n\tthis.isIn = null;\r\n\tthis.numBoundaries = null;\r\n\tif (arguments.length === 0) {} else if (arguments.length === 1) {\r\n\t\tlet boundaryRule = arguments[0];\r\n\t\tif (boundaryRule === null) throw new IllegalArgumentException(\"Rule must be non-null\");\r\n\t\tthis.boundaryRule = boundaryRule;\r\n\t}\r\n}\r\nextend(PointLocator.prototype, {\r\n\tlocateInternal: function () {\r\n\t\tif (arguments[0] instanceof Coordinate && arguments[1] instanceof Polygon) {\r\n\t\t\tlet p = arguments[0], poly = arguments[1];\r\n\t\t\tif (poly.isEmpty()) return Location.EXTERIOR;\r\n\t\t\tvar shell = poly.getExteriorRing();\r\n\t\t\tvar shellLoc = this.locateInPolygonRing(p, shell);\r\n\t\t\tif (shellLoc === Location.EXTERIOR) return Location.EXTERIOR;\r\n\t\t\tif (shellLoc === Location.BOUNDARY) return Location.BOUNDARY;\r\n\t\t\tfor (var i = 0; i < poly.getNumInteriorRing(); i++) {\r\n\t\t\t\tvar hole = poly.getInteriorRingN(i);\r\n\t\t\t\tvar holeLoc = this.locateInPolygonRing(p, hole);\r\n\t\t\t\tif (holeLoc === Location.INTERIOR) return Location.EXTERIOR;\r\n\t\t\t\tif (holeLoc === Location.BOUNDARY) return Location.BOUNDARY;\r\n\t\t\t}\r\n\t\t\treturn Location.INTERIOR;\r\n\t\t} else if (arguments[0] instanceof Coordinate && arguments[1] instanceof LineString) {\r\n\t\t\tlet p = arguments[0], l = arguments[1];\r\n\t\t\tif (!l.getEnvelopeInternal().intersects(p)) return Location.EXTERIOR;\r\n\t\t\tvar pt = l.getCoordinates();\r\n\t\t\tif (!l.isClosed()) {\r\n\t\t\t\tif (p.equals(pt[0]) || p.equals(pt[pt.length - 1])) {\r\n\t\t\t\t\treturn Location.BOUNDARY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (CGAlgorithms.isOnLine(p, pt)) return Location.INTERIOR;\r\n\t\t\treturn Location.EXTERIOR;\r\n\t\t} else if (arguments[0] instanceof Coordinate && arguments[1] instanceof Point) {\r\n\t\t\tlet p = arguments[0], pt = arguments[1];\r\n\t\t\tvar ptCoord = pt.getCoordinate();\r\n\t\t\tif (ptCoord.equals2D(p)) return Location.INTERIOR;\r\n\t\t\treturn Location.EXTERIOR;\r\n\t\t}\r\n\t},\r\n\tlocateInPolygonRing: function (p, ring) {\r\n\t\tif (!ring.getEnvelopeInternal().intersects(p)) return Location.EXTERIOR;\r\n\t\treturn CGAlgorithms.locatePointInRing(p, ring.getCoordinates());\r\n\t},\r\n\tintersects: function (p, geom) {\r\n\t\treturn this.locate(p, geom) !== Location.EXTERIOR;\r\n\t},\r\n\tupdateLocationInfo: function (loc) {\r\n\t\tif (loc === Location.INTERIOR) this.isIn = true;\r\n\t\tif (loc === Location.BOUNDARY) this.numBoundaries++;\r\n\t},\r\n\tcomputeLocation: function (p, geom) {\r\n\t\tif (geom instanceof Point) {\r\n\t\t\tthis.updateLocationInfo(this.locateInternal(p, geom));\r\n\t\t}\r\n\t\tif (geom instanceof LineString) {\r\n\t\t\tthis.updateLocationInfo(this.locateInternal(p, geom));\r\n\t\t} else if (geom instanceof Polygon) {\r\n\t\t\tthis.updateLocationInfo(this.locateInternal(p, geom));\r\n\t\t} else if (geom instanceof MultiLineString) {\r\n\t\t\tvar ml = geom;\r\n\t\t\tfor (var i = 0; i < ml.getNumGeometries(); i++) {\r\n\t\t\t\tvar l = ml.getGeometryN(i);\r\n\t\t\t\tthis.updateLocationInfo(this.locateInternal(p, l));\r\n\t\t\t}\r\n\t\t} else if (geom instanceof MultiPolygon) {\r\n\t\t\tvar mpoly = geom;\r\n\t\t\tfor (var i = 0; i < mpoly.getNumGeometries(); i++) {\r\n\t\t\t\tvar poly = mpoly.getGeometryN(i);\r\n\t\t\t\tthis.updateLocationInfo(this.locateInternal(p, poly));\r\n\t\t\t}\r\n\t\t} else if (geom instanceof GeometryCollection) {\r\n\t\t\tvar geomi = new GeometryCollectionIterator(geom);\r\n\t\t\twhile (geomi.hasNext()) {\r\n\t\t\t\tvar g2 = geomi.next();\r\n\t\t\t\tif (g2 !== geom) this.computeLocation(p, g2);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tlocate: function (p, geom) {\r\n\t\tif (geom.isEmpty()) return Location.EXTERIOR;\r\n\t\tif (geom instanceof LineString) {\r\n\t\t\treturn this.locateInternal(p, geom);\r\n\t\t} else if (geom instanceof Polygon) {\r\n\t\t\treturn this.locateInternal(p, geom);\r\n\t\t}\r\n\t\tthis.isIn = false;\r\n\t\tthis.numBoundaries = 0;\r\n\t\tthis.computeLocation(p, geom);\r\n\t\tif (this.boundaryRule.isInBoundary(this.numBoundaries)) return Location.BOUNDARY;\r\n\t\tif (this.numBoundaries > 0 || this.isIn) return Location.INTERIOR;\r\n\t\treturn Location.EXTERIOR;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PointLocator;\r\n\t}\r\n});\r\n","import Coordinate from '../geom/Coordinate';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nexport default function Octant() {}\r\nextend(Octant.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Octant;\r\n\t}\r\n});\r\nOctant.octant = function () {\r\n\tif (typeof arguments[0] === \"number\" && typeof arguments[1] === \"number\") {\r\n\t\tlet dx = arguments[0], dy = arguments[1];\r\n\t\tif (dx === 0.0 && dy === 0.0) throw new IllegalArgumentException(\"Cannot compute the octant for point ( \" + dx + \", \" + dy + \" )\");\r\n\t\tvar adx = Math.abs(dx);\r\n\t\tvar ady = Math.abs(dy);\r\n\t\tif (dx >= 0) {\r\n\t\t\tif (dy >= 0) {\r\n\t\t\t\tif (adx >= ady) return 0; else return 1;\r\n\t\t\t} else {\r\n\t\t\t\tif (adx >= ady) return 7; else return 6;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (dy >= 0) {\r\n\t\t\t\tif (adx >= ady) return 3; else return 2;\r\n\t\t\t} else {\r\n\t\t\t\tif (adx >= ady) return 4; else return 5;\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (arguments[0] instanceof Coordinate && arguments[1] instanceof Coordinate) {\r\n\t\tlet p0 = arguments[0], p1 = arguments[1];\r\n\t\tvar dx = p1.x - p0.x;\r\n\t\tvar dy = p1.y - p0.y;\r\n\t\tif (dx === 0.0 && dy === 0.0) throw new IllegalArgumentException(\"Cannot compute the octant for two identical points \" + p0);\r\n\t\treturn Octant.octant(dx, dy);\r\n\t}\r\n};\r\n","import extend from '../../../../extend';\r\nexport default function SegmentString() {}\r\nextend(SegmentString.prototype, {\r\n\tgetCoordinates: function () {},\r\n\tsize: function () {},\r\n\tgetCoordinate: function (i) {},\r\n\tisClosed: function () {},\r\n\tsetData: function (data) {},\r\n\tgetData: function () {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SegmentString;\r\n\t}\r\n});\r\n","import WKTWriter from '../io/WKTWriter';\r\nimport CoordinateArraySequence from '../geom/impl/CoordinateArraySequence';\r\nimport Octant from './Octant';\r\nimport extend from '../../../../extend';\r\nimport SegmentString from './SegmentString';\r\nexport default function BasicSegmentString() {\r\n\tthis.pts = null;\r\n\tthis.data = null;\r\n\tlet pts = arguments[0], data = arguments[1];\r\n\tthis.pts = pts;\r\n\tthis.data = data;\r\n}\r\nextend(BasicSegmentString.prototype, {\r\n\tgetCoordinates: function () {\r\n\t\treturn this.pts;\r\n\t},\r\n\tsize: function () {\r\n\t\treturn this.pts.length;\r\n\t},\r\n\tgetCoordinate: function (i) {\r\n\t\treturn this.pts[i];\r\n\t},\r\n\tisClosed: function () {\r\n\t\treturn this.pts[0].equals(this.pts[this.pts.length - 1]);\r\n\t},\r\n\tgetSegmentOctant: function (index) {\r\n\t\tif (index === this.pts.length - 1) return -1;\r\n\t\treturn Octant.octant(this.getCoordinate(index), this.getCoordinate(index + 1));\r\n\t},\r\n\tsetData: function (data) {\r\n\t\tthis.data = data;\r\n\t},\r\n\tgetData: function () {\r\n\t\treturn this.data;\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn WKTWriter.toLineString(new CoordinateArraySequence(this.pts));\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [SegmentString];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BasicSegmentString;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nexport default function Boundable() {}\r\nextend(Boundable.prototype, {\r\n\tgetBounds: function () {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Boundable;\r\n\t}\r\n});\r\n","import Boundable from './Boundable';\r\nimport extend from '../../../../../extend';\r\nimport Serializable from '../../../../../java/io/Serializable';\r\nexport default function ItemBoundable() {\r\n\tthis.bounds = null;\r\n\tthis.item = null;\r\n\tlet bounds = arguments[0], item = arguments[1];\r\n\tthis.bounds = bounds;\r\n\tthis.item = item;\r\n}\r\nextend(ItemBoundable.prototype, {\r\n\tgetItem: function () {\r\n\t\treturn this.item;\r\n\t},\r\n\tgetBounds: function () {\r\n\t\treturn this.bounds;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Boundable, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ItemBoundable;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function PriorityQueue() {\r\n\tthis._size = null;\r\n\tthis.items = null;\r\n\tthis._size = 0;\r\n\tthis.items = new ArrayList();\r\n\tthis.items.add(null);\r\n}\r\nextend(PriorityQueue.prototype, {\r\n\tpoll: function () {\r\n\t\tif (this.isEmpty()) return null;\r\n\t\tvar minItem = this.items.get(1);\r\n\t\tthis.items.set(1, this.items.get(this._size));\r\n\t\tthis._size -= 1;\r\n\t\tthis.reorder(1);\r\n\t\treturn minItem;\r\n\t},\r\n\tsize: function () {\r\n\t\treturn this._size;\r\n\t},\r\n\treorder: function (hole) {\r\n\t\tvar child = null;\r\n\t\tvar tmp = this.items.get(hole);\r\n\t\tfor (; hole * 2 <= this._size; hole = child) {\r\n\t\t\tchild = hole * 2;\r\n\t\t\tif (child !== this._size && this.items.get(child + 1).compareTo(this.items.get(child)) < 0) child++;\r\n\t\t\tif (this.items.get(child).compareTo(tmp) < 0) this.items.set(hole, this.items.get(child)); else break;\r\n\t\t}\r\n\t\tthis.items.set(hole, tmp);\r\n\t},\r\n\tclear: function () {\r\n\t\tthis._size = 0;\r\n\t\tthis.items.clear();\r\n\t},\r\n\tisEmpty: function () {\r\n\t\treturn this._size === 0;\r\n\t},\r\n\tadd: function (x) {\r\n\t\tthis.items.add(null);\r\n\t\tthis._size += 1;\r\n\t\tvar hole = this._size;\r\n\t\tthis.items.set(0, x);\r\n\t\tfor (; x.compareTo(this.items.get(Math.trunc(hole / 2))) < 0; hole /= 2) {\r\n\t\t\tthis.items.set(hole, this.items.get(Math.trunc(hole / 2)));\r\n\t\t}\r\n\t\tthis.items.set(hole, x);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PriorityQueue;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nexport default function ItemVisitor() {}\r\nextend(ItemVisitor.prototype, {\r\n\tvisitItem: function (item) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ItemVisitor;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nexport default function SpatialIndex() {}\r\nextend(SpatialIndex.prototype, {\r\n\tinsert: function (itemEnv, item) {},\r\n\tremove: function (itemEnv, item) {},\r\n\tquery: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet searchEnv = arguments[0];\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet searchEnv = arguments[0], visitor = arguments[1];\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SpatialIndex;\r\n\t}\r\n});\r\n","import Boundable from './Boundable';\r\nimport extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Serializable from '../../../../../java/io/Serializable';\r\nimport Assert from '../../util/Assert';\r\nexport default function AbstractNode() {\r\n\tthis.childBoundables = new ArrayList();\r\n\tthis.bounds = null;\r\n\tthis.level = null;\r\n\tif (arguments.length === 0) {} else if (arguments.length === 1) {\r\n\t\tlet level = arguments[0];\r\n\t\tthis.level = level;\r\n\t}\r\n}\r\nextend(AbstractNode.prototype, {\r\n\tgetLevel: function () {\r\n\t\treturn this.level;\r\n\t},\r\n\tsize: function () {\r\n\t\treturn this.childBoundables.size();\r\n\t},\r\n\tgetChildBoundables: function () {\r\n\t\treturn this.childBoundables;\r\n\t},\r\n\taddChildBoundable: function (childBoundable) {\r\n\t\tAssert.isTrue(this.bounds === null);\r\n\t\tthis.childBoundables.add(childBoundable);\r\n\t},\r\n\tisEmpty: function () {\r\n\t\treturn this.childBoundables.isEmpty();\r\n\t},\r\n\tgetBounds: function () {\r\n\t\tif (this.bounds === null) {\r\n\t\t\tthis.bounds = this.computeBounds();\r\n\t\t}\r\n\t\treturn this.bounds;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Boundable, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn AbstractNode;\r\n\t}\r\n});\r\nAbstractNode.serialVersionUID = 6493722185909573708;\r\n","import Arrays from './Arrays'\r\nimport ArrayList from './ArrayList'\r\n\r\nconst Collections = {\r\n  reverseOrder: function () {\r\n    return {\r\n      compare (a, b) {\r\n        return b.compareTo(a)\r\n      }\r\n    }\r\n  },\r\n  min: function (l) {\r\n    Collections.sort(l)\r\n    return l.get(0)\r\n  },\r\n  sort: function (l, c) {\r\n    const a = l.toArray()\r\n    if (c) {\r\n      Arrays.sort(a, c)\r\n    } else {\r\n      Arrays.sort(a)\r\n    }\r\n    const i = l.iterator()\r\n    for (let pos = 0, alen = a.length; pos < alen; pos++) {\r\n      i.next()\r\n      i.set(a[pos])\r\n    }\r\n  },\r\n  singletonList: function (o) {\r\n    const arrayList = new ArrayList()\r\n    arrayList.add(o)\r\n    return arrayList\r\n  }\r\n}\r\n\r\nexport default Collections\r\n","import IllegalArgumentException from '../../../../../java/lang/IllegalArgumentException';\r\nimport AbstractNode from './AbstractNode';\r\nimport extend from '../../../../../extend';\r\nimport Comparable from '../../../../../java/lang/Comparable';\r\nexport default function BoundablePair() {\r\n\tthis.boundable1 = null;\r\n\tthis.boundable2 = null;\r\n\tthis._distance = null;\r\n\tthis.itemDistance = null;\r\n\tlet boundable1 = arguments[0], boundable2 = arguments[1], itemDistance = arguments[2];\r\n\tthis.boundable1 = boundable1;\r\n\tthis.boundable2 = boundable2;\r\n\tthis.itemDistance = itemDistance;\r\n\tthis._distance = this.distance();\r\n}\r\nextend(BoundablePair.prototype, {\r\n\texpandToQueue: function (priQ, minDistance) {\r\n\t\tvar isComp1 = BoundablePair.isComposite(this.boundable1);\r\n\t\tvar isComp2 = BoundablePair.isComposite(this.boundable2);\r\n\t\tif (isComp1 && isComp2) {\r\n\t\t\tif (BoundablePair.area(this.boundable1) > BoundablePair.area(this.boundable2)) {\r\n\t\t\t\tthis.expand(this.boundable1, this.boundable2, priQ, minDistance);\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\tthis.expand(this.boundable2, this.boundable1, priQ, minDistance);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t} else if (isComp1) {\r\n\t\t\tthis.expand(this.boundable1, this.boundable2, priQ, minDistance);\r\n\t\t\treturn null;\r\n\t\t} else if (isComp2) {\r\n\t\t\tthis.expand(this.boundable2, this.boundable1, priQ, minDistance);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tthrow new IllegalArgumentException(\"neither boundable is composite\");\r\n\t},\r\n\tisLeaves: function () {\r\n\t\treturn !(BoundablePair.isComposite(this.boundable1) || BoundablePair.isComposite(this.boundable2));\r\n\t},\r\n\tcompareTo: function (o) {\r\n\t\tvar nd = o;\r\n\t\tif (this._distance < nd._distance) return -1;\r\n\t\tif (this._distance > nd._distance) return 1;\r\n\t\treturn 0;\r\n\t},\r\n\texpand: function (bndComposite, bndOther, priQ, minDistance) {\r\n\t\tvar children = bndComposite.getChildBoundables();\r\n\t\tfor (var i = children.iterator(); i.hasNext(); ) {\r\n\t\t\tvar child = i.next();\r\n\t\t\tvar bp = new BoundablePair(child, bndOther, this.itemDistance);\r\n\t\t\tif (bp.getDistance() < minDistance) {\r\n\t\t\t\tpriQ.add(bp);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetBoundable: function (i) {\r\n\t\tif (i === 0) return this.boundable1;\r\n\t\treturn this.boundable2;\r\n\t},\r\n\tgetDistance: function () {\r\n\t\treturn this._distance;\r\n\t},\r\n\tdistance: function () {\r\n\t\tif (this.isLeaves()) {\r\n\t\t\treturn this.itemDistance.distance(this.boundable1, this.boundable2);\r\n\t\t}\r\n\t\treturn this.boundable1.getBounds().distance(this.boundable2.getBounds());\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BoundablePair;\r\n\t}\r\n});\r\nBoundablePair.area = function (b) {\r\n\treturn b.getBounds().getArea();\r\n};\r\nBoundablePair.isComposite = function (item) {\r\n\treturn item instanceof AbstractNode;\r\n};\r\n","import ItemBoundable from './ItemBoundable';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport ItemVisitor from '../ItemVisitor';\r\nimport AbstractNode from './AbstractNode';\r\nimport extend from '../../../../../extend';\r\nimport Collections from '../../../../../java/util/Collections';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Serializable from '../../../../../java/io/Serializable';\r\nimport Assert from '../../util/Assert';\r\nimport List from '../../../../../java/util/List';\r\nexport default function AbstractSTRtree() {\r\n\tthis.root = null;\r\n\tthis.built = false;\r\n\tthis.itemBoundables = new ArrayList();\r\n\tthis.nodeCapacity = null;\r\n\tif (arguments.length === 0) {\r\n\t\tAbstractSTRtree.call(this, AbstractSTRtree.DEFAULT_NODE_CAPACITY);\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet nodeCapacity = arguments[0];\r\n\t\tAssert.isTrue(nodeCapacity > 1, \"Node capacity must be greater than 1\");\r\n\t\tthis.nodeCapacity = nodeCapacity;\r\n\t}\r\n}\r\nextend(AbstractSTRtree.prototype, {\r\n\tgetNodeCapacity: function () {\r\n\t\treturn this.nodeCapacity;\r\n\t},\r\n\tlastNode: function (nodes) {\r\n\t\treturn nodes.get(nodes.size() - 1);\r\n\t},\r\n\tsize: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tif (this.isEmpty()) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tthis.build();\r\n\t\t\treturn this.size(this.root);\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet node = arguments[0];\r\n\t\t\tvar size = 0;\r\n\t\t\tfor (var i = node.getChildBoundables().iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar childBoundable = i.next();\r\n\t\t\t\tif (childBoundable instanceof AbstractNode) {\r\n\t\t\t\t\tsize += this.size(childBoundable);\r\n\t\t\t\t} else if (childBoundable instanceof ItemBoundable) {\r\n\t\t\t\t\tsize += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn size;\r\n\t\t}\r\n\t},\r\n\tremoveItem: function (node, item) {\r\n\t\tvar childToRemove = null;\r\n\t\tfor (var i = node.getChildBoundables().iterator(); i.hasNext(); ) {\r\n\t\t\tvar childBoundable = i.next();\r\n\t\t\tif (childBoundable instanceof ItemBoundable) {\r\n\t\t\t\tif (childBoundable.getItem() === item) childToRemove = childBoundable;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (childToRemove !== null) {\r\n\t\t\tnode.getChildBoundables().remove(childToRemove);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\titemsTree: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tthis.build();\r\n\t\t\tvar valuesTree = this.itemsTree(this.root);\r\n\t\t\tif (valuesTree === null) return new ArrayList();\r\n\t\t\treturn valuesTree;\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet node = arguments[0];\r\n\t\t\tvar valuesTreeForNode = new ArrayList();\r\n\t\t\tfor (var i = node.getChildBoundables().iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar childBoundable = i.next();\r\n\t\t\t\tif (childBoundable instanceof AbstractNode) {\r\n\t\t\t\t\tvar valuesTreeForChild = this.itemsTree(childBoundable);\r\n\t\t\t\t\tif (valuesTreeForChild !== null) valuesTreeForNode.add(valuesTreeForChild);\r\n\t\t\t\t} else if (childBoundable instanceof ItemBoundable) {\r\n\t\t\t\t\tvaluesTreeForNode.add(childBoundable.getItem());\r\n\t\t\t\t} else {\r\n\t\t\t\t\tAssert.shouldNeverReachHere();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (valuesTreeForNode.size() <= 0) return null;\r\n\t\t\treturn valuesTreeForNode;\r\n\t\t}\r\n\t},\r\n\tinsert: function (bounds, item) {\r\n\t\tAssert.isTrue(!this.built, \"Cannot insert items into an STR packed R-tree after it has been built.\");\r\n\t\tthis.itemBoundables.add(new ItemBoundable(bounds, item));\r\n\t},\r\n\tboundablesAtLevel: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet level = arguments[0];\r\n\t\t\tvar boundables = new ArrayList();\r\n\t\t\tthis.boundablesAtLevel(level, this.root, boundables);\r\n\t\t\treturn boundables;\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet level = arguments[0], top = arguments[1], boundables = arguments[2];\r\n\t\t\tAssert.isTrue(level > -2);\r\n\t\t\tif (top.getLevel() === level) {\r\n\t\t\t\tboundables.add(top);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tfor (var i = top.getChildBoundables().iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar boundable = i.next();\r\n\t\t\t\tif (boundable instanceof AbstractNode) {\r\n\t\t\t\t\tthis.boundablesAtLevel(level, boundable, boundables);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tAssert.isTrue(boundable instanceof ItemBoundable);\r\n\t\t\t\t\tif (level === -1) {\r\n\t\t\t\t\t\tboundables.add(boundable);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tquery: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet searchBounds = arguments[0];\r\n\t\t\tthis.build();\r\n\t\t\tvar matches = new ArrayList();\r\n\t\t\tif (this.isEmpty()) {\r\n\t\t\t\treturn matches;\r\n\t\t\t}\r\n\t\t\tif (this.getIntersectsOp().intersects(this.root.getBounds(), searchBounds)) {\r\n\t\t\t\tthis.query(searchBounds, this.root, matches);\r\n\t\t\t}\r\n\t\t\treturn matches;\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet searchBounds = arguments[0], visitor = arguments[1];\r\n\t\t\tthis.build();\r\n\t\t\tif (this.isEmpty()) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (this.getIntersectsOp().intersects(this.root.getBounds(), searchBounds)) {\r\n\t\t\t\tthis.query(searchBounds, this.root, visitor);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tif (hasInterface(arguments[2], ItemVisitor) && (arguments[0] instanceof Object && arguments[1] instanceof AbstractNode)) {\r\n\t\t\t\tlet searchBounds = arguments[0], node = arguments[1], visitor = arguments[2];\r\n\t\t\t\tvar childBoundables = node.getChildBoundables();\r\n\t\t\t\tfor (var i = 0; i < childBoundables.size(); i++) {\r\n\t\t\t\t\tvar childBoundable = childBoundables.get(i);\r\n\t\t\t\t\tif (!this.getIntersectsOp().intersects(childBoundable.getBounds(), searchBounds)) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (childBoundable instanceof AbstractNode) {\r\n\t\t\t\t\t\tthis.query(searchBounds, childBoundable, visitor);\r\n\t\t\t\t\t} else if (childBoundable instanceof ItemBoundable) {\r\n\t\t\t\t\t\tvisitor.visitItem(childBoundable.getItem());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tAssert.shouldNeverReachHere();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (hasInterface(arguments[2], List) && (arguments[0] instanceof Object && arguments[1] instanceof AbstractNode)) {\r\n\t\t\t\tlet searchBounds = arguments[0], node = arguments[1], matches = arguments[2];\r\n\t\t\t\tvar childBoundables = node.getChildBoundables();\r\n\t\t\t\tfor (var i = 0; i < childBoundables.size(); i++) {\r\n\t\t\t\t\tvar childBoundable = childBoundables.get(i);\r\n\t\t\t\t\tif (!this.getIntersectsOp().intersects(childBoundable.getBounds(), searchBounds)) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (childBoundable instanceof AbstractNode) {\r\n\t\t\t\t\t\tthis.query(searchBounds, childBoundable, matches);\r\n\t\t\t\t\t} else if (childBoundable instanceof ItemBoundable) {\r\n\t\t\t\t\t\tmatches.add(childBoundable.getItem());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tAssert.shouldNeverReachHere();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbuild: function () {\r\n\t\tif (this.built) return null;\r\n\t\tthis.root = this.itemBoundables.isEmpty() ? this.createNode(0) : this.createHigherLevels(this.itemBoundables, -1);\r\n\t\tthis.itemBoundables = null;\r\n\t\tthis.built = true;\r\n\t},\r\n\tgetRoot: function () {\r\n\t\tthis.build();\r\n\t\treturn this.root;\r\n\t},\r\n\tremove: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet searchBounds = arguments[0], item = arguments[1];\r\n\t\t\tthis.build();\r\n\t\t\tif (this.getIntersectsOp().intersects(this.root.getBounds(), searchBounds)) {\r\n\t\t\t\treturn this.remove(searchBounds, this.root, item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet searchBounds = arguments[0], node = arguments[1], item = arguments[2];\r\n\t\t\tvar found = this.removeItem(node, item);\r\n\t\t\tif (found) return true;\r\n\t\t\tvar childToPrune = null;\r\n\t\t\tfor (var i = node.getChildBoundables().iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar childBoundable = i.next();\r\n\t\t\t\tif (!this.getIntersectsOp().intersects(childBoundable.getBounds(), searchBounds)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (childBoundable instanceof AbstractNode) {\r\n\t\t\t\t\tfound = this.remove(searchBounds, childBoundable, item);\r\n\t\t\t\t\tif (found) {\r\n\t\t\t\t\t\tchildToPrune = childBoundable;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (childToPrune !== null) {\r\n\t\t\t\tif (childToPrune.getChildBoundables().isEmpty()) {\r\n\t\t\t\t\tnode.getChildBoundables().remove(childToPrune);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn found;\r\n\t\t}\r\n\t},\r\n\tcreateHigherLevels: function (boundablesOfALevel, level) {\r\n\t\tAssert.isTrue(!boundablesOfALevel.isEmpty());\r\n\t\tvar parentBoundables = this.createParentBoundables(boundablesOfALevel, level + 1);\r\n\t\tif (parentBoundables.size() === 1) {\r\n\t\t\treturn parentBoundables.get(0);\r\n\t\t}\r\n\t\treturn this.createHigherLevels(parentBoundables, level + 1);\r\n\t},\r\n\tdepth: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tif (this.isEmpty()) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tthis.build();\r\n\t\t\treturn this.depth(this.root);\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet node = arguments[0];\r\n\t\t\tvar maxChildDepth = 0;\r\n\t\t\tfor (var i = node.getChildBoundables().iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar childBoundable = i.next();\r\n\t\t\t\tif (childBoundable instanceof AbstractNode) {\r\n\t\t\t\t\tvar childDepth = this.depth(childBoundable);\r\n\t\t\t\t\tif (childDepth > maxChildDepth) maxChildDepth = childDepth;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn maxChildDepth + 1;\r\n\t\t}\r\n\t},\r\n\tcreateParentBoundables: function (childBoundables, newLevel) {\r\n\t\tAssert.isTrue(!childBoundables.isEmpty());\r\n\t\tvar parentBoundables = new ArrayList();\r\n\t\tparentBoundables.add(this.createNode(newLevel));\r\n\t\tvar sortedChildBoundables = new ArrayList(childBoundables);\r\n\t\tCollections.sort(sortedChildBoundables, this.getComparator());\r\n\t\tfor (var i = sortedChildBoundables.iterator(); i.hasNext(); ) {\r\n\t\t\tvar childBoundable = i.next();\r\n\t\t\tif (this.lastNode(parentBoundables).getChildBoundables().size() === this.getNodeCapacity()) {\r\n\t\t\t\tparentBoundables.add(this.createNode(newLevel));\r\n\t\t\t}\r\n\t\t\tthis.lastNode(parentBoundables).addChildBoundable(childBoundable);\r\n\t\t}\r\n\t\treturn parentBoundables;\r\n\t},\r\n\tisEmpty: function () {\r\n\t\tif (!this.built) return this.itemBoundables.isEmpty();\r\n\t\treturn this.root.isEmpty();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn AbstractSTRtree;\r\n\t}\r\n});\r\nAbstractSTRtree.compareDoubles = function (a, b) {\r\n\treturn a > b ? 1 : a < b ? -1 : 0;\r\n};\r\nfunction IntersectsOp() {}\r\nAbstractSTRtree.IntersectsOp = IntersectsOp;\r\nAbstractSTRtree.serialVersionUID = -3886435814360241337;\r\nAbstractSTRtree.DEFAULT_NODE_CAPACITY = 10;\r\n","import extend from '../../../../../extend';\r\nexport default function ItemDistance() {}\r\nextend(ItemDistance.prototype, {\r\n\tdistance: function (item1, item2) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ItemDistance;\r\n\t}\r\n});\r\n","import ItemBoundable from './ItemBoundable';\r\nimport PriorityQueue from '../../util/PriorityQueue';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport ItemVisitor from '../ItemVisitor';\r\nimport SpatialIndex from '../SpatialIndex';\r\nimport AbstractNode from './AbstractNode';\r\nimport Double from '../../../../../java/lang/Double';\r\nimport extend from '../../../../../extend';\r\nimport Collections from '../../../../../java/util/Collections';\r\nimport BoundablePair from './BoundablePair';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Comparator from '../../../../../java/util/Comparator';\r\nimport Serializable from '../../../../../java/io/Serializable';\r\nimport Envelope from '../../geom/Envelope';\r\nimport Assert from '../../util/Assert';\r\nimport inherits from '../../../../../inherits';\r\nimport List from '../../../../../java/util/List';\r\nimport AbstractSTRtree from './AbstractSTRtree';\r\nimport ItemDistance from './ItemDistance';\r\nexport default function STRtree() {\r\n\tif (arguments.length === 0) {\r\n\t\tSTRtree.call(this, STRtree.DEFAULT_NODE_CAPACITY);\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet nodeCapacity = arguments[0];\r\n\t\tAbstractSTRtree.call(this, nodeCapacity);\r\n\t}\r\n}\r\ninherits(STRtree, AbstractSTRtree);\r\nextend(STRtree.prototype, {\r\n\tcreateParentBoundablesFromVerticalSlices: function (verticalSlices, newLevel) {\r\n\t\tAssert.isTrue(verticalSlices.length > 0);\r\n\t\tvar parentBoundables = new ArrayList();\r\n\t\tfor (var i = 0; i < verticalSlices.length; i++) {\r\n\t\t\tparentBoundables.addAll(this.createParentBoundablesFromVerticalSlice(verticalSlices[i], newLevel));\r\n\t\t}\r\n\t\treturn parentBoundables;\r\n\t},\r\n\tcreateNode: function (level) {\r\n\t\treturn new STRtreeNode(level);\r\n\t},\r\n\tsize: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn AbstractSTRtree.prototype.size.call(this);\r\n\t\t} else return AbstractSTRtree.prototype.size.apply(this, arguments);\r\n\t},\r\n\tinsert: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet itemEnv = arguments[0], item = arguments[1];\r\n\t\t\tif (itemEnv.isNull()) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tAbstractSTRtree.prototype.insert.call(this, itemEnv, item);\r\n\t\t} else return AbstractSTRtree.prototype.insert.apply(this, arguments);\r\n\t},\r\n\tgetIntersectsOp: function () {\r\n\t\treturn STRtree.intersectsOp;\r\n\t},\r\n\tverticalSlices: function (childBoundables, sliceCount) {\r\n\t\tvar sliceCapacity = Math.trunc(Math.ceil(childBoundables.size() / sliceCount));\r\n\t\tvar slices = new Array(sliceCount).fill(null);\r\n\t\tvar i = childBoundables.iterator();\r\n\t\tfor (var j = 0; j < sliceCount; j++) {\r\n\t\t\tslices[j] = new ArrayList();\r\n\t\t\tvar boundablesAddedToSlice = 0;\r\n\t\t\twhile (i.hasNext() && boundablesAddedToSlice < sliceCapacity) {\r\n\t\t\t\tvar childBoundable = i.next();\r\n\t\t\t\tslices[j].add(childBoundable);\r\n\t\t\t\tboundablesAddedToSlice++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn slices;\r\n\t},\r\n\tquery: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet searchEnv = arguments[0];\r\n\t\t\treturn AbstractSTRtree.prototype.query.call(this, searchEnv);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet searchEnv = arguments[0], visitor = arguments[1];\r\n\t\t\tAbstractSTRtree.prototype.query.call(this, searchEnv, visitor);\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tif (hasInterface(arguments[2], ItemVisitor) && (arguments[0] instanceof Object && arguments[1] instanceof AbstractNode)) {\r\n\t\t\t\tlet searchBounds = arguments[0], node = arguments[1], visitor = arguments[2];\r\n\t\t\t\tAbstractSTRtree.prototype.query.call(this, searchBounds, node, visitor);\r\n\t\t\t} else if (hasInterface(arguments[2], List) && (arguments[0] instanceof Object && arguments[1] instanceof AbstractNode)) {\r\n\t\t\t\tlet searchBounds = arguments[0], node = arguments[1], matches = arguments[2];\r\n\t\t\t\tAbstractSTRtree.prototype.query.call(this, searchBounds, node, matches);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetComparator: function () {\r\n\t\treturn STRtree.yComparator;\r\n\t},\r\n\tcreateParentBoundablesFromVerticalSlice: function (childBoundables, newLevel) {\r\n\t\treturn AbstractSTRtree.prototype.createParentBoundables.call(this, childBoundables, newLevel);\r\n\t},\r\n\tremove: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet itemEnv = arguments[0], item = arguments[1];\r\n\t\t\treturn AbstractSTRtree.prototype.remove.call(this, itemEnv, item);\r\n\t\t} else return AbstractSTRtree.prototype.remove.apply(this, arguments);\r\n\t},\r\n\tdepth: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn AbstractSTRtree.prototype.depth.call(this);\r\n\t\t} else return AbstractSTRtree.prototype.depth.apply(this, arguments);\r\n\t},\r\n\tcreateParentBoundables: function (childBoundables, newLevel) {\r\n\t\tAssert.isTrue(!childBoundables.isEmpty());\r\n\t\tvar minLeafCount = Math.trunc(Math.ceil(childBoundables.size() / this.getNodeCapacity()));\r\n\t\tvar sortedChildBoundables = new ArrayList(childBoundables);\r\n\t\tCollections.sort(sortedChildBoundables, STRtree.xComparator);\r\n\t\tvar verticalSlices = this.verticalSlices(sortedChildBoundables, Math.trunc(Math.ceil(Math.sqrt(minLeafCount))));\r\n\t\treturn this.createParentBoundablesFromVerticalSlices(verticalSlices, newLevel);\r\n\t},\r\n\tnearestNeighbour: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (hasInterface(arguments[0], ItemDistance)) {\r\n\t\t\t\tlet itemDist = arguments[0];\r\n\t\t\t\tvar bp = new BoundablePair(this.getRoot(), this.getRoot(), itemDist);\r\n\t\t\t\treturn this.nearestNeighbour(bp);\r\n\t\t\t} else if (arguments[0] instanceof BoundablePair) {\r\n\t\t\t\tlet initBndPair = arguments[0];\r\n\t\t\t\treturn this.nearestNeighbour(initBndPair, Double.POSITIVE_INFINITY);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tif (arguments[0] instanceof STRtree && hasInterface(arguments[1], ItemDistance)) {\r\n\t\t\t\tlet tree = arguments[0], itemDist = arguments[1];\r\n\t\t\t\tvar bp = new BoundablePair(this.getRoot(), tree.getRoot(), itemDist);\r\n\t\t\t\treturn this.nearestNeighbour(bp);\r\n\t\t\t} else if (arguments[0] instanceof BoundablePair && typeof arguments[1] === \"number\") {\r\n\t\t\t\tlet initBndPair = arguments[0], maxDistance = arguments[1];\r\n\t\t\t\tvar distanceLowerBound = maxDistance;\r\n\t\t\t\tvar minPair = null;\r\n\t\t\t\tvar priQ = new PriorityQueue();\r\n\t\t\t\tpriQ.add(initBndPair);\r\n\t\t\t\twhile (!priQ.isEmpty() && distanceLowerBound > 0.0) {\r\n\t\t\t\t\tvar bndPair = priQ.poll();\r\n\t\t\t\t\tvar currentDistance = bndPair.getDistance();\r\n\t\t\t\t\tif (currentDistance >= distanceLowerBound) break;\r\n\t\t\t\t\tif (bndPair.isLeaves()) {\r\n\t\t\t\t\t\tdistanceLowerBound = currentDistance;\r\n\t\t\t\t\t\tminPair = bndPair;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbndPair.expandToQueue(priQ, distanceLowerBound);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn [minPair.getBoundable(0).getItem(), minPair.getBoundable(1).getItem()];\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet env = arguments[0], item = arguments[1], itemDist = arguments[2];\r\n\t\t\tvar bnd = new ItemBoundable(env, item);\r\n\t\t\tvar bp = new BoundablePair(this.getRoot(), bnd, itemDist);\r\n\t\t\treturn this.nearestNeighbour(bp)[0];\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [SpatialIndex, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn STRtree;\r\n\t}\r\n});\r\nSTRtree.centreX = function (e) {\r\n\treturn STRtree.avg(e.getMinX(), e.getMaxX());\r\n};\r\nSTRtree.avg = function (a, b) {\r\n\treturn (a + b) / 2;\r\n};\r\nSTRtree.centreY = function (e) {\r\n\treturn STRtree.avg(e.getMinY(), e.getMaxY());\r\n};\r\nfunction STRtreeNode() {\r\n\tlet level = arguments[0];\r\n\tAbstractNode.call(this, level);\r\n}\r\ninherits(STRtreeNode, AbstractNode);\r\nextend(STRtreeNode.prototype, {\r\n\tcomputeBounds: function () {\r\n\t\tvar bounds = null;\r\n\t\tfor (var i = this.getChildBoundables().iterator(); i.hasNext(); ) {\r\n\t\t\tvar childBoundable = i.next();\r\n\t\t\tif (bounds === null) {\r\n\t\t\t\tbounds = new Envelope(childBoundable.getBounds());\r\n\t\t\t} else {\r\n\t\t\t\tbounds.expandToInclude(childBoundable.getBounds());\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn bounds;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn STRtreeNode;\r\n\t}\r\n});\r\nSTRtree.STRtreeNode = STRtreeNode;\r\nSTRtree.serialVersionUID = 259274702368956900;\r\nSTRtree.xComparator = {\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparator];\r\n\t},\r\n\tcompare: function (o1, o2) {\r\n\t\treturn AbstractSTRtree.compareDoubles(STRtree.centreX(o1.getBounds()), STRtree.centreX(o2.getBounds()));\r\n\t}\r\n};\r\nSTRtree.yComparator = {\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparator];\r\n\t},\r\n\tcompare: function (o1, o2) {\r\n\t\treturn AbstractSTRtree.compareDoubles(STRtree.centreY(o1.getBounds()), STRtree.centreY(o2.getBounds()));\r\n\t}\r\n};\r\nSTRtree.intersectsOp = {\r\n\tinterfaces_: function () {\r\n\t\treturn [IntersectsOp];\r\n\t},\r\n\tintersects: function (aBounds, bBounds) {\r\n\t\treturn aBounds.intersects(bBounds);\r\n\t}\r\n};\r\nSTRtree.DEFAULT_NODE_CAPACITY = 10;\r\n","import extend from '../../../../extend';\r\nimport Assert from '../util/Assert';\r\nexport default function SegmentPointComparator() {}\r\nextend(SegmentPointComparator.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SegmentPointComparator;\r\n\t}\r\n});\r\nSegmentPointComparator.relativeSign = function (x0, x1) {\r\n\tif (x0 < x1) return -1;\r\n\tif (x0 > x1) return 1;\r\n\treturn 0;\r\n};\r\nSegmentPointComparator.compare = function (octant, p0, p1) {\r\n\tif (p0.equals2D(p1)) return 0;\r\n\tvar xSign = SegmentPointComparator.relativeSign(p0.x, p1.x);\r\n\tvar ySign = SegmentPointComparator.relativeSign(p0.y, p1.y);\r\n\tswitch (octant) {\r\n\t\tcase 0:\r\n\t\t\treturn SegmentPointComparator.compareValue(xSign, ySign);\r\n\t\tcase 1:\r\n\t\t\treturn SegmentPointComparator.compareValue(ySign, xSign);\r\n\t\tcase 2:\r\n\t\t\treturn SegmentPointComparator.compareValue(ySign, -xSign);\r\n\t\tcase 3:\r\n\t\t\treturn SegmentPointComparator.compareValue(-xSign, ySign);\r\n\t\tcase 4:\r\n\t\t\treturn SegmentPointComparator.compareValue(-xSign, -ySign);\r\n\t\tcase 5:\r\n\t\t\treturn SegmentPointComparator.compareValue(-ySign, -xSign);\r\n\t\tcase 6:\r\n\t\t\treturn SegmentPointComparator.compareValue(-ySign, xSign);\r\n\t\tcase 7:\r\n\t\t\treturn SegmentPointComparator.compareValue(xSign, -ySign);\r\n\t}\r\n\tAssert.shouldNeverReachHere(\"invalid octant value\");\r\n\treturn 0;\r\n};\r\nSegmentPointComparator.compareValue = function (compareSign0, compareSign1) {\r\n\tif (compareSign0 < 0) return -1;\r\n\tif (compareSign0 > 0) return 1;\r\n\tif (compareSign1 < 0) return -1;\r\n\tif (compareSign1 > 0) return 1;\r\n\treturn 0;\r\n};\r\n","import Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport SegmentPointComparator from './SegmentPointComparator';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nexport default function SegmentNode() {\r\n\tthis.segString = null;\r\n\tthis.coord = null;\r\n\tthis.segmentIndex = null;\r\n\tthis.segmentOctant = null;\r\n\tthis._isInterior = null;\r\n\tlet segString = arguments[0], coord = arguments[1], segmentIndex = arguments[2], segmentOctant = arguments[3];\r\n\tthis.segString = segString;\r\n\tthis.coord = new Coordinate(coord);\r\n\tthis.segmentIndex = segmentIndex;\r\n\tthis.segmentOctant = segmentOctant;\r\n\tthis._isInterior = !coord.equals2D(segString.getCoordinate(segmentIndex));\r\n}\r\nextend(SegmentNode.prototype, {\r\n\tgetCoordinate: function () {\r\n\t\treturn this.coord;\r\n\t},\r\n\tprint: function (out) {\r\n\t\tout.print(this.coord);\r\n\t\tout.print(\" seg # = \" + this.segmentIndex);\r\n\t},\r\n\tcompareTo: function (obj) {\r\n\t\tvar other = obj;\r\n\t\tif (this.segmentIndex < other.segmentIndex) return -1;\r\n\t\tif (this.segmentIndex > other.segmentIndex) return 1;\r\n\t\tif (this.coord.equals2D(other.coord)) return 0;\r\n\t\treturn SegmentPointComparator.compare(this.segmentOctant, this.coord, other.coord);\r\n\t},\r\n\tisEndPoint: function (maxSegmentIndex) {\r\n\t\tif (this.segmentIndex === 0 && !this._isInterior) return true;\r\n\t\tif (this.segmentIndex === maxSegmentIndex) return true;\r\n\t\treturn false;\r\n\t},\r\n\tisInterior: function () {\r\n\t\treturn this._isInterior;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SegmentNode;\r\n\t}\r\n});\r\n","import CoordinateList from '../geom/CoordinateList';\r\nimport SegmentNode from './SegmentNode';\r\nimport Iterator from '../../../../java/util/Iterator';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport NodedSegmentString from './NodedSegmentString';\r\nimport extend from '../../../../extend';\r\nimport Integer from '../../../../java/lang/Integer';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport RuntimeException from '../../../../java/lang/RuntimeException';\r\nimport Assert from '../util/Assert';\r\nimport TreeMap from '../../../../java/util/TreeMap';\r\nexport default function SegmentNodeList() {\r\n\tthis.nodeMap = new TreeMap();\r\n\tthis.edge = null;\r\n\tlet edge = arguments[0];\r\n\tthis.edge = edge;\r\n}\r\nextend(SegmentNodeList.prototype, {\r\n\tgetSplitCoordinates: function () {\r\n\t\tvar coordList = new CoordinateList();\r\n\t\tthis.addEndpoints();\r\n\t\tvar it = this.iterator();\r\n\t\tvar eiPrev = it.next();\r\n\t\twhile (it.hasNext()) {\r\n\t\t\tvar ei = it.next();\r\n\t\t\tthis.addEdgeCoordinates(eiPrev, ei, coordList);\r\n\t\t\teiPrev = ei;\r\n\t\t}\r\n\t\treturn coordList.toCoordinateArray();\r\n\t},\r\n\taddCollapsedNodes: function () {\r\n\t\tvar collapsedVertexIndexes = new ArrayList();\r\n\t\tthis.findCollapsesFromInsertedNodes(collapsedVertexIndexes);\r\n\t\tthis.findCollapsesFromExistingVertices(collapsedVertexIndexes);\r\n\t\tfor (var it = collapsedVertexIndexes.iterator(); it.hasNext(); ) {\r\n\t\t\tvar vertexIndex = it.next().intValue();\r\n\t\t\tthis.add(this.edge.getCoordinate(vertexIndex), vertexIndex);\r\n\t\t}\r\n\t},\r\n\tprint: function (out) {\r\n\t\tout.println(\"Intersections:\");\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar ei = it.next();\r\n\t\t\tei.print(out);\r\n\t\t}\r\n\t},\r\n\tfindCollapsesFromExistingVertices: function (collapsedVertexIndexes) {\r\n\t\tfor (var i = 0; i < this.edge.size() - 2; i++) {\r\n\t\t\tvar p0 = this.edge.getCoordinate(i);\r\n\t\t\tvar p1 = this.edge.getCoordinate(i + 1);\r\n\t\t\tvar p2 = this.edge.getCoordinate(i + 2);\r\n\t\t\tif (p0.equals2D(p2)) {\r\n\t\t\t\tcollapsedVertexIndexes.add(new Integer(i + 1));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\taddEdgeCoordinates: function (ei0, ei1, coordList) {\r\n\t\tvar npts = ei1.segmentIndex - ei0.segmentIndex + 2;\r\n\t\tvar lastSegStartPt = this.edge.getCoordinate(ei1.segmentIndex);\r\n\t\tvar useIntPt1 = ei1.isInterior() || !ei1.coord.equals2D(lastSegStartPt);\r\n\t\tif (!useIntPt1) {\r\n\t\t\tnpts--;\r\n\t\t}\r\n\t\tvar ipt = 0;\r\n\t\tcoordList.add(new Coordinate(ei0.coord), false);\r\n\t\tfor (var i = ei0.segmentIndex + 1; i <= ei1.segmentIndex; i++) {\r\n\t\t\tcoordList.add(this.edge.getCoordinate(i));\r\n\t\t}\r\n\t\tif (useIntPt1) {\r\n\t\t\tcoordList.add(new Coordinate(ei1.coord));\r\n\t\t}\r\n\t},\r\n\titerator: function () {\r\n\t\treturn this.nodeMap.values().iterator();\r\n\t},\r\n\taddSplitEdges: function (edgeList) {\r\n\t\tthis.addEndpoints();\r\n\t\tthis.addCollapsedNodes();\r\n\t\tvar it = this.iterator();\r\n\t\tvar eiPrev = it.next();\r\n\t\twhile (it.hasNext()) {\r\n\t\t\tvar ei = it.next();\r\n\t\t\tvar newEdge = this.createSplitEdge(eiPrev, ei);\r\n\t\t\tedgeList.add(newEdge);\r\n\t\t\teiPrev = ei;\r\n\t\t}\r\n\t},\r\n\tfindCollapseIndex: function (ei0, ei1, collapsedVertexIndex) {\r\n\t\tif (!ei0.coord.equals2D(ei1.coord)) return false;\r\n\t\tvar numVerticesBetween = ei1.segmentIndex - ei0.segmentIndex;\r\n\t\tif (!ei1.isInterior()) {\r\n\t\t\tnumVerticesBetween--;\r\n\t\t}\r\n\t\tif (numVerticesBetween === 1) {\r\n\t\t\tcollapsedVertexIndex[0] = ei0.segmentIndex + 1;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tfindCollapsesFromInsertedNodes: function (collapsedVertexIndexes) {\r\n\t\tvar collapsedVertexIndex = new Array(1).fill(null);\r\n\t\tvar it = this.iterator();\r\n\t\tvar eiPrev = it.next();\r\n\t\twhile (it.hasNext()) {\r\n\t\t\tvar ei = it.next();\r\n\t\t\tvar isCollapsed = this.findCollapseIndex(eiPrev, ei, collapsedVertexIndex);\r\n\t\t\tif (isCollapsed) collapsedVertexIndexes.add(new Integer(collapsedVertexIndex[0]));\r\n\t\t\teiPrev = ei;\r\n\t\t}\r\n\t},\r\n\tgetEdge: function () {\r\n\t\treturn this.edge;\r\n\t},\r\n\taddEndpoints: function () {\r\n\t\tvar maxSegIndex = this.edge.size() - 1;\r\n\t\tthis.add(this.edge.getCoordinate(0), 0);\r\n\t\tthis.add(this.edge.getCoordinate(maxSegIndex), maxSegIndex);\r\n\t},\r\n\tcreateSplitEdge: function (ei0, ei1) {\r\n\t\tvar npts = ei1.segmentIndex - ei0.segmentIndex + 2;\r\n\t\tvar lastSegStartPt = this.edge.getCoordinate(ei1.segmentIndex);\r\n\t\tvar useIntPt1 = ei1.isInterior() || !ei1.coord.equals2D(lastSegStartPt);\r\n\t\tif (!useIntPt1) {\r\n\t\t\tnpts--;\r\n\t\t}\r\n\t\tvar pts = new Array(npts).fill(null);\r\n\t\tvar ipt = 0;\r\n\t\tpts[ipt++] = new Coordinate(ei0.coord);\r\n\t\tfor (var i = ei0.segmentIndex + 1; i <= ei1.segmentIndex; i++) {\r\n\t\t\tpts[ipt++] = this.edge.getCoordinate(i);\r\n\t\t}\r\n\t\tif (useIntPt1) pts[ipt] = new Coordinate(ei1.coord);\r\n\t\treturn new NodedSegmentString(pts, this.edge.getData());\r\n\t},\r\n\tadd: function (intPt, segmentIndex) {\r\n\t\tvar eiNew = new SegmentNode(this.edge, intPt, segmentIndex, this.edge.getSegmentOctant(segmentIndex));\r\n\t\tvar ei = this.nodeMap.get(eiNew);\r\n\t\tif (ei !== null) {\r\n\t\t\tAssert.isTrue(ei.coord.equals2D(intPt), \"Found equal nodes with different coordinates\");\r\n\t\t\treturn ei;\r\n\t\t}\r\n\t\tthis.nodeMap.put(eiNew, eiNew);\r\n\t\treturn eiNew;\r\n\t},\r\n\tcheckSplitEdgesCorrectness: function (splitEdges) {\r\n\t\tvar edgePts = this.edge.getCoordinates();\r\n\t\tvar split0 = splitEdges.get(0);\r\n\t\tvar pt0 = split0.getCoordinate(0);\r\n\t\tif (!pt0.equals2D(edgePts[0])) throw new RuntimeException(\"bad split edge start point at \" + pt0);\r\n\t\tvar splitn = splitEdges.get(splitEdges.size() - 1);\r\n\t\tvar splitnPts = splitn.getCoordinates();\r\n\t\tvar ptn = splitnPts[splitnPts.length - 1];\r\n\t\tif (!ptn.equals2D(edgePts[edgePts.length - 1])) throw new RuntimeException(\"bad split edge end point at \" + ptn);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SegmentNodeList;\r\n\t}\r\n});\r\nfunction NodeVertexIterator() {\r\n\tthis.nodeList = null;\r\n\tthis.edge = null;\r\n\tthis.nodeIt = null;\r\n\tthis.currNode = null;\r\n\tthis.nextNode = null;\r\n\tthis.currSegIndex = 0;\r\n\tlet nodeList = arguments[0];\r\n\tthis.nodeList = nodeList;\r\n\tthis.edge = nodeList.getEdge();\r\n\tthis.nodeIt = nodeList.iterator();\r\n\tthis.readNextNode();\r\n}\r\nextend(NodeVertexIterator.prototype, {\r\n\tnext: function () {\r\n\t\tif (this.currNode === null) {\r\n\t\t\tthis.currNode = this.nextNode;\r\n\t\t\tthis.currSegIndex = this.currNode.segmentIndex;\r\n\t\t\tthis.readNextNode();\r\n\t\t\treturn this.currNode;\r\n\t\t}\r\n\t\tif (this.nextNode === null) return null;\r\n\t\tif (this.nextNode.segmentIndex === this.currNode.segmentIndex) {\r\n\t\t\tthis.currNode = this.nextNode;\r\n\t\t\tthis.currSegIndex = this.currNode.segmentIndex;\r\n\t\t\tthis.readNextNode();\r\n\t\t\treturn this.currNode;\r\n\t\t}\r\n\t\tif (this.nextNode.segmentIndex > this.currNode.segmentIndex) {}\r\n\t\treturn null;\r\n\t},\r\n\tremove: function () {\r\n\t\tthrow new UnsupportedOperationException(this.getClass().getName());\r\n\t},\r\n\thasNext: function () {\r\n\t\tif (this.nextNode === null) return false;\r\n\t\treturn true;\r\n\t},\r\n\treadNextNode: function () {\r\n\t\tif (this.nodeIt.hasNext()) this.nextNode = this.nodeIt.next(); else this.nextNode = null;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Iterator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodeVertexIterator;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport SegmentString from './SegmentString';\r\nexport default function NodableSegmentString() {}\r\nextend(NodableSegmentString.prototype, {\r\n\taddIntersection: function (intPt, segmentIndex) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [SegmentString];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodableSegmentString;\r\n\t}\r\n});\r\n","import SegmentNodeList from './SegmentNodeList';\r\nimport WKTWriter from '../io/WKTWriter';\r\nimport CoordinateArraySequence from '../geom/impl/CoordinateArraySequence';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport Octant from './Octant';\r\nimport extend from '../../../../extend';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport NodableSegmentString from './NodableSegmentString';\r\nexport default function NodedSegmentString() {\r\n\tthis.nodeList = new SegmentNodeList(this);\r\n\tthis.pts = null;\r\n\tthis.data = null;\r\n\tlet pts = arguments[0], data = arguments[1];\r\n\tthis.pts = pts;\r\n\tthis.data = data;\r\n}\r\nextend(NodedSegmentString.prototype, {\r\n\tgetCoordinates: function () {\r\n\t\treturn this.pts;\r\n\t},\r\n\tsize: function () {\r\n\t\treturn this.pts.length;\r\n\t},\r\n\tgetCoordinate: function (i) {\r\n\t\treturn this.pts[i];\r\n\t},\r\n\tisClosed: function () {\r\n\t\treturn this.pts[0].equals(this.pts[this.pts.length - 1]);\r\n\t},\r\n\tgetSegmentOctant: function (index) {\r\n\t\tif (index === this.pts.length - 1) return -1;\r\n\t\treturn this.safeOctant(this.getCoordinate(index), this.getCoordinate(index + 1));\r\n\t},\r\n\tsetData: function (data) {\r\n\t\tthis.data = data;\r\n\t},\r\n\tsafeOctant: function (p0, p1) {\r\n\t\tif (p0.equals2D(p1)) return 0;\r\n\t\treturn Octant.octant(p0, p1);\r\n\t},\r\n\tgetData: function () {\r\n\t\treturn this.data;\r\n\t},\r\n\taddIntersection: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet intPt = arguments[0], segmentIndex = arguments[1];\r\n\t\t\tthis.addIntersectionNode(intPt, segmentIndex);\r\n\t\t} else if (arguments.length === 4) {\r\n\t\t\tlet li = arguments[0], segmentIndex = arguments[1], geomIndex = arguments[2], intIndex = arguments[3];\r\n\t\t\tvar intPt = new Coordinate(li.getIntersection(intIndex));\r\n\t\t\tthis.addIntersection(intPt, segmentIndex);\r\n\t\t}\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn WKTWriter.toLineString(new CoordinateArraySequence(this.pts));\r\n\t},\r\n\tgetNodeList: function () {\r\n\t\treturn this.nodeList;\r\n\t},\r\n\taddIntersectionNode: function (intPt, segmentIndex) {\r\n\t\tvar normalizedSegmentIndex = segmentIndex;\r\n\t\tvar nextSegIndex = normalizedSegmentIndex + 1;\r\n\t\tif (nextSegIndex < this.pts.length) {\r\n\t\t\tvar nextPt = this.pts[nextSegIndex];\r\n\t\t\tif (intPt.equals2D(nextPt)) {\r\n\t\t\t\tnormalizedSegmentIndex = nextSegIndex;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar ei = this.nodeList.add(intPt, normalizedSegmentIndex);\r\n\t\treturn ei;\r\n\t},\r\n\taddIntersections: function (li, segmentIndex, geomIndex) {\r\n\t\tfor (var i = 0; i < li.getIntersectionNum(); i++) {\r\n\t\t\tthis.addIntersection(li, segmentIndex, geomIndex, i);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [NodableSegmentString];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodedSegmentString;\r\n\t}\r\n});\r\nNodedSegmentString.getNodedSubstrings = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet segStrings = arguments[0];\r\n\t\tvar resultEdgelist = new ArrayList();\r\n\t\tNodedSegmentString.getNodedSubstrings(segStrings, resultEdgelist);\r\n\t\treturn resultEdgelist;\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet segStrings = arguments[0], resultEdgelist = arguments[1];\r\n\t\tfor (var i = segStrings.iterator(); i.hasNext(); ) {\r\n\t\t\tvar ss = i.next();\r\n\t\t\tss.getNodeList().addSplitEdges(resultEdgelist);\r\n\t\t}\r\n\t}\r\n};\r\n","import extend from '../../../../../extend';\r\nimport LineSegment from '../../geom/LineSegment';\r\nimport Envelope from '../../geom/Envelope';\r\nexport default function MonotoneChainOverlapAction() {\r\n\tthis.tempEnv1 = new Envelope();\r\n\tthis.tempEnv2 = new Envelope();\r\n\tthis.overlapSeg1 = new LineSegment();\r\n\tthis.overlapSeg2 = new LineSegment();\r\n}\r\nextend(MonotoneChainOverlapAction.prototype, {\r\n\toverlap: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet seg1 = arguments[0], seg2 = arguments[1];\r\n\t\t} else if (arguments.length === 4) {\r\n\t\t\tlet mc1 = arguments[0], start1 = arguments[1], mc2 = arguments[2], start2 = arguments[3];\r\n\t\t\tmc1.getLineSegment(start1, this.overlapSeg1);\r\n\t\t\tmc2.getLineSegment(start2, this.overlapSeg2);\r\n\t\t\tthis.overlap(this.overlapSeg1, this.overlapSeg2);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MonotoneChainOverlapAction;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport Envelope from '../../geom/Envelope';\r\nexport default function MonotoneChain() {\r\n\tthis.pts = null;\r\n\tthis.start = null;\r\n\tthis.end = null;\r\n\tthis.env = null;\r\n\tthis.context = null;\r\n\tthis.id = null;\r\n\tlet pts = arguments[0], start = arguments[1], end = arguments[2], context = arguments[3];\r\n\tthis.pts = pts;\r\n\tthis.start = start;\r\n\tthis.end = end;\r\n\tthis.context = context;\r\n}\r\nextend(MonotoneChain.prototype, {\r\n\tgetLineSegment: function (index, ls) {\r\n\t\tls.p0 = this.pts[index];\r\n\t\tls.p1 = this.pts[index + 1];\r\n\t},\r\n\tcomputeSelect: function (searchEnv, start0, end0, mcs) {\r\n\t\tvar p0 = this.pts[start0];\r\n\t\tvar p1 = this.pts[end0];\r\n\t\tmcs.tempEnv1.init(p0, p1);\r\n\t\tif (end0 - start0 === 1) {\r\n\t\t\tmcs.select(this, start0);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (!searchEnv.intersects(mcs.tempEnv1)) return null;\r\n\t\tvar mid = Math.trunc((start0 + end0) / 2);\r\n\t\tif (start0 < mid) {\r\n\t\t\tthis.computeSelect(searchEnv, start0, mid, mcs);\r\n\t\t}\r\n\t\tif (mid < end0) {\r\n\t\t\tthis.computeSelect(searchEnv, mid, end0, mcs);\r\n\t\t}\r\n\t},\r\n\tgetCoordinates: function () {\r\n\t\tvar coord = new Array(this.end - this.start + 1).fill(null);\r\n\t\tvar index = 0;\r\n\t\tfor (var i = this.start; i <= this.end; i++) {\r\n\t\t\tcoord[index++] = this.pts[i];\r\n\t\t}\r\n\t\treturn coord;\r\n\t},\r\n\tcomputeOverlaps: function (mc, mco) {\r\n\t\tthis.computeOverlapsInternal(this.start, this.end, mc, mc.start, mc.end, mco);\r\n\t},\r\n\tsetId: function (id) {\r\n\t\tthis.id = id;\r\n\t},\r\n\tselect: function (searchEnv, mcs) {\r\n\t\tthis.computeSelect(searchEnv, this.start, this.end, mcs);\r\n\t},\r\n\tgetEnvelope: function () {\r\n\t\tif (this.env === null) {\r\n\t\t\tvar p0 = this.pts[this.start];\r\n\t\t\tvar p1 = this.pts[this.end];\r\n\t\t\tthis.env = new Envelope(p0, p1);\r\n\t\t}\r\n\t\treturn this.env;\r\n\t},\r\n\tgetEndIndex: function () {\r\n\t\treturn this.end;\r\n\t},\r\n\tgetStartIndex: function () {\r\n\t\treturn this.start;\r\n\t},\r\n\tgetContext: function () {\r\n\t\treturn this.context;\r\n\t},\r\n\tgetId: function () {\r\n\t\treturn this.id;\r\n\t},\r\n\tcomputeOverlapsInternal: function (start0, end0, mc, start1, end1, mco) {\r\n\t\tvar p00 = this.pts[start0];\r\n\t\tvar p01 = this.pts[end0];\r\n\t\tvar p10 = mc.pts[start1];\r\n\t\tvar p11 = mc.pts[end1];\r\n\t\tif (end0 - start0 === 1 && end1 - start1 === 1) {\r\n\t\t\tmco.overlap(this, start0, mc, start1);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tmco.tempEnv1.init(p00, p01);\r\n\t\tmco.tempEnv2.init(p10, p11);\r\n\t\tif (!mco.tempEnv1.intersects(mco.tempEnv2)) return null;\r\n\t\tvar mid0 = Math.trunc((start0 + end0) / 2);\r\n\t\tvar mid1 = Math.trunc((start1 + end1) / 2);\r\n\t\tif (start0 < mid0) {\r\n\t\t\tif (start1 < mid1) this.computeOverlapsInternal(start0, mid0, mc, start1, mid1, mco);\r\n\t\t\tif (mid1 < end1) this.computeOverlapsInternal(start0, mid0, mc, mid1, end1, mco);\r\n\t\t}\r\n\t\tif (mid0 < end0) {\r\n\t\t\tif (start1 < mid1) this.computeOverlapsInternal(mid0, end0, mc, start1, mid1, mco);\r\n\t\t\tif (mid1 < end1) this.computeOverlapsInternal(mid0, end0, mc, mid1, end1, mco);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MonotoneChain;\r\n\t}\r\n});\r\n","import Coordinate from '../geom/Coordinate';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nexport default function Quadrant() {}\r\nextend(Quadrant.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Quadrant;\r\n\t}\r\n});\r\nQuadrant.isNorthern = function (quad) {\r\n\treturn quad === Quadrant.NE || quad === Quadrant.NW;\r\n};\r\nQuadrant.isOpposite = function (quad1, quad2) {\r\n\tif (quad1 === quad2) return false;\r\n\tvar diff = (quad1 - quad2 + 4) % 4;\r\n\tif (diff === 2) return true;\r\n\treturn false;\r\n};\r\nQuadrant.commonHalfPlane = function (quad1, quad2) {\r\n\tif (quad1 === quad2) return quad1;\r\n\tvar diff = (quad1 - quad2 + 4) % 4;\r\n\tif (diff === 2) return -1;\r\n\tvar min = quad1 < quad2 ? quad1 : quad2;\r\n\tvar max = quad1 > quad2 ? quad1 : quad2;\r\n\tif (min === 0 && max === 3) return 3;\r\n\treturn min;\r\n};\r\nQuadrant.isInHalfPlane = function (quad, halfPlane) {\r\n\tif (halfPlane === Quadrant.SE) {\r\n\t\treturn quad === Quadrant.SE || quad === Quadrant.SW;\r\n\t}\r\n\treturn quad === halfPlane || quad === halfPlane + 1;\r\n};\r\nQuadrant.quadrant = function () {\r\n\tif (typeof arguments[0] === \"number\" && typeof arguments[1] === \"number\") {\r\n\t\tlet dx = arguments[0], dy = arguments[1];\r\n\t\tif (dx === 0.0 && dy === 0.0) throw new IllegalArgumentException(\"Cannot compute the quadrant for point ( \" + dx + \", \" + dy + \" )\");\r\n\t\tif (dx >= 0.0) {\r\n\t\t\tif (dy >= 0.0) return Quadrant.NE; else return Quadrant.SE;\r\n\t\t} else {\r\n\t\t\tif (dy >= 0.0) return Quadrant.NW; else return Quadrant.SW;\r\n\t\t}\r\n\t} else if (arguments[0] instanceof Coordinate && arguments[1] instanceof Coordinate) {\r\n\t\tlet p0 = arguments[0], p1 = arguments[1];\r\n\t\tif (p1.x === p0.x && p1.y === p0.y) throw new IllegalArgumentException(\"Cannot compute the quadrant for two identical points \" + p0);\r\n\t\tif (p1.x >= p0.x) {\r\n\t\t\tif (p1.y >= p0.y) return Quadrant.NE; else return Quadrant.SE;\r\n\t\t} else {\r\n\t\t\tif (p1.y >= p0.y) return Quadrant.NW; else return Quadrant.SW;\r\n\t\t}\r\n\t}\r\n};\r\nQuadrant.NE = 0;\r\nQuadrant.NW = 1;\r\nQuadrant.SW = 2;\r\nQuadrant.SE = 3;\r\n","import MonotoneChain from './MonotoneChain';\r\nimport extend from '../../../../../extend';\r\nimport Integer from '../../../../../java/lang/Integer';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Quadrant from '../../geomgraph/Quadrant';\r\nexport default function MonotoneChainBuilder() {}\r\nextend(MonotoneChainBuilder.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MonotoneChainBuilder;\r\n\t}\r\n});\r\nMonotoneChainBuilder.getChainStartIndices = function (pts) {\r\n\tvar start = 0;\r\n\tvar startIndexList = new ArrayList();\r\n\tstartIndexList.add(new Integer(start));\r\n\tdo {\r\n\t\tvar last = MonotoneChainBuilder.findChainEnd(pts, start);\r\n\t\tstartIndexList.add(new Integer(last));\r\n\t\tstart = last;\r\n\t} while (start < pts.length - 1);\r\n\tvar startIndex = MonotoneChainBuilder.toIntArray(startIndexList);\r\n\treturn startIndex;\r\n};\r\nMonotoneChainBuilder.findChainEnd = function (pts, start) {\r\n\tvar safeStart = start;\r\n\twhile (safeStart < pts.length - 1 && pts[safeStart].equals2D(pts[safeStart + 1])) {\r\n\t\tsafeStart++;\r\n\t}\r\n\tif (safeStart >= pts.length - 1) {\r\n\t\treturn pts.length - 1;\r\n\t}\r\n\tvar chainQuad = Quadrant.quadrant(pts[safeStart], pts[safeStart + 1]);\r\n\tvar last = start + 1;\r\n\twhile (last < pts.length) {\r\n\t\tif (!pts[last - 1].equals2D(pts[last])) {\r\n\t\t\tvar quad = Quadrant.quadrant(pts[last - 1], pts[last]);\r\n\t\t\tif (quad !== chainQuad) break;\r\n\t\t}\r\n\t\tlast++;\r\n\t}\r\n\treturn last - 1;\r\n};\r\nMonotoneChainBuilder.getChains = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet pts = arguments[0];\r\n\t\treturn MonotoneChainBuilder.getChains(pts, null);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet pts = arguments[0], context = arguments[1];\r\n\t\tvar mcList = new ArrayList();\r\n\t\tvar startIndex = MonotoneChainBuilder.getChainStartIndices(pts);\r\n\t\tfor (var i = 0; i < startIndex.length - 1; i++) {\r\n\t\t\tvar mc = new MonotoneChain(pts, startIndex[i], startIndex[i + 1], context);\r\n\t\t\tmcList.add(mc);\r\n\t\t}\r\n\t\treturn mcList;\r\n\t}\r\n};\r\nMonotoneChainBuilder.toIntArray = function (list) {\r\n\tvar array = new Array(list.size()).fill(null);\r\n\tfor (var i = 0; i < array.length; i++) {\r\n\t\tarray[i] = list.get(i).intValue();\r\n\t}\r\n\treturn array;\r\n};\r\n","import extend from '../../../../extend';\r\nexport default function Noder() {}\r\nextend(Noder.prototype, {\r\n\tcomputeNodes: function (segStrings) {},\r\n\tgetNodedSubstrings: function () {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Noder;\r\n\t}\r\n});\r\n","import Noder from './Noder';\r\nimport extend from '../../../../extend';\r\nexport default function SinglePassNoder() {\r\n\tthis.segInt = null;\r\n\tif (arguments.length === 0) {} else if (arguments.length === 1) {\r\n\t\tlet segInt = arguments[0];\r\n\t\tthis.setSegmentIntersector(segInt);\r\n\t}\r\n}\r\nextend(SinglePassNoder.prototype, {\r\n\tsetSegmentIntersector: function (segInt) {\r\n\t\tthis.segInt = segInt;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Noder];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SinglePassNoder;\r\n\t}\r\n});\r\n","import STRtree from '../index/strtree/STRtree';\r\nimport NodedSegmentString from './NodedSegmentString';\r\nimport MonotoneChainOverlapAction from '../index/chain/MonotoneChainOverlapAction';\r\nimport extend from '../../../../extend';\r\nimport MonotoneChainBuilder from '../index/chain/MonotoneChainBuilder';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport inherits from '../../../../inherits';\r\nimport SinglePassNoder from './SinglePassNoder';\r\nexport default function MCIndexNoder() {\r\n\tthis.monoChains = new ArrayList();\r\n\tthis.index = new STRtree();\r\n\tthis.idCounter = 0;\r\n\tthis.nodedSegStrings = null;\r\n\tthis.nOverlaps = 0;\r\n\tif (arguments.length === 0) {} else if (arguments.length === 1) {\r\n\t\tlet si = arguments[0];\r\n\t\tSinglePassNoder.call(this, si);\r\n\t}\r\n}\r\ninherits(MCIndexNoder, SinglePassNoder);\r\nextend(MCIndexNoder.prototype, {\r\n\tgetMonotoneChains: function () {\r\n\t\treturn this.monoChains;\r\n\t},\r\n\tgetNodedSubstrings: function () {\r\n\t\treturn NodedSegmentString.getNodedSubstrings(this.nodedSegStrings);\r\n\t},\r\n\tgetIndex: function () {\r\n\t\treturn this.index;\r\n\t},\r\n\tadd: function (segStr) {\r\n\t\tvar segChains = MonotoneChainBuilder.getChains(segStr.getCoordinates(), segStr);\r\n\t\tfor (var i = segChains.iterator(); i.hasNext(); ) {\r\n\t\t\tvar mc = i.next();\r\n\t\t\tmc.setId(this.idCounter++);\r\n\t\t\tthis.index.insert(mc.getEnvelope(), mc);\r\n\t\t\tthis.monoChains.add(mc);\r\n\t\t}\r\n\t},\r\n\tcomputeNodes: function (inputSegStrings) {\r\n\t\tthis.nodedSegStrings = inputSegStrings;\r\n\t\tfor (var i = inputSegStrings.iterator(); i.hasNext(); ) {\r\n\t\t\tthis.add(i.next());\r\n\t\t}\r\n\t\tthis.intersectChains();\r\n\t},\r\n\tintersectChains: function () {\r\n\t\tvar overlapAction = new SegmentOverlapAction(this.segInt);\r\n\t\tfor (var i = this.monoChains.iterator(); i.hasNext(); ) {\r\n\t\t\tvar queryChain = i.next();\r\n\t\t\tvar overlapChains = this.index.query(queryChain.getEnvelope());\r\n\t\t\tfor (var j = overlapChains.iterator(); j.hasNext(); ) {\r\n\t\t\t\tvar testChain = j.next();\r\n\t\t\t\tif (testChain.getId() > queryChain.getId()) {\r\n\t\t\t\t\tqueryChain.computeOverlaps(testChain, overlapAction);\r\n\t\t\t\t\tthis.nOverlaps++;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.segInt.isDone()) return null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MCIndexNoder;\r\n\t}\r\n});\r\nfunction SegmentOverlapAction() {\r\n\tMonotoneChainOverlapAction.apply(this);\r\n\tthis.si = null;\r\n\tlet si = arguments[0];\r\n\tthis.si = si;\r\n}\r\ninherits(SegmentOverlapAction, MonotoneChainOverlapAction);\r\nextend(SegmentOverlapAction.prototype, {\r\n\toverlap: function () {\r\n\t\tif (arguments.length === 4) {\r\n\t\t\tlet mc1 = arguments[0], start1 = arguments[1], mc2 = arguments[2], start2 = arguments[3];\r\n\t\t\tvar ss1 = mc1.getContext();\r\n\t\t\tvar ss2 = mc2.getContext();\r\n\t\t\tthis.si.processIntersections(ss1, start1, ss2, start2);\r\n\t\t} else return MonotoneChainOverlapAction.prototype.overlap.apply(this, arguments);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SegmentOverlapAction;\r\n\t}\r\n});\r\nMCIndexNoder.SegmentOverlapAction = SegmentOverlapAction;\r\n","import Coordinate from './Coordinate';\r\nimport extend from '../../../../extend';\r\nimport RuntimeException from '../../../../java/lang/RuntimeException';\r\nimport inherits from '../../../../inherits';\r\nexport default function TopologyException() {\r\n\tthis.pt = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet msg = arguments[0];\r\n\t\tRuntimeException.call(this, msg);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet msg = arguments[0], pt = arguments[1];\r\n\t\tRuntimeException.call(this, TopologyException.msgWithCoord(msg, pt));\r\n\t\tthis.name = 'TopologyException';\r\n\t\tthis.pt = new Coordinate(pt);\r\n\t}\r\n}\r\ninherits(TopologyException, RuntimeException);\r\nextend(TopologyException.prototype, {\r\n\tgetCoordinate: function () {\r\n\t\treturn this.pt;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TopologyException;\r\n\t}\r\n});\r\nTopologyException.msgWithCoord = function (msg, pt) {\r\n\tif (pt !== null) return msg + \" [ \" + pt + \" ]\";\r\n\treturn msg;\r\n};\r\n","import extend from '../../../../extend';\r\nexport default function SegmentIntersector() {}\r\nextend(SegmentIntersector.prototype, {\r\n\tprocessIntersections: function (e0, segIndex0, e1, segIndex1) {},\r\n\tisDone: function () {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SegmentIntersector;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport SegmentIntersector from './SegmentIntersector';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function InteriorIntersectionFinder() {\r\n\tthis.findAllIntersections = false;\r\n\tthis.isCheckEndSegmentsOnly = false;\r\n\tthis.li = null;\r\n\tthis.interiorIntersection = null;\r\n\tthis.intSegments = null;\r\n\tthis.intersections = new ArrayList();\r\n\tthis.intersectionCount = 0;\r\n\tthis.keepIntersections = true;\r\n\tlet li = arguments[0];\r\n\tthis.li = li;\r\n\tthis.interiorIntersection = null;\r\n}\r\nextend(InteriorIntersectionFinder.prototype, {\r\n\tgetInteriorIntersection: function () {\r\n\t\treturn this.interiorIntersection;\r\n\t},\r\n\tsetCheckEndSegmentsOnly: function (isCheckEndSegmentsOnly) {\r\n\t\tthis.isCheckEndSegmentsOnly = isCheckEndSegmentsOnly;\r\n\t},\r\n\tgetIntersectionSegments: function () {\r\n\t\treturn this.intSegments;\r\n\t},\r\n\tcount: function () {\r\n\t\treturn this.intersectionCount;\r\n\t},\r\n\tgetIntersections: function () {\r\n\t\treturn this.intersections;\r\n\t},\r\n\tsetFindAllIntersections: function (findAllIntersections) {\r\n\t\tthis.findAllIntersections = findAllIntersections;\r\n\t},\r\n\tsetKeepIntersections: function (keepIntersections) {\r\n\t\tthis.keepIntersections = keepIntersections;\r\n\t},\r\n\tprocessIntersections: function (e0, segIndex0, e1, segIndex1) {\r\n\t\tif (!this.findAllIntersections && this.hasIntersection()) return null;\r\n\t\tif (e0 === e1 && segIndex0 === segIndex1) return null;\r\n\t\tif (this.isCheckEndSegmentsOnly) {\r\n\t\t\tvar isEndSegPresent = this.isEndSegment(e0, segIndex0) || this.isEndSegment(e1, segIndex1);\r\n\t\t\tif (!isEndSegPresent) return null;\r\n\t\t}\r\n\t\tvar p00 = e0.getCoordinates()[segIndex0];\r\n\t\tvar p01 = e0.getCoordinates()[segIndex0 + 1];\r\n\t\tvar p10 = e1.getCoordinates()[segIndex1];\r\n\t\tvar p11 = e1.getCoordinates()[segIndex1 + 1];\r\n\t\tthis.li.computeIntersection(p00, p01, p10, p11);\r\n\t\tif (this.li.hasIntersection()) {\r\n\t\t\tif (this.li.isInteriorIntersection()) {\r\n\t\t\t\tthis.intSegments = new Array(4).fill(null);\r\n\t\t\t\tthis.intSegments[0] = p00;\r\n\t\t\t\tthis.intSegments[1] = p01;\r\n\t\t\t\tthis.intSegments[2] = p10;\r\n\t\t\t\tthis.intSegments[3] = p11;\r\n\t\t\t\tthis.interiorIntersection = this.li.getIntersection(0);\r\n\t\t\t\tif (this.keepIntersections) this.intersections.add(this.interiorIntersection);\r\n\t\t\t\tthis.intersectionCount++;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisEndSegment: function (segStr, index) {\r\n\t\tif (index === 0) return true;\r\n\t\tif (index >= segStr.size() - 2) return true;\r\n\t\treturn false;\r\n\t},\r\n\thasIntersection: function () {\r\n\t\treturn this.interiorIntersection !== null;\r\n\t},\r\n\tisDone: function () {\r\n\t\tif (this.findAllIntersections) return false;\r\n\t\treturn this.interiorIntersection !== null;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [SegmentIntersector];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn InteriorIntersectionFinder;\r\n\t}\r\n});\r\nInteriorIntersectionFinder.createAllIntersectionsFinder = function (li) {\r\n\tvar finder = new InteriorIntersectionFinder(li);\r\n\tfinder.setFindAllIntersections(true);\r\n\treturn finder;\r\n};\r\nInteriorIntersectionFinder.createAnyIntersectionFinder = function (li) {\r\n\treturn new InteriorIntersectionFinder(li);\r\n};\r\nInteriorIntersectionFinder.createIntersectionCounter = function (li) {\r\n\tvar finder = new InteriorIntersectionFinder(li);\r\n\tfinder.setFindAllIntersections(true);\r\n\tfinder.setKeepIntersections(false);\r\n\treturn finder;\r\n};\r\n","import WKTWriter from '../io/WKTWriter';\r\nimport MCIndexNoder from './MCIndexNoder';\r\nimport TopologyException from '../geom/TopologyException';\r\nimport extend from '../../../../extend';\r\nimport RobustLineIntersector from '../algorithm/RobustLineIntersector';\r\nimport InteriorIntersectionFinder from './InteriorIntersectionFinder';\r\nexport default function FastNodingValidator() {\r\n\tthis.li = new RobustLineIntersector();\r\n\tthis.segStrings = null;\r\n\tthis.findAllIntersections = false;\r\n\tthis.segInt = null;\r\n\tthis._isValid = true;\r\n\tlet segStrings = arguments[0];\r\n\tthis.segStrings = segStrings;\r\n}\r\nextend(FastNodingValidator.prototype, {\r\n\texecute: function () {\r\n\t\tif (this.segInt !== null) return null;\r\n\t\tthis.checkInteriorIntersections();\r\n\t},\r\n\tgetIntersections: function () {\r\n\t\treturn this.segInt.getIntersections();\r\n\t},\r\n\tisValid: function () {\r\n\t\tthis.execute();\r\n\t\treturn this._isValid;\r\n\t},\r\n\tsetFindAllIntersections: function (findAllIntersections) {\r\n\t\tthis.findAllIntersections = findAllIntersections;\r\n\t},\r\n\tcheckInteriorIntersections: function () {\r\n\t\tthis._isValid = true;\r\n\t\tthis.segInt = new InteriorIntersectionFinder(this.li);\r\n\t\tthis.segInt.setFindAllIntersections(this.findAllIntersections);\r\n\t\tvar noder = new MCIndexNoder();\r\n\t\tnoder.setSegmentIntersector(this.segInt);\r\n\t\tnoder.computeNodes(this.segStrings);\r\n\t\tif (this.segInt.hasIntersection()) {\r\n\t\t\tthis._isValid = false;\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tcheckValid: function () {\r\n\t\tthis.execute();\r\n\t\tif (!this._isValid) throw new TopologyException(this.getErrorMessage(), this.segInt.getInteriorIntersection());\r\n\t},\r\n\tgetErrorMessage: function () {\r\n\t\tif (this._isValid) return \"no intersections found\";\r\n\t\tvar intSegs = this.segInt.getIntersectionSegments();\r\n\t\treturn \"found non-noded intersection between \" + WKTWriter.toLineString(intSegs[0], intSegs[1]) + \" and \" + WKTWriter.toLineString(intSegs[2], intSegs[3]);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn FastNodingValidator;\r\n\t}\r\n});\r\nFastNodingValidator.computeIntersections = function (segStrings) {\r\n\tvar nv = new FastNodingValidator(segStrings);\r\n\tnv.setFindAllIntersections(true);\r\n\tnv.isValid();\r\n\treturn nv.getIntersections();\r\n};\r\n","import BasicSegmentString from '../noding/BasicSegmentString';\r\nimport extend from '../../../../extend';\r\nimport FastNodingValidator from '../noding/FastNodingValidator';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function EdgeNodingValidator() {\r\n\tthis.nv = null;\r\n\tlet edges = arguments[0];\r\n\tthis.nv = new FastNodingValidator(EdgeNodingValidator.toSegmentStrings(edges));\r\n}\r\nextend(EdgeNodingValidator.prototype, {\r\n\tcheckValid: function () {\r\n\t\tthis.nv.checkValid();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeNodingValidator;\r\n\t}\r\n});\r\nEdgeNodingValidator.toSegmentStrings = function (edges) {\r\n\tvar segStrings = new ArrayList();\r\n\tfor (var i = edges.iterator(); i.hasNext(); ) {\r\n\t\tvar e = i.next();\r\n\t\tsegStrings.add(new BasicSegmentString(e.getCoordinates(), e));\r\n\t}\r\n\treturn segStrings;\r\n};\r\nEdgeNodingValidator.checkValid = function (edges) {\r\n\tvar validator = new EdgeNodingValidator(edges);\r\n\tvalidator.checkValid();\r\n};\r\n","import GeometryFactory from '../GeometryFactory';\r\nimport extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nexport default function GeometryCollectionMapper() {\r\n\tthis.mapOp = null;\r\n\tlet mapOp = arguments[0];\r\n\tthis.mapOp = mapOp;\r\n}\r\nextend(GeometryCollectionMapper.prototype, {\r\n\tmap: function (gc) {\r\n\t\tvar mapped = new ArrayList();\r\n\t\tfor (var i = 0; i < gc.getNumGeometries(); i++) {\r\n\t\t\tvar g = this.mapOp.map(gc.getGeometryN(i));\r\n\t\t\tif (!g.isEmpty()) mapped.add(g);\r\n\t\t}\r\n\t\treturn gc.getFactory().createGeometryCollection(GeometryFactory.toGeometryArray(mapped));\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryCollectionMapper;\r\n\t}\r\n});\r\nGeometryCollectionMapper.map = function (gc, op) {\r\n\tvar mapper = new GeometryCollectionMapper(op);\r\n\treturn mapper.map(gc);\r\n};\r\n","import extend from '../../../../extend';\r\nexport default function Position() {}\r\nextend(Position.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Position;\r\n\t}\r\n});\r\nPosition.opposite = function (position) {\r\n\tif (position === Position.LEFT) return Position.RIGHT;\r\n\tif (position === Position.RIGHT) return Position.LEFT;\r\n\treturn position;\r\n};\r\nPosition.ON = 0;\r\nPosition.LEFT = 1;\r\nPosition.RIGHT = 2;\r\n","import StringBuffer from '../../../../java/lang/StringBuffer';\r\nimport Location from '../geom/Location';\r\nimport Position from './Position';\r\nimport extend from '../../../../extend';\r\nexport default function TopologyLocation() {\r\n\tthis.location = null;\r\n\tif (arguments.length === 1) {\r\n\t\tif (arguments[0] instanceof Array) {\r\n\t\t\tlet location = arguments[0];\r\n\t\t\tthis.init(location.length);\r\n\t\t} else if (Number.isInteger(arguments[0])) {\r\n\t\t\tlet on = arguments[0];\r\n\t\t\tthis.init(1);\r\n\t\t\tthis.location[Position.ON] = on;\r\n\t\t} else if (arguments[0] instanceof TopologyLocation) {\r\n\t\t\tlet gl = arguments[0];\r\n\t\t\tthis.init(gl.location.length);\r\n\t\t\tif (gl !== null) {\r\n\t\t\t\tfor (var i = 0; i < this.location.length; i++) {\r\n\t\t\t\t\tthis.location[i] = gl.location[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet on = arguments[0], left = arguments[1], right = arguments[2];\r\n\t\tthis.init(3);\r\n\t\tthis.location[Position.ON] = on;\r\n\t\tthis.location[Position.LEFT] = left;\r\n\t\tthis.location[Position.RIGHT] = right;\r\n\t}\r\n}\r\nextend(TopologyLocation.prototype, {\r\n\tsetAllLocations: function (locValue) {\r\n\t\tfor (var i = 0; i < this.location.length; i++) {\r\n\t\t\tthis.location[i] = locValue;\r\n\t\t}\r\n\t},\r\n\tisNull: function () {\r\n\t\tfor (var i = 0; i < this.location.length; i++) {\r\n\t\t\tif (this.location[i] !== Location.NONE) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tsetAllLocationsIfNull: function (locValue) {\r\n\t\tfor (var i = 0; i < this.location.length; i++) {\r\n\t\t\tif (this.location[i] === Location.NONE) this.location[i] = locValue;\r\n\t\t}\r\n\t},\r\n\tisLine: function () {\r\n\t\treturn this.location.length === 1;\r\n\t},\r\n\tmerge: function (gl) {\r\n\t\tif (gl.location.length > this.location.length) {\r\n\t\t\tvar newLoc = new Array(3).fill(null);\r\n\t\t\tnewLoc[Position.ON] = this.location[Position.ON];\r\n\t\t\tnewLoc[Position.LEFT] = Location.NONE;\r\n\t\t\tnewLoc[Position.RIGHT] = Location.NONE;\r\n\t\t\tthis.location = newLoc;\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.location.length; i++) {\r\n\t\t\tif (this.location[i] === Location.NONE && i < gl.location.length) this.location[i] = gl.location[i];\r\n\t\t}\r\n\t},\r\n\tgetLocations: function () {\r\n\t\treturn this.location;\r\n\t},\r\n\tflip: function () {\r\n\t\tif (this.location.length <= 1) return null;\r\n\t\tvar temp = this.location[Position.LEFT];\r\n\t\tthis.location[Position.LEFT] = this.location[Position.RIGHT];\r\n\t\tthis.location[Position.RIGHT] = temp;\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar buf = new StringBuffer();\r\n\t\tif (this.location.length > 1) buf.append(Location.toLocationSymbol(this.location[Position.LEFT]));\r\n\t\tbuf.append(Location.toLocationSymbol(this.location[Position.ON]));\r\n\t\tif (this.location.length > 1) buf.append(Location.toLocationSymbol(this.location[Position.RIGHT]));\r\n\t\treturn buf.toString();\r\n\t},\r\n\tsetLocations: function (on, left, right) {\r\n\t\tthis.location[Position.ON] = on;\r\n\t\tthis.location[Position.LEFT] = left;\r\n\t\tthis.location[Position.RIGHT] = right;\r\n\t},\r\n\tget: function (posIndex) {\r\n\t\tif (posIndex < this.location.length) return this.location[posIndex];\r\n\t\treturn Location.NONE;\r\n\t},\r\n\tisArea: function () {\r\n\t\treturn this.location.length > 1;\r\n\t},\r\n\tisAnyNull: function () {\r\n\t\tfor (var i = 0; i < this.location.length; i++) {\r\n\t\t\tif (this.location[i] === Location.NONE) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tsetLocation: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet locValue = arguments[0];\r\n\t\t\tthis.setLocation(Position.ON, locValue);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet locIndex = arguments[0], locValue = arguments[1];\r\n\t\t\tthis.location[locIndex] = locValue;\r\n\t\t}\r\n\t},\r\n\tinit: function (size) {\r\n\t\tthis.location = new Array(size).fill(null);\r\n\t\tthis.setAllLocations(Location.NONE);\r\n\t},\r\n\tisEqualOnSide: function (le, locIndex) {\r\n\t\treturn this.location[locIndex] === le.location[locIndex];\r\n\t},\r\n\tallPositionsEqual: function (loc) {\r\n\t\tfor (var i = 0; i < this.location.length; i++) {\r\n\t\t\tif (this.location[i] !== loc) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TopologyLocation;\r\n\t}\r\n});\r\n","import StringBuffer from '../../../../java/lang/StringBuffer';\r\nimport Location from '../geom/Location';\r\nimport Position from './Position';\r\nimport extend from '../../../../extend';\r\nimport TopologyLocation from './TopologyLocation';\r\nexport default function Label() {\r\n\tthis.elt = new Array(2).fill(null);\r\n\tif (arguments.length === 1) {\r\n\t\tif (Number.isInteger(arguments[0])) {\r\n\t\t\tlet onLoc = arguments[0];\r\n\t\t\tthis.elt[0] = new TopologyLocation(onLoc);\r\n\t\t\tthis.elt[1] = new TopologyLocation(onLoc);\r\n\t\t} else if (arguments[0] instanceof Label) {\r\n\t\t\tlet lbl = arguments[0];\r\n\t\t\tthis.elt[0] = new TopologyLocation(lbl.elt[0]);\r\n\t\t\tthis.elt[1] = new TopologyLocation(lbl.elt[1]);\r\n\t\t}\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet geomIndex = arguments[0], onLoc = arguments[1];\r\n\t\tthis.elt[0] = new TopologyLocation(Location.NONE);\r\n\t\tthis.elt[1] = new TopologyLocation(Location.NONE);\r\n\t\tthis.elt[geomIndex].setLocation(onLoc);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet onLoc = arguments[0], leftLoc = arguments[1], rightLoc = arguments[2];\r\n\t\tthis.elt[0] = new TopologyLocation(onLoc, leftLoc, rightLoc);\r\n\t\tthis.elt[1] = new TopologyLocation(onLoc, leftLoc, rightLoc);\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet geomIndex = arguments[0], onLoc = arguments[1], leftLoc = arguments[2], rightLoc = arguments[3];\r\n\t\tthis.elt[0] = new TopologyLocation(Location.NONE, Location.NONE, Location.NONE);\r\n\t\tthis.elt[1] = new TopologyLocation(Location.NONE, Location.NONE, Location.NONE);\r\n\t\tthis.elt[geomIndex].setLocations(onLoc, leftLoc, rightLoc);\r\n\t}\r\n}\r\nextend(Label.prototype, {\r\n\tgetGeometryCount: function () {\r\n\t\tvar count = 0;\r\n\t\tif (!this.elt[0].isNull()) count++;\r\n\t\tif (!this.elt[1].isNull()) count++;\r\n\t\treturn count;\r\n\t},\r\n\tsetAllLocations: function (geomIndex, location) {\r\n\t\tthis.elt[geomIndex].setAllLocations(location);\r\n\t},\r\n\tisNull: function (geomIndex) {\r\n\t\treturn this.elt[geomIndex].isNull();\r\n\t},\r\n\tsetAllLocationsIfNull: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet location = arguments[0];\r\n\t\t\tthis.setAllLocationsIfNull(0, location);\r\n\t\t\tthis.setAllLocationsIfNull(1, location);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet geomIndex = arguments[0], location = arguments[1];\r\n\t\t\tthis.elt[geomIndex].setAllLocationsIfNull(location);\r\n\t\t}\r\n\t},\r\n\tisLine: function (geomIndex) {\r\n\t\treturn this.elt[geomIndex].isLine();\r\n\t},\r\n\tmerge: function (lbl) {\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tif (this.elt[i] === null && lbl.elt[i] !== null) {\r\n\t\t\t\tthis.elt[i] = new TopologyLocation(lbl.elt[i]);\r\n\t\t\t} else {\r\n\t\t\t\tthis.elt[i].merge(lbl.elt[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tflip: function () {\r\n\t\tthis.elt[0].flip();\r\n\t\tthis.elt[1].flip();\r\n\t},\r\n\tgetLocation: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet geomIndex = arguments[0];\r\n\t\t\treturn this.elt[geomIndex].get(Position.ON);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet geomIndex = arguments[0], posIndex = arguments[1];\r\n\t\t\treturn this.elt[geomIndex].get(posIndex);\r\n\t\t}\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar buf = new StringBuffer();\r\n\t\tif (this.elt[0] !== null) {\r\n\t\t\tbuf.append(\"A:\");\r\n\t\t\tbuf.append(this.elt[0].toString());\r\n\t\t}\r\n\t\tif (this.elt[1] !== null) {\r\n\t\t\tbuf.append(\" B:\");\r\n\t\t\tbuf.append(this.elt[1].toString());\r\n\t\t}\r\n\t\treturn buf.toString();\r\n\t},\r\n\tisArea: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn this.elt[0].isArea() || this.elt[1].isArea();\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet geomIndex = arguments[0];\r\n\t\t\treturn this.elt[geomIndex].isArea();\r\n\t\t}\r\n\t},\r\n\tisAnyNull: function (geomIndex) {\r\n\t\treturn this.elt[geomIndex].isAnyNull();\r\n\t},\r\n\tsetLocation: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet geomIndex = arguments[0], location = arguments[1];\r\n\t\t\tthis.elt[geomIndex].setLocation(Position.ON, location);\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet geomIndex = arguments[0], posIndex = arguments[1], location = arguments[2];\r\n\t\t\tthis.elt[geomIndex].setLocation(posIndex, location);\r\n\t\t}\r\n\t},\r\n\tisEqualOnSide: function (lbl, side) {\r\n\t\treturn this.elt[0].isEqualOnSide(lbl.elt[0], side) && this.elt[1].isEqualOnSide(lbl.elt[1], side);\r\n\t},\r\n\tallPositionsEqual: function (geomIndex, loc) {\r\n\t\treturn this.elt[geomIndex].allPositionsEqual(loc);\r\n\t},\r\n\ttoLine: function (geomIndex) {\r\n\t\tif (this.elt[geomIndex].isArea()) this.elt[geomIndex] = new TopologyLocation(this.elt[geomIndex].location[0]);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Label;\r\n\t}\r\n});\r\nLabel.toLineLabel = function (label) {\r\n\tvar lineLabel = new Label(Location.NONE);\r\n\tfor (var i = 0; i < 2; i++) {\r\n\t\tlineLabel.setLocation(i, label.getLocation(i));\r\n\t}\r\n\treturn lineLabel;\r\n};\r\n","import Location from '../geom/Location';\r\nimport CGAlgorithms from '../algorithm/CGAlgorithms';\r\nimport Position from './Position';\r\nimport TopologyException from '../geom/TopologyException';\r\nimport extend from '../../../../extend';\r\nimport Label from './Label';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Assert from '../util/Assert';\r\nexport default function EdgeRing() {\r\n\tthis.startDe = null;\r\n\tthis.maxNodeDegree = -1;\r\n\tthis.edges = new ArrayList();\r\n\tthis.pts = new ArrayList();\r\n\tthis.label = new Label(Location.NONE);\r\n\tthis.ring = null;\r\n\tthis._isHole = null;\r\n\tthis.shell = null;\r\n\tthis.holes = new ArrayList();\r\n\tthis.geometryFactory = null;\r\n\tlet start = arguments[0], geometryFactory = arguments[1];\r\n\tthis.geometryFactory = geometryFactory;\r\n\tthis.computePoints(start);\r\n\tthis.computeRing();\r\n}\r\nextend(EdgeRing.prototype, {\r\n\tcomputeRing: function () {\r\n\t\tif (this.ring !== null) return null;\r\n\t\tvar coord = new Array(this.pts.size()).fill(null);\r\n\t\tfor (var i = 0; i < this.pts.size(); i++) {\r\n\t\t\tcoord[i] = this.pts.get(i);\r\n\t\t}\r\n\t\tthis.ring = this.geometryFactory.createLinearRing(coord);\r\n\t\tthis._isHole = CGAlgorithms.isCCW(this.ring.getCoordinates());\r\n\t},\r\n\tisIsolated: function () {\r\n\t\treturn this.label.getGeometryCount() === 1;\r\n\t},\r\n\tcomputePoints: function (start) {\r\n\t\tthis.startDe = start;\r\n\t\tvar de = start;\r\n\t\tvar isFirstEdge = true;\r\n\t\tdo {\r\n\t\t\tif (de === null) throw new TopologyException(\"Found null DirectedEdge\");\r\n\t\t\tif (de.getEdgeRing() === this) throw new TopologyException(\"Directed Edge visited twice during ring-building at \" + de.getCoordinate());\r\n\t\t\tthis.edges.add(de);\r\n\t\t\tvar label = de.getLabel();\r\n\t\t\tAssert.isTrue(label.isArea());\r\n\t\t\tthis.mergeLabel(label);\r\n\t\t\tthis.addPoints(de.getEdge(), de.isForward(), isFirstEdge);\r\n\t\t\tisFirstEdge = false;\r\n\t\t\tthis.setEdgeRing(de, this);\r\n\t\t\tde = this.getNext(de);\r\n\t\t} while (de !== this.startDe);\r\n\t},\r\n\tgetLinearRing: function () {\r\n\t\treturn this.ring;\r\n\t},\r\n\tgetCoordinate: function (i) {\r\n\t\treturn this.pts.get(i);\r\n\t},\r\n\tcomputeMaxNodeDegree: function () {\r\n\t\tthis.maxNodeDegree = 0;\r\n\t\tvar de = this.startDe;\r\n\t\tdo {\r\n\t\t\tvar node = de.getNode();\r\n\t\t\tvar degree = node.getEdges().getOutgoingDegree(this);\r\n\t\t\tif (degree > this.maxNodeDegree) this.maxNodeDegree = degree;\r\n\t\t\tde = this.getNext(de);\r\n\t\t} while (de !== this.startDe);\r\n\t\tthis.maxNodeDegree *= 2;\r\n\t},\r\n\taddPoints: function (edge, isForward, isFirstEdge) {\r\n\t\tvar edgePts = edge.getCoordinates();\r\n\t\tif (isForward) {\r\n\t\t\tvar startIndex = 1;\r\n\t\t\tif (isFirstEdge) startIndex = 0;\r\n\t\t\tfor (var i = startIndex; i < edgePts.length; i++) {\r\n\t\t\t\tthis.pts.add(edgePts[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar startIndex = edgePts.length - 2;\r\n\t\t\tif (isFirstEdge) startIndex = edgePts.length - 1;\r\n\t\t\tfor (var i = startIndex; i >= 0; i--) {\r\n\t\t\t\tthis.pts.add(edgePts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisHole: function () {\r\n\t\treturn this._isHole;\r\n\t},\r\n\tsetInResult: function () {\r\n\t\tvar de = this.startDe;\r\n\t\tdo {\r\n\t\t\tde.getEdge().setInResult(true);\r\n\t\t\tde = de.getNext();\r\n\t\t} while (de !== this.startDe);\r\n\t},\r\n\tcontainsPoint: function (p) {\r\n\t\tvar shell = this.getLinearRing();\r\n\t\tvar env = shell.getEnvelopeInternal();\r\n\t\tif (!env.contains(p)) return false;\r\n\t\tif (!CGAlgorithms.isPointInRing(p, shell.getCoordinates())) return false;\r\n\t\tfor (var i = this.holes.iterator(); i.hasNext(); ) {\r\n\t\t\tvar hole = i.next();\r\n\t\t\tif (hole.containsPoint(p)) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\taddHole: function (ring) {\r\n\t\tthis.holes.add(ring);\r\n\t},\r\n\tisShell: function () {\r\n\t\treturn this.shell === null;\r\n\t},\r\n\tgetLabel: function () {\r\n\t\treturn this.label;\r\n\t},\r\n\tgetEdges: function () {\r\n\t\treturn this.edges;\r\n\t},\r\n\tgetMaxNodeDegree: function () {\r\n\t\tif (this.maxNodeDegree < 0) this.computeMaxNodeDegree();\r\n\t\treturn this.maxNodeDegree;\r\n\t},\r\n\tgetShell: function () {\r\n\t\treturn this.shell;\r\n\t},\r\n\tmergeLabel: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet deLabel = arguments[0];\r\n\t\t\tthis.mergeLabel(deLabel, 0);\r\n\t\t\tthis.mergeLabel(deLabel, 1);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet deLabel = arguments[0], geomIndex = arguments[1];\r\n\t\t\tvar loc = deLabel.getLocation(geomIndex, Position.RIGHT);\r\n\t\t\tif (loc === Location.NONE) return null;\r\n\t\t\tif (this.label.getLocation(geomIndex) === Location.NONE) {\r\n\t\t\t\tthis.label.setLocation(geomIndex, loc);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tsetShell: function (shell) {\r\n\t\tthis.shell = shell;\r\n\t\tif (shell !== null) shell.addHole(this);\r\n\t},\r\n\ttoPolygon: function (geometryFactory) {\r\n\t\tvar holeLR = new Array(this.holes.size()).fill(null);\r\n\t\tfor (var i = 0; i < this.holes.size(); i++) {\r\n\t\t\tholeLR[i] = this.holes.get(i).getLinearRing();\r\n\t\t}\r\n\t\tvar poly = geometryFactory.createPolygon(this.getLinearRing(), holeLR);\r\n\t\treturn poly;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeRing;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport EdgeRing from '../../geomgraph/EdgeRing';\r\nimport inherits from '../../../../../inherits';\r\nexport default function MinimalEdgeRing() {\r\n\tlet start = arguments[0], geometryFactory = arguments[1];\r\n\tEdgeRing.call(this, start, geometryFactory);\r\n}\r\ninherits(MinimalEdgeRing, EdgeRing);\r\nextend(MinimalEdgeRing.prototype, {\r\n\tsetEdgeRing: function (de, er) {\r\n\t\tde.setMinEdgeRing(er);\r\n\t},\r\n\tgetNext: function (de) {\r\n\t\treturn de.getNextMin();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MinimalEdgeRing;\r\n\t}\r\n});\r\n","import MinimalEdgeRing from './MinimalEdgeRing';\r\nimport extend from '../../../../../extend';\r\nimport EdgeRing from '../../geomgraph/EdgeRing';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport inherits from '../../../../../inherits';\r\nexport default function MaximalEdgeRing() {\r\n\tlet start = arguments[0], geometryFactory = arguments[1];\r\n\tEdgeRing.call(this, start, geometryFactory);\r\n}\r\ninherits(MaximalEdgeRing, EdgeRing);\r\nextend(MaximalEdgeRing.prototype, {\r\n\tbuildMinimalRings: function () {\r\n\t\tvar minEdgeRings = new ArrayList();\r\n\t\tvar de = this.startDe;\r\n\t\tdo {\r\n\t\t\tif (de.getMinEdgeRing() === null) {\r\n\t\t\t\tvar minEr = new MinimalEdgeRing(de, this.geometryFactory);\r\n\t\t\t\tminEdgeRings.add(minEr);\r\n\t\t\t}\r\n\t\t\tde = de.getNext();\r\n\t\t} while (de !== this.startDe);\r\n\t\treturn minEdgeRings;\r\n\t},\r\n\tsetEdgeRing: function (de, er) {\r\n\t\tde.setEdgeRing(er);\r\n\t},\r\n\tlinkDirectedEdgesForMinimalEdgeRings: function () {\r\n\t\tvar de = this.startDe;\r\n\t\tdo {\r\n\t\t\tvar node = de.getNode();\r\n\t\t\tnode.getEdges().linkMinimalDirectedEdges(this);\r\n\t\t\tde = de.getNext();\r\n\t\t} while (de !== this.startDe);\r\n\t},\r\n\tgetNext: function (de) {\r\n\t\treturn de.getNext();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MaximalEdgeRing;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport Assert from '../util/Assert';\r\nexport default function GraphComponent() {\r\n\tthis.label = null;\r\n\tthis._isInResult = false;\r\n\tthis._isCovered = false;\r\n\tthis._isCoveredSet = false;\r\n\tthis._isVisited = false;\r\n\tif (arguments.length === 0) {} else if (arguments.length === 1) {\r\n\t\tlet label = arguments[0];\r\n\t\tthis.label = label;\r\n\t}\r\n}\r\nextend(GraphComponent.prototype, {\r\n\tsetVisited: function (isVisited) {\r\n\t\tthis._isVisited = isVisited;\r\n\t},\r\n\tsetInResult: function (isInResult) {\r\n\t\tthis._isInResult = isInResult;\r\n\t},\r\n\tisCovered: function () {\r\n\t\treturn this._isCovered;\r\n\t},\r\n\tisCoveredSet: function () {\r\n\t\treturn this._isCoveredSet;\r\n\t},\r\n\tsetLabel: function (label) {\r\n\t\tthis.label = label;\r\n\t},\r\n\tgetLabel: function () {\r\n\t\treturn this.label;\r\n\t},\r\n\tsetCovered: function (isCovered) {\r\n\t\tthis._isCovered = isCovered;\r\n\t\tthis._isCoveredSet = true;\r\n\t},\r\n\tupdateIM: function (im) {\r\n\t\tAssert.isTrue(this.label.getGeometryCount() >= 2, \"found partial label\");\r\n\t\tthis.computeIM(im);\r\n\t},\r\n\tisInResult: function () {\r\n\t\treturn this._isInResult;\r\n\t},\r\n\tisVisited: function () {\r\n\t\treturn this._isVisited;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GraphComponent;\r\n\t}\r\n});\r\n","import Location from '../geom/Location';\r\nimport extend from '../../../../extend';\r\nimport Label from './Label';\r\nimport inherits from '../../../../inherits';\r\nimport GraphComponent from './GraphComponent';\r\nexport default function Node() {\r\n\tGraphComponent.apply(this);\r\n\tthis.coord = null;\r\n\tthis.edges = null;\r\n\tlet coord = arguments[0], edges = arguments[1];\r\n\tthis.coord = coord;\r\n\tthis.edges = edges;\r\n\tthis.label = new Label(0, Location.NONE);\r\n}\r\ninherits(Node, GraphComponent);\r\nextend(Node.prototype, {\r\n\tisIncidentEdgeInResult: function () {\r\n\t\tfor (var it = this.getEdges().getEdges().iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tif (de.getEdge().isInResult()) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tisIsolated: function () {\r\n\t\treturn this.label.getGeometryCount() === 1;\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.coord;\r\n\t},\r\n\tprint: function (out) {\r\n\t\tout.println(\"node \" + this.coord + \" lbl: \" + this.label);\r\n\t},\r\n\tcomputeIM: function (im) {},\r\n\tcomputeMergedLocation: function (label2, eltIndex) {\r\n\t\tvar loc = Location.NONE;\r\n\t\tloc = this.label.getLocation(eltIndex);\r\n\t\tif (!label2.isNull(eltIndex)) {\r\n\t\t\tvar nLoc = label2.getLocation(eltIndex);\r\n\t\t\tif (loc !== Location.BOUNDARY) loc = nLoc;\r\n\t\t}\r\n\t\treturn loc;\r\n\t},\r\n\tsetLabel: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet argIndex = arguments[0], onLocation = arguments[1];\r\n\t\t\tif (this.label === null) {\r\n\t\t\t\tthis.label = new Label(argIndex, onLocation);\r\n\t\t\t} else this.label.setLocation(argIndex, onLocation);\r\n\t\t} else return GraphComponent.prototype.setLabel.apply(this, arguments);\r\n\t},\r\n\tgetEdges: function () {\r\n\t\treturn this.edges;\r\n\t},\r\n\tmergeLabel: function () {\r\n\t\tif (arguments[0] instanceof Node) {\r\n\t\t\tlet n = arguments[0];\r\n\t\t\tthis.mergeLabel(n.label);\r\n\t\t} else if (arguments[0] instanceof Label) {\r\n\t\t\tlet label2 = arguments[0];\r\n\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\tvar loc = this.computeMergedLocation(label2, i);\r\n\t\t\t\tvar thisLoc = this.label.getLocation(i);\r\n\t\t\t\tif (thisLoc === Location.NONE) this.label.setLocation(i, loc);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tadd: function (e) {\r\n\t\tthis.edges.insert(e);\r\n\t\te.setNode(this);\r\n\t},\r\n\tsetLabelBoundary: function (argIndex) {\r\n\t\tif (this.label === null) return null;\r\n\t\tvar loc = Location.NONE;\r\n\t\tif (this.label !== null) loc = this.label.getLocation(argIndex);\r\n\t\tvar newLoc = null;\r\n\t\tswitch (loc) {\r\n\t\t\tcase Location.BOUNDARY:\r\n\t\t\t\tnewLoc = Location.INTERIOR;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Location.INTERIOR:\r\n\t\t\t\tnewLoc = Location.BOUNDARY;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tnewLoc = Location.BOUNDARY;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.label.setLocation(argIndex, newLoc);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Node;\r\n\t}\r\n});\r\n","import Location from '../geom/Location';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport Node from './Node';\r\nimport extend from '../../../../extend';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport TreeMap from '../../../../java/util/TreeMap';\r\nexport default function NodeMap() {\r\n\tthis.nodeMap = new TreeMap();\r\n\tthis.nodeFact = null;\r\n\tlet nodeFact = arguments[0];\r\n\tthis.nodeFact = nodeFact;\r\n}\r\nextend(NodeMap.prototype, {\r\n\tfind: function (coord) {\r\n\t\treturn this.nodeMap.get(coord);\r\n\t},\r\n\taddNode: function () {\r\n\t\tif (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet coord = arguments[0];\r\n\t\t\tvar node = this.nodeMap.get(coord);\r\n\t\t\tif (node === null) {\r\n\t\t\t\tnode = this.nodeFact.createNode(coord);\r\n\t\t\t\tthis.nodeMap.put(coord, node);\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t} else if (arguments[0] instanceof Node) {\r\n\t\t\tlet n = arguments[0];\r\n\t\t\tvar node = this.nodeMap.get(n.getCoordinate());\r\n\t\t\tif (node === null) {\r\n\t\t\t\tthis.nodeMap.put(n.getCoordinate(), n);\r\n\t\t\t\treturn n;\r\n\t\t\t}\r\n\t\t\tnode.mergeLabel(n);\r\n\t\t\treturn node;\r\n\t\t}\r\n\t},\r\n\tprint: function (out) {\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar n = it.next();\r\n\t\t\tn.print(out);\r\n\t\t}\r\n\t},\r\n\titerator: function () {\r\n\t\treturn this.nodeMap.values().iterator();\r\n\t},\r\n\tvalues: function () {\r\n\t\treturn this.nodeMap.values();\r\n\t},\r\n\tgetBoundaryNodes: function (geomIndex) {\r\n\t\tvar bdyNodes = new ArrayList();\r\n\t\tfor (var i = this.iterator(); i.hasNext(); ) {\r\n\t\t\tvar node = i.next();\r\n\t\t\tif (node.getLabel().getLocation(geomIndex) === Location.BOUNDARY) bdyNodes.add(node);\r\n\t\t}\r\n\t\treturn bdyNodes;\r\n\t},\r\n\tadd: function (e) {\r\n\t\tvar p = e.getCoordinate();\r\n\t\tvar n = this.addNode(p);\r\n\t\tn.add(e);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodeMap;\r\n\t}\r\n});\r\n","import CGAlgorithms from '../algorithm/CGAlgorithms';\r\nimport extend from '../../../../extend';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nimport Quadrant from './Quadrant';\r\nimport Assert from '../util/Assert';\r\nexport default function EdgeEnd() {\r\n\tthis.edge = null;\r\n\tthis.label = null;\r\n\tthis.node = null;\r\n\tthis.p0 = null;\r\n\tthis.p1 = null;\r\n\tthis.dx = null;\r\n\tthis.dy = null;\r\n\tthis.quadrant = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet edge = arguments[0];\r\n\t\tthis.edge = edge;\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet edge = arguments[0], p0 = arguments[1], p1 = arguments[2];\r\n\t\tEdgeEnd.call(this, edge, p0, p1, null);\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet edge = arguments[0], p0 = arguments[1], p1 = arguments[2], label = arguments[3];\r\n\t\tEdgeEnd.call(this, edge);\r\n\t\tthis.init(p0, p1);\r\n\t\tthis.label = label;\r\n\t}\r\n}\r\nextend(EdgeEnd.prototype, {\r\n\tcompareDirection: function (e) {\r\n\t\tif (this.dx === e.dx && this.dy === e.dy) return 0;\r\n\t\tif (this.quadrant > e.quadrant) return 1;\r\n\t\tif (this.quadrant < e.quadrant) return -1;\r\n\t\treturn CGAlgorithms.computeOrientation(e.p0, e.p1, this.p1);\r\n\t},\r\n\tgetDy: function () {\r\n\t\treturn this.dy;\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.p0;\r\n\t},\r\n\tsetNode: function (node) {\r\n\t\tthis.node = node;\r\n\t},\r\n\tprint: function (out) {\r\n\t\tvar angle = Math.atan2(this.dy, this.dx);\r\n\t\tvar className = this.getClass().getName();\r\n\t\tvar lastDotPos = className.lastIndexOf('.');\r\n\t\tvar name = className.substring(lastDotPos + 1);\r\n\t\tout.print(\"  \" + name + \": \" + this.p0 + \" - \" + this.p1 + \" \" + this.quadrant + \":\" + angle + \"   \" + this.label);\r\n\t},\r\n\tcompareTo: function (obj) {\r\n\t\tvar e = obj;\r\n\t\treturn this.compareDirection(e);\r\n\t},\r\n\tgetDirectedCoordinate: function () {\r\n\t\treturn this.p1;\r\n\t},\r\n\tgetDx: function () {\r\n\t\treturn this.dx;\r\n\t},\r\n\tgetLabel: function () {\r\n\t\treturn this.label;\r\n\t},\r\n\tgetEdge: function () {\r\n\t\treturn this.edge;\r\n\t},\r\n\tgetQuadrant: function () {\r\n\t\treturn this.quadrant;\r\n\t},\r\n\tgetNode: function () {\r\n\t\treturn this.node;\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar angle = Math.atan2(this.dy, this.dx);\r\n\t\tvar className = this.getClass().getName();\r\n\t\tvar lastDotPos = className.lastIndexOf('.');\r\n\t\tvar name = className.substring(lastDotPos + 1);\r\n\t\treturn \"  \" + name + \": \" + this.p0 + \" - \" + this.p1 + \" \" + this.quadrant + \":\" + angle + \"   \" + this.label;\r\n\t},\r\n\tcomputeLabel: function (boundaryNodeRule) {},\r\n\tinit: function (p0, p1) {\r\n\t\tthis.p0 = p0;\r\n\t\tthis.p1 = p1;\r\n\t\tthis.dx = p1.x - p0.x;\r\n\t\tthis.dy = p1.y - p0.y;\r\n\t\tthis.quadrant = Quadrant.quadrant(this.dx, this.dy);\r\n\t\tAssert.isTrue(!(this.dx === 0 && this.dy === 0), \"EdgeEnd with identical endpoints found\");\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeEnd;\r\n\t}\r\n});\r\n","import Location from '../geom/Location';\r\nimport EdgeEnd from './EdgeEnd';\r\nimport Position from './Position';\r\nimport TopologyException from '../geom/TopologyException';\r\nimport extend from '../../../../extend';\r\nimport Label from './Label';\r\nimport inherits from '../../../../inherits';\r\nexport default function DirectedEdge() {\r\n\tthis._isForward = null;\r\n\tthis._isInResult = false;\r\n\tthis._isVisited = false;\r\n\tthis.sym = null;\r\n\tthis.next = null;\r\n\tthis.nextMin = null;\r\n\tthis.edgeRing = null;\r\n\tthis.minEdgeRing = null;\r\n\tthis.depth = [0, -999, -999];\r\n\tlet edge = arguments[0], isForward = arguments[1];\r\n\tEdgeEnd.call(this, edge);\r\n\tthis._isForward = isForward;\r\n\tif (isForward) {\r\n\t\tthis.init(edge.getCoordinate(0), edge.getCoordinate(1));\r\n\t} else {\r\n\t\tvar n = edge.getNumPoints() - 1;\r\n\t\tthis.init(edge.getCoordinate(n), edge.getCoordinate(n - 1));\r\n\t}\r\n\tthis.computeDirectedLabel();\r\n}\r\ninherits(DirectedEdge, EdgeEnd);\r\nextend(DirectedEdge.prototype, {\r\n\tgetNextMin: function () {\r\n\t\treturn this.nextMin;\r\n\t},\r\n\tgetDepth: function (position) {\r\n\t\treturn this.depth[position];\r\n\t},\r\n\tsetVisited: function (isVisited) {\r\n\t\tthis._isVisited = isVisited;\r\n\t},\r\n\tcomputeDirectedLabel: function () {\r\n\t\tthis.label = new Label(this.edge.getLabel());\r\n\t\tif (!this._isForward) this.label.flip();\r\n\t},\r\n\tgetNext: function () {\r\n\t\treturn this.next;\r\n\t},\r\n\tsetDepth: function (position, depthVal) {\r\n\t\tif (this.depth[position] !== -999) {\r\n\t\t\tif (this.depth[position] !== depthVal) throw new TopologyException(\"assigned depths do not match\", this.getCoordinate());\r\n\t\t}\r\n\t\tthis.depth[position] = depthVal;\r\n\t},\r\n\tisInteriorAreaEdge: function () {\r\n\t\tvar isInteriorAreaEdge = true;\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tif (!(this.label.isArea(i) && this.label.getLocation(i, Position.LEFT) === Location.INTERIOR && this.label.getLocation(i, Position.RIGHT) === Location.INTERIOR)) {\r\n\t\t\t\tisInteriorAreaEdge = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isInteriorAreaEdge;\r\n\t},\r\n\tsetNextMin: function (nextMin) {\r\n\t\tthis.nextMin = nextMin;\r\n\t},\r\n\tprint: function (out) {\r\n\t\tEdgeEnd.prototype.print.call(this, out);\r\n\t\tout.print(\" \" + this.depth[Position.LEFT] + \"/\" + this.depth[Position.RIGHT]);\r\n\t\tout.print(\" (\" + this.getDepthDelta() + \")\");\r\n\t\tif (this._isInResult) out.print(\" inResult\");\r\n\t},\r\n\tsetMinEdgeRing: function (minEdgeRing) {\r\n\t\tthis.minEdgeRing = minEdgeRing;\r\n\t},\r\n\tisLineEdge: function () {\r\n\t\tvar isLine = this.label.isLine(0) || this.label.isLine(1);\r\n\t\tvar isExteriorIfArea0 = !this.label.isArea(0) || this.label.allPositionsEqual(0, Location.EXTERIOR);\r\n\t\tvar isExteriorIfArea1 = !this.label.isArea(1) || this.label.allPositionsEqual(1, Location.EXTERIOR);\r\n\t\treturn isLine && isExteriorIfArea0 && isExteriorIfArea1;\r\n\t},\r\n\tsetEdgeRing: function (edgeRing) {\r\n\t\tthis.edgeRing = edgeRing;\r\n\t},\r\n\tgetMinEdgeRing: function () {\r\n\t\treturn this.minEdgeRing;\r\n\t},\r\n\tgetDepthDelta: function () {\r\n\t\tvar depthDelta = this.edge.getDepthDelta();\r\n\t\tif (!this._isForward) depthDelta = -depthDelta;\r\n\t\treturn depthDelta;\r\n\t},\r\n\tsetInResult: function (isInResult) {\r\n\t\tthis._isInResult = isInResult;\r\n\t},\r\n\tgetSym: function () {\r\n\t\treturn this.sym;\r\n\t},\r\n\tisForward: function () {\r\n\t\treturn this._isForward;\r\n\t},\r\n\tgetEdge: function () {\r\n\t\treturn this.edge;\r\n\t},\r\n\tprintEdge: function (out) {\r\n\t\tthis.print(out);\r\n\t\tout.print(\" \");\r\n\t\tif (this._isForward) this.edge.print(out); else this.edge.printReverse(out);\r\n\t},\r\n\tsetSym: function (de) {\r\n\t\tthis.sym = de;\r\n\t},\r\n\tsetVisitedEdge: function (isVisited) {\r\n\t\tthis.setVisited(isVisited);\r\n\t\tthis.sym.setVisited(isVisited);\r\n\t},\r\n\tsetEdgeDepths: function (position, depth) {\r\n\t\tvar depthDelta = this.getEdge().getDepthDelta();\r\n\t\tif (!this._isForward) depthDelta = -depthDelta;\r\n\t\tvar directionFactor = 1;\r\n\t\tif (position === Position.LEFT) directionFactor = -1;\r\n\t\tvar oppositePos = Position.opposite(position);\r\n\t\tvar delta = depthDelta * directionFactor;\r\n\t\tvar oppositeDepth = depth + delta;\r\n\t\tthis.setDepth(position, depth);\r\n\t\tthis.setDepth(oppositePos, oppositeDepth);\r\n\t},\r\n\tgetEdgeRing: function () {\r\n\t\treturn this.edgeRing;\r\n\t},\r\n\tisInResult: function () {\r\n\t\treturn this._isInResult;\r\n\t},\r\n\tsetNext: function (next) {\r\n\t\tthis.next = next;\r\n\t},\r\n\tisVisited: function () {\r\n\t\treturn this._isVisited;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DirectedEdge;\r\n\t}\r\n});\r\nDirectedEdge.depthFactor = function (currLocation, nextLocation) {\r\n\tif (currLocation === Location.EXTERIOR && nextLocation === Location.INTERIOR) return 1; else if (currLocation === Location.INTERIOR && nextLocation === Location.EXTERIOR) return -1;\r\n\treturn 0;\r\n};\r\n","import Node from './Node';\r\nimport extend from '../../../../extend';\r\nexport default function NodeFactory() {}\r\nextend(NodeFactory.prototype, {\r\n\tcreateNode: function (coord) {\r\n\t\treturn new Node(coord, null);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodeFactory;\r\n\t}\r\n});\r\n","import Location from '../geom/Location';\r\nimport CGAlgorithms from '../algorithm/CGAlgorithms';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport Node from './Node';\r\nimport extend from '../../../../extend';\r\nimport NodeMap from './NodeMap';\r\nimport DirectedEdge from './DirectedEdge';\r\nimport System from '../../../../java/lang/System';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Quadrant from './Quadrant';\r\nimport NodeFactory from './NodeFactory';\r\nexport default function PlanarGraph() {\r\n\tthis.edges = new ArrayList();\r\n\tthis.nodes = null;\r\n\tthis.edgeEndList = new ArrayList();\r\n\tif (arguments.length === 0) {\r\n\t\tthis.nodes = new NodeMap(new NodeFactory());\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet nodeFact = arguments[0];\r\n\t\tthis.nodes = new NodeMap(nodeFact);\r\n\t}\r\n}\r\nextend(PlanarGraph.prototype, {\r\n\tprintEdges: function (out) {\r\n\t\tout.println(\"Edges:\");\r\n\t\tfor (var i = 0; i < this.edges.size(); i++) {\r\n\t\t\tout.println(\"edge \" + i + \":\");\r\n\t\t\tvar e = this.edges.get(i);\r\n\t\t\te.print(out);\r\n\t\t\te.eiList.print(out);\r\n\t\t}\r\n\t},\r\n\tfind: function (coord) {\r\n\t\treturn this.nodes.find(coord);\r\n\t},\r\n\taddNode: function () {\r\n\t\tif (arguments[0] instanceof Node) {\r\n\t\t\tlet node = arguments[0];\r\n\t\t\treturn this.nodes.addNode(node);\r\n\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet coord = arguments[0];\r\n\t\t\treturn this.nodes.addNode(coord);\r\n\t\t}\r\n\t},\r\n\tgetNodeIterator: function () {\r\n\t\treturn this.nodes.iterator();\r\n\t},\r\n\tlinkResultDirectedEdges: function () {\r\n\t\tfor (var nodeit = this.nodes.iterator(); nodeit.hasNext(); ) {\r\n\t\t\tvar node = nodeit.next();\r\n\t\t\tnode.getEdges().linkResultDirectedEdges();\r\n\t\t}\r\n\t},\r\n\tdebugPrintln: function (o) {\r\n\t\tSystem.out.println(o);\r\n\t},\r\n\tisBoundaryNode: function (geomIndex, coord) {\r\n\t\tvar node = this.nodes.find(coord);\r\n\t\tif (node === null) return false;\r\n\t\tvar label = node.getLabel();\r\n\t\tif (label !== null && label.getLocation(geomIndex) === Location.BOUNDARY) return true;\r\n\t\treturn false;\r\n\t},\r\n\tlinkAllDirectedEdges: function () {\r\n\t\tfor (var nodeit = this.nodes.iterator(); nodeit.hasNext(); ) {\r\n\t\t\tvar node = nodeit.next();\r\n\t\t\tnode.getEdges().linkAllDirectedEdges();\r\n\t\t}\r\n\t},\r\n\tmatchInSameDirection: function (p0, p1, ep0, ep1) {\r\n\t\tif (!p0.equals(ep0)) return false;\r\n\t\tif (CGAlgorithms.computeOrientation(p0, p1, ep1) === CGAlgorithms.COLLINEAR && Quadrant.quadrant(p0, p1) === Quadrant.quadrant(ep0, ep1)) return true;\r\n\t\treturn false;\r\n\t},\r\n\tgetEdgeEnds: function () {\r\n\t\treturn this.edgeEndList;\r\n\t},\r\n\tdebugPrint: function (o) {\r\n\t\tSystem.out.print(o);\r\n\t},\r\n\tgetEdgeIterator: function () {\r\n\t\treturn this.edges.iterator();\r\n\t},\r\n\tfindEdgeInSameDirection: function (p0, p1) {\r\n\t\tfor (var i = 0; i < this.edges.size(); i++) {\r\n\t\t\tvar e = this.edges.get(i);\r\n\t\t\tvar eCoord = e.getCoordinates();\r\n\t\t\tif (this.matchInSameDirection(p0, p1, eCoord[0], eCoord[1])) return e;\r\n\t\t\tif (this.matchInSameDirection(p0, p1, eCoord[eCoord.length - 1], eCoord[eCoord.length - 2])) return e;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tinsertEdge: function (e) {\r\n\t\tthis.edges.add(e);\r\n\t},\r\n\tfindEdgeEnd: function (e) {\r\n\t\tfor (var i = this.getEdgeEnds().iterator(); i.hasNext(); ) {\r\n\t\t\tvar ee = i.next();\r\n\t\t\tif (ee.getEdge() === e) return ee;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\taddEdges: function (edgesToAdd) {\r\n\t\tfor (var it = edgesToAdd.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tthis.edges.add(e);\r\n\t\t\tvar de1 = new DirectedEdge(e, true);\r\n\t\t\tvar de2 = new DirectedEdge(e, false);\r\n\t\t\tde1.setSym(de2);\r\n\t\t\tde2.setSym(de1);\r\n\t\t\tthis.add(de1);\r\n\t\t\tthis.add(de2);\r\n\t\t}\r\n\t},\r\n\tadd: function (e) {\r\n\t\tthis.nodes.add(e);\r\n\t\tthis.edgeEndList.add(e);\r\n\t},\r\n\tgetNodes: function () {\r\n\t\treturn this.nodes.values();\r\n\t},\r\n\tfindEdge: function (p0, p1) {\r\n\t\tfor (var i = 0; i < this.edges.size(); i++) {\r\n\t\t\tvar e = this.edges.get(i);\r\n\t\t\tvar eCoord = e.getCoordinates();\r\n\t\t\tif (p0.equals(eCoord[0]) && p1.equals(eCoord[1])) return e;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PlanarGraph;\r\n\t}\r\n});\r\nPlanarGraph.linkResultDirectedEdges = function (nodes) {\r\n\tfor (var nodeit = nodes.iterator(); nodeit.hasNext(); ) {\r\n\t\tvar node = nodeit.next();\r\n\t\tnode.getEdges().linkResultDirectedEdges();\r\n\t}\r\n};\r\n","import CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport TopologyException from '../../geom/TopologyException';\r\nimport extend from '../../../../../extend';\r\nimport MaximalEdgeRing from './MaximalEdgeRing';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Assert from '../../util/Assert';\r\nimport PlanarGraph from '../../geomgraph/PlanarGraph';\r\nexport default function PolygonBuilder() {\r\n\tthis.geometryFactory = null;\r\n\tthis.shellList = new ArrayList();\r\n\tlet geometryFactory = arguments[0];\r\n\tthis.geometryFactory = geometryFactory;\r\n}\r\nextend(PolygonBuilder.prototype, {\r\n\tsortShellsAndHoles: function (edgeRings, shellList, freeHoleList) {\r\n\t\tfor (var it = edgeRings.iterator(); it.hasNext(); ) {\r\n\t\t\tvar er = it.next();\r\n\t\t\tif (er.isHole()) {\r\n\t\t\t\tfreeHoleList.add(er);\r\n\t\t\t} else {\r\n\t\t\t\tshellList.add(er);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputePolygons: function (shellList) {\r\n\t\tvar resultPolyList = new ArrayList();\r\n\t\tfor (var it = shellList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar er = it.next();\r\n\t\t\tvar poly = er.toPolygon(this.geometryFactory);\r\n\t\t\tresultPolyList.add(poly);\r\n\t\t}\r\n\t\treturn resultPolyList;\r\n\t},\r\n\tplaceFreeHoles: function (shellList, freeHoleList) {\r\n\t\tfor (var it = freeHoleList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar hole = it.next();\r\n\t\t\tif (hole.getShell() === null) {\r\n\t\t\t\tvar shell = this.findEdgeRingContaining(hole, shellList);\r\n\t\t\t\tif (shell === null) throw new TopologyException(\"unable to assign hole to a shell\", hole.getCoordinate(0));\r\n\t\t\t\thole.setShell(shell);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbuildMinimalEdgeRings: function (maxEdgeRings, shellList, freeHoleList) {\r\n\t\tvar edgeRings = new ArrayList();\r\n\t\tfor (var it = maxEdgeRings.iterator(); it.hasNext(); ) {\r\n\t\t\tvar er = it.next();\r\n\t\t\tif (er.getMaxNodeDegree() > 2) {\r\n\t\t\t\ter.linkDirectedEdgesForMinimalEdgeRings();\r\n\t\t\t\tvar minEdgeRings = er.buildMinimalRings();\r\n\t\t\t\tvar shell = this.findShell(minEdgeRings);\r\n\t\t\t\tif (shell !== null) {\r\n\t\t\t\t\tthis.placePolygonHoles(shell, minEdgeRings);\r\n\t\t\t\t\tshellList.add(shell);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfreeHoleList.addAll(minEdgeRings);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tedgeRings.add(er);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn edgeRings;\r\n\t},\r\n\tcontainsPoint: function (p) {\r\n\t\tfor (var it = this.shellList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar er = it.next();\r\n\t\t\tif (er.containsPoint(p)) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tbuildMaximalEdgeRings: function (dirEdges) {\r\n\t\tvar maxEdgeRings = new ArrayList();\r\n\t\tfor (var it = dirEdges.iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tif (de.isInResult() && de.getLabel().isArea()) {\r\n\t\t\t\tif (de.getEdgeRing() === null) {\r\n\t\t\t\t\tvar er = new MaximalEdgeRing(de, this.geometryFactory);\r\n\t\t\t\t\tmaxEdgeRings.add(er);\r\n\t\t\t\t\ter.setInResult();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxEdgeRings;\r\n\t},\r\n\tplacePolygonHoles: function (shell, minEdgeRings) {\r\n\t\tfor (var it = minEdgeRings.iterator(); it.hasNext(); ) {\r\n\t\t\tvar er = it.next();\r\n\t\t\tif (er.isHole()) {\r\n\t\t\t\ter.setShell(shell);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetPolygons: function () {\r\n\t\tvar resultPolyList = this.computePolygons(this.shellList);\r\n\t\treturn resultPolyList;\r\n\t},\r\n\tfindEdgeRingContaining: function (testEr, shellList) {\r\n\t\tvar testRing = testEr.getLinearRing();\r\n\t\tvar testEnv = testRing.getEnvelopeInternal();\r\n\t\tvar testPt = testRing.getCoordinateN(0);\r\n\t\tvar minShell = null;\r\n\t\tvar minEnv = null;\r\n\t\tfor (var it = shellList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar tryShell = it.next();\r\n\t\t\tvar tryRing = tryShell.getLinearRing();\r\n\t\t\tvar tryEnv = tryRing.getEnvelopeInternal();\r\n\t\t\tif (minShell !== null) minEnv = minShell.getLinearRing().getEnvelopeInternal();\r\n\t\t\tvar isContained = false;\r\n\t\t\tif (tryEnv.contains(testEnv) && CGAlgorithms.isPointInRing(testPt, tryRing.getCoordinates())) isContained = true;\r\n\t\t\tif (isContained) {\r\n\t\t\t\tif (minShell === null || minEnv.contains(tryEnv)) {\r\n\t\t\t\t\tminShell = tryShell;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn minShell;\r\n\t},\r\n\tfindShell: function (minEdgeRings) {\r\n\t\tvar shellCount = 0;\r\n\t\tvar shell = null;\r\n\t\tfor (var it = minEdgeRings.iterator(); it.hasNext(); ) {\r\n\t\t\tvar er = it.next();\r\n\t\t\tif (!er.isHole()) {\r\n\t\t\t\tshell = er;\r\n\t\t\t\tshellCount++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tAssert.isTrue(shellCount <= 1, \"found two shells in MinimalEdgeRing list\");\r\n\t\treturn shell;\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet graph = arguments[0];\r\n\t\t\tthis.add(graph.getEdgeEnds(), graph.getNodes());\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet dirEdges = arguments[0], nodes = arguments[1];\r\n\t\t\tPlanarGraph.linkResultDirectedEdges(nodes);\r\n\t\t\tvar maxEdgeRings = this.buildMaximalEdgeRings(dirEdges);\r\n\t\t\tvar freeHoleList = new ArrayList();\r\n\t\t\tvar edgeRings = this.buildMinimalEdgeRings(maxEdgeRings, this.shellList, freeHoleList);\r\n\t\t\tthis.sortShellsAndHoles(edgeRings, this.shellList, freeHoleList);\r\n\t\t\tthis.placeFreeHoles(this.shellList, freeHoleList);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PolygonBuilder;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Assert from '../../util/Assert';\r\nimport OverlayOp from './OverlayOp';\r\nexport default function LineBuilder() {\r\n\tthis.op = null;\r\n\tthis.geometryFactory = null;\r\n\tthis.ptLocator = null;\r\n\tthis.lineEdgesList = new ArrayList();\r\n\tthis.resultLineList = new ArrayList();\r\n\tlet op = arguments[0], geometryFactory = arguments[1], ptLocator = arguments[2];\r\n\tthis.op = op;\r\n\tthis.geometryFactory = geometryFactory;\r\n\tthis.ptLocator = ptLocator;\r\n}\r\nextend(LineBuilder.prototype, {\r\n\tcollectLines: function (opCode) {\r\n\t\tfor (var it = this.op.getGraph().getEdgeEnds().iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tthis.collectLineEdge(de, opCode, this.lineEdgesList);\r\n\t\t\tthis.collectBoundaryTouchEdge(de, opCode, this.lineEdgesList);\r\n\t\t}\r\n\t},\r\n\tlabelIsolatedLine: function (e, targetIndex) {\r\n\t\tvar loc = this.ptLocator.locate(e.getCoordinate(), this.op.getArgGeometry(targetIndex));\r\n\t\te.getLabel().setLocation(targetIndex, loc);\r\n\t},\r\n\tbuild: function (opCode) {\r\n\t\tthis.findCoveredLineEdges();\r\n\t\tthis.collectLines(opCode);\r\n\t\tthis.buildLines(opCode);\r\n\t\treturn this.resultLineList;\r\n\t},\r\n\tcollectLineEdge: function (de, opCode, edges) {\r\n\t\tvar label = de.getLabel();\r\n\t\tvar e = de.getEdge();\r\n\t\tif (de.isLineEdge()) {\r\n\t\t\tif (!de.isVisited() && OverlayOp.isResultOfOp(label, opCode) && !e.isCovered()) {\r\n\t\t\t\tedges.add(e);\r\n\t\t\t\tde.setVisitedEdge(true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfindCoveredLineEdges: function () {\r\n\t\tfor (var nodeit = this.op.getGraph().getNodes().iterator(); nodeit.hasNext(); ) {\r\n\t\t\tvar node = nodeit.next();\r\n\t\t\tnode.getEdges().findCoveredLineEdges();\r\n\t\t}\r\n\t\tfor (var it = this.op.getGraph().getEdgeEnds().iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tvar e = de.getEdge();\r\n\t\t\tif (de.isLineEdge() && !e.isCoveredSet()) {\r\n\t\t\t\tvar isCovered = this.op.isCoveredByA(de.getCoordinate());\r\n\t\t\t\te.setCovered(isCovered);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tlabelIsolatedLines: function (edgesList) {\r\n\t\tfor (var it = edgesList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tvar label = e.getLabel();\r\n\t\t\tif (e.isIsolated()) {\r\n\t\t\t\tif (label.isNull(0)) this.labelIsolatedLine(e, 0); else this.labelIsolatedLine(e, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbuildLines: function (opCode) {\r\n\t\tfor (var it = this.lineEdgesList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tvar label = e.getLabel();\r\n\t\t\tvar line = this.geometryFactory.createLineString(e.getCoordinates());\r\n\t\t\tthis.resultLineList.add(line);\r\n\t\t\te.setInResult(true);\r\n\t\t}\r\n\t},\r\n\tcollectBoundaryTouchEdge: function (de, opCode, edges) {\r\n\t\tvar label = de.getLabel();\r\n\t\tif (de.isLineEdge()) return null;\r\n\t\tif (de.isVisited()) return null;\r\n\t\tif (de.isInteriorAreaEdge()) return null;\r\n\t\tif (de.getEdge().isInResult()) return null;\r\n\t\tAssert.isTrue(!(de.isInResult() || de.getSym().isInResult()) || !de.getEdge().isInResult());\r\n\t\tif (OverlayOp.isResultOfOp(label, opCode) && opCode === OverlayOp.INTERSECTION) {\r\n\t\t\tedges.add(de.getEdge());\r\n\t\t\tde.setVisitedEdge(true);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineBuilder;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport OverlayOp from './OverlayOp';\r\nexport default function PointBuilder() {\r\n\tthis.op = null;\r\n\tthis.geometryFactory = null;\r\n\tthis.resultPointList = new ArrayList();\r\n\tlet op = arguments[0], geometryFactory = arguments[1], ptLocator = arguments[2];\r\n\tthis.op = op;\r\n\tthis.geometryFactory = geometryFactory;\r\n}\r\nextend(PointBuilder.prototype, {\r\n\tfilterCoveredNodeToPoint: function (n) {\r\n\t\tvar coord = n.getCoordinate();\r\n\t\tif (!this.op.isCoveredByLA(coord)) {\r\n\t\t\tvar pt = this.geometryFactory.createPoint(coord);\r\n\t\t\tthis.resultPointList.add(pt);\r\n\t\t}\r\n\t},\r\n\textractNonCoveredResultNodes: function (opCode) {\r\n\t\tfor (var nodeit = this.op.getGraph().getNodes().iterator(); nodeit.hasNext(); ) {\r\n\t\t\tvar n = nodeit.next();\r\n\t\t\tif (n.isInResult()) continue;\r\n\t\t\tif (n.isIncidentEdgeInResult()) continue;\r\n\t\t\tif (n.getEdges().getDegree() === 0 || opCode === OverlayOp.INTERSECTION) {\r\n\t\t\t\tvar label = n.getLabel();\r\n\t\t\t\tif (OverlayOp.isResultOfOp(label, opCode)) {\r\n\t\t\t\t\tthis.filterCoveredNodeToPoint(n);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbuild: function (opCode) {\r\n\t\tthis.extractNonCoveredResultNodes(opCode);\r\n\t\treturn this.resultPointList;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PointBuilder;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nexport default function PointOnGeometryLocator() {}\r\nextend(PointOnGeometryLocator.prototype, {\r\n\tlocate: function (p) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PointOnGeometryLocator;\r\n\t}\r\n});\r\n","import Location from '../../geom/Location';\r\nimport CGAlgorithms from '../CGAlgorithms';\r\nimport Polygon from '../../geom/Polygon';\r\nimport PointOnGeometryLocator from './PointOnGeometryLocator';\r\nimport extend from '../../../../../extend';\r\nimport GeometryCollectionIterator from '../../geom/GeometryCollectionIterator';\r\nimport GeometryCollection from '../../geom/GeometryCollection';\r\nexport default function SimplePointInAreaLocator() {\r\n\tthis.geom = null;\r\n\tlet geom = arguments[0];\r\n\tthis.geom = geom;\r\n}\r\nextend(SimplePointInAreaLocator.prototype, {\r\n\tlocate: function (p) {\r\n\t\treturn SimplePointInAreaLocator.locate(p, this.geom);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [PointOnGeometryLocator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SimplePointInAreaLocator;\r\n\t}\r\n});\r\nSimplePointInAreaLocator.isPointInRing = function (p, ring) {\r\n\tif (!ring.getEnvelopeInternal().intersects(p)) return false;\r\n\treturn CGAlgorithms.isPointInRing(p, ring.getCoordinates());\r\n};\r\nSimplePointInAreaLocator.containsPointInPolygon = function (p, poly) {\r\n\tif (poly.isEmpty()) return false;\r\n\tvar shell = poly.getExteriorRing();\r\n\tif (!SimplePointInAreaLocator.isPointInRing(p, shell)) return false;\r\n\tfor (var i = 0; i < poly.getNumInteriorRing(); i++) {\r\n\t\tvar hole = poly.getInteriorRingN(i);\r\n\t\tif (SimplePointInAreaLocator.isPointInRing(p, hole)) return false;\r\n\t}\r\n\treturn true;\r\n};\r\nSimplePointInAreaLocator.containsPoint = function (p, geom) {\r\n\tif (geom instanceof Polygon) {\r\n\t\treturn SimplePointInAreaLocator.containsPointInPolygon(p, geom);\r\n\t} else if (geom instanceof GeometryCollection) {\r\n\t\tvar geomi = new GeometryCollectionIterator(geom);\r\n\t\twhile (geomi.hasNext()) {\r\n\t\t\tvar g2 = geomi.next();\r\n\t\t\tif (g2 !== geom) if (SimplePointInAreaLocator.containsPoint(p, g2)) return true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};\r\nSimplePointInAreaLocator.locate = function (p, geom) {\r\n\tif (geom.isEmpty()) return Location.EXTERIOR;\r\n\tif (SimplePointInAreaLocator.containsPoint(p, geom)) return Location.INTERIOR;\r\n\treturn Location.EXTERIOR;\r\n};\r\n","import StringBuffer from '../../../../java/lang/StringBuffer';\r\nimport Location from '../geom/Location';\r\nimport Position from './Position';\r\nimport TopologyException from '../geom/TopologyException';\r\nimport extend from '../../../../extend';\r\nimport System from '../../../../java/lang/System';\r\nimport SimplePointInAreaLocator from '../algorithm/locate/SimplePointInAreaLocator';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Assert from '../util/Assert';\r\nimport TreeMap from '../../../../java/util/TreeMap';\r\nexport default function EdgeEndStar() {\r\n\tthis.edgeMap = new TreeMap();\r\n\tthis.edgeList = null;\r\n\tthis.ptInAreaLocation = [Location.NONE, Location.NONE];\r\n}\r\nextend(EdgeEndStar.prototype, {\r\n\tgetNextCW: function (ee) {\r\n\t\tthis.getEdges();\r\n\t\tvar i = this.edgeList.indexOf(ee);\r\n\t\tvar iNextCW = i - 1;\r\n\t\tif (i === 0) iNextCW = this.edgeList.size() - 1;\r\n\t\treturn this.edgeList.get(iNextCW);\r\n\t},\r\n\tpropagateSideLabels: function (geomIndex) {\r\n\t\tvar startLoc = Location.NONE;\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tvar label = e.getLabel();\r\n\t\t\tif (label.isArea(geomIndex) && label.getLocation(geomIndex, Position.LEFT) !== Location.NONE) startLoc = label.getLocation(geomIndex, Position.LEFT);\r\n\t\t}\r\n\t\tif (startLoc === Location.NONE) return null;\r\n\t\tvar currLoc = startLoc;\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tvar label = e.getLabel();\r\n\t\t\tif (label.getLocation(geomIndex, Position.ON) === Location.NONE) label.setLocation(geomIndex, Position.ON, currLoc);\r\n\t\t\tif (label.isArea(geomIndex)) {\r\n\t\t\t\tvar leftLoc = label.getLocation(geomIndex, Position.LEFT);\r\n\t\t\t\tvar rightLoc = label.getLocation(geomIndex, Position.RIGHT);\r\n\t\t\t\tif (rightLoc !== Location.NONE) {\r\n\t\t\t\t\tif (rightLoc !== currLoc) throw new TopologyException(\"side location conflict\", e.getCoordinate());\r\n\t\t\t\t\tif (leftLoc === Location.NONE) {\r\n\t\t\t\t\t\tAssert.shouldNeverReachHere(\"found single null side (at \" + e.getCoordinate() + \")\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrLoc = leftLoc;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tAssert.isTrue(label.getLocation(geomIndex, Position.LEFT) === Location.NONE, \"found single null side\");\r\n\t\t\t\t\tlabel.setLocation(geomIndex, Position.RIGHT, currLoc);\r\n\t\t\t\t\tlabel.setLocation(geomIndex, Position.LEFT, currLoc);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\tvar it = this.iterator();\r\n\t\tif (!it.hasNext()) return null;\r\n\t\tvar e = it.next();\r\n\t\treturn e.getCoordinate();\r\n\t},\r\n\tprint: function (out) {\r\n\t\tSystem.out.println(\"EdgeEndStar:   \" + this.getCoordinate());\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\te.print(out);\r\n\t\t}\r\n\t},\r\n\tisAreaLabelsConsistent: function (geomGraph) {\r\n\t\tthis.computeEdgeEndLabels(geomGraph.getBoundaryNodeRule());\r\n\t\treturn this.checkAreaLabelsConsistent(0);\r\n\t},\r\n\tcheckAreaLabelsConsistent: function (geomIndex) {\r\n\t\tvar edges = this.getEdges();\r\n\t\tif (edges.size() <= 0) return true;\r\n\t\tvar lastEdgeIndex = edges.size() - 1;\r\n\t\tvar startLabel = edges.get(lastEdgeIndex).getLabel();\r\n\t\tvar startLoc = startLabel.getLocation(geomIndex, Position.LEFT);\r\n\t\tAssert.isTrue(startLoc !== Location.NONE, \"Found unlabelled area edge\");\r\n\t\tvar currLoc = startLoc;\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tvar label = e.getLabel();\r\n\t\t\tAssert.isTrue(label.isArea(geomIndex), \"Found non-area edge\");\r\n\t\t\tvar leftLoc = label.getLocation(geomIndex, Position.LEFT);\r\n\t\t\tvar rightLoc = label.getLocation(geomIndex, Position.RIGHT);\r\n\t\t\tif (leftLoc === rightLoc) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (rightLoc !== currLoc) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcurrLoc = leftLoc;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tfindIndex: function (eSearch) {\r\n\t\tthis.iterator();\r\n\t\tfor (var i = 0; i < this.edgeList.size(); i++) {\r\n\t\t\tvar e = this.edgeList.get(i);\r\n\t\t\tif (e === eSearch) return i;\r\n\t\t}\r\n\t\treturn -1;\r\n\t},\r\n\titerator: function () {\r\n\t\treturn this.getEdges().iterator();\r\n\t},\r\n\tgetEdges: function () {\r\n\t\tif (this.edgeList === null) {\r\n\t\t\tthis.edgeList = new ArrayList(this.edgeMap.values());\r\n\t\t}\r\n\t\treturn this.edgeList;\r\n\t},\r\n\tgetLocation: function (geomIndex, p, geom) {\r\n\t\tif (this.ptInAreaLocation[geomIndex] === Location.NONE) {\r\n\t\t\tthis.ptInAreaLocation[geomIndex] = SimplePointInAreaLocator.locate(p, geom[geomIndex].getGeometry());\r\n\t\t}\r\n\t\treturn this.ptInAreaLocation[geomIndex];\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar buf = new StringBuffer();\r\n\t\tbuf.append(\"EdgeEndStar:   \" + this.getCoordinate());\r\n\t\tbuf.append(\"\\n\");\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tbuf.append(e);\r\n\t\t\tbuf.append(\"\\n\");\r\n\t\t}\r\n\t\treturn buf.toString();\r\n\t},\r\n\tcomputeEdgeEndLabels: function (boundaryNodeRule) {\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar ee = it.next();\r\n\t\t\tee.computeLabel(boundaryNodeRule);\r\n\t\t}\r\n\t},\r\n\tcomputeLabelling: function (geomGraph) {\r\n\t\tthis.computeEdgeEndLabels(geomGraph[0].getBoundaryNodeRule());\r\n\t\tthis.propagateSideLabels(0);\r\n\t\tthis.propagateSideLabels(1);\r\n\t\tvar hasDimensionalCollapseEdge = [false, false];\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tvar label = e.getLabel();\r\n\t\t\tfor (var geomi = 0; geomi < 2; geomi++) {\r\n\t\t\t\tif (label.isLine(geomi) && label.getLocation(geomi) === Location.BOUNDARY) hasDimensionalCollapseEdge[geomi] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tvar label = e.getLabel();\r\n\t\t\tfor (var geomi = 0; geomi < 2; geomi++) {\r\n\t\t\t\tif (label.isAnyNull(geomi)) {\r\n\t\t\t\t\tvar loc = Location.NONE;\r\n\t\t\t\t\tif (hasDimensionalCollapseEdge[geomi]) {\r\n\t\t\t\t\t\tloc = Location.EXTERIOR;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar p = e.getCoordinate();\r\n\t\t\t\t\t\tloc = this.getLocation(geomi, p, geomGraph);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlabel.setAllLocationsIfNull(geomi, loc);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetDegree: function () {\r\n\t\treturn this.edgeMap.size();\r\n\t},\r\n\tinsertEdgeEnd: function (e, obj) {\r\n\t\tthis.edgeMap.put(e, obj);\r\n\t\tthis.edgeList = null;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeEndStar;\r\n\t}\r\n});\r\n","import Location from '../geom/Location';\r\nimport Position from './Position';\r\nimport TopologyException from '../geom/TopologyException';\r\nimport extend from '../../../../extend';\r\nimport EdgeEndStar from './EdgeEndStar';\r\nimport System from '../../../../java/lang/System';\r\nimport Label from './Label';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Quadrant from './Quadrant';\r\nimport Assert from '../util/Assert';\r\nimport inherits from '../../../../inherits';\r\nexport default function DirectedEdgeStar() {\r\n\tEdgeEndStar.apply(this);\r\n\tthis.resultAreaEdgeList = null;\r\n\tthis.label = null;\r\n\tthis.SCANNING_FOR_INCOMING = 1;\r\n\tthis.LINKING_TO_OUTGOING = 2;\r\n}\r\ninherits(DirectedEdgeStar, EdgeEndStar);\r\nextend(DirectedEdgeStar.prototype, {\r\n\tlinkResultDirectedEdges: function () {\r\n\t\tthis.getResultAreaEdges();\r\n\t\tvar firstOut = null;\r\n\t\tvar incoming = null;\r\n\t\tvar state = this.SCANNING_FOR_INCOMING;\r\n\t\tfor (var i = 0; i < this.resultAreaEdgeList.size(); i++) {\r\n\t\t\tvar nextOut = this.resultAreaEdgeList.get(i);\r\n\t\t\tvar nextIn = nextOut.getSym();\r\n\t\t\tif (!nextOut.getLabel().isArea()) continue;\r\n\t\t\tif (firstOut === null && nextOut.isInResult()) firstOut = nextOut;\r\n\t\t\tswitch (state) {\r\n\t\t\t\tcase this.SCANNING_FOR_INCOMING:\r\n\t\t\t\t\tif (!nextIn.isInResult()) continue;\r\n\t\t\t\t\tincoming = nextIn;\r\n\t\t\t\t\tstate = this.LINKING_TO_OUTGOING;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.LINKING_TO_OUTGOING:\r\n\t\t\t\t\tif (!nextOut.isInResult()) continue;\r\n\t\t\t\t\tincoming.setNext(nextOut);\r\n\t\t\t\t\tstate = this.SCANNING_FOR_INCOMING;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (state === this.LINKING_TO_OUTGOING) {\r\n\t\t\tif (firstOut === null) throw new TopologyException(\"no outgoing dirEdge found\", this.getCoordinate());\r\n\t\t\tAssert.isTrue(firstOut.isInResult(), \"unable to link last incoming dirEdge\");\r\n\t\t\tincoming.setNext(firstOut);\r\n\t\t}\r\n\t},\r\n\tinsert: function (ee) {\r\n\t\tvar de = ee;\r\n\t\tthis.insertEdgeEnd(de, de);\r\n\t},\r\n\tgetRightmostEdge: function () {\r\n\t\tvar edges = this.getEdges();\r\n\t\tvar size = edges.size();\r\n\t\tif (size < 1) return null;\r\n\t\tvar de0 = edges.get(0);\r\n\t\tif (size === 1) return de0;\r\n\t\tvar deLast = edges.get(size - 1);\r\n\t\tvar quad0 = de0.getQuadrant();\r\n\t\tvar quad1 = deLast.getQuadrant();\r\n\t\tif (Quadrant.isNorthern(quad0) && Quadrant.isNorthern(quad1)) return de0; else if (!Quadrant.isNorthern(quad0) && !Quadrant.isNorthern(quad1)) return deLast; else {\r\n\t\t\tvar nonHorizontalEdge = null;\r\n\t\t\tif (de0.getDy() !== 0) return de0; else if (deLast.getDy() !== 0) return deLast;\r\n\t\t}\r\n\t\tAssert.shouldNeverReachHere(\"found two horizontal edges incident on node\");\r\n\t\treturn null;\r\n\t},\r\n\tprint: function (out) {\r\n\t\tSystem.out.println(\"DirectedEdgeStar: \" + this.getCoordinate());\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tout.print(\"out \");\r\n\t\t\tde.print(out);\r\n\t\t\tout.println();\r\n\t\t\tout.print(\"in \");\r\n\t\t\tde.getSym().print(out);\r\n\t\t\tout.println();\r\n\t\t}\r\n\t},\r\n\tgetResultAreaEdges: function () {\r\n\t\tif (this.resultAreaEdgeList !== null) return this.resultAreaEdgeList;\r\n\t\tthis.resultAreaEdgeList = new ArrayList();\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tif (de.isInResult() || de.getSym().isInResult()) this.resultAreaEdgeList.add(de);\r\n\t\t}\r\n\t\treturn this.resultAreaEdgeList;\r\n\t},\r\n\tupdateLabelling: function (nodeLabel) {\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tvar label = de.getLabel();\r\n\t\t\tlabel.setAllLocationsIfNull(0, nodeLabel.getLocation(0));\r\n\t\t\tlabel.setAllLocationsIfNull(1, nodeLabel.getLocation(1));\r\n\t\t}\r\n\t},\r\n\tlinkAllDirectedEdges: function () {\r\n\t\tthis.getEdges();\r\n\t\tvar prevOut = null;\r\n\t\tvar firstIn = null;\r\n\t\tfor (var i = this.edgeList.size() - 1; i >= 0; i--) {\r\n\t\t\tvar nextOut = this.edgeList.get(i);\r\n\t\t\tvar nextIn = nextOut.getSym();\r\n\t\t\tif (firstIn === null) firstIn = nextIn;\r\n\t\t\tif (prevOut !== null) nextIn.setNext(prevOut);\r\n\t\t\tprevOut = nextOut;\r\n\t\t}\r\n\t\tfirstIn.setNext(prevOut);\r\n\t},\r\n\tcomputeDepths: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet de = arguments[0];\r\n\t\t\tvar edgeIndex = this.findIndex(de);\r\n\t\t\tvar label = de.getLabel();\r\n\t\t\tvar startDepth = de.getDepth(Position.LEFT);\r\n\t\t\tvar targetLastDepth = de.getDepth(Position.RIGHT);\r\n\t\t\tvar nextDepth = this.computeDepths(edgeIndex + 1, this.edgeList.size(), startDepth);\r\n\t\t\tvar lastDepth = this.computeDepths(0, edgeIndex, nextDepth);\r\n\t\t\tif (lastDepth !== targetLastDepth) throw new TopologyException(\"depth mismatch at \" + de.getCoordinate());\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet startIndex = arguments[0], endIndex = arguments[1], startDepth = arguments[2];\r\n\t\t\tvar currDepth = startDepth;\r\n\t\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\t\tvar nextDe = this.edgeList.get(i);\r\n\t\t\t\tvar label = nextDe.getLabel();\r\n\t\t\t\tnextDe.setEdgeDepths(Position.RIGHT, currDepth);\r\n\t\t\t\tcurrDepth = nextDe.getDepth(Position.LEFT);\r\n\t\t\t}\r\n\t\t\treturn currDepth;\r\n\t\t}\r\n\t},\r\n\tmergeSymLabels: function () {\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tvar label = de.getLabel();\r\n\t\t\tlabel.merge(de.getSym().getLabel());\r\n\t\t}\r\n\t},\r\n\tlinkMinimalDirectedEdges: function (er) {\r\n\t\tvar firstOut = null;\r\n\t\tvar incoming = null;\r\n\t\tvar state = this.SCANNING_FOR_INCOMING;\r\n\t\tfor (var i = this.resultAreaEdgeList.size() - 1; i >= 0; i--) {\r\n\t\t\tvar nextOut = this.resultAreaEdgeList.get(i);\r\n\t\t\tvar nextIn = nextOut.getSym();\r\n\t\t\tif (firstOut === null && nextOut.getEdgeRing() === er) firstOut = nextOut;\r\n\t\t\tswitch (state) {\r\n\t\t\t\tcase this.SCANNING_FOR_INCOMING:\r\n\t\t\t\t\tif (nextIn.getEdgeRing() !== er) continue;\r\n\t\t\t\t\tincoming = nextIn;\r\n\t\t\t\t\tstate = this.LINKING_TO_OUTGOING;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.LINKING_TO_OUTGOING:\r\n\t\t\t\t\tif (nextOut.getEdgeRing() !== er) continue;\r\n\t\t\t\t\tincoming.setNextMin(nextOut);\r\n\t\t\t\t\tstate = this.SCANNING_FOR_INCOMING;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (state === this.LINKING_TO_OUTGOING) {\r\n\t\t\tAssert.isTrue(firstOut !== null, \"found null for first outgoing dirEdge\");\r\n\t\t\tAssert.isTrue(firstOut.getEdgeRing() === er, \"unable to link last incoming dirEdge\");\r\n\t\t\tincoming.setNextMin(firstOut);\r\n\t\t}\r\n\t},\r\n\tgetOutgoingDegree: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tvar degree = 0;\r\n\t\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\t\tvar de = it.next();\r\n\t\t\t\tif (de.isInResult()) degree++;\r\n\t\t\t}\r\n\t\t\treturn degree;\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet er = arguments[0];\r\n\t\t\tvar degree = 0;\r\n\t\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\t\tvar de = it.next();\r\n\t\t\t\tif (de.getEdgeRing() === er) degree++;\r\n\t\t\t}\r\n\t\t\treturn degree;\r\n\t\t}\r\n\t},\r\n\tgetLabel: function () {\r\n\t\treturn this.label;\r\n\t},\r\n\tfindCoveredLineEdges: function () {\r\n\t\tvar startLoc = Location.NONE;\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar nextOut = it.next();\r\n\t\t\tvar nextIn = nextOut.getSym();\r\n\t\t\tif (!nextOut.isLineEdge()) {\r\n\t\t\t\tif (nextOut.isInResult()) {\r\n\t\t\t\t\tstartLoc = Location.INTERIOR;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (nextIn.isInResult()) {\r\n\t\t\t\t\tstartLoc = Location.EXTERIOR;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (startLoc === Location.NONE) return null;\r\n\t\tvar currLoc = startLoc;\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar nextOut = it.next();\r\n\t\t\tvar nextIn = nextOut.getSym();\r\n\t\t\tif (nextOut.isLineEdge()) {\r\n\t\t\t\tnextOut.getEdge().setCovered(currLoc === Location.INTERIOR);\r\n\t\t\t} else {\r\n\t\t\t\tif (nextOut.isInResult()) currLoc = Location.EXTERIOR;\r\n\t\t\t\tif (nextIn.isInResult()) currLoc = Location.INTERIOR;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputeLabelling: function (geom) {\r\n\t\tEdgeEndStar.prototype.computeLabelling.call(this, geom);\r\n\t\tthis.label = new Label(Location.NONE);\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar ee = it.next();\r\n\t\t\tvar e = ee.getEdge();\r\n\t\t\tvar eLabel = e.getLabel();\r\n\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\tvar eLoc = eLabel.getLocation(i);\r\n\t\t\t\tif (eLoc === Location.INTERIOR || eLoc === Location.BOUNDARY) this.label.setLocation(i, Location.INTERIOR);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DirectedEdgeStar;\r\n\t}\r\n});\r\n","import DirectedEdgeStar from '../../geomgraph/DirectedEdgeStar';\r\nimport Node from '../../geomgraph/Node';\r\nimport extend from '../../../../../extend';\r\nimport inherits from '../../../../../inherits';\r\nimport NodeFactory from '../../geomgraph/NodeFactory';\r\nexport default function OverlayNodeFactory() {\r\n\tNodeFactory.apply(this);\r\n}\r\ninherits(OverlayNodeFactory, NodeFactory);\r\nextend(OverlayNodeFactory.prototype, {\r\n\tcreateNode: function (coord) {\r\n\t\treturn new Node(coord, new DirectedEdgeStar());\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn OverlayNodeFactory;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nexport default function MonotoneChain() {\r\n\tthis.mce = null;\r\n\tthis.chainIndex = null;\r\n\tlet mce = arguments[0], chainIndex = arguments[1];\r\n\tthis.mce = mce;\r\n\tthis.chainIndex = chainIndex;\r\n}\r\nextend(MonotoneChain.prototype, {\r\n\tcomputeIntersections: function (mc, si) {\r\n\t\tthis.mce.computeIntersectsForChain(this.chainIndex, mc.mce, mc.chainIndex, si);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MonotoneChain;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport Comparable from '../../../../../java/lang/Comparable';\r\nexport default function SweepLineEvent() {\r\n\tthis.label = null;\r\n\tthis.xValue = null;\r\n\tthis.eventType = null;\r\n\tthis.insertEvent = null;\r\n\tthis.deleteEventIndex = null;\r\n\tthis.obj = null;\r\n\tif (arguments.length === 2) {\r\n\t\tlet x = arguments[0], insertEvent = arguments[1];\r\n\t\tthis.eventType = SweepLineEvent.DELETE;\r\n\t\tthis.xValue = x;\r\n\t\tthis.insertEvent = insertEvent;\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet label = arguments[0], x = arguments[1], obj = arguments[2];\r\n\t\tthis.eventType = SweepLineEvent.INSERT;\r\n\t\tthis.label = label;\r\n\t\tthis.xValue = x;\r\n\t\tthis.obj = obj;\r\n\t}\r\n}\r\nextend(SweepLineEvent.prototype, {\r\n\tisDelete: function () {\r\n\t\treturn this.eventType === SweepLineEvent.DELETE;\r\n\t},\r\n\tsetDeleteEventIndex: function (deleteEventIndex) {\r\n\t\tthis.deleteEventIndex = deleteEventIndex;\r\n\t},\r\n\tgetObject: function () {\r\n\t\treturn this.obj;\r\n\t},\r\n\tcompareTo: function (o) {\r\n\t\tvar pe = o;\r\n\t\tif (this.xValue < pe.xValue) return -1;\r\n\t\tif (this.xValue > pe.xValue) return 1;\r\n\t\tif (this.eventType < pe.eventType) return -1;\r\n\t\tif (this.eventType > pe.eventType) return 1;\r\n\t\treturn 0;\r\n\t},\r\n\tgetInsertEvent: function () {\r\n\t\treturn this.insertEvent;\r\n\t},\r\n\tisInsert: function () {\r\n\t\treturn this.eventType === SweepLineEvent.INSERT;\r\n\t},\r\n\tisSameLabel: function (ev) {\r\n\t\tif (this.label === null) return false;\r\n\t\treturn this.label === ev.label;\r\n\t},\r\n\tgetDeleteEventIndex: function () {\r\n\t\treturn this.deleteEventIndex;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SweepLineEvent;\r\n\t}\r\n});\r\nSweepLineEvent.INSERT = 1;\r\nSweepLineEvent.DELETE = 2;\r\n","import extend from '../../../../../extend';\r\nexport default function EdgeSetIntersector() {}\r\nextend(EdgeSetIntersector.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeSetIntersector;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nexport default function SegmentIntersector() {\r\n\tthis._hasIntersection = false;\r\n\tthis.hasProper = false;\r\n\tthis.hasProperInterior = false;\r\n\tthis.properIntersectionPoint = null;\r\n\tthis.li = null;\r\n\tthis.includeProper = null;\r\n\tthis.recordIsolated = null;\r\n\tthis.isSelfIntersection = null;\r\n\tthis.numIntersections = 0;\r\n\tthis.numTests = 0;\r\n\tthis.bdyNodes = null;\r\n\tthis._isDone = false;\r\n\tthis.isDoneWhenProperInt = false;\r\n\tlet li = arguments[0], includeProper = arguments[1], recordIsolated = arguments[2];\r\n\tthis.li = li;\r\n\tthis.includeProper = includeProper;\r\n\tthis.recordIsolated = recordIsolated;\r\n}\r\nextend(SegmentIntersector.prototype, {\r\n\tisTrivialIntersection: function (e0, segIndex0, e1, segIndex1) {\r\n\t\tif (e0 === e1) {\r\n\t\t\tif (this.li.getIntersectionNum() === 1) {\r\n\t\t\t\tif (SegmentIntersector.isAdjacentSegments(segIndex0, segIndex1)) return true;\r\n\t\t\t\tif (e0.isClosed()) {\r\n\t\t\t\t\tvar maxSegIndex = e0.getNumPoints() - 1;\r\n\t\t\t\t\tif (segIndex0 === 0 && segIndex1 === maxSegIndex || segIndex1 === 0 && segIndex0 === maxSegIndex) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tgetProperIntersectionPoint: function () {\r\n\t\treturn this.properIntersectionPoint;\r\n\t},\r\n\tsetIsDoneIfProperInt: function (isDoneWhenProperInt) {\r\n\t\tthis.isDoneWhenProperInt = isDoneWhenProperInt;\r\n\t},\r\n\thasProperInteriorIntersection: function () {\r\n\t\treturn this.hasProperInterior;\r\n\t},\r\n\tisBoundaryPointInternal: function (li, bdyNodes) {\r\n\t\tfor (var i = bdyNodes.iterator(); i.hasNext(); ) {\r\n\t\t\tvar node = i.next();\r\n\t\t\tvar pt = node.getCoordinate();\r\n\t\t\tif (li.isIntersection(pt)) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\thasProperIntersection: function () {\r\n\t\treturn this.hasProper;\r\n\t},\r\n\thasIntersection: function () {\r\n\t\treturn this._hasIntersection;\r\n\t},\r\n\tisDone: function () {\r\n\t\treturn this._isDone;\r\n\t},\r\n\tisBoundaryPoint: function (li, bdyNodes) {\r\n\t\tif (bdyNodes === null) return false;\r\n\t\tif (this.isBoundaryPointInternal(li, bdyNodes[0])) return true;\r\n\t\tif (this.isBoundaryPointInternal(li, bdyNodes[1])) return true;\r\n\t\treturn false;\r\n\t},\r\n\tsetBoundaryNodes: function (bdyNodes0, bdyNodes1) {\r\n\t\tthis.bdyNodes = new Array(2).fill(null);\r\n\t\tthis.bdyNodes[0] = bdyNodes0;\r\n\t\tthis.bdyNodes[1] = bdyNodes1;\r\n\t},\r\n\taddIntersections: function (e0, segIndex0, e1, segIndex1) {\r\n\t\tif (e0 === e1 && segIndex0 === segIndex1) return null;\r\n\t\tthis.numTests++;\r\n\t\tvar p00 = e0.getCoordinates()[segIndex0];\r\n\t\tvar p01 = e0.getCoordinates()[segIndex0 + 1];\r\n\t\tvar p10 = e1.getCoordinates()[segIndex1];\r\n\t\tvar p11 = e1.getCoordinates()[segIndex1 + 1];\r\n\t\tthis.li.computeIntersection(p00, p01, p10, p11);\r\n\t\tif (this.li.hasIntersection()) {\r\n\t\t\tif (this.recordIsolated) {\r\n\t\t\t\te0.setIsolated(false);\r\n\t\t\t\te1.setIsolated(false);\r\n\t\t\t}\r\n\t\t\tthis.numIntersections++;\r\n\t\t\tif (!this.isTrivialIntersection(e0, segIndex0, e1, segIndex1)) {\r\n\t\t\t\tthis._hasIntersection = true;\r\n\t\t\t\tif (this.includeProper || !this.li.isProper()) {\r\n\t\t\t\t\te0.addIntersections(this.li, segIndex0, 0);\r\n\t\t\t\t\te1.addIntersections(this.li, segIndex1, 1);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.li.isProper()) {\r\n\t\t\t\t\tthis.properIntersectionPoint = this.li.getIntersection(0).copy();\r\n\t\t\t\t\tthis.hasProper = true;\r\n\t\t\t\t\tif (this.isDoneWhenProperInt) {\r\n\t\t\t\t\t\tthis._isDone = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.isBoundaryPoint(this.li, this.bdyNodes)) this.hasProperInterior = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SegmentIntersector;\r\n\t}\r\n});\r\nSegmentIntersector.isAdjacentSegments = function (i1, i2) {\r\n\treturn Math.abs(i1 - i2) === 1;\r\n};\r\n","import hasInterface from '../../../../../hasInterface';\r\nimport MonotoneChain from './MonotoneChain';\r\nimport SweepLineEvent from './SweepLineEvent';\r\nimport EdgeSetIntersector from './EdgeSetIntersector';\r\nimport extend from '../../../../../extend';\r\nimport Collections from '../../../../../java/util/Collections';\r\nimport SegmentIntersector from './SegmentIntersector';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport inherits from '../../../../../inherits';\r\nimport List from '../../../../../java/util/List';\r\nexport default function SimpleMCSweepLineIntersector() {\r\n\tEdgeSetIntersector.apply(this);\r\n\tthis.events = new ArrayList();\r\n\tthis.nOverlaps = null;\r\n}\r\ninherits(SimpleMCSweepLineIntersector, EdgeSetIntersector);\r\nextend(SimpleMCSweepLineIntersector.prototype, {\r\n\tprepareEvents: function () {\r\n\t\tCollections.sort(this.events);\r\n\t\tfor (var i = 0; i < this.events.size(); i++) {\r\n\t\t\tvar ev = this.events.get(i);\r\n\t\t\tif (ev.isDelete()) {\r\n\t\t\t\tev.getInsertEvent().setDeleteEventIndex(i);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputeIntersections: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet si = arguments[0];\r\n\t\t\tthis.nOverlaps = 0;\r\n\t\t\tthis.prepareEvents();\r\n\t\t\tfor (var i = 0; i < this.events.size(); i++) {\r\n\t\t\t\tvar ev = this.events.get(i);\r\n\t\t\t\tif (ev.isInsert()) {\r\n\t\t\t\t\tthis.processOverlaps(i, ev.getDeleteEventIndex(), ev, si);\r\n\t\t\t\t}\r\n\t\t\t\tif (si.isDone()) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tif (arguments[2] instanceof SegmentIntersector && (hasInterface(arguments[0], List) && hasInterface(arguments[1], List))) {\r\n\t\t\t\tlet edges0 = arguments[0], edges1 = arguments[1], si = arguments[2];\r\n\t\t\t\tthis.addEdges(edges0, edges0);\r\n\t\t\t\tthis.addEdges(edges1, edges1);\r\n\t\t\t\tthis.computeIntersections(si);\r\n\t\t\t} else if (typeof arguments[2] === \"boolean\" && (hasInterface(arguments[0], List) && arguments[1] instanceof SegmentIntersector)) {\r\n\t\t\t\tlet edges = arguments[0], si = arguments[1], testAllSegments = arguments[2];\r\n\t\t\t\tif (testAllSegments) this.addEdges(edges, null); else this.addEdges(edges);\r\n\t\t\t\tthis.computeIntersections(si);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\taddEdge: function (edge, edgeSet) {\r\n\t\tvar mce = edge.getMonotoneChainEdge();\r\n\t\tvar startIndex = mce.getStartIndexes();\r\n\t\tfor (var i = 0; i < startIndex.length - 1; i++) {\r\n\t\t\tvar mc = new MonotoneChain(mce, i);\r\n\t\t\tvar insertEvent = new SweepLineEvent(edgeSet, mce.getMinX(i), mc);\r\n\t\t\tthis.events.add(insertEvent);\r\n\t\t\tthis.events.add(new SweepLineEvent(mce.getMaxX(i), insertEvent));\r\n\t\t}\r\n\t},\r\n\tprocessOverlaps: function (start, end, ev0, si) {\r\n\t\tvar mc0 = ev0.getObject();\r\n\t\tfor (var i = start; i < end; i++) {\r\n\t\t\tvar ev1 = this.events.get(i);\r\n\t\t\tif (ev1.isInsert()) {\r\n\t\t\t\tvar mc1 = ev1.getObject();\r\n\t\t\t\tif (!ev0.isSameLabel(ev1)) {\r\n\t\t\t\t\tmc0.computeIntersections(mc1, si);\r\n\t\t\t\t\tthis.nOverlaps++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\taddEdges: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet edges = arguments[0];\r\n\t\t\tfor (var i = edges.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar edge = i.next();\r\n\t\t\t\tthis.addEdge(edge, edge);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet edges = arguments[0], edgeSet = arguments[1];\r\n\t\t\tfor (var i = edges.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar edge = i.next();\r\n\t\t\t\tthis.addEdge(edge, edgeSet);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SimpleMCSweepLineIntersector;\r\n\t}\r\n});\r\n","import WKTWriter from '../../io/WKTWriter';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport Double from '../../../../../java/lang/Double';\r\nimport extend from '../../../../../extend';\r\nimport Comparator from '../../../../../java/util/Comparator';\r\nexport default function IntervalRTreeNode() {\r\n\tthis.min = Double.POSITIVE_INFINITY;\r\n\tthis.max = Double.NEGATIVE_INFINITY;\r\n}\r\nextend(IntervalRTreeNode.prototype, {\r\n\tgetMin: function () {\r\n\t\treturn this.min;\r\n\t},\r\n\tintersects: function (queryMin, queryMax) {\r\n\t\tif (this.min > queryMax || this.max < queryMin) return false;\r\n\t\treturn true;\r\n\t},\r\n\tgetMax: function () {\r\n\t\treturn this.max;\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn WKTWriter.toLineString(new Coordinate(this.min, 0), new Coordinate(this.max, 0));\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IntervalRTreeNode;\r\n\t}\r\n});\r\nfunction NodeComparator() {}\r\nextend(NodeComparator.prototype, {\r\n\tcompare: function (o1, o2) {\r\n\t\tvar n1 = o1;\r\n\t\tvar n2 = o2;\r\n\t\tvar mid1 = (n1.min + n1.max) / 2;\r\n\t\tvar mid2 = (n2.min + n2.max) / 2;\r\n\t\tif (mid1 < mid2) return -1;\r\n\t\tif (mid1 > mid2) return 1;\r\n\t\treturn 0;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodeComparator;\r\n\t}\r\n});\r\nIntervalRTreeNode.NodeComparator = NodeComparator;\r\n","import IntervalRTreeNode from './IntervalRTreeNode';\r\nimport extend from '../../../../../extend';\r\nimport inherits from '../../../../../inherits';\r\nexport default function IntervalRTreeLeafNode() {\r\n\tIntervalRTreeNode.apply(this);\r\n\tthis.item = null;\r\n\tlet min = arguments[0], max = arguments[1], item = arguments[2];\r\n\tthis.min = min;\r\n\tthis.max = max;\r\n\tthis.item = item;\r\n}\r\ninherits(IntervalRTreeLeafNode, IntervalRTreeNode);\r\nextend(IntervalRTreeLeafNode.prototype, {\r\n\tquery: function (queryMin, queryMax, visitor) {\r\n\t\tif (!this.intersects(queryMin, queryMax)) return null;\r\n\t\tvisitor.visitItem(this.item);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IntervalRTreeLeafNode;\r\n\t}\r\n});\r\n","import IntervalRTreeNode from './IntervalRTreeNode';\r\nimport extend from '../../../../../extend';\r\nimport inherits from '../../../../../inherits';\r\nexport default function IntervalRTreeBranchNode() {\r\n\tIntervalRTreeNode.apply(this);\r\n\tthis.node1 = null;\r\n\tthis.node2 = null;\r\n\tlet n1 = arguments[0], n2 = arguments[1];\r\n\tthis.node1 = n1;\r\n\tthis.node2 = n2;\r\n\tthis.buildExtent(this.node1, this.node2);\r\n}\r\ninherits(IntervalRTreeBranchNode, IntervalRTreeNode);\r\nextend(IntervalRTreeBranchNode.prototype, {\r\n\tbuildExtent: function (n1, n2) {\r\n\t\tthis.min = Math.min(n1.min, n2.min);\r\n\t\tthis.max = Math.max(n1.max, n2.max);\r\n\t},\r\n\tquery: function (queryMin, queryMax, visitor) {\r\n\t\tif (!this.intersects(queryMin, queryMax)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.node1 !== null) this.node1.query(queryMin, queryMax, visitor);\r\n\t\tif (this.node2 !== null) this.node2.query(queryMin, queryMax, visitor);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IntervalRTreeBranchNode;\r\n\t}\r\n});\r\n","import WKTWriter from '../../io/WKTWriter';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport IntervalRTreeLeafNode from './IntervalRTreeLeafNode';\r\nimport extend from '../../../../../extend';\r\nimport Collections from '../../../../../java/util/Collections';\r\nimport System from '../../../../../java/lang/System';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport IntervalRTreeBranchNode from './IntervalRTreeBranchNode';\r\nexport default function SortedPackedIntervalRTree() {\r\n\tthis.leaves = new ArrayList();\r\n\tthis.root = null;\r\n\tthis.level = 0;\r\n}\r\nextend(SortedPackedIntervalRTree.prototype, {\r\n\tbuildTree: function () {\r\n\t\tCollections.sort(this.leaves, new IntervalRTreeNode.NodeComparator());\r\n\t\tvar src = this.leaves;\r\n\t\tvar temp = null;\r\n\t\tvar dest = new ArrayList();\r\n\t\twhile (true) {\r\n\t\t\tthis.buildLevel(src, dest);\r\n\t\t\tif (dest.size() === 1) return dest.get(0);\r\n\t\t\ttemp = src;\r\n\t\t\tsrc = dest;\r\n\t\t\tdest = temp;\r\n\t\t}\r\n\t},\r\n\tinsert: function (min, max, item) {\r\n\t\tif (this.root !== null) throw new IllegalStateException(\"Index cannot be added to once it has been queried\");\r\n\t\tthis.leaves.add(new IntervalRTreeLeafNode(min, max, item));\r\n\t},\r\n\tquery: function (min, max, visitor) {\r\n\t\tthis.init();\r\n\t\tthis.root.query(min, max, visitor);\r\n\t},\r\n\tbuildRoot: function () {\r\n\t\tif (this.root !== null) return null;\r\n\t\tthis.root = this.buildTree();\r\n\t},\r\n\tprintNode: function (node) {\r\n\t\tSystem.out.println(WKTWriter.toLineString(new Coordinate(node.min, this.level), new Coordinate(node.max, this.level)));\r\n\t},\r\n\tinit: function () {\r\n\t\tif (this.root !== null) return null;\r\n\t\tthis.buildRoot();\r\n\t},\r\n\tbuildLevel: function (src, dest) {\r\n\t\tthis.level++;\r\n\t\tdest.clear();\r\n\t\tfor (var i = 0; i < src.size(); i += 2) {\r\n\t\t\tvar n1 = src.get(i);\r\n\t\t\tvar n2 = i + 1 < src.size() ? src.get(i) : null;\r\n\t\t\tif (n2 === null) {\r\n\t\t\t\tdest.add(n1);\r\n\t\t\t} else {\r\n\t\t\t\tvar node = new IntervalRTreeBranchNode(src.get(i), src.get(i + 1));\r\n\t\t\t\tdest.add(node);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SortedPackedIntervalRTree;\r\n\t}\r\n});\r\n","import LineString from '../LineString';\r\nimport Geometry from '../Geometry';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport Collection from '../../../../../java/util/Collection';\r\nimport LinearRing from '../LinearRing';\r\nimport extend from '../../../../../extend';\r\nimport GeometryComponentFilter from '../GeometryComponentFilter';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nexport default function LinearComponentExtracter() {\r\n\tthis.lines = null;\r\n\tthis.isForcedToLineString = false;\r\n\tif (arguments.length === 1) {\r\n\t\tlet lines = arguments[0];\r\n\t\tthis.lines = lines;\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet lines = arguments[0], isForcedToLineString = arguments[1];\r\n\t\tthis.lines = lines;\r\n\t\tthis.isForcedToLineString = isForcedToLineString;\r\n\t}\r\n}\r\nextend(LinearComponentExtracter.prototype, {\r\n\tfilter: function (geom) {\r\n\t\tif (this.isForcedToLineString && geom instanceof LinearRing) {\r\n\t\t\tvar line = geom.getFactory().createLineString(geom.getCoordinateSequence());\r\n\t\t\tthis.lines.add(line);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (geom instanceof LineString) this.lines.add(geom);\r\n\t},\r\n\tsetForceToLineString: function (isForcedToLineString) {\r\n\t\tthis.isForcedToLineString = isForcedToLineString;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryComponentFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LinearComponentExtracter;\r\n\t}\r\n});\r\nLinearComponentExtracter.getGeometry = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet geom = arguments[0];\r\n\t\treturn geom.getFactory().buildGeometry(LinearComponentExtracter.getLines(geom));\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet geom = arguments[0], forceToLineString = arguments[1];\r\n\t\treturn geom.getFactory().buildGeometry(LinearComponentExtracter.getLines(geom, forceToLineString));\r\n\t}\r\n};\r\nLinearComponentExtracter.getLines = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet geom = arguments[0];\r\n\t\treturn LinearComponentExtracter.getLines(geom, false);\r\n\t} else if (arguments.length === 2) {\r\n\t\tif (hasInterface(arguments[0], Collection) && hasInterface(arguments[1], Collection)) {\r\n\t\t\tlet geoms = arguments[0], lines = arguments[1];\r\n\t\t\tfor (var i = geoms.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar g = i.next();\r\n\t\t\t\tLinearComponentExtracter.getLines(g, lines);\r\n\t\t\t}\r\n\t\t\treturn lines;\r\n\t\t} else if (arguments[0] instanceof Geometry && typeof arguments[1] === \"boolean\") {\r\n\t\t\tlet geom = arguments[0], forceToLineString = arguments[1];\r\n\t\t\tvar lines = new ArrayList();\r\n\t\t\tgeom.apply(new LinearComponentExtracter(lines, forceToLineString));\r\n\t\t\treturn lines;\r\n\t\t} else if (arguments[0] instanceof Geometry && hasInterface(arguments[1], Collection)) {\r\n\t\t\tlet geom = arguments[0], lines = arguments[1];\r\n\t\t\tif (geom instanceof LineString) {\r\n\t\t\t\tlines.add(geom);\r\n\t\t\t} else {\r\n\t\t\t\tgeom.apply(new LinearComponentExtracter(lines));\r\n\t\t\t}\r\n\t\t\treturn lines;\r\n\t\t}\r\n\t} else if (arguments.length === 3) {\r\n\t\tif (typeof arguments[2] === \"boolean\" && (hasInterface(arguments[0], Collection) && hasInterface(arguments[1], Collection))) {\r\n\t\t\tlet geoms = arguments[0], lines = arguments[1], forceToLineString = arguments[2];\r\n\t\t\tfor (var i = geoms.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar g = i.next();\r\n\t\t\t\tLinearComponentExtracter.getLines(g, lines, forceToLineString);\r\n\t\t\t}\r\n\t\t\treturn lines;\r\n\t\t} else if (typeof arguments[2] === \"boolean\" && (arguments[0] instanceof Geometry && hasInterface(arguments[1], Collection))) {\r\n\t\t\tlet geom = arguments[0], lines = arguments[1], forceToLineString = arguments[2];\r\n\t\t\tgeom.apply(new LinearComponentExtracter(lines, forceToLineString));\r\n\t\t\treturn lines;\r\n\t\t}\r\n\t}\r\n};\r\n","import ItemVisitor from './ItemVisitor';\r\nimport extend from '../../../../extend';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function ArrayListVisitor() {\r\n\tthis.items = new ArrayList();\r\n}\r\nextend(ArrayListVisitor.prototype, {\r\n\tvisitItem: function (item) {\r\n\t\tthis.items.add(item);\r\n\t},\r\n\tgetItems: function () {\r\n\t\treturn this.items;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [ItemVisitor];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ArrayListVisitor;\r\n\t}\r\n});\r\n","import hasInterface from '../../../../../hasInterface';\r\nimport IllegalArgumentException from '../../../../../java/lang/IllegalArgumentException';\r\nimport ItemVisitor from '../../index/ItemVisitor';\r\nimport PointOnGeometryLocator from './PointOnGeometryLocator';\r\nimport extend from '../../../../../extend';\r\nimport SortedPackedIntervalRTree from '../../index/intervalrtree/SortedPackedIntervalRTree';\r\nimport LineSegment from '../../geom/LineSegment';\r\nimport Polygonal from '../../geom/Polygonal';\r\nimport LinearComponentExtracter from '../../geom/util/LinearComponentExtracter';\r\nimport ArrayListVisitor from '../../index/ArrayListVisitor';\r\nimport RayCrossingCounter from '../RayCrossingCounter';\r\nexport default function IndexedPointInAreaLocator() {\r\n\tthis.index = null;\r\n\tlet g = arguments[0];\r\n\tif (!hasInterface(g, Polygonal)) throw new IllegalArgumentException(\"Argument must be Polygonal\");\r\n\tthis.index = new IntervalIndexedGeometry(g);\r\n}\r\nextend(IndexedPointInAreaLocator.prototype, {\r\n\tlocate: function (p) {\r\n\t\tvar rcc = new RayCrossingCounter(p);\r\n\t\tvar visitor = new SegmentVisitor(rcc);\r\n\t\tthis.index.query(p.y, p.y, visitor);\r\n\t\treturn rcc.getLocation();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [PointOnGeometryLocator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IndexedPointInAreaLocator;\r\n\t}\r\n});\r\nfunction SegmentVisitor() {\r\n\tthis.counter = null;\r\n\tlet counter = arguments[0];\r\n\tthis.counter = counter;\r\n}\r\nextend(SegmentVisitor.prototype, {\r\n\tvisitItem: function (item) {\r\n\t\tvar seg = item;\r\n\t\tthis.counter.countSegment(seg.getCoordinate(0), seg.getCoordinate(1));\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [ItemVisitor];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SegmentVisitor;\r\n\t}\r\n});\r\nfunction IntervalIndexedGeometry() {\r\n\tthis.index = new SortedPackedIntervalRTree();\r\n\tlet geom = arguments[0];\r\n\tthis.init(geom);\r\n}\r\nextend(IntervalIndexedGeometry.prototype, {\r\n\tinit: function (geom) {\r\n\t\tvar lines = LinearComponentExtracter.getLines(geom);\r\n\t\tfor (var i = lines.iterator(); i.hasNext(); ) {\r\n\t\t\tvar line = i.next();\r\n\t\t\tvar pts = line.getCoordinates();\r\n\t\t\tthis.addLine(pts);\r\n\t\t}\r\n\t},\r\n\taddLine: function (pts) {\r\n\t\tfor (var i = 1; i < pts.length; i++) {\r\n\t\t\tvar seg = new LineSegment(pts[i - 1], pts[i]);\r\n\t\t\tvar min = Math.min(seg.p0.y, seg.p1.y);\r\n\t\t\tvar max = Math.max(seg.p0.y, seg.p1.y);\r\n\t\t\tthis.index.insert(min, max, seg);\r\n\t\t}\r\n\t},\r\n\tquery: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet min = arguments[0], max = arguments[1];\r\n\t\t\tvar visitor = new ArrayListVisitor();\r\n\t\t\tthis.index.query(min, max, visitor);\r\n\t\t\treturn visitor.getItems();\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet min = arguments[0], max = arguments[1], visitor = arguments[2];\r\n\t\t\tthis.index.query(min, max, visitor);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IntervalIndexedGeometry;\r\n\t}\r\n});\r\nIndexedPointInAreaLocator.SegmentVisitor = SegmentVisitor;\r\nIndexedPointInAreaLocator.IntervalIndexedGeometry = IntervalIndexedGeometry;\r\n","import Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nexport default function EdgeIntersection() {\r\n\tthis.coord = null;\r\n\tthis.segmentIndex = null;\r\n\tthis.dist = null;\r\n\tlet coord = arguments[0], segmentIndex = arguments[1], dist = arguments[2];\r\n\tthis.coord = new Coordinate(coord);\r\n\tthis.segmentIndex = segmentIndex;\r\n\tthis.dist = dist;\r\n}\r\nextend(EdgeIntersection.prototype, {\r\n\tgetSegmentIndex: function () {\r\n\t\treturn this.segmentIndex;\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.coord;\r\n\t},\r\n\tprint: function (out) {\r\n\t\tout.print(this.coord);\r\n\t\tout.print(\" seg # = \" + this.segmentIndex);\r\n\t\tout.println(\" dist = \" + this.dist);\r\n\t},\r\n\tcompareTo: function (obj) {\r\n\t\tvar other = obj;\r\n\t\treturn this.compare(other.segmentIndex, other.dist);\r\n\t},\r\n\tisEndPoint: function (maxSegmentIndex) {\r\n\t\tif (this.segmentIndex === 0 && this.dist === 0.0) return true;\r\n\t\tif (this.segmentIndex === maxSegmentIndex) return true;\r\n\t\treturn false;\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn this.coord + \" seg # = \" + this.segmentIndex + \" dist = \" + this.dist;\r\n\t},\r\n\tgetDistance: function () {\r\n\t\treturn this.dist;\r\n\t},\r\n\tcompare: function (segmentIndex, dist) {\r\n\t\tif (this.segmentIndex < segmentIndex) return -1;\r\n\t\tif (this.segmentIndex > segmentIndex) return 1;\r\n\t\tif (this.dist < dist) return -1;\r\n\t\tif (this.dist > dist) return 1;\r\n\t\treturn 0;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeIntersection;\r\n\t}\r\n});\r\n","import EdgeIntersection from './EdgeIntersection';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport Label from './Label';\r\nimport Edge from './Edge';\r\nimport TreeMap from '../../../../java/util/TreeMap';\r\nexport default function EdgeIntersectionList() {\r\n\tthis.nodeMap = new TreeMap();\r\n\tthis.edge = null;\r\n\tlet edge = arguments[0];\r\n\tthis.edge = edge;\r\n}\r\nextend(EdgeIntersectionList.prototype, {\r\n\tprint: function (out) {\r\n\t\tout.println(\"Intersections:\");\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar ei = it.next();\r\n\t\t\tei.print(out);\r\n\t\t}\r\n\t},\r\n\titerator: function () {\r\n\t\treturn this.nodeMap.values().iterator();\r\n\t},\r\n\taddSplitEdges: function (edgeList) {\r\n\t\tthis.addEndpoints();\r\n\t\tvar it = this.iterator();\r\n\t\tvar eiPrev = it.next();\r\n\t\twhile (it.hasNext()) {\r\n\t\t\tvar ei = it.next();\r\n\t\t\tvar newEdge = this.createSplitEdge(eiPrev, ei);\r\n\t\t\tedgeList.add(newEdge);\r\n\t\t\teiPrev = ei;\r\n\t\t}\r\n\t},\r\n\taddEndpoints: function () {\r\n\t\tvar maxSegIndex = this.edge.pts.length - 1;\r\n\t\tthis.add(this.edge.pts[0], 0, 0.0);\r\n\t\tthis.add(this.edge.pts[maxSegIndex], maxSegIndex, 0.0);\r\n\t},\r\n\tcreateSplitEdge: function (ei0, ei1) {\r\n\t\tvar npts = ei1.segmentIndex - ei0.segmentIndex + 2;\r\n\t\tvar lastSegStartPt = this.edge.pts[ei1.segmentIndex];\r\n\t\tvar useIntPt1 = ei1.dist > 0.0 || !ei1.coord.equals2D(lastSegStartPt);\r\n\t\tif (!useIntPt1) {\r\n\t\t\tnpts--;\r\n\t\t}\r\n\t\tvar pts = new Array(npts).fill(null);\r\n\t\tvar ipt = 0;\r\n\t\tpts[ipt++] = new Coordinate(ei0.coord);\r\n\t\tfor (var i = ei0.segmentIndex + 1; i <= ei1.segmentIndex; i++) {\r\n\t\t\tpts[ipt++] = this.edge.pts[i];\r\n\t\t}\r\n\t\tif (useIntPt1) pts[ipt] = ei1.coord;\r\n\t\treturn new Edge(pts, new Label(this.edge.label));\r\n\t},\r\n\tadd: function (intPt, segmentIndex, dist) {\r\n\t\tvar eiNew = new EdgeIntersection(intPt, segmentIndex, dist);\r\n\t\tvar ei = this.nodeMap.get(eiNew);\r\n\t\tif (ei !== null) {\r\n\t\t\treturn ei;\r\n\t\t}\r\n\t\tthis.nodeMap.put(eiNew, eiNew);\r\n\t\treturn eiNew;\r\n\t},\r\n\tisIntersection: function (pt) {\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar ei = it.next();\r\n\t\t\tif (ei.coord.equals(pt)) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeIntersectionList;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport Integer from '../../../../../java/lang/Integer';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Quadrant from '../Quadrant';\r\nexport default function MonotoneChainIndexer() {}\r\nextend(MonotoneChainIndexer.prototype, {\r\n\tgetChainStartIndices: function (pts) {\r\n\t\tvar start = 0;\r\n\t\tvar startIndexList = new ArrayList();\r\n\t\tstartIndexList.add(new Integer(start));\r\n\t\tdo {\r\n\t\t\tvar last = this.findChainEnd(pts, start);\r\n\t\t\tstartIndexList.add(new Integer(last));\r\n\t\t\tstart = last;\r\n\t\t} while (start < pts.length - 1);\r\n\t\tvar startIndex = MonotoneChainIndexer.toIntArray(startIndexList);\r\n\t\treturn startIndex;\r\n\t},\r\n\tfindChainEnd: function (pts, start) {\r\n\t\tvar chainQuad = Quadrant.quadrant(pts[start], pts[start + 1]);\r\n\t\tvar last = start + 1;\r\n\t\twhile (last < pts.length) {\r\n\t\t\tvar quad = Quadrant.quadrant(pts[last - 1], pts[last]);\r\n\t\t\tif (quad !== chainQuad) break;\r\n\t\t\tlast++;\r\n\t\t}\r\n\t\treturn last - 1;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MonotoneChainIndexer;\r\n\t}\r\n});\r\nMonotoneChainIndexer.toIntArray = function (list) {\r\n\tvar array = new Array(list.size()).fill(null);\r\n\tfor (var i = 0; i < array.length; i++) {\r\n\t\tarray[i] = list.get(i).intValue();\r\n\t}\r\n\treturn array;\r\n};\r\n","import extend from '../../../../../extend';\r\nimport MonotoneChainIndexer from './MonotoneChainIndexer';\r\nimport Envelope from '../../geom/Envelope';\r\nexport default function MonotoneChainEdge() {\r\n\tthis.e = null;\r\n\tthis.pts = null;\r\n\tthis.startIndex = null;\r\n\tthis.env1 = new Envelope();\r\n\tthis.env2 = new Envelope();\r\n\tlet e = arguments[0];\r\n\tthis.e = e;\r\n\tthis.pts = e.getCoordinates();\r\n\tvar mcb = new MonotoneChainIndexer();\r\n\tthis.startIndex = mcb.getChainStartIndices(this.pts);\r\n}\r\nextend(MonotoneChainEdge.prototype, {\r\n\tgetCoordinates: function () {\r\n\t\treturn this.pts;\r\n\t},\r\n\tgetMaxX: function (chainIndex) {\r\n\t\tvar x1 = this.pts[this.startIndex[chainIndex]].x;\r\n\t\tvar x2 = this.pts[this.startIndex[chainIndex + 1]].x;\r\n\t\treturn x1 > x2 ? x1 : x2;\r\n\t},\r\n\tgetMinX: function (chainIndex) {\r\n\t\tvar x1 = this.pts[this.startIndex[chainIndex]].x;\r\n\t\tvar x2 = this.pts[this.startIndex[chainIndex + 1]].x;\r\n\t\treturn x1 < x2 ? x1 : x2;\r\n\t},\r\n\tcomputeIntersectsForChain: function () {\r\n\t\tif (arguments.length === 4) {\r\n\t\t\tlet chainIndex0 = arguments[0], mce = arguments[1], chainIndex1 = arguments[2], si = arguments[3];\r\n\t\t\tthis.computeIntersectsForChain(this.startIndex[chainIndex0], this.startIndex[chainIndex0 + 1], mce, mce.startIndex[chainIndex1], mce.startIndex[chainIndex1 + 1], si);\r\n\t\t} else if (arguments.length === 6) {\r\n\t\t\tlet start0 = arguments[0], end0 = arguments[1], mce = arguments[2], start1 = arguments[3], end1 = arguments[4], ei = arguments[5];\r\n\t\t\tvar p00 = this.pts[start0];\r\n\t\t\tvar p01 = this.pts[end0];\r\n\t\t\tvar p10 = mce.pts[start1];\r\n\t\t\tvar p11 = mce.pts[end1];\r\n\t\t\tif (end0 - start0 === 1 && end1 - start1 === 1) {\r\n\t\t\t\tei.addIntersections(this.e, start0, mce.e, start1);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tthis.env1.init(p00, p01);\r\n\t\t\tthis.env2.init(p10, p11);\r\n\t\t\tif (!this.env1.intersects(this.env2)) return null;\r\n\t\t\tvar mid0 = Math.trunc((start0 + end0) / 2);\r\n\t\t\tvar mid1 = Math.trunc((start1 + end1) / 2);\r\n\t\t\tif (start0 < mid0) {\r\n\t\t\t\tif (start1 < mid1) this.computeIntersectsForChain(start0, mid0, mce, start1, mid1, ei);\r\n\t\t\t\tif (mid1 < end1) this.computeIntersectsForChain(start0, mid0, mce, mid1, end1, ei);\r\n\t\t\t}\r\n\t\t\tif (mid0 < end0) {\r\n\t\t\t\tif (start1 < mid1) this.computeIntersectsForChain(mid0, end0, mce, start1, mid1, ei);\r\n\t\t\t\tif (mid1 < end1) this.computeIntersectsForChain(mid0, end0, mce, mid1, end1, ei);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetStartIndexes: function () {\r\n\t\treturn this.startIndex;\r\n\t},\r\n\tcomputeIntersects: function (mce, si) {\r\n\t\tfor (var i = 0; i < this.startIndex.length - 1; i++) {\r\n\t\t\tfor (var j = 0; j < mce.startIndex.length - 1; j++) {\r\n\t\t\t\tthis.computeIntersectsForChain(i, mce, j, si);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MonotoneChainEdge;\r\n\t}\r\n});\r\n","import Location from '../geom/Location';\r\nimport Position from './Position';\r\nimport extend from '../../../../extend';\r\nexport default function Depth() {\r\n\tthis.depth = Array(2).fill().map(() => Array(3));\r\n\tfor (var i = 0; i < 2; i++) {\r\n\t\tfor (var j = 0; j < 3; j++) {\r\n\t\t\tthis.depth[i][j] = Depth.NULL_VALUE;\r\n\t\t}\r\n\t}\r\n}\r\nextend(Depth.prototype, {\r\n\tgetDepth: function (geomIndex, posIndex) {\r\n\t\treturn this.depth[geomIndex][posIndex];\r\n\t},\r\n\tsetDepth: function (geomIndex, posIndex, depthValue) {\r\n\t\tthis.depth[geomIndex][posIndex] = depthValue;\r\n\t},\r\n\tisNull: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\tfor (var j = 0; j < 3; j++) {\r\n\t\t\t\t\tif (this.depth[i][j] !== Depth.NULL_VALUE) return false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet geomIndex = arguments[0];\r\n\t\t\treturn this.depth[geomIndex][1] === Depth.NULL_VALUE;\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet geomIndex = arguments[0], posIndex = arguments[1];\r\n\t\t\treturn this.depth[geomIndex][posIndex] === Depth.NULL_VALUE;\r\n\t\t}\r\n\t},\r\n\tnormalize: function () {\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tif (!this.isNull(i)) {\r\n\t\t\t\tvar minDepth = this.depth[i][1];\r\n\t\t\t\tif (this.depth[i][2] < minDepth) minDepth = this.depth[i][2];\r\n\t\t\t\tif (minDepth < 0) minDepth = 0;\r\n\t\t\t\tfor (var j = 1; j < 3; j++) {\r\n\t\t\t\t\tvar newValue = 0;\r\n\t\t\t\t\tif (this.depth[i][j] > minDepth) newValue = 1;\r\n\t\t\t\t\tthis.depth[i][j] = newValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetDelta: function (geomIndex) {\r\n\t\treturn this.depth[geomIndex][Position.RIGHT] - this.depth[geomIndex][Position.LEFT];\r\n\t},\r\n\tgetLocation: function (geomIndex, posIndex) {\r\n\t\tif (this.depth[geomIndex][posIndex] <= 0) return Location.EXTERIOR;\r\n\t\treturn Location.INTERIOR;\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn \"A: \" + this.depth[0][1] + \",\" + this.depth[0][2] + \" B: \" + this.depth[1][1] + \",\" + this.depth[1][2];\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet lbl = arguments[0];\r\n\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\tfor (var j = 1; j < 3; j++) {\r\n\t\t\t\t\tvar loc = lbl.getLocation(i, j);\r\n\t\t\t\t\tif (loc === Location.EXTERIOR || loc === Location.INTERIOR) {\r\n\t\t\t\t\t\tif (this.isNull(i, j)) {\r\n\t\t\t\t\t\t\tthis.depth[i][j] = Depth.depthAtLocation(loc);\r\n\t\t\t\t\t\t} else this.depth[i][j] += Depth.depthAtLocation(loc);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet geomIndex = arguments[0], posIndex = arguments[1], location = arguments[2];\r\n\t\t\tif (location === Location.INTERIOR) this.depth[geomIndex][posIndex]++;\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Depth;\r\n\t}\r\n});\r\nDepth.depthAtLocation = function (location) {\r\n\tif (location === Location.EXTERIOR) return 0;\r\n\tif (location === Location.INTERIOR) return 1;\r\n\treturn Depth.NULL_VALUE;\r\n};\r\nDepth.NULL_VALUE = -1;\r\n","import StringBuffer from '../../../../java/lang/StringBuffer';\r\nimport EdgeIntersectionList from './EdgeIntersectionList';\r\nimport MonotoneChainEdge from './index/MonotoneChainEdge';\r\nimport Position from './Position';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport Label from './Label';\r\nimport Envelope from '../geom/Envelope';\r\nimport inherits from '../../../../inherits';\r\nimport Depth from './Depth';\r\nimport GraphComponent from './GraphComponent';\r\nexport default function Edge() {\r\n\tGraphComponent.apply(this);\r\n\tthis.pts = null;\r\n\tthis.env = null;\r\n\tthis.eiList = new EdgeIntersectionList(this);\r\n\tthis.name = null;\r\n\tthis.mce = null;\r\n\tthis._isIsolated = true;\r\n\tthis.depth = new Depth();\r\n\tthis.depthDelta = 0;\r\n\tif (arguments.length === 1) {\r\n\t\tlet pts = arguments[0];\r\n\t\tEdge.call(this, pts, null);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet pts = arguments[0], label = arguments[1];\r\n\t\tthis.pts = pts;\r\n\t\tthis.label = label;\r\n\t}\r\n}\r\ninherits(Edge, GraphComponent);\r\nextend(Edge.prototype, {\r\n\tgetDepth: function () {\r\n\t\treturn this.depth;\r\n\t},\r\n\tgetCollapsedEdge: function () {\r\n\t\tvar newPts = new Array(2).fill(null);\r\n\t\tnewPts[0] = this.pts[0];\r\n\t\tnewPts[1] = this.pts[1];\r\n\t\tvar newe = new Edge(newPts, Label.toLineLabel(this.label));\r\n\t\treturn newe;\r\n\t},\r\n\tisIsolated: function () {\r\n\t\treturn this._isIsolated;\r\n\t},\r\n\tgetCoordinates: function () {\r\n\t\treturn this.pts;\r\n\t},\r\n\tsetIsolated: function (isIsolated) {\r\n\t\tthis._isIsolated = isIsolated;\r\n\t},\r\n\tsetName: function (name) {\r\n\t\tthis.name = name;\r\n\t},\r\n\tequals: function (o) {\r\n\t\tif (!(o instanceof Edge)) return false;\r\n\t\tvar e = o;\r\n\t\tif (this.pts.length !== e.pts.length) return false;\r\n\t\tvar isEqualForward = true;\r\n\t\tvar isEqualReverse = true;\r\n\t\tvar iRev = this.pts.length;\r\n\t\tfor (var i = 0; i < this.pts.length; i++) {\r\n\t\t\tif (!this.pts[i].equals2D(e.pts[i])) {\r\n\t\t\t\tisEqualForward = false;\r\n\t\t\t}\r\n\t\t\tif (!this.pts[i].equals2D(e.pts[-- iRev])) {\r\n\t\t\t\tisEqualReverse = false;\r\n\t\t\t}\r\n\t\t\tif (!isEqualForward && !isEqualReverse) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tif (this.pts.length > 0) return this.pts[0];\r\n\t\t\treturn null;\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet i = arguments[0];\r\n\t\t\treturn this.pts[i];\r\n\t\t}\r\n\t},\r\n\tprint: function (out) {\r\n\t\tout.print(\"edge \" + this.name + \": \");\r\n\t\tout.print(\"LINESTRING (\");\r\n\t\tfor (var i = 0; i < this.pts.length; i++) {\r\n\t\t\tif (i > 0) out.print(\",\");\r\n\t\t\tout.print(this.pts[i].x + \" \" + this.pts[i].y);\r\n\t\t}\r\n\t\tout.print(\")  \" + this.label + \" \" + this.depthDelta);\r\n\t},\r\n\tcomputeIM: function (im) {\r\n\t\tEdge.updateIM(this.label, im);\r\n\t},\r\n\tisCollapsed: function () {\r\n\t\tif (!this.label.isArea()) return false;\r\n\t\tif (this.pts.length !== 3) return false;\r\n\t\tif (this.pts[0].equals(this.pts[2])) return true;\r\n\t\treturn false;\r\n\t},\r\n\tisClosed: function () {\r\n\t\treturn this.pts[0].equals(this.pts[this.pts.length - 1]);\r\n\t},\r\n\tgetMaximumSegmentIndex: function () {\r\n\t\treturn this.pts.length - 1;\r\n\t},\r\n\tgetDepthDelta: function () {\r\n\t\treturn this.depthDelta;\r\n\t},\r\n\tgetNumPoints: function () {\r\n\t\treturn this.pts.length;\r\n\t},\r\n\tprintReverse: function (out) {\r\n\t\tout.print(\"edge \" + this.name + \": \");\r\n\t\tfor (var i = this.pts.length - 1; i >= 0; i--) {\r\n\t\t\tout.print(this.pts[i] + \" \");\r\n\t\t}\r\n\t\tout.println(\"\");\r\n\t},\r\n\tgetMonotoneChainEdge: function () {\r\n\t\tif (this.mce === null) this.mce = new MonotoneChainEdge(this);\r\n\t\treturn this.mce;\r\n\t},\r\n\tgetEnvelope: function () {\r\n\t\tif (this.env === null) {\r\n\t\t\tthis.env = new Envelope();\r\n\t\t\tfor (var i = 0; i < this.pts.length; i++) {\r\n\t\t\t\tthis.env.expandToInclude(this.pts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.env;\r\n\t},\r\n\taddIntersection: function (li, segmentIndex, geomIndex, intIndex) {\r\n\t\tvar intPt = new Coordinate(li.getIntersection(intIndex));\r\n\t\tvar normalizedSegmentIndex = segmentIndex;\r\n\t\tvar dist = li.getEdgeDistance(geomIndex, intIndex);\r\n\t\tvar nextSegIndex = normalizedSegmentIndex + 1;\r\n\t\tif (nextSegIndex < this.pts.length) {\r\n\t\t\tvar nextPt = this.pts[nextSegIndex];\r\n\t\t\tif (intPt.equals2D(nextPt)) {\r\n\t\t\t\tnormalizedSegmentIndex = nextSegIndex;\r\n\t\t\t\tdist = 0.0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar ei = this.eiList.add(intPt, normalizedSegmentIndex, dist);\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar buf = new StringBuffer();\r\n\t\tbuf.append(\"edge \" + this.name + \": \");\r\n\t\tbuf.append(\"LINESTRING (\");\r\n\t\tfor (var i = 0; i < this.pts.length; i++) {\r\n\t\t\tif (i > 0) buf.append(\",\");\r\n\t\t\tbuf.append(this.pts[i].x + \" \" + this.pts[i].y);\r\n\t\t}\r\n\t\tbuf.append(\")  \" + this.label + \" \" + this.depthDelta);\r\n\t\treturn buf.toString();\r\n\t},\r\n\tisPointwiseEqual: function (e) {\r\n\t\tif (this.pts.length !== e.pts.length) return false;\r\n\t\tfor (var i = 0; i < this.pts.length; i++) {\r\n\t\t\tif (!this.pts[i].equals2D(e.pts[i])) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tsetDepthDelta: function (depthDelta) {\r\n\t\tthis.depthDelta = depthDelta;\r\n\t},\r\n\tgetEdgeIntersectionList: function () {\r\n\t\treturn this.eiList;\r\n\t},\r\n\taddIntersections: function (li, segmentIndex, geomIndex) {\r\n\t\tfor (var i = 0; i < li.getIntersectionNum(); i++) {\r\n\t\t\tthis.addIntersection(li, segmentIndex, geomIndex, i);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Edge;\r\n\t}\r\n});\r\nEdge.updateIM = function () {\r\n\tif (arguments.length === 2) {\r\n\t\tlet label = arguments[0], im = arguments[1];\r\n\t\tim.setAtLeastIfValid(label.getLocation(0, Position.ON), label.getLocation(1, Position.ON), 1);\r\n\t\tif (label.isArea()) {\r\n\t\t\tim.setAtLeastIfValid(label.getLocation(0, Position.LEFT), label.getLocation(1, Position.LEFT), 2);\r\n\t\t\tim.setAtLeastIfValid(label.getLocation(0, Position.RIGHT), label.getLocation(1, Position.RIGHT), 2);\r\n\t\t}\r\n\t} else return GraphComponent.prototype.updateIM.apply(this, arguments);\r\n};\r\n","import PointLocator from '../algorithm/PointLocator';\r\nimport Location from '../geom/Location';\r\nimport LineString from '../geom/LineString';\r\nimport HashMap from '../../../../java/util/HashMap';\r\nimport CGAlgorithms from '../algorithm/CGAlgorithms';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport Position from './Position';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport Point from '../geom/Point';\r\nimport Polygon from '../geom/Polygon';\r\nimport MultiPoint from '../geom/MultiPoint';\r\nimport SimpleMCSweepLineIntersector from './index/SimpleMCSweepLineIntersector';\r\nimport LinearRing from '../geom/LinearRing';\r\nimport BoundaryNodeRule from '../algorithm/BoundaryNodeRule';\r\nimport extend from '../../../../extend';\r\nimport SegmentIntersector from './index/SegmentIntersector';\r\nimport MultiPolygon from '../geom/MultiPolygon';\r\nimport Label from './Label';\r\nimport GeometryCollection from '../geom/GeometryCollection';\r\nimport CoordinateArrays from '../geom/CoordinateArrays';\r\nimport Polygonal from '../geom/Polygonal';\r\nimport IndexedPointInAreaLocator from '../algorithm/locate/IndexedPointInAreaLocator';\r\nimport Assert from '../util/Assert';\r\nimport Edge from './Edge';\r\nimport inherits from '../../../../inherits';\r\nimport MultiLineString from '../geom/MultiLineString';\r\nimport PlanarGraph from './PlanarGraph';\r\nexport default function GeometryGraph() {\r\n\tPlanarGraph.apply(this);\r\n\tthis.parentGeom = null;\r\n\tthis.lineEdgeMap = new HashMap();\r\n\tthis.boundaryNodeRule = null;\r\n\tthis.useBoundaryDeterminationRule = true;\r\n\tthis.argIndex = null;\r\n\tthis.boundaryNodes = null;\r\n\tthis._hasTooFewPoints = false;\r\n\tthis.invalidPoint = null;\r\n\tthis.areaPtLocator = null;\r\n\tthis.ptLocator = new PointLocator();\r\n\tif (arguments.length === 2) {\r\n\t\tlet argIndex = arguments[0], parentGeom = arguments[1];\r\n\t\tGeometryGraph.call(this, argIndex, parentGeom, BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet argIndex = arguments[0], parentGeom = arguments[1], boundaryNodeRule = arguments[2];\r\n\t\tthis.argIndex = argIndex;\r\n\t\tthis.parentGeom = parentGeom;\r\n\t\tthis.boundaryNodeRule = boundaryNodeRule;\r\n\t\tif (parentGeom !== null) {\r\n\t\t\tthis.add(parentGeom);\r\n\t\t}\r\n\t}\r\n}\r\ninherits(GeometryGraph, PlanarGraph);\r\nextend(GeometryGraph.prototype, {\r\n\tinsertBoundaryPoint: function (argIndex, coord) {\r\n\t\tvar n = this.nodes.addNode(coord);\r\n\t\tvar lbl = n.getLabel();\r\n\t\tvar boundaryCount = 1;\r\n\t\tvar loc = Location.NONE;\r\n\t\tloc = lbl.getLocation(argIndex, Position.ON);\r\n\t\tif (loc === Location.BOUNDARY) boundaryCount++;\r\n\t\tvar newLoc = GeometryGraph.determineBoundary(this.boundaryNodeRule, boundaryCount);\r\n\t\tlbl.setLocation(argIndex, newLoc);\r\n\t},\r\n\tcomputeSelfNodes: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet li = arguments[0], computeRingSelfNodes = arguments[1];\r\n\t\t\treturn this.computeSelfNodes(li, computeRingSelfNodes, false);\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet li = arguments[0], computeRingSelfNodes = arguments[1], isDoneIfProperInt = arguments[2];\r\n\t\t\tvar si = new SegmentIntersector(li, true, false);\r\n\t\t\tsi.setIsDoneIfProperInt(isDoneIfProperInt);\r\n\t\t\tvar esi = this.createEdgeSetIntersector();\r\n\t\t\tvar isRings = this.parentGeom instanceof LinearRing || this.parentGeom instanceof Polygon || this.parentGeom instanceof MultiPolygon;\r\n\t\t\tvar computeAllSegments = computeRingSelfNodes || !isRings;\r\n\t\t\tesi.computeIntersections(this.edges, si, computeAllSegments);\r\n\t\t\tthis.addSelfIntersectionNodes(this.argIndex);\r\n\t\t\treturn si;\r\n\t\t}\r\n\t},\r\n\tcomputeSplitEdges: function (edgelist) {\r\n\t\tfor (var i = this.edges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\te.eiList.addSplitEdges(edgelist);\r\n\t\t}\r\n\t},\r\n\tcomputeEdgeIntersections: function (g, li, includeProper) {\r\n\t\tvar si = new SegmentIntersector(li, includeProper, true);\r\n\t\tsi.setBoundaryNodes(this.getBoundaryNodes(), g.getBoundaryNodes());\r\n\t\tvar esi = this.createEdgeSetIntersector();\r\n\t\tesi.computeIntersections(this.edges, g.edges, si);\r\n\t\treturn si;\r\n\t},\r\n\tgetGeometry: function () {\r\n\t\treturn this.parentGeom;\r\n\t},\r\n\tgetBoundaryNodeRule: function () {\r\n\t\treturn this.boundaryNodeRule;\r\n\t},\r\n\thasTooFewPoints: function () {\r\n\t\treturn this._hasTooFewPoints;\r\n\t},\r\n\taddPoint: function () {\r\n\t\tif (arguments[0] instanceof Point) {\r\n\t\t\tlet p = arguments[0];\r\n\t\t\tvar coord = p.getCoordinate();\r\n\t\t\tthis.insertPoint(this.argIndex, coord, Location.INTERIOR);\r\n\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet pt = arguments[0];\r\n\t\t\tthis.insertPoint(this.argIndex, pt, Location.INTERIOR);\r\n\t\t}\r\n\t},\r\n\taddPolygon: function (p) {\r\n\t\tthis.addPolygonRing(p.getExteriorRing(), Location.EXTERIOR, Location.INTERIOR);\r\n\t\tfor (var i = 0; i < p.getNumInteriorRing(); i++) {\r\n\t\t\tvar hole = p.getInteriorRingN(i);\r\n\t\t\tthis.addPolygonRing(hole, Location.INTERIOR, Location.EXTERIOR);\r\n\t\t}\r\n\t},\r\n\taddEdge: function (e) {\r\n\t\tthis.insertEdge(e);\r\n\t\tvar coord = e.getCoordinates();\r\n\t\tthis.insertPoint(this.argIndex, coord[0], Location.BOUNDARY);\r\n\t\tthis.insertPoint(this.argIndex, coord[coord.length - 1], Location.BOUNDARY);\r\n\t},\r\n\taddLineString: function (line) {\r\n\t\tvar coord = CoordinateArrays.removeRepeatedPoints(line.getCoordinates());\r\n\t\tif (coord.length < 2) {\r\n\t\t\tthis._hasTooFewPoints = true;\r\n\t\t\tthis.invalidPoint = coord[0];\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar e = new Edge(coord, new Label(this.argIndex, Location.INTERIOR));\r\n\t\tthis.lineEdgeMap.put(line, e);\r\n\t\tthis.insertEdge(e);\r\n\t\tAssert.isTrue(coord.length >= 2, \"found LineString with single point\");\r\n\t\tthis.insertBoundaryPoint(this.argIndex, coord[0]);\r\n\t\tthis.insertBoundaryPoint(this.argIndex, coord[coord.length - 1]);\r\n\t},\r\n\tgetInvalidPoint: function () {\r\n\t\treturn this.invalidPoint;\r\n\t},\r\n\tgetBoundaryPoints: function () {\r\n\t\tvar coll = this.getBoundaryNodes();\r\n\t\tvar pts = new Array(coll.size()).fill(null);\r\n\t\tvar i = 0;\r\n\t\tfor (var it = coll.iterator(); it.hasNext(); ) {\r\n\t\t\tvar node = it.next();\r\n\t\t\tpts[i++] = node.getCoordinate().copy();\r\n\t\t}\r\n\t\treturn pts;\r\n\t},\r\n\tgetBoundaryNodes: function () {\r\n\t\tif (this.boundaryNodes === null) this.boundaryNodes = this.nodes.getBoundaryNodes(this.argIndex);\r\n\t\treturn this.boundaryNodes;\r\n\t},\r\n\taddSelfIntersectionNode: function (argIndex, coord, loc) {\r\n\t\tif (this.isBoundaryNode(argIndex, coord)) return null;\r\n\t\tif (loc === Location.BOUNDARY && this.useBoundaryDeterminationRule) this.insertBoundaryPoint(argIndex, coord); else this.insertPoint(argIndex, coord, loc);\r\n\t},\r\n\taddPolygonRing: function (lr, cwLeft, cwRight) {\r\n\t\tif (lr.isEmpty()) return null;\r\n\t\tvar coord = CoordinateArrays.removeRepeatedPoints(lr.getCoordinates());\r\n\t\tif (coord.length < 4) {\r\n\t\t\tthis._hasTooFewPoints = true;\r\n\t\t\tthis.invalidPoint = coord[0];\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar left = cwLeft;\r\n\t\tvar right = cwRight;\r\n\t\tif (CGAlgorithms.isCCW(coord)) {\r\n\t\t\tleft = cwRight;\r\n\t\t\tright = cwLeft;\r\n\t\t}\r\n\t\tvar e = new Edge(coord, new Label(this.argIndex, Location.BOUNDARY, left, right));\r\n\t\tthis.lineEdgeMap.put(lr, e);\r\n\t\tthis.insertEdge(e);\r\n\t\tthis.insertPoint(this.argIndex, coord[0], Location.BOUNDARY);\r\n\t},\r\n\tinsertPoint: function (argIndex, coord, onLocation) {\r\n\t\tvar n = this.nodes.addNode(coord);\r\n\t\tvar lbl = n.getLabel();\r\n\t\tif (lbl === null) {\r\n\t\t\tn.label = new Label(argIndex, onLocation);\r\n\t\t} else lbl.setLocation(argIndex, onLocation);\r\n\t},\r\n\tcreateEdgeSetIntersector: function () {\r\n\t\treturn new SimpleMCSweepLineIntersector();\r\n\t},\r\n\taddSelfIntersectionNodes: function (argIndex) {\r\n\t\tfor (var i = this.edges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tvar eLoc = e.getLabel().getLocation(argIndex);\r\n\t\t\tfor (var eiIt = e.eiList.iterator(); eiIt.hasNext(); ) {\r\n\t\t\t\tvar ei = eiIt.next();\r\n\t\t\t\tthis.addSelfIntersectionNode(argIndex, ei.coord, eLoc);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet g = arguments[0];\r\n\t\t\tif (g.isEmpty()) return null;\r\n\t\t\tif (g instanceof MultiPolygon) this.useBoundaryDeterminationRule = false;\r\n\t\t\tif (g instanceof Polygon) this.addPolygon(g); else if (g instanceof LineString) this.addLineString(g); else if (g instanceof Point) this.addPoint(g); else if (g instanceof MultiPoint) this.addCollection(g); else if (g instanceof MultiLineString) this.addCollection(g); else if (g instanceof MultiPolygon) this.addCollection(g); else if (g instanceof GeometryCollection) this.addCollection(g); else throw new UnsupportedOperationException(g.getClass().getName());\r\n\t\t} else return PlanarGraph.prototype.add.apply(this, arguments);\r\n\t},\r\n\taddCollection: function (gc) {\r\n\t\tfor (var i = 0; i < gc.getNumGeometries(); i++) {\r\n\t\t\tvar g = gc.getGeometryN(i);\r\n\t\t\tthis.add(g);\r\n\t\t}\r\n\t},\r\n\tlocate: function (pt) {\r\n\t\tif (hasInterface(this.parentGeom, Polygonal) && this.parentGeom.getNumGeometries() > 50) {\r\n\t\t\tif (this.areaPtLocator === null) {\r\n\t\t\t\tthis.areaPtLocator = new IndexedPointInAreaLocator(this.parentGeom);\r\n\t\t\t}\r\n\t\t\treturn this.areaPtLocator.locate(pt);\r\n\t\t}\r\n\t\treturn this.ptLocator.locate(pt, this.parentGeom);\r\n\t},\r\n\tfindEdge: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet line = arguments[0];\r\n\t\t\treturn this.lineEdgeMap.get(line);\r\n\t\t} else return PlanarGraph.prototype.findEdge.apply(this, arguments);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryGraph;\r\n\t}\r\n});\r\nGeometryGraph.determineBoundary = function (boundaryNodeRule, boundaryCount) {\r\n\treturn boundaryNodeRule.isInBoundary(boundaryCount) ? Location.BOUNDARY : Location.INTERIOR;\r\n};\r\n","import BoundaryNodeRule from '../algorithm/BoundaryNodeRule';\r\nimport extend from '../../../../extend';\r\nimport GeometryGraph from '../geomgraph/GeometryGraph';\r\nimport RobustLineIntersector from '../algorithm/RobustLineIntersector';\r\nexport default function GeometryGraphOperation() {\r\n\tthis.li = new RobustLineIntersector();\r\n\tthis.resultPrecisionModel = null;\r\n\tthis.arg = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet g0 = arguments[0];\r\n\t\tthis.setComputationPrecision(g0.getPrecisionModel());\r\n\t\tthis.arg = new Array(1).fill(null);\r\n\t\tthis.arg[0] = new GeometryGraph(0, g0);\r\n\t\t;\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet g0 = arguments[0], g1 = arguments[1];\r\n\t\tGeometryGraphOperation.call(this, g0, g1, BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet g0 = arguments[0], g1 = arguments[1], boundaryNodeRule = arguments[2];\r\n\t\tif (g0.getPrecisionModel().compareTo(g1.getPrecisionModel()) >= 0) this.setComputationPrecision(g0.getPrecisionModel()); else this.setComputationPrecision(g1.getPrecisionModel());\r\n\t\tthis.arg = new Array(2).fill(null);\r\n\t\tthis.arg[0] = new GeometryGraph(0, g0, boundaryNodeRule);\r\n\t\tthis.arg[1] = new GeometryGraph(1, g1, boundaryNodeRule);\r\n\t}\r\n}\r\nextend(GeometryGraphOperation.prototype, {\r\n\tgetArgGeometry: function (i) {\r\n\t\treturn this.arg[i].getGeometry();\r\n\t},\r\n\tsetComputationPrecision: function (pm) {\r\n\t\tthis.resultPrecisionModel = pm;\r\n\t\tthis.li.setPrecisionModel(this.resultPrecisionModel);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryGraphOperation;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nimport CoordinateArrays from '../geom/CoordinateArrays';\r\nexport default function OrientedCoordinateArray() {\r\n\tthis.pts = null;\r\n\tthis._orientation = null;\r\n\tlet pts = arguments[0];\r\n\tthis.pts = pts;\r\n\tthis._orientation = OrientedCoordinateArray.orientation(pts);\r\n}\r\nextend(OrientedCoordinateArray.prototype, {\r\n\tcompareTo: function (o1) {\r\n\t\tvar oca = o1;\r\n\t\tvar comp = OrientedCoordinateArray.compareOriented(this.pts, this._orientation, oca.pts, oca._orientation);\r\n\t\treturn comp;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn OrientedCoordinateArray;\r\n\t}\r\n});\r\nOrientedCoordinateArray.orientation = function (pts) {\r\n\treturn CoordinateArrays.increasingDirection(pts) === 1;\r\n};\r\nOrientedCoordinateArray.compareOriented = function (pts1, orientation1, pts2, orientation2) {\r\n\tvar dir1 = orientation1 ? 1 : -1;\r\n\tvar dir2 = orientation2 ? 1 : -1;\r\n\tvar limit1 = orientation1 ? pts1.length : -1;\r\n\tvar limit2 = orientation2 ? pts2.length : -1;\r\n\tvar i1 = orientation1 ? 0 : pts1.length - 1;\r\n\tvar i2 = orientation2 ? 0 : pts2.length - 1;\r\n\tvar comp = 0;\r\n\twhile (true) {\r\n\t\tvar compPt = pts1[i1].compareTo(pts2[i2]);\r\n\t\tif (compPt !== 0) return compPt;\r\n\t\ti1 += dir1;\r\n\t\ti2 += dir2;\r\n\t\tvar done1 = i1 === limit1;\r\n\t\tvar done2 = i2 === limit2;\r\n\t\tif (done1 && !done2) return -1;\r\n\t\tif (!done1 && done2) return 1;\r\n\t\tif (done1 && done2) return 0;\r\n\t}\r\n};\r\n","import OrientedCoordinateArray from '../noding/OrientedCoordinateArray';\r\nimport extend from '../../../../extend';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport TreeMap from '../../../../java/util/TreeMap';\r\nexport default function EdgeList() {\r\n\tthis.edges = new ArrayList();\r\n\tthis.ocaMap = new TreeMap();\r\n}\r\nextend(EdgeList.prototype, {\r\n\tprint: function (out) {\r\n\t\tout.print(\"MULTILINESTRING ( \");\r\n\t\tfor (var j = 0; j < this.edges.size(); j++) {\r\n\t\t\tvar e = this.edges.get(j);\r\n\t\t\tif (j > 0) out.print(\",\");\r\n\t\t\tout.print(\"(\");\r\n\t\t\tvar pts = e.getCoordinates();\r\n\t\t\tfor (var i = 0; i < pts.length; i++) {\r\n\t\t\t\tif (i > 0) out.print(\",\");\r\n\t\t\t\tout.print(pts[i].x + \" \" + pts[i].y);\r\n\t\t\t}\r\n\t\t\tout.println(\")\");\r\n\t\t}\r\n\t\tout.print(\")  \");\r\n\t},\r\n\taddAll: function (edgeColl) {\r\n\t\tfor (var i = edgeColl.iterator(); i.hasNext(); ) {\r\n\t\t\tthis.add(i.next());\r\n\t\t}\r\n\t},\r\n\tfindEdgeIndex: function (e) {\r\n\t\tfor (var i = 0; i < this.edges.size(); i++) {\r\n\t\t\tif (this.edges.get(i).equals(e)) return i;\r\n\t\t}\r\n\t\treturn -1;\r\n\t},\r\n\titerator: function () {\r\n\t\treturn this.edges.iterator();\r\n\t},\r\n\tgetEdges: function () {\r\n\t\treturn this.edges;\r\n\t},\r\n\tget: function (i) {\r\n\t\treturn this.edges.get(i);\r\n\t},\r\n\tfindEqualEdge: function (e) {\r\n\t\tvar oca = new OrientedCoordinateArray(e.getCoordinates());\r\n\t\tvar matchEdge = this.ocaMap.get(oca);\r\n\t\treturn matchEdge;\r\n\t},\r\n\tadd: function (e) {\r\n\t\tthis.edges.add(e);\r\n\t\tvar oca = new OrientedCoordinateArray(e.getCoordinates());\r\n\t\tthis.ocaMap.put(oca, e);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeList;\r\n\t}\r\n});\r\n","import PointLocator from '../../algorithm/PointLocator';\r\nimport Location from '../../geom/Location';\r\nimport EdgeNodingValidator from '../../geomgraph/EdgeNodingValidator';\r\nimport GeometryCollectionMapper from '../../geom/util/GeometryCollectionMapper';\r\nimport PolygonBuilder from './PolygonBuilder';\r\nimport Position from '../../geomgraph/Position';\r\nimport LineBuilder from './LineBuilder';\r\nimport PointBuilder from './PointBuilder';\r\nimport SnapIfNeededOverlayOp from './snap/SnapIfNeededOverlayOp';\r\nimport extend from '../../../../../extend';\r\nimport Label from '../../geomgraph/Label';\r\nimport OverlayNodeFactory from './OverlayNodeFactory';\r\nimport GeometryGraphOperation from '../GeometryGraphOperation';\r\nimport EdgeList from '../../geomgraph/EdgeList';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Assert from '../../util/Assert';\r\nimport inherits from '../../../../../inherits';\r\nimport PlanarGraph from '../../geomgraph/PlanarGraph';\r\nexport default function OverlayOp() {\r\n\tthis.ptLocator = new PointLocator();\r\n\tthis.geomFact = null;\r\n\tthis.resultGeom = null;\r\n\tthis.graph = null;\r\n\tthis.edgeList = new EdgeList();\r\n\tthis.resultPolyList = new ArrayList();\r\n\tthis.resultLineList = new ArrayList();\r\n\tthis.resultPointList = new ArrayList();\r\n\tlet g0 = arguments[0], g1 = arguments[1];\r\n\tGeometryGraphOperation.call(this, g0, g1);\r\n\tthis.graph = new PlanarGraph(new OverlayNodeFactory());\r\n\tthis.geomFact = g0.getFactory();\r\n}\r\ninherits(OverlayOp, GeometryGraphOperation);\r\nextend(OverlayOp.prototype, {\r\n\tinsertUniqueEdge: function (e) {\r\n\t\tvar existingEdge = this.edgeList.findEqualEdge(e);\r\n\t\tif (existingEdge !== null) {\r\n\t\t\tvar existingLabel = existingEdge.getLabel();\r\n\t\t\tvar labelToMerge = e.getLabel();\r\n\t\t\tif (!existingEdge.isPointwiseEqual(e)) {\r\n\t\t\t\tlabelToMerge = new Label(e.getLabel());\r\n\t\t\t\tlabelToMerge.flip();\r\n\t\t\t}\r\n\t\t\tvar depth = existingEdge.getDepth();\r\n\t\t\tif (depth.isNull()) {\r\n\t\t\t\tdepth.add(existingLabel);\r\n\t\t\t}\r\n\t\t\tdepth.add(labelToMerge);\r\n\t\t\texistingLabel.merge(labelToMerge);\r\n\t\t} else {\r\n\t\t\tthis.edgeList.add(e);\r\n\t\t}\r\n\t},\r\n\tgetGraph: function () {\r\n\t\treturn this.graph;\r\n\t},\r\n\tcancelDuplicateResultEdges: function () {\r\n\t\tfor (var it = this.graph.getEdgeEnds().iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tvar sym = de.getSym();\r\n\t\t\tif (de.isInResult() && sym.isInResult()) {\r\n\t\t\t\tde.setInResult(false);\r\n\t\t\t\tsym.setInResult(false);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisCoveredByLA: function (coord) {\r\n\t\tif (this.isCovered(coord, this.resultLineList)) return true;\r\n\t\tif (this.isCovered(coord, this.resultPolyList)) return true;\r\n\t\treturn false;\r\n\t},\r\n\tcomputeGeometry: function (resultPointList, resultLineList, resultPolyList, opcode) {\r\n\t\tvar geomList = new ArrayList();\r\n\t\tgeomList.addAll(resultPointList);\r\n\t\tgeomList.addAll(resultLineList);\r\n\t\tgeomList.addAll(resultPolyList);\r\n\t\tif (geomList.isEmpty()) return OverlayOp.createEmptyResult(opcode, this.arg[0].getGeometry(), this.arg[1].getGeometry(), this.geomFact);\r\n\t\treturn this.geomFact.buildGeometry(geomList);\r\n\t},\r\n\tmergeSymLabels: function () {\r\n\t\tfor (var nodeit = this.graph.getNodes().iterator(); nodeit.hasNext(); ) {\r\n\t\t\tvar node = nodeit.next();\r\n\t\t\tnode.getEdges().mergeSymLabels();\r\n\t\t}\r\n\t},\r\n\tisCovered: function (coord, geomList) {\r\n\t\tfor (var it = geomList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar geom = it.next();\r\n\t\t\tvar loc = this.ptLocator.locate(coord, geom);\r\n\t\t\tif (loc !== Location.EXTERIOR) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\treplaceCollapsedEdges: function () {\r\n\t\tvar newEdges = new ArrayList();\r\n\t\tfor (var it = this.edgeList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tif (e.isCollapsed()) {\r\n\t\t\t\tit.remove();\r\n\t\t\t\tnewEdges.add(e.getCollapsedEdge());\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.edgeList.addAll(newEdges);\r\n\t},\r\n\tupdateNodeLabelling: function () {\r\n\t\tfor (var nodeit = this.graph.getNodes().iterator(); nodeit.hasNext(); ) {\r\n\t\t\tvar node = nodeit.next();\r\n\t\t\tvar lbl = node.getEdges().getLabel();\r\n\t\t\tnode.getLabel().merge(lbl);\r\n\t\t}\r\n\t},\r\n\tgetResultGeometry: function (overlayOpCode) {\r\n\t\tthis.computeOverlay(overlayOpCode);\r\n\t\treturn this.resultGeom;\r\n\t},\r\n\tinsertUniqueEdges: function (edges) {\r\n\t\tfor (var i = edges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tthis.insertUniqueEdge(e);\r\n\t\t}\r\n\t},\r\n\tcomputeOverlay: function (opCode) {\r\n\t\tthis.copyPoints(0);\r\n\t\tthis.copyPoints(1);\r\n\t\tthis.arg[0].computeSelfNodes(this.li, false);\r\n\t\tthis.arg[1].computeSelfNodes(this.li, false);\r\n\t\tthis.arg[0].computeEdgeIntersections(this.arg[1], this.li, true);\r\n\t\tvar baseSplitEdges = new ArrayList();\r\n\t\tthis.arg[0].computeSplitEdges(baseSplitEdges);\r\n\t\tthis.arg[1].computeSplitEdges(baseSplitEdges);\r\n\t\tvar splitEdges = baseSplitEdges;\r\n\t\tthis.insertUniqueEdges(baseSplitEdges);\r\n\t\tthis.computeLabelsFromDepths();\r\n\t\tthis.replaceCollapsedEdges();\r\n\t\tEdgeNodingValidator.checkValid(this.edgeList.getEdges());\r\n\t\tthis.graph.addEdges(this.edgeList.getEdges());\r\n\t\tthis.computeLabelling();\r\n\t\tthis.labelIncompleteNodes();\r\n\t\tthis.findResultAreaEdges(opCode);\r\n\t\tthis.cancelDuplicateResultEdges();\r\n\t\tvar polyBuilder = new PolygonBuilder(this.geomFact);\r\n\t\tpolyBuilder.add(this.graph);\r\n\t\tthis.resultPolyList = polyBuilder.getPolygons();\r\n\t\tvar lineBuilder = new LineBuilder(this, this.geomFact, this.ptLocator);\r\n\t\tthis.resultLineList = lineBuilder.build(opCode);\r\n\t\tvar pointBuilder = new PointBuilder(this, this.geomFact, this.ptLocator);\r\n\t\tthis.resultPointList = pointBuilder.build(opCode);\r\n\t\tthis.resultGeom = this.computeGeometry(this.resultPointList, this.resultLineList, this.resultPolyList, opCode);\r\n\t},\r\n\tlabelIncompleteNode: function (n, targetIndex) {\r\n\t\tvar loc = this.ptLocator.locate(n.getCoordinate(), this.arg[targetIndex].getGeometry());\r\n\t\tn.getLabel().setLocation(targetIndex, loc);\r\n\t},\r\n\tcopyPoints: function (argIndex) {\r\n\t\tfor (var i = this.arg[argIndex].getNodeIterator(); i.hasNext(); ) {\r\n\t\t\tvar graphNode = i.next();\r\n\t\t\tvar newNode = this.graph.addNode(graphNode.getCoordinate());\r\n\t\t\tnewNode.setLabel(argIndex, graphNode.getLabel().getLocation(argIndex));\r\n\t\t}\r\n\t},\r\n\tfindResultAreaEdges: function (opCode) {\r\n\t\tfor (var it = this.graph.getEdgeEnds().iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tvar label = de.getLabel();\r\n\t\t\tif (label.isArea() && !de.isInteriorAreaEdge() && OverlayOp.isResultOfOp(label.getLocation(0, Position.RIGHT), label.getLocation(1, Position.RIGHT), opCode)) {\r\n\t\t\t\tde.setInResult(true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputeLabelsFromDepths: function () {\r\n\t\tfor (var it = this.edgeList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tvar lbl = e.getLabel();\r\n\t\t\tvar depth = e.getDepth();\r\n\t\t\tif (!depth.isNull()) {\r\n\t\t\t\tdepth.normalize();\r\n\t\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\t\tif (!lbl.isNull(i) && lbl.isArea() && !depth.isNull(i)) {\r\n\t\t\t\t\t\tif (depth.getDelta(i) === 0) {\r\n\t\t\t\t\t\t\tlbl.toLine(i);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tAssert.isTrue(!depth.isNull(i, Position.LEFT), \"depth of LEFT side has not been initialized\");\r\n\t\t\t\t\t\t\tlbl.setLocation(i, Position.LEFT, depth.getLocation(i, Position.LEFT));\r\n\t\t\t\t\t\t\tAssert.isTrue(!depth.isNull(i, Position.RIGHT), \"depth of RIGHT side has not been initialized\");\r\n\t\t\t\t\t\t\tlbl.setLocation(i, Position.RIGHT, depth.getLocation(i, Position.RIGHT));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputeLabelling: function () {\r\n\t\tfor (var nodeit = this.graph.getNodes().iterator(); nodeit.hasNext(); ) {\r\n\t\t\tvar node = nodeit.next();\r\n\t\t\tnode.getEdges().computeLabelling(this.arg);\r\n\t\t}\r\n\t\tthis.mergeSymLabels();\r\n\t\tthis.updateNodeLabelling();\r\n\t},\r\n\tlabelIncompleteNodes: function () {\r\n\t\tvar nodeCount = 0;\r\n\t\tfor (var ni = this.graph.getNodes().iterator(); ni.hasNext(); ) {\r\n\t\t\tvar n = ni.next();\r\n\t\t\tvar label = n.getLabel();\r\n\t\t\tif (n.isIsolated()) {\r\n\t\t\t\tnodeCount++;\r\n\t\t\t\tif (label.isNull(0)) this.labelIncompleteNode(n, 0); else this.labelIncompleteNode(n, 1);\r\n\t\t\t}\r\n\t\t\tn.getEdges().updateLabelling(label);\r\n\t\t}\r\n\t},\r\n\tisCoveredByA: function (coord) {\r\n\t\tif (this.isCovered(coord, this.resultPolyList)) return true;\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn OverlayOp;\r\n\t}\r\n});\r\nOverlayOp.overlayOp = function (geom0, geom1, opCode) {\r\n\tvar gov = new OverlayOp(geom0, geom1);\r\n\tvar geomOv = gov.getResultGeometry(opCode);\r\n\treturn geomOv;\r\n};\r\nOverlayOp.intersection = function (g, other) {\r\n\tif (g.isEmpty() || other.isEmpty()) return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION, g, other, g.getFactory());\r\n\tif (g.isGeometryCollection()) {\r\n\t\tvar g2 = other;\r\n\t\treturn GeometryCollectionMapper.map(g, {\r\n\t\t\tinterfaces_: function () {\r\n\t\t\t\treturn [MapOp];\r\n\t\t\t},\r\n\t\t\tmap: function (g) {\r\n\t\t\t\treturn g.intersection(g2);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tg.checkNotGeometryCollection(g);\r\n\tg.checkNotGeometryCollection(other);\r\n\treturn SnapIfNeededOverlayOp.overlayOp(g, other, OverlayOp.INTERSECTION);\r\n};\r\nOverlayOp.symDifference = function (g, other) {\r\n\tif (g.isEmpty() || other.isEmpty()) {\r\n\t\tif (g.isEmpty() && other.isEmpty()) return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE, g, other, g.getFactory());\r\n\t\tif (g.isEmpty()) return other.copy();\r\n\t\tif (other.isEmpty()) return g.copy();\r\n\t}\r\n\tg.checkNotGeometryCollection(g);\r\n\tg.checkNotGeometryCollection(other);\r\n\treturn SnapIfNeededOverlayOp.overlayOp(g, other, OverlayOp.SYMDIFFERENCE);\r\n};\r\nOverlayOp.resultDimension = function (opCode, g0, g1) {\r\n\tvar dim0 = g0.getDimension();\r\n\tvar dim1 = g1.getDimension();\r\n\tvar resultDimension = -1;\r\n\tswitch (opCode) {\r\n\t\tcase OverlayOp.INTERSECTION:\r\n\t\t\tresultDimension = Math.min(dim0, dim1);\r\n\t\t\tbreak;\r\n\t\tcase OverlayOp.UNION:\r\n\t\t\tresultDimension = Math.max(dim0, dim1);\r\n\t\t\tbreak;\r\n\t\tcase OverlayOp.DIFFERENCE:\r\n\t\t\tresultDimension = dim0;\r\n\t\t\tbreak;\r\n\t\tcase OverlayOp.SYMDIFFERENCE:\r\n\t\t\tresultDimension = Math.max(dim0, dim1);\r\n\t\t\tbreak;\r\n\t}\r\n\treturn resultDimension;\r\n};\r\nOverlayOp.createEmptyResult = function (overlayOpCode, a, b, geomFact) {\r\n\tvar result = null;\r\n\tswitch (OverlayOp.resultDimension(overlayOpCode, a, b)) {\r\n\t\tcase -1:\r\n\t\t\tresult = geomFact.createGeometryCollection(new Array(0).fill(null));\r\n\t\t\tbreak;\r\n\t\tcase 0:\r\n\t\t\tresult = geomFact.createPoint();\r\n\t\t\tbreak;\r\n\t\tcase 1:\r\n\t\t\tresult = geomFact.createLineString();\r\n\t\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\tresult = geomFact.createPolygon();\r\n\t\t\tbreak;\r\n\t}\r\n\treturn result;\r\n};\r\nOverlayOp.difference = function (g, other) {\r\n\tif (g.isEmpty()) return OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE, g, other, g.getFactory());\r\n\tif (other.isEmpty()) return g.copy();\r\n\tg.checkNotGeometryCollection(g);\r\n\tg.checkNotGeometryCollection(other);\r\n\treturn SnapIfNeededOverlayOp.overlayOp(g, other, OverlayOp.DIFFERENCE);\r\n};\r\nOverlayOp.isResultOfOp = function () {\r\n\tif (arguments.length === 2) {\r\n\t\tlet label = arguments[0], opCode = arguments[1];\r\n\t\tvar loc0 = label.getLocation(0);\r\n\t\tvar loc1 = label.getLocation(1);\r\n\t\treturn OverlayOp.isResultOfOp(loc0, loc1, opCode);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet loc0 = arguments[0], loc1 = arguments[1], overlayOpCode = arguments[2];\r\n\t\tif (loc0 === Location.BOUNDARY) loc0 = Location.INTERIOR;\r\n\t\tif (loc1 === Location.BOUNDARY) loc1 = Location.INTERIOR;\r\n\t\tswitch (overlayOpCode) {\r\n\t\t\tcase OverlayOp.INTERSECTION:\r\n\t\t\t\treturn loc0 === Location.INTERIOR && loc1 === Location.INTERIOR;\r\n\t\t\tcase OverlayOp.UNION:\r\n\t\t\t\treturn loc0 === Location.INTERIOR || loc1 === Location.INTERIOR;\r\n\t\t\tcase OverlayOp.DIFFERENCE:\r\n\t\t\t\treturn loc0 === Location.INTERIOR && loc1 !== Location.INTERIOR;\r\n\t\t\tcase OverlayOp.SYMDIFFERENCE:\r\n\t\t\t\treturn loc0 === Location.INTERIOR && loc1 !== Location.INTERIOR || loc0 !== Location.INTERIOR && loc1 === Location.INTERIOR;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n};\r\nOverlayOp.INTERSECTION = 1;\r\nOverlayOp.UNION = 2;\r\nOverlayOp.DIFFERENCE = 3;\r\nOverlayOp.SYMDIFFERENCE = 4;\r\n","import GeometrySnapper from './GeometrySnapper';\r\nimport extend from '../../../../../../extend';\r\nimport System from '../../../../../../java/lang/System';\r\nimport CommonBitsRemover from '../../../precision/CommonBitsRemover';\r\nimport OverlayOp from '../OverlayOp';\r\nexport default function SnapOverlayOp() {\r\n\tthis.geom = new Array(2).fill(null);\r\n\tthis.snapTolerance = null;\r\n\tthis.cbr = null;\r\n\tlet g1 = arguments[0], g2 = arguments[1];\r\n\tthis.geom[0] = g1;\r\n\tthis.geom[1] = g2;\r\n\tthis.computeSnapTolerance();\r\n}\r\nextend(SnapOverlayOp.prototype, {\r\n\tselfSnap: function (geom) {\r\n\t\tvar snapper0 = new GeometrySnapper(geom);\r\n\t\tvar snapGeom = snapper0.snapTo(geom, this.snapTolerance);\r\n\t\treturn snapGeom;\r\n\t},\r\n\tremoveCommonBits: function (geom) {\r\n\t\tthis.cbr = new CommonBitsRemover();\r\n\t\tthis.cbr.add(geom[0]);\r\n\t\tthis.cbr.add(geom[1]);\r\n\t\tvar remGeom = new Array(2).fill(null);\r\n\t\tremGeom[0] = this.cbr.removeCommonBits(geom[0].copy());\r\n\t\tremGeom[1] = this.cbr.removeCommonBits(geom[1].copy());\r\n\t\treturn remGeom;\r\n\t},\r\n\tprepareResult: function (geom) {\r\n\t\tthis.cbr.addCommonBits(geom);\r\n\t\treturn geom;\r\n\t},\r\n\tgetResultGeometry: function (opCode) {\r\n\t\tvar prepGeom = this.snap(this.geom);\r\n\t\tvar result = OverlayOp.overlayOp(prepGeom[0], prepGeom[1], opCode);\r\n\t\treturn this.prepareResult(result);\r\n\t},\r\n\tcheckValid: function (g) {\r\n\t\tif (!g.isValid()) {\r\n\t\t\tSystem.out.println(\"Snapped geometry is invalid\");\r\n\t\t}\r\n\t},\r\n\tcomputeSnapTolerance: function () {\r\n\t\tthis.snapTolerance = GeometrySnapper.computeOverlaySnapTolerance(this.geom[0], this.geom[1]);\r\n\t},\r\n\tsnap: function (geom) {\r\n\t\tvar remGeom = this.removeCommonBits(geom);\r\n\t\tvar snapGeom = GeometrySnapper.snap(remGeom[0], remGeom[1], this.snapTolerance);\r\n\t\treturn snapGeom;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SnapOverlayOp;\r\n\t}\r\n});\r\nSnapOverlayOp.overlayOp = function (g0, g1, opCode) {\r\n\tvar op = new SnapOverlayOp(g0, g1);\r\n\treturn op.getResultGeometry(opCode);\r\n};\r\nSnapOverlayOp.union = function (g0, g1) {\r\n\treturn SnapOverlayOp.overlayOp(g0, g1, OverlayOp.UNION);\r\n};\r\nSnapOverlayOp.intersection = function (g0, g1) {\r\n\treturn SnapOverlayOp.overlayOp(g0, g1, OverlayOp.INTERSECTION);\r\n};\r\nSnapOverlayOp.symDifference = function (g0, g1) {\r\n\treturn SnapOverlayOp.overlayOp(g0, g1, OverlayOp.SYMDIFFERENCE);\r\n};\r\nSnapOverlayOp.difference = function (g0, g1) {\r\n\treturn SnapOverlayOp.overlayOp(g0, g1, OverlayOp.DIFFERENCE);\r\n};\r\n","import SnapOverlayOp from './SnapOverlayOp';\r\nimport extend from '../../../../../../extend';\r\nimport RuntimeException from '../../../../../../java/lang/RuntimeException';\r\nimport OverlayOp from '../OverlayOp';\r\nexport default function SnapIfNeededOverlayOp() {\r\n\tthis.geom = new Array(2).fill(null);\r\n\tlet g1 = arguments[0], g2 = arguments[1];\r\n\tthis.geom[0] = g1;\r\n\tthis.geom[1] = g2;\r\n}\r\nextend(SnapIfNeededOverlayOp.prototype, {\r\n\tgetResultGeometry: function (opCode) {\r\n\t\tvar result = null;\r\n\t\tvar isSuccess = false;\r\n\t\tvar savedException = null;\r\n\t\ttry {\r\n\t\t\tresult = OverlayOp.overlayOp(this.geom[0], this.geom[1], opCode);\r\n\t\t\tvar isValid = true;\r\n\t\t\tif (isValid) isSuccess = true;\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex instanceof RuntimeException) {\r\n\t\t\t\tsavedException = ex;\r\n\t\t\t} else throw ex;\r\n\t\t} finally {}\r\n\t\tif (!isSuccess) {\r\n\t\t\ttry {\r\n\t\t\t\tresult = SnapOverlayOp.overlayOp(this.geom[0], this.geom[1], opCode);\r\n\t\t\t} catch (ex) {\r\n\t\t\t\tif (ex instanceof RuntimeException) {\r\n\t\t\t\t\tthrow savedException;\r\n\t\t\t\t} else throw ex;\r\n\t\t\t} finally {}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SnapIfNeededOverlayOp;\r\n\t}\r\n});\r\nSnapIfNeededOverlayOp.overlayOp = function (g0, g1, opCode) {\r\n\tvar op = new SnapIfNeededOverlayOp(g0, g1);\r\n\treturn op.getResultGeometry(opCode);\r\n};\r\nSnapIfNeededOverlayOp.union = function (g0, g1) {\r\n\treturn SnapIfNeededOverlayOp.overlayOp(g0, g1, OverlayOp.UNION);\r\n};\r\nSnapIfNeededOverlayOp.intersection = function (g0, g1) {\r\n\treturn SnapIfNeededOverlayOp.overlayOp(g0, g1, OverlayOp.INTERSECTION);\r\n};\r\nSnapIfNeededOverlayOp.symDifference = function (g0, g1) {\r\n\treturn SnapIfNeededOverlayOp.overlayOp(g0, g1, OverlayOp.SYMDIFFERENCE);\r\n};\r\nSnapIfNeededOverlayOp.difference = function (g0, g1) {\r\n\treturn SnapIfNeededOverlayOp.overlayOp(g0, g1, OverlayOp.DIFFERENCE);\r\n};\r\n","import Geometry from '../geom/Geometry';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport Polygon from '../geom/Polygon';\r\nimport SnapIfNeededOverlayOp from '../operation/overlay/snap/SnapIfNeededOverlayOp';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport GeometryCollection from '../geom/GeometryCollection';\r\nimport OverlayOp from '../operation/overlay/OverlayOp';\r\nexport default function InteriorPointArea() {\r\n\tthis.factory = null;\r\n\tthis.interiorPoint = null;\r\n\tthis.maxWidth = 0.0;\r\n\tlet g = arguments[0];\r\n\tthis.factory = g.getFactory();\r\n\tthis.add(g);\r\n}\r\nextend(InteriorPointArea.prototype, {\r\n\taddPolygon: function (geometry) {\r\n\t\tif (geometry.isEmpty()) return null;\r\n\t\tvar intPt = null;\r\n\t\tvar width = 0;\r\n\t\tvar bisector = this.horizontalBisector(geometry);\r\n\t\tif (bisector.getLength() === 0.0) {\r\n\t\t\twidth = 0;\r\n\t\t\tintPt = bisector.getCoordinate();\r\n\t\t} else {\r\n\t\t\tvar intersections = SnapIfNeededOverlayOp.overlayOp(bisector, geometry, OverlayOp.INTERSECTION);\r\n\t\t\tvar widestIntersection = this.widestGeometry(intersections);\r\n\t\t\twidth = widestIntersection.getEnvelopeInternal().getWidth();\r\n\t\t\tintPt = InteriorPointArea.centre(widestIntersection.getEnvelopeInternal());\r\n\t\t}\r\n\t\tif (this.interiorPoint === null || width > this.maxWidth) {\r\n\t\t\tthis.interiorPoint = intPt;\r\n\t\t\tthis.maxWidth = width;\r\n\t\t}\r\n\t},\r\n\tgetInteriorPoint: function () {\r\n\t\treturn this.interiorPoint;\r\n\t},\r\n\twidestGeometry: function () {\r\n\t\tif (arguments[0] instanceof GeometryCollection) {\r\n\t\t\tlet gc = arguments[0];\r\n\t\t\tif (gc.isEmpty()) {\r\n\t\t\t\treturn gc;\r\n\t\t\t}\r\n\t\t\tvar widestGeometry = gc.getGeometryN(0);\r\n\t\t\tfor (var i = 1; i < gc.getNumGeometries(); i++) {\r\n\t\t\t\tif (gc.getGeometryN(i).getEnvelopeInternal().getWidth() > widestGeometry.getEnvelopeInternal().getWidth()) {\r\n\t\t\t\t\twidestGeometry = gc.getGeometryN(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn widestGeometry;\r\n\t\t} else if (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geometry = arguments[0];\r\n\t\t\tif (!(geometry instanceof GeometryCollection)) {\r\n\t\t\t\treturn geometry;\r\n\t\t\t}\r\n\t\t\treturn this.widestGeometry(geometry);\r\n\t\t}\r\n\t},\r\n\thorizontalBisector: function (geometry) {\r\n\t\tvar envelope = geometry.getEnvelopeInternal();\r\n\t\tvar bisectY = SafeBisectorFinder.getBisectorY(geometry);\r\n\t\treturn this.factory.createLineString([new Coordinate(envelope.getMinX(), bisectY), new Coordinate(envelope.getMaxX(), bisectY)]);\r\n\t},\r\n\tadd: function (geom) {\r\n\t\tif (geom instanceof Polygon) {\r\n\t\t\tthis.addPolygon(geom);\r\n\t\t} else if (geom instanceof GeometryCollection) {\r\n\t\t\tvar gc = geom;\r\n\t\t\tfor (var i = 0; i < gc.getNumGeometries(); i++) {\r\n\t\t\t\tthis.add(gc.getGeometryN(i));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn InteriorPointArea;\r\n\t}\r\n});\r\nInteriorPointArea.centre = function (envelope) {\r\n\treturn new Coordinate(InteriorPointArea.avg(envelope.getMinX(), envelope.getMaxX()), InteriorPointArea.avg(envelope.getMinY(), envelope.getMaxY()));\r\n};\r\nInteriorPointArea.avg = function (a, b) {\r\n\treturn (a + b) / 2.0;\r\n};\r\nfunction SafeBisectorFinder() {\r\n\tthis.poly = null;\r\n\tthis.centreY = null;\r\n\tthis.hiY = Double.MAX_VALUE;\r\n\tthis.loY = -Double.MAX_VALUE;\r\n\tlet poly = arguments[0];\r\n\tthis.poly = poly;\r\n\tthis.hiY = poly.getEnvelopeInternal().getMaxY();\r\n\tthis.loY = poly.getEnvelopeInternal().getMinY();\r\n\tthis.centreY = InteriorPointArea.avg(this.loY, this.hiY);\r\n}\r\nextend(SafeBisectorFinder.prototype, {\r\n\tupdateInterval: function (y) {\r\n\t\tif (y <= this.centreY) {\r\n\t\t\tif (y > this.loY) this.loY = y;\r\n\t\t} else if (y > this.centreY) {\r\n\t\t\tif (y < this.hiY) {\r\n\t\t\t\tthis.hiY = y;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetBisectorY: function () {\r\n\t\tthis.process(this.poly.getExteriorRing());\r\n\t\tfor (var i = 0; i < this.poly.getNumInteriorRing(); i++) {\r\n\t\t\tthis.process(this.poly.getInteriorRingN(i));\r\n\t\t}\r\n\t\tvar bisectY = InteriorPointArea.avg(this.hiY, this.loY);\r\n\t\treturn bisectY;\r\n\t},\r\n\tprocess: function (line) {\r\n\t\tvar seq = line.getCoordinateSequence();\r\n\t\tfor (var i = 0; i < seq.size(); i++) {\r\n\t\t\tvar y = seq.getY(i);\r\n\t\t\tthis.updateInterval(y);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SafeBisectorFinder;\r\n\t}\r\n});\r\nSafeBisectorFinder.getBisectorY = function (poly) {\r\n\tvar finder = new SafeBisectorFinder(poly);\r\n\treturn finder.getBisectorY();\r\n};\r\nInteriorPointArea.SafeBisectorFinder = SafeBisectorFinder;\r\n","import LineString from '../geom/LineString';\r\nimport Geometry from '../geom/Geometry';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport GeometryCollection from '../geom/GeometryCollection';\r\nexport default function InteriorPointLine() {\r\n\tthis.centroid = null;\r\n\tthis.minDistance = Double.MAX_VALUE;\r\n\tthis.interiorPoint = null;\r\n\tlet g = arguments[0];\r\n\tthis.centroid = g.getCentroid().getCoordinate();\r\n\tthis.addInterior(g);\r\n\tif (this.interiorPoint === null) this.addEndpoints(g);\r\n}\r\nextend(InteriorPointLine.prototype, {\r\n\taddEndpoints: function () {\r\n\t\tif (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geom = arguments[0];\r\n\t\t\tif (geom instanceof LineString) {\r\n\t\t\t\tthis.addEndpoints(geom.getCoordinates());\r\n\t\t\t} else if (geom instanceof GeometryCollection) {\r\n\t\t\t\tvar gc = geom;\r\n\t\t\t\tfor (var i = 0; i < gc.getNumGeometries(); i++) {\r\n\t\t\t\t\tthis.addEndpoints(gc.getGeometryN(i));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof Array) {\r\n\t\t\tlet pts = arguments[0];\r\n\t\t\tthis.add(pts[0]);\r\n\t\t\tthis.add(pts[pts.length - 1]);\r\n\t\t}\r\n\t},\r\n\tgetInteriorPoint: function () {\r\n\t\treturn this.interiorPoint;\r\n\t},\r\n\taddInterior: function () {\r\n\t\tif (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geom = arguments[0];\r\n\t\t\tif (geom instanceof LineString) {\r\n\t\t\t\tthis.addInterior(geom.getCoordinates());\r\n\t\t\t} else if (geom instanceof GeometryCollection) {\r\n\t\t\t\tvar gc = geom;\r\n\t\t\t\tfor (var i = 0; i < gc.getNumGeometries(); i++) {\r\n\t\t\t\t\tthis.addInterior(gc.getGeometryN(i));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof Array) {\r\n\t\t\tlet pts = arguments[0];\r\n\t\t\tfor (var i = 1; i < pts.length - 1; i++) {\r\n\t\t\t\tthis.add(pts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tadd: function (point) {\r\n\t\tvar dist = point.distance(this.centroid);\r\n\t\tif (dist < this.minDistance) {\r\n\t\t\tthis.interiorPoint = new Coordinate(point);\r\n\t\t\tthis.minDistance = dist;\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn InteriorPointLine;\r\n\t}\r\n});\r\n","import Geometry from '../geom/Geometry';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport Point from '../geom/Point';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport GeometryCollection from '../geom/GeometryCollection';\r\nexport default function InteriorPointPoint() {\r\n\tthis.centroid = null;\r\n\tthis.minDistance = Double.MAX_VALUE;\r\n\tthis.interiorPoint = null;\r\n\tlet g = arguments[0];\r\n\tthis.centroid = g.getCentroid().getCoordinate();\r\n\tthis.add(g);\r\n}\r\nextend(InteriorPointPoint.prototype, {\r\n\tgetInteriorPoint: function () {\r\n\t\treturn this.interiorPoint;\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geom = arguments[0];\r\n\t\t\tif (geom instanceof Point) {\r\n\t\t\t\tthis.add(geom.getCoordinate());\r\n\t\t\t} else if (geom instanceof GeometryCollection) {\r\n\t\t\t\tvar gc = geom;\r\n\t\t\t\tfor (var i = 0; i < gc.getNumGeometries(); i++) {\r\n\t\t\t\t\tthis.add(gc.getGeometryN(i));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet point = arguments[0];\r\n\t\t\tvar dist = point.distance(this.centroid);\r\n\t\t\tif (dist < this.minDistance) {\r\n\t\t\t\tthis.interiorPoint = new Coordinate(point);\r\n\t\t\t\tthis.minDistance = dist;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn InteriorPointPoint;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport LineSegment from '../../geom/LineSegment';\r\nimport Envelope from '../../geom/Envelope';\r\nexport default function MonotoneChainSelectAction() {\r\n\tthis.tempEnv1 = new Envelope();\r\n\tthis.selectedSegment = new LineSegment();\r\n}\r\nextend(MonotoneChainSelectAction.prototype, {\r\n\tselect: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet seg = arguments[0];\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet mc = arguments[0], startIndex = arguments[1];\r\n\t\t\tmc.getLineSegment(startIndex, this.selectedSegment);\r\n\t\t\tthis.select(this.selectedSegment);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MonotoneChainSelectAction;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nexport default function NodeBase() {\r\n\tthis.items = new ArrayList();\r\n\tthis.subnode = [null, null];\r\n}\r\nextend(NodeBase.prototype, {\r\n\thasChildren: function () {\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tif (this.subnode[i] !== null) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tisPrunable: function () {\r\n\t\treturn !(this.hasChildren() || this.hasItems());\r\n\t},\r\n\taddAllItems: function (items) {\r\n\t\titems.addAll(this.items);\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tthis.subnode[i].addAllItems(items);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn items;\r\n\t},\r\n\tsize: function () {\r\n\t\tvar subSize = 0;\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tsubSize += this.subnode[i].size();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn subSize + this.items.size();\r\n\t},\r\n\taddAllItemsFromOverlapping: function (interval, resultItems) {\r\n\t\tif (interval !== null && !this.isSearchMatch(interval)) return null;\r\n\t\tresultItems.addAll(this.items);\r\n\t\tif (this.subnode[0] !== null) this.subnode[0].addAllItemsFromOverlapping(interval, resultItems);\r\n\t\tif (this.subnode[1] !== null) this.subnode[1].addAllItemsFromOverlapping(interval, resultItems);\r\n\t},\r\n\thasItems: function () {\r\n\t\treturn !this.items.isEmpty();\r\n\t},\r\n\tremove: function (itemInterval, item) {\r\n\t\tif (!this.isSearchMatch(itemInterval)) return false;\r\n\t\tvar found = false;\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tfound = this.subnode[i].remove(itemInterval, item);\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\tif (this.subnode[i].isPrunable()) this.subnode[i] = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (found) return found;\r\n\t\tfound = this.items.remove(item);\r\n\t\treturn found;\r\n\t},\r\n\tgetItems: function () {\r\n\t\treturn this.items;\r\n\t},\r\n\tdepth: function () {\r\n\t\tvar maxSubDepth = 0;\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tvar sqd = this.subnode[i].depth();\r\n\t\t\t\tif (sqd > maxSubDepth) maxSubDepth = sqd;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxSubDepth + 1;\r\n\t},\r\n\tnodeSize: function () {\r\n\t\tvar subSize = 0;\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tsubSize += this.subnode[i].nodeSize();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn subSize + 1;\r\n\t},\r\n\tadd: function (item) {\r\n\t\tthis.items.add(item);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodeBase;\r\n\t}\r\n});\r\nNodeBase.getSubnodeIndex = function (interval, centre) {\r\n\tvar subnodeIndex = -1;\r\n\tif (interval.min >= centre) subnodeIndex = 1;\r\n\tif (interval.max <= centre) subnodeIndex = 0;\r\n\treturn subnodeIndex;\r\n};\r\n","import extend from '../../../../../extend';\r\nexport default function Interval() {\r\n\tthis.min = null;\r\n\tthis.max = null;\r\n\tif (arguments.length === 0) {\r\n\t\tthis.min = 0.0;\r\n\t\tthis.max = 0.0;\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet interval = arguments[0];\r\n\t\tthis.init(interval.min, interval.max);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet min = arguments[0], max = arguments[1];\r\n\t\tthis.init(min, max);\r\n\t}\r\n}\r\nextend(Interval.prototype, {\r\n\texpandToInclude: function (interval) {\r\n\t\tif (interval.max > this.max) this.max = interval.max;\r\n\t\tif (interval.min < this.min) this.min = interval.min;\r\n\t},\r\n\tgetWidth: function () {\r\n\t\treturn this.max - this.min;\r\n\t},\r\n\toverlaps: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet interval = arguments[0];\r\n\t\t\treturn this.overlaps(interval.min, interval.max);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet min = arguments[0], max = arguments[1];\r\n\t\t\tif (this.min > max || this.max < min) return false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\tgetMin: function () {\r\n\t\treturn this.min;\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn \"[\" + this.min + \", \" + this.max + \"]\";\r\n\t},\r\n\tcontains: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Interval) {\r\n\t\t\t\tlet interval = arguments[0];\r\n\t\t\t\treturn this.contains(interval.min, interval.max);\r\n\t\t\t} else if (typeof arguments[0] === \"number\") {\r\n\t\t\t\tlet p = arguments[0];\r\n\t\t\t\treturn p >= this.min && p <= this.max;\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet min = arguments[0], max = arguments[1];\r\n\t\t\treturn min >= this.min && max <= this.max;\r\n\t\t}\r\n\t},\r\n\tinit: function (min, max) {\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\t\tif (min > max) {\r\n\t\t\tthis.min = max;\r\n\t\t\tthis.max = min;\r\n\t\t}\r\n\t},\r\n\tgetMax: function () {\r\n\t\treturn this.max;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Interval;\r\n\t}\r\n});\r\n","export default function DoubleBits () { }\r\nDoubleBits.exponent = function (d) {\r\n  return CVTFWD(64, d) - 1023\r\n}\r\nDoubleBits.powerOf2 = function (exp) {\r\n  return Math.pow(2, exp)\r\n}\r\n\r\n/**\r\n * Calculates the exponent of the bit-pattern for a number. Uses code from:\r\n * http://www.merlyn.demon.co.uk/js-exact.htm\r\n *\r\n * @param {Number}\r\n *          NumW 32 or 64 to denote the number of bits.\r\n * @param {Number}\r\n *          Qty the number to calculate the bit pattern for.\r\n * @return {Number} The integer value of the exponent.\r\n */\r\nfunction CVTFWD (NumW, Qty) {\r\n  var Sign\r\n  var Expo\r\n  var Mant\r\n  var Bin\r\n  var Inf = {\r\n    32: {\r\n      d: 0x7F,\r\n      c: 0x80,\r\n      b: 0,\r\n      a: 0\r\n    },\r\n    64: {\r\n      d: 0x7FF0,\r\n      c: 0,\r\n      b: 0,\r\n      a: 0\r\n    }\r\n  }\r\n  var ExW = {\r\n    32: 8,\r\n    64: 11\r\n  }[NumW]\r\n\r\n  if (!Bin) {\r\n    Sign = Qty < 0 || 1 / Qty < 0 // OK for +-0\r\n    if (!isFinite(Qty)) {\r\n      Bin = Inf[NumW]\r\n      if (Sign) {\r\n        Bin.d += 1 << (NumW / 4 - 1)\r\n      }\r\n      Expo = Math.pow(2, ExW) - 1\r\n      Mant = 0\r\n    }\r\n  }\r\n\r\n  if (!Bin) {\r\n    Expo = {\r\n      32: 127,\r\n      64: 1023\r\n    }[NumW]\r\n    Mant = Math.abs(Qty)\r\n    while (Mant >= 2) {\r\n      Expo++\r\n      Mant /= 2\r\n    }\r\n    while (Mant < 1 && Expo > 0) {\r\n      Expo--\r\n      Mant *= 2\r\n    }\r\n    if (Expo <= 0) {\r\n      Mant /= 2\r\n    }\r\n    if (NumW === 32 && Expo > 254) {\r\n      Bin = {\r\n        d: Sign ? 0xFF : 0x7F,\r\n        c: 0x80,\r\n        b: 0,\r\n        a: 0\r\n      }\r\n      Expo = Math.pow(2, ExW) - 1\r\n      Mant = 0\r\n    }\r\n  }\r\n\r\n  return Expo\r\n}\r\n","import Interval from './Interval';\r\nimport extend from '../../../../../extend';\r\nimport DoubleBits from '../quadtree/DoubleBits';\r\nexport default function Key() {\r\n\tthis.pt = 0.0;\r\n\tthis.level = 0;\r\n\tthis.interval = null;\r\n\tlet interval = arguments[0];\r\n\tthis.computeKey(interval);\r\n}\r\nextend(Key.prototype, {\r\n\tgetInterval: function () {\r\n\t\treturn this.interval;\r\n\t},\r\n\tgetLevel: function () {\r\n\t\treturn this.level;\r\n\t},\r\n\tcomputeKey: function (itemInterval) {\r\n\t\tthis.level = Key.computeLevel(itemInterval);\r\n\t\tthis.interval = new Interval();\r\n\t\tthis.computeInterval(this.level, itemInterval);\r\n\t\twhile (!this.interval.contains(itemInterval)) {\r\n\t\t\tthis.level += 1;\r\n\t\t\tthis.computeInterval(this.level, itemInterval);\r\n\t\t}\r\n\t},\r\n\tcomputeInterval: function (level, itemInterval) {\r\n\t\tvar size = DoubleBits.powerOf2(level);\r\n\t\tthis.pt = Math.floor(itemInterval.getMin() / size) * size;\r\n\t\tthis.interval.init(this.pt, this.pt + size);\r\n\t},\r\n\tgetPoint: function () {\r\n\t\treturn this.pt;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Key;\r\n\t}\r\n});\r\nKey.computeLevel = function (interval) {\r\n\tvar dx = interval.getWidth();\r\n\tvar level = DoubleBits.exponent(dx) + 1;\r\n\treturn level;\r\n};\r\n","import NodeBase from './NodeBase';\r\nimport Interval from './Interval';\r\nimport extend from '../../../../../extend';\r\nimport Assert from '../../util/Assert';\r\nimport inherits from '../../../../../inherits';\r\nimport Key from './Key';\r\nexport default function Node() {\r\n\tNodeBase.apply(this);\r\n\tthis.interval = null;\r\n\tthis.centre = null;\r\n\tthis.level = null;\r\n\tlet interval = arguments[0], level = arguments[1];\r\n\tthis.interval = interval;\r\n\tthis.level = level;\r\n\tthis.centre = (interval.getMin() + interval.getMax()) / 2;\r\n}\r\ninherits(Node, NodeBase);\r\nextend(Node.prototype, {\r\n\tgetInterval: function () {\r\n\t\treturn this.interval;\r\n\t},\r\n\tfind: function (searchInterval) {\r\n\t\tvar subnodeIndex = NodeBase.getSubnodeIndex(searchInterval, this.centre);\r\n\t\tif (subnodeIndex === -1) return this;\r\n\t\tif (this.subnode[subnodeIndex] !== null) {\r\n\t\t\tvar node = this.subnode[subnodeIndex];\r\n\t\t\treturn node.find(searchInterval);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\tinsert: function (node) {\r\n\t\tAssert.isTrue(this.interval === null || this.interval.contains(node.interval));\r\n\t\tvar index = NodeBase.getSubnodeIndex(node.interval, this.centre);\r\n\t\tif (node.level === this.level - 1) {\r\n\t\t\tthis.subnode[index] = node;\r\n\t\t} else {\r\n\t\t\tvar childNode = this.createSubnode(index);\r\n\t\t\tchildNode.insert(node);\r\n\t\t\tthis.subnode[index] = childNode;\r\n\t\t}\r\n\t},\r\n\tisSearchMatch: function (itemInterval) {\r\n\t\treturn itemInterval.overlaps(this.interval);\r\n\t},\r\n\tgetSubnode: function (index) {\r\n\t\tif (this.subnode[index] === null) {\r\n\t\t\tthis.subnode[index] = this.createSubnode(index);\r\n\t\t}\r\n\t\treturn this.subnode[index];\r\n\t},\r\n\tgetNode: function (searchInterval) {\r\n\t\tvar subnodeIndex = NodeBase.getSubnodeIndex(searchInterval, this.centre);\r\n\t\tif (subnodeIndex !== -1) {\r\n\t\t\tvar node = this.getSubnode(subnodeIndex);\r\n\t\t\treturn node.getNode(searchInterval);\r\n\t\t} else {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t},\r\n\tcreateSubnode: function (index) {\r\n\t\tvar min = 0.0;\r\n\t\tvar max = 0.0;\r\n\t\tswitch (index) {\r\n\t\t\tcase 0:\r\n\t\t\t\tmin = this.interval.getMin();\r\n\t\t\t\tmax = this.centre;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tmin = this.centre;\r\n\t\t\t\tmax = this.interval.getMax();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tvar subInt = new Interval(min, max);\r\n\t\tvar node = new Node(subInt, this.level - 1);\r\n\t\treturn node;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Node;\r\n\t}\r\n});\r\nNode.createNode = function (itemInterval) {\r\n\tvar key = new Key(itemInterval);\r\n\tvar node = new Node(key.getInterval(), key.getLevel());\r\n\treturn node;\r\n};\r\nNode.createExpanded = function (node, addInterval) {\r\n\tvar expandInt = new Interval(addInterval);\r\n\tif (node !== null) expandInt.expandToInclude(node.interval);\r\n\tvar largerNode = Node.createNode(expandInt);\r\n\tif (node !== null) largerNode.insert(node);\r\n\treturn largerNode;\r\n};\r\n","import extend from '../../../../../extend';\r\nimport DoubleBits from './DoubleBits';\r\nexport default function IntervalSize() {}\r\nextend(IntervalSize.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IntervalSize;\r\n\t}\r\n});\r\nIntervalSize.isZeroWidth = function (min, max) {\r\n\tvar width = max - min;\r\n\tif (width === 0.0) return true;\r\n\tvar maxAbs = Math.max(Math.abs(min), Math.abs(max));\r\n\tvar scaledInterval = width / maxAbs;\r\n\tvar level = DoubleBits.exponent(scaledInterval);\r\n\treturn level <= IntervalSize.MIN_BINARY_EXPONENT;\r\n};\r\nIntervalSize.MIN_BINARY_EXPONENT = -50;\r\n","import NodeBase from './NodeBase';\r\nimport Node from './Node';\r\nimport extend from '../../../../../extend';\r\nimport IntervalSize from '../quadtree/IntervalSize';\r\nimport Assert from '../../util/Assert';\r\nimport inherits from '../../../../../inherits';\r\nexport default function Root() {\r\n\tNodeBase.apply(this);\r\n}\r\ninherits(Root, NodeBase);\r\nextend(Root.prototype, {\r\n\tinsert: function (itemInterval, item) {\r\n\t\tvar index = NodeBase.getSubnodeIndex(itemInterval, Root.origin);\r\n\t\tif (index === -1) {\r\n\t\t\tthis.add(item);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar node = this.subnode[index];\r\n\t\tif (node === null || !node.getInterval().contains(itemInterval)) {\r\n\t\t\tvar largerNode = Node.createExpanded(node, itemInterval);\r\n\t\t\tthis.subnode[index] = largerNode;\r\n\t\t}\r\n\t\tthis.insertContained(this.subnode[index], itemInterval, item);\r\n\t},\r\n\tisSearchMatch: function (interval) {\r\n\t\treturn true;\r\n\t},\r\n\tinsertContained: function (tree, itemInterval, item) {\r\n\t\tAssert.isTrue(tree.getInterval().contains(itemInterval));\r\n\t\tvar isZeroArea = IntervalSize.isZeroWidth(itemInterval.getMin(), itemInterval.getMax());\r\n\t\tvar node = null;\r\n\t\tif (isZeroArea) node = tree.find(itemInterval); else node = tree.getNode(itemInterval);\r\n\t\tnode.add(item);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Root;\r\n\t}\r\n});\r\nRoot.origin = 0.0;\r\n","import Root from './Root';\r\nimport Interval from './Interval';\r\nimport extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nexport default function Bintree() {\r\n\tthis.root = null;\r\n\tthis.minExtent = 1.0;\r\n\tthis.root = new Root();\r\n}\r\nextend(Bintree.prototype, {\r\n\tsize: function () {\r\n\t\tif (this.root !== null) return this.root.size();\r\n\t\treturn 0;\r\n\t},\r\n\tinsert: function (itemInterval, item) {\r\n\t\tthis.collectStats(itemInterval);\r\n\t\tvar insertInterval = Bintree.ensureExtent(itemInterval, this.minExtent);\r\n\t\tthis.root.insert(insertInterval, item);\r\n\t},\r\n\tquery: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (typeof arguments[0] === \"number\") {\r\n\t\t\t\tlet x = arguments[0];\r\n\t\t\t\treturn this.query(new Interval(x, x));\r\n\t\t\t} else if (arguments[0] instanceof Interval) {\r\n\t\t\t\tlet interval = arguments[0];\r\n\t\t\t\tvar foundItems = new ArrayList();\r\n\t\t\t\tthis.query(interval, foundItems);\r\n\t\t\t\treturn foundItems;\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet interval = arguments[0], foundItems = arguments[1];\r\n\t\t\tthis.root.addAllItemsFromOverlapping(interval, foundItems);\r\n\t\t}\r\n\t},\r\n\titerator: function () {\r\n\t\tvar foundItems = new ArrayList();\r\n\t\tthis.root.addAllItems(foundItems);\r\n\t\treturn foundItems.iterator();\r\n\t},\r\n\tremove: function (itemInterval, item) {\r\n\t\tvar insertInterval = Bintree.ensureExtent(itemInterval, this.minExtent);\r\n\t\treturn this.root.remove(insertInterval, item);\r\n\t},\r\n\tcollectStats: function (interval) {\r\n\t\tvar del = interval.getWidth();\r\n\t\tif (del < this.minExtent && del > 0.0) this.minExtent = del;\r\n\t},\r\n\tdepth: function () {\r\n\t\tif (this.root !== null) return this.root.depth();\r\n\t\treturn 0;\r\n\t},\r\n\tnodeSize: function () {\r\n\t\tif (this.root !== null) return this.root.nodeSize();\r\n\t\treturn 0;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Bintree;\r\n\t}\r\n});\r\nBintree.ensureExtent = function (itemInterval, minExtent) {\r\n\tvar min = itemInterval.getMin();\r\n\tvar max = itemInterval.getMax();\r\n\tif (min !== max) return itemInterval;\r\n\tif (min === max) {\r\n\t\tmin = min - minExtent / 2.0;\r\n\t\tmax = min + minExtent / 2.0;\r\n\t}\r\n\treturn new Interval(min, max);\r\n};\r\n","import extend from '../../../../extend';\r\nexport default function PointInRing() {}\r\nextend(PointInRing.prototype, {\r\n\tisInside: function (pt) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PointInRing;\r\n\t}\r\n});\r\n","import MonotoneChainSelectAction from '../index/chain/MonotoneChainSelectAction';\r\nimport Bintree from '../index/bintree/Bintree';\r\nimport Interval from '../index/bintree/Interval';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport MonotoneChainBuilder from '../index/chain/MonotoneChainBuilder';\r\nimport CoordinateArrays from '../geom/CoordinateArrays';\r\nimport RobustDeterminant from './RobustDeterminant';\r\nimport Envelope from '../geom/Envelope';\r\nimport inherits from '../../../../inherits';\r\nimport PointInRing from './PointInRing';\r\nexport default function MCPointInRing() {\r\n\tthis.ring = null;\r\n\tthis.tree = null;\r\n\tthis.crossings = 0;\r\n\tthis.interval = new Interval();\r\n\tlet ring = arguments[0];\r\n\tthis.ring = ring;\r\n\tthis.buildIndex();\r\n}\r\nextend(MCPointInRing.prototype, {\r\n\ttestLineSegment: function (p, seg) {\r\n\t\tvar xInt = null;\r\n\t\tvar x1 = null;\r\n\t\tvar y1 = null;\r\n\t\tvar x2 = null;\r\n\t\tvar y2 = null;\r\n\t\tvar p1 = seg.p0;\r\n\t\tvar p2 = seg.p1;\r\n\t\tx1 = p1.x - p.x;\r\n\t\ty1 = p1.y - p.y;\r\n\t\tx2 = p2.x - p.x;\r\n\t\ty2 = p2.y - p.y;\r\n\t\tif (y1 > 0 && y2 <= 0 || y2 > 0 && y1 <= 0) {\r\n\t\t\txInt = RobustDeterminant.signOfDet2x2(x1, y1, x2, y2) / (y2 - y1);\r\n\t\t\tif (0.0 < xInt) {\r\n\t\t\t\tthis.crossings++;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbuildIndex: function () {\r\n\t\tthis.tree = new Bintree();\r\n\t\tvar pts = CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates());\r\n\t\tvar mcList = MonotoneChainBuilder.getChains(pts);\r\n\t\tfor (var i = 0; i < mcList.size(); i++) {\r\n\t\t\tvar mc = mcList.get(i);\r\n\t\t\tvar mcEnv = mc.getEnvelope();\r\n\t\t\tthis.interval.min = mcEnv.getMinY();\r\n\t\t\tthis.interval.max = mcEnv.getMaxY();\r\n\t\t\tthis.tree.insert(this.interval, mc);\r\n\t\t}\r\n\t},\r\n\ttestMonotoneChain: function (rayEnv, mcSelecter, mc) {\r\n\t\tmc.select(rayEnv, mcSelecter);\r\n\t},\r\n\tisInside: function (pt) {\r\n\t\tthis.crossings = 0;\r\n\t\tvar rayEnv = new Envelope(Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY, pt.y, pt.y);\r\n\t\tthis.interval.min = pt.y;\r\n\t\tthis.interval.max = pt.y;\r\n\t\tvar segs = this.tree.query(this.interval);\r\n\t\tvar mcSelecter = new MCSelecter(this, pt);\r\n\t\tfor (var i = segs.iterator(); i.hasNext(); ) {\r\n\t\t\tvar mc = i.next();\r\n\t\t\tthis.testMonotoneChain(rayEnv, mcSelecter, mc);\r\n\t\t}\r\n\t\tif (this.crossings % 2 === 1) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [PointInRing];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MCPointInRing;\r\n\t}\r\n});\r\nfunction MCSelecter() {\r\n\tMonotoneChainSelectAction.apply(this);\r\n\tthis.mcp = null;\r\n\tthis.p = null;\r\n\tlet mcp = arguments[0], p = arguments[1];\r\n\tthis.mcp = mcp;\r\n\tthis.p = p;\r\n}\r\ninherits(MCSelecter, MonotoneChainSelectAction);\r\nextend(MCSelecter.prototype, {\r\n\tselect: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet ls = arguments[0];\r\n\t\t\tthis.mcp.testLineSegment(this.p, ls);\r\n\t\t} else return MonotoneChainSelectAction.prototype.select.apply(this, arguments);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MCSelecter;\r\n\t}\r\n});\r\nMCPointInRing.MCSelecter = MCSelecter;\r\n","import CGAlgorithms from './CGAlgorithms';\r\nimport extend from '../../../../extend';\r\nexport default function Angle() {}\r\nextend(Angle.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Angle;\r\n\t}\r\n});\r\nAngle.toDegrees = function (radians) {\r\n\treturn radians * 180 / Math.PI;\r\n};\r\nAngle.normalize = function (angle) {\r\n\twhile (angle > Math.PI) angle -= Angle.PI_TIMES_2;\r\n\twhile (angle <= -Math.PI) angle += Angle.PI_TIMES_2;\r\n\treturn angle;\r\n};\r\nAngle.angle = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet p = arguments[0];\r\n\t\treturn Math.atan2(p.y, p.x);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet p0 = arguments[0], p1 = arguments[1];\r\n\t\tvar dx = p1.x - p0.x;\r\n\t\tvar dy = p1.y - p0.y;\r\n\t\treturn Math.atan2(dy, dx);\r\n\t}\r\n};\r\nAngle.isAcute = function (p0, p1, p2) {\r\n\tvar dx0 = p0.x - p1.x;\r\n\tvar dy0 = p0.y - p1.y;\r\n\tvar dx1 = p2.x - p1.x;\r\n\tvar dy1 = p2.y - p1.y;\r\n\tvar dotprod = dx0 * dx1 + dy0 * dy1;\r\n\treturn dotprod > 0;\r\n};\r\nAngle.isObtuse = function (p0, p1, p2) {\r\n\tvar dx0 = p0.x - p1.x;\r\n\tvar dy0 = p0.y - p1.y;\r\n\tvar dx1 = p2.x - p1.x;\r\n\tvar dy1 = p2.y - p1.y;\r\n\tvar dotprod = dx0 * dx1 + dy0 * dy1;\r\n\treturn dotprod < 0;\r\n};\r\nAngle.interiorAngle = function (p0, p1, p2) {\r\n\tvar anglePrev = Angle.angle(p1, p0);\r\n\tvar angleNext = Angle.angle(p1, p2);\r\n\treturn Math.abs(angleNext - anglePrev);\r\n};\r\nAngle.normalizePositive = function (angle) {\r\n\tif (angle < 0.0) {\r\n\t\twhile (angle < 0.0) angle += Angle.PI_TIMES_2;\r\n\t\tif (angle >= Angle.PI_TIMES_2) angle = 0.0;\r\n\t} else {\r\n\t\twhile (angle >= Angle.PI_TIMES_2) angle -= Angle.PI_TIMES_2;\r\n\t\tif (angle < 0.0) angle = 0.0;\r\n\t}\r\n\treturn angle;\r\n};\r\nAngle.angleBetween = function (tip1, tail, tip2) {\r\n\tvar a1 = Angle.angle(tail, tip1);\r\n\tvar a2 = Angle.angle(tail, tip2);\r\n\treturn Angle.diff(a1, a2);\r\n};\r\nAngle.diff = function (ang1, ang2) {\r\n\tvar delAngle = null;\r\n\tif (ang1 < ang2) {\r\n\t\tdelAngle = ang2 - ang1;\r\n\t} else {\r\n\t\tdelAngle = ang1 - ang2;\r\n\t}\r\n\tif (delAngle > Math.PI) {\r\n\t\tdelAngle = 2 * Math.PI - delAngle;\r\n\t}\r\n\treturn delAngle;\r\n};\r\nAngle.toRadians = function (angleDegrees) {\r\n\treturn angleDegrees * Math.PI / 180.0;\r\n};\r\nAngle.getTurn = function (ang1, ang2) {\r\n\tvar crossproduct = Math.sin(ang2 - ang1);\r\n\tif (crossproduct > 0) {\r\n\t\treturn Angle.COUNTERCLOCKWISE;\r\n\t}\r\n\tif (crossproduct < 0) {\r\n\t\treturn Angle.CLOCKWISE;\r\n\t}\r\n\treturn Angle.NONE;\r\n};\r\nAngle.angleBetweenOriented = function (tip1, tail, tip2) {\r\n\tvar a1 = Angle.angle(tail, tip1);\r\n\tvar a2 = Angle.angle(tail, tip2);\r\n\tvar angDel = a2 - a1;\r\n\tif (angDel <= -Math.PI) return angDel + Angle.PI_TIMES_2;\r\n\tif (angDel > Math.PI) return angDel - Angle.PI_TIMES_2;\r\n\treturn angDel;\r\n};\r\nAngle.PI_TIMES_2 = 2.0 * Math.PI;\r\nAngle.PI_OVER_2 = Math.PI / 2.0;\r\nAngle.PI_OVER_4 = Math.PI / 4.0;\r\nAngle.COUNTERCLOCKWISE = CGAlgorithms.COUNTERCLOCKWISE;\r\nAngle.CLOCKWISE = CGAlgorithms.CLOCKWISE;\r\nAngle.NONE = CGAlgorithms.COLLINEAR;\r\n","import Coordinate from './Coordinate';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport Angle from '../algorithm/Angle';\r\nimport HCoordinate from '../algorithm/HCoordinate';\r\nexport default function Triangle() {\r\n\tthis.p0 = null;\r\n\tthis.p1 = null;\r\n\tthis.p2 = null;\r\n\tlet p0 = arguments[0], p1 = arguments[1], p2 = arguments[2];\r\n\tthis.p0 = p0;\r\n\tthis.p1 = p1;\r\n\tthis.p2 = p2;\r\n}\r\nextend(Triangle.prototype, {\r\n\tarea: function () {\r\n\t\treturn Triangle.area(this.p0, this.p1, this.p2);\r\n\t},\r\n\tsignedArea: function () {\r\n\t\treturn Triangle.signedArea(this.p0, this.p1, this.p2);\r\n\t},\r\n\tinterpolateZ: function (p) {\r\n\t\tif (p === null) throw new IllegalArgumentException(\"Supplied point is null.\");\r\n\t\treturn Triangle.interpolateZ(p, this.p0, this.p1, this.p2);\r\n\t},\r\n\tlongestSideLength: function () {\r\n\t\treturn Triangle.longestSideLength(this.p0, this.p1, this.p2);\r\n\t},\r\n\tisAcute: function () {\r\n\t\treturn Triangle.isAcute(this.p0, this.p1, this.p2);\r\n\t},\r\n\tcircumcentre: function () {\r\n\t\treturn Triangle.circumcentre(this.p0, this.p1, this.p2);\r\n\t},\r\n\tarea3D: function () {\r\n\t\treturn Triangle.area3D(this.p0, this.p1, this.p2);\r\n\t},\r\n\tcentroid: function () {\r\n\t\treturn Triangle.centroid(this.p0, this.p1, this.p2);\r\n\t},\r\n\tinCentre: function () {\r\n\t\treturn Triangle.inCentre(this.p0, this.p1, this.p2);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Triangle;\r\n\t}\r\n});\r\nTriangle.area = function (a, b, c) {\r\n\treturn Math.abs(((c.x - a.x) * (b.y - a.y) - (b.x - a.x) * (c.y - a.y)) / 2);\r\n};\r\nTriangle.signedArea = function (a, b, c) {\r\n\treturn ((c.x - a.x) * (b.y - a.y) - (b.x - a.x) * (c.y - a.y)) / 2;\r\n};\r\nTriangle.det = function (m00, m01, m10, m11) {\r\n\treturn m00 * m11 - m01 * m10;\r\n};\r\nTriangle.interpolateZ = function (p, v0, v1, v2) {\r\n\tvar x0 = v0.x;\r\n\tvar y0 = v0.y;\r\n\tvar a = v1.x - x0;\r\n\tvar b = v2.x - x0;\r\n\tvar c = v1.y - y0;\r\n\tvar d = v2.y - y0;\r\n\tvar det = a * d - b * c;\r\n\tvar dx = p.x - x0;\r\n\tvar dy = p.y - y0;\r\n\tvar t = (d * dx - b * dy) / det;\r\n\tvar u = (-c * dx + a * dy) / det;\r\n\tvar z = v0.z + t * (v1.z - v0.z) + u * (v2.z - v0.z);\r\n\treturn z;\r\n};\r\nTriangle.longestSideLength = function (a, b, c) {\r\n\tvar lenAB = a.distance(b);\r\n\tvar lenBC = b.distance(c);\r\n\tvar lenCA = c.distance(a);\r\n\tvar maxLen = lenAB;\r\n\tif (lenBC > maxLen) maxLen = lenBC;\r\n\tif (lenCA > maxLen) maxLen = lenCA;\r\n\treturn maxLen;\r\n};\r\nTriangle.isAcute = function (a, b, c) {\r\n\tif (!Angle.isAcute(a, b, c)) return false;\r\n\tif (!Angle.isAcute(b, c, a)) return false;\r\n\tif (!Angle.isAcute(c, a, b)) return false;\r\n\treturn true;\r\n};\r\nTriangle.circumcentre = function (a, b, c) {\r\n\tvar cx = c.x;\r\n\tvar cy = c.y;\r\n\tvar ax = a.x - cx;\r\n\tvar ay = a.y - cy;\r\n\tvar bx = b.x - cx;\r\n\tvar by = b.y - cy;\r\n\tvar denom = 2 * Triangle.det(ax, ay, bx, by);\r\n\tvar numx = Triangle.det(ay, ax * ax + ay * ay, by, bx * bx + by * by);\r\n\tvar numy = Triangle.det(ax, ax * ax + ay * ay, bx, bx * bx + by * by);\r\n\tvar ccx = cx - numx / denom;\r\n\tvar ccy = cy + numy / denom;\r\n\treturn new Coordinate(ccx, ccy);\r\n};\r\nTriangle.perpendicularBisector = function (a, b) {\r\n\tvar dx = b.x - a.x;\r\n\tvar dy = b.y - a.y;\r\n\tvar l1 = new HCoordinate(a.x + dx / 2.0, a.y + dy / 2.0, 1.0);\r\n\tvar l2 = new HCoordinate(a.x - dy + dx / 2.0, a.y + dx + dy / 2.0, 1.0);\r\n\treturn new HCoordinate(l1, l2);\r\n};\r\nTriangle.angleBisector = function (a, b, c) {\r\n\tvar len0 = b.distance(a);\r\n\tvar len2 = b.distance(c);\r\n\tvar frac = len0 / (len0 + len2);\r\n\tvar dx = c.x - a.x;\r\n\tvar dy = c.y - a.y;\r\n\tvar splitPt = new Coordinate(a.x + frac * dx, a.y + frac * dy);\r\n\treturn splitPt;\r\n};\r\nTriangle.area3D = function (a, b, c) {\r\n\tvar ux = b.x - a.x;\r\n\tvar uy = b.y - a.y;\r\n\tvar uz = b.z - a.z;\r\n\tvar vx = c.x - a.x;\r\n\tvar vy = c.y - a.y;\r\n\tvar vz = c.z - a.z;\r\n\tvar crossx = uy * vz - uz * vy;\r\n\tvar crossy = uz * vx - ux * vz;\r\n\tvar crossz = ux * vy - uy * vx;\r\n\tvar absSq = crossx * crossx + crossy * crossy + crossz * crossz;\r\n\tvar area3D = Math.sqrt(absSq) / 2;\r\n\treturn area3D;\r\n};\r\nTriangle.centroid = function (a, b, c) {\r\n\tvar x = (a.x + b.x + c.x) / 3;\r\n\tvar y = (a.y + b.y + c.y) / 3;\r\n\treturn new Coordinate(x, y);\r\n};\r\nTriangle.inCentre = function (a, b, c) {\r\n\tvar len0 = b.distance(c);\r\n\tvar len1 = a.distance(c);\r\n\tvar len2 = a.distance(b);\r\n\tvar circum = len0 + len1 + len2;\r\n\tvar inCentreX = (len0 * a.x + len1 * b.x + len2 * c.x) / circum;\r\n\tvar inCentreY = (len0 * a.y + len1 * b.y + len2 * c.y) / circum;\r\n\treturn new Coordinate(inCentreX, inCentreY);\r\n};\r\n","import Coordinate from '../geom/Coordinate';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport CoordinateArrays from '../geom/CoordinateArrays';\r\nimport Angle from './Angle';\r\nimport Assert from '../util/Assert';\r\nimport Triangle from '../geom/Triangle';\r\nexport default function MinimumBoundingCircle() {\r\n\tthis.input = null;\r\n\tthis.extremalPts = null;\r\n\tthis.centre = null;\r\n\tthis.radius = 0.0;\r\n\tlet geom = arguments[0];\r\n\tthis.input = geom;\r\n}\r\nextend(MinimumBoundingCircle.prototype, {\r\n\tgetRadius: function () {\r\n\t\tthis.compute();\r\n\t\treturn this.radius;\r\n\t},\r\n\tgetDiameter: function () {\r\n\t\tthis.compute();\r\n\t\tswitch (this.extremalPts.length) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn this.input.getFactory().createLineString();\r\n\t\t\tcase 1:\r\n\t\t\t\treturn this.input.getFactory().createPoint(this.centre);\r\n\t\t}\r\n\t\tvar p0 = this.extremalPts[0];\r\n\t\tvar p1 = this.extremalPts[1];\r\n\t\treturn this.input.getFactory().createLineString([p0, p1]);\r\n\t},\r\n\tgetExtremalPoints: function () {\r\n\t\tthis.compute();\r\n\t\treturn this.extremalPts;\r\n\t},\r\n\tcomputeCirclePoints: function () {\r\n\t\tif (this.input.isEmpty()) {\r\n\t\t\tthis.extremalPts = new Array(0).fill(null);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.input.getNumPoints() === 1) {\r\n\t\t\tvar pts = this.input.getCoordinates();\r\n\t\t\tthis.extremalPts = [new Coordinate(pts[0])];\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar convexHull = this.input.convexHull();\r\n\t\tvar hullPts = convexHull.getCoordinates();\r\n\t\tvar pts = hullPts;\r\n\t\tif (hullPts[0].equals2D(hullPts[hullPts.length - 1])) {\r\n\t\t\tpts = new Array(hullPts.length - 1).fill(null);\r\n\t\t\tCoordinateArrays.copyDeep(hullPts, 0, pts, 0, hullPts.length - 1);\r\n\t\t}\r\n\t\tif (pts.length <= 2) {\r\n\t\t\tthis.extremalPts = CoordinateArrays.copyDeep(pts);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar P = MinimumBoundingCircle.lowestPoint(pts);\r\n\t\tvar Q = MinimumBoundingCircle.pointWitMinAngleWithX(pts, P);\r\n\t\tfor (var i = 0; i < pts.length; i++) {\r\n\t\t\tvar R = MinimumBoundingCircle.pointWithMinAngleWithSegment(pts, P, Q);\r\n\t\t\tif (Angle.isObtuse(P, R, Q)) {\r\n\t\t\t\tthis.extremalPts = [new Coordinate(P), new Coordinate(Q)];\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (Angle.isObtuse(R, P, Q)) {\r\n\t\t\t\tP = R;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (Angle.isObtuse(R, Q, P)) {\r\n\t\t\t\tQ = R;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tthis.extremalPts = [new Coordinate(P), new Coordinate(Q), new Coordinate(R)];\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tAssert.shouldNeverReachHere(\"Logic failure in Minimum Bounding Circle algorithm!\");\r\n\t},\r\n\tcompute: function () {\r\n\t\tif (this.extremalPts !== null) return null;\r\n\t\tthis.computeCirclePoints();\r\n\t\tthis.computeCentre();\r\n\t\tif (this.centre !== null) this.radius = this.centre.distance(this.extremalPts[0]);\r\n\t},\r\n\tgetFarthestPoints: function () {\r\n\t\tthis.compute();\r\n\t\tswitch (this.extremalPts.length) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn this.input.getFactory().createLineString();\r\n\t\t\tcase 1:\r\n\t\t\t\treturn this.input.getFactory().createPoint(this.centre);\r\n\t\t}\r\n\t\tvar p0 = this.extremalPts[0];\r\n\t\tvar p1 = this.extremalPts[this.extremalPts.length - 1];\r\n\t\treturn this.input.getFactory().createLineString([p0, p1]);\r\n\t},\r\n\tgetCircle: function () {\r\n\t\tthis.compute();\r\n\t\tif (this.centre === null) return this.input.getFactory().createPolygon();\r\n\t\tvar centrePoint = this.input.getFactory().createPoint(this.centre);\r\n\t\tif (this.radius === 0.0) return centrePoint;\r\n\t\treturn centrePoint.buffer(this.radius);\r\n\t},\r\n\tgetCentre: function () {\r\n\t\tthis.compute();\r\n\t\treturn this.centre;\r\n\t},\r\n\tcomputeCentre: function () {\r\n\t\tswitch (this.extremalPts.length) {\r\n\t\t\tcase 0:\r\n\t\t\t\tthis.centre = null;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tthis.centre = this.extremalPts[0];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tthis.centre = new Coordinate((this.extremalPts[0].x + this.extremalPts[1].x) / 2.0, (this.extremalPts[0].y + this.extremalPts[1].y) / 2.0);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tthis.centre = Triangle.circumcentre(this.extremalPts[0], this.extremalPts[1], this.extremalPts[2]);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MinimumBoundingCircle;\r\n\t}\r\n});\r\nMinimumBoundingCircle.pointWitMinAngleWithX = function (pts, P) {\r\n\tvar minSin = Double.MAX_VALUE;\r\n\tvar minAngPt = null;\r\n\tfor (var i = 0; i < pts.length; i++) {\r\n\t\tvar p = pts[i];\r\n\t\tif (p === P) continue;\r\n\t\tvar dx = p.x - P.x;\r\n\t\tvar dy = p.y - P.y;\r\n\t\tif (dy < 0) dy = -dy;\r\n\t\tvar len = Math.sqrt(dx * dx + dy * dy);\r\n\t\tvar sin = dy / len;\r\n\t\tif (sin < minSin) {\r\n\t\t\tminSin = sin;\r\n\t\t\tminAngPt = p;\r\n\t\t}\r\n\t}\r\n\treturn minAngPt;\r\n};\r\nMinimumBoundingCircle.lowestPoint = function (pts) {\r\n\tvar min = pts[0];\r\n\tfor (var i = 1; i < pts.length; i++) {\r\n\t\tif (pts[i].y < min.y) min = pts[i];\r\n\t}\r\n\treturn min;\r\n};\r\nMinimumBoundingCircle.pointWithMinAngleWithSegment = function (pts, P, Q) {\r\n\tvar minAng = Double.MAX_VALUE;\r\n\tvar minAngPt = null;\r\n\tfor (var i = 0; i < pts.length; i++) {\r\n\t\tvar p = pts[i];\r\n\t\tif (p === P) continue;\r\n\t\tif (p === Q) continue;\r\n\t\tvar ang = Angle.angleBetween(P, p, Q);\r\n\t\tif (ang < minAng) {\r\n\t\t\tminAng = ang;\r\n\t\t\tminAngPt = p;\r\n\t\t}\r\n\t}\r\n\treturn minAngPt;\r\n};\r\n","import Coordinate from '../geom/Coordinate';\r\nimport Polygon from '../geom/Polygon';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport LineSegment from '../geom/LineSegment';\r\nimport ConvexHull from './ConvexHull';\r\nexport default function MinimumDiameter() {\r\n\tthis.inputGeom = null;\r\n\tthis.isConvex = null;\r\n\tthis.convexHullPts = null;\r\n\tthis.minBaseSeg = new LineSegment();\r\n\tthis.minWidthPt = null;\r\n\tthis.minPtIndex = null;\r\n\tthis.minWidth = 0.0;\r\n\tif (arguments.length === 1) {\r\n\t\tlet inputGeom = arguments[0];\r\n\t\tMinimumDiameter.call(this, inputGeom, false);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet inputGeom = arguments[0], isConvex = arguments[1];\r\n\t\tthis.inputGeom = inputGeom;\r\n\t\tthis.isConvex = isConvex;\r\n\t}\r\n}\r\nextend(MinimumDiameter.prototype, {\r\n\tgetWidthCoordinate: function () {\r\n\t\tthis.computeMinimumDiameter();\r\n\t\treturn this.minWidthPt;\r\n\t},\r\n\tgetSupportingSegment: function () {\r\n\t\tthis.computeMinimumDiameter();\r\n\t\treturn this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0, this.minBaseSeg.p1]);\r\n\t},\r\n\tgetDiameter: function () {\r\n\t\tthis.computeMinimumDiameter();\r\n\t\tif (this.minWidthPt === null) return this.inputGeom.getFactory().createLineString(null);\r\n\t\tvar basePt = this.minBaseSeg.project(this.minWidthPt);\r\n\t\treturn this.inputGeom.getFactory().createLineString([basePt, this.minWidthPt]);\r\n\t},\r\n\tcomputeWidthConvex: function (convexGeom) {\r\n\t\tif (convexGeom instanceof Polygon) this.convexHullPts = convexGeom.getExteriorRing().getCoordinates(); else this.convexHullPts = convexGeom.getCoordinates();\r\n\t\tif (this.convexHullPts.length === 0) {\r\n\t\t\tthis.minWidth = 0.0;\r\n\t\t\tthis.minWidthPt = null;\r\n\t\t\tthis.minBaseSeg = null;\r\n\t\t} else if (this.convexHullPts.length === 1) {\r\n\t\t\tthis.minWidth = 0.0;\r\n\t\t\tthis.minWidthPt = this.convexHullPts[0];\r\n\t\t\tthis.minBaseSeg.p0 = this.convexHullPts[0];\r\n\t\t\tthis.minBaseSeg.p1 = this.convexHullPts[0];\r\n\t\t} else if (this.convexHullPts.length === 2 || this.convexHullPts.length === 3) {\r\n\t\t\tthis.minWidth = 0.0;\r\n\t\t\tthis.minWidthPt = this.convexHullPts[0];\r\n\t\t\tthis.minBaseSeg.p0 = this.convexHullPts[0];\r\n\t\t\tthis.minBaseSeg.p1 = this.convexHullPts[1];\r\n\t\t} else this.computeConvexRingMinDiameter(this.convexHullPts);\r\n\t},\r\n\tcomputeConvexRingMinDiameter: function (pts) {\r\n\t\tthis.minWidth = Double.MAX_VALUE;\r\n\t\tvar currMaxIndex = 1;\r\n\t\tvar seg = new LineSegment();\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tseg.p0 = pts[i];\r\n\t\t\tseg.p1 = pts[i + 1];\r\n\t\t\tcurrMaxIndex = this.findMaxPerpDistance(pts, seg, currMaxIndex);\r\n\t\t}\r\n\t},\r\n\tcomputeMinimumDiameter: function () {\r\n\t\tif (this.minWidthPt !== null) return null;\r\n\t\tif (this.isConvex) this.computeWidthConvex(this.inputGeom); else {\r\n\t\t\tvar convexGeom = new ConvexHull(this.inputGeom).getConvexHull();\r\n\t\t\tthis.computeWidthConvex(convexGeom);\r\n\t\t}\r\n\t},\r\n\tgetLength: function () {\r\n\t\tthis.computeMinimumDiameter();\r\n\t\treturn this.minWidth;\r\n\t},\r\n\tfindMaxPerpDistance: function (pts, seg, startIndex) {\r\n\t\tvar maxPerpDistance = seg.distancePerpendicular(pts[startIndex]);\r\n\t\tvar nextPerpDistance = maxPerpDistance;\r\n\t\tvar maxIndex = startIndex;\r\n\t\tvar nextIndex = maxIndex;\r\n\t\twhile (nextPerpDistance >= maxPerpDistance) {\r\n\t\t\tmaxPerpDistance = nextPerpDistance;\r\n\t\t\tmaxIndex = nextIndex;\r\n\t\t\tnextIndex = MinimumDiameter.nextIndex(pts, maxIndex);\r\n\t\t\tnextPerpDistance = seg.distancePerpendicular(pts[nextIndex]);\r\n\t\t}\r\n\t\tif (maxPerpDistance < this.minWidth) {\r\n\t\t\tthis.minPtIndex = maxIndex;\r\n\t\t\tthis.minWidth = maxPerpDistance;\r\n\t\t\tthis.minWidthPt = pts[this.minPtIndex];\r\n\t\t\tthis.minBaseSeg = new LineSegment(seg);\r\n\t\t}\r\n\t\treturn maxIndex;\r\n\t},\r\n\tgetMinimumRectangle: function () {\r\n\t\tthis.computeMinimumDiameter();\r\n\t\tif (this.minWidth === 0.0) {\r\n\t\t\tif (this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)) {\r\n\t\t\t\treturn this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0);\r\n\t\t\t}\r\n\t\t\treturn this.minBaseSeg.toGeometry(this.inputGeom.getFactory());\r\n\t\t}\r\n\t\tvar dx = this.minBaseSeg.p1.x - this.minBaseSeg.p0.x;\r\n\t\tvar dy = this.minBaseSeg.p1.y - this.minBaseSeg.p0.y;\r\n\t\tvar minPara = Double.MAX_VALUE;\r\n\t\tvar maxPara = -Double.MAX_VALUE;\r\n\t\tvar minPerp = Double.MAX_VALUE;\r\n\t\tvar maxPerp = -Double.MAX_VALUE;\r\n\t\tfor (var i = 0; i < this.convexHullPts.length; i++) {\r\n\t\t\tvar paraC = MinimumDiameter.computeC(dx, dy, this.convexHullPts[i]);\r\n\t\t\tif (paraC > maxPara) maxPara = paraC;\r\n\t\t\tif (paraC < minPara) minPara = paraC;\r\n\t\t\tvar perpC = MinimumDiameter.computeC(-dy, dx, this.convexHullPts[i]);\r\n\t\t\tif (perpC > maxPerp) maxPerp = perpC;\r\n\t\t\tif (perpC < minPerp) minPerp = perpC;\r\n\t\t}\r\n\t\tvar maxPerpLine = MinimumDiameter.computeSegmentForLine(-dx, -dy, maxPerp);\r\n\t\tvar minPerpLine = MinimumDiameter.computeSegmentForLine(-dx, -dy, minPerp);\r\n\t\tvar maxParaLine = MinimumDiameter.computeSegmentForLine(-dy, dx, maxPara);\r\n\t\tvar minParaLine = MinimumDiameter.computeSegmentForLine(-dy, dx, minPara);\r\n\t\tvar p0 = maxParaLine.lineIntersection(maxPerpLine);\r\n\t\tvar p1 = minParaLine.lineIntersection(maxPerpLine);\r\n\t\tvar p2 = minParaLine.lineIntersection(minPerpLine);\r\n\t\tvar p3 = maxParaLine.lineIntersection(minPerpLine);\r\n\t\tvar shell = this.inputGeom.getFactory().createLinearRing([p0, p1, p2, p3, p0]);\r\n\t\treturn this.inputGeom.getFactory().createPolygon(shell, null);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MinimumDiameter;\r\n\t}\r\n});\r\nMinimumDiameter.nextIndex = function (pts, index) {\r\n\tindex++;\r\n\tif (index >= pts.length) index = 0;\r\n\treturn index;\r\n};\r\nMinimumDiameter.computeC = function (a, b, p) {\r\n\treturn a * p.y - b * p.x;\r\n};\r\nMinimumDiameter.getMinimumDiameter = function (geom) {\r\n\treturn new MinimumDiameter(geom).getDiameter();\r\n};\r\nMinimumDiameter.getMinimumRectangle = function (geom) {\r\n\treturn new MinimumDiameter(geom).getMinimumRectangle();\r\n};\r\nMinimumDiameter.computeSegmentForLine = function (a, b, c) {\r\n\tvar p0 = null;\r\n\tvar p1 = null;\r\n\tif (Math.abs(b) > Math.abs(a)) {\r\n\t\tp0 = new Coordinate(0.0, c / b);\r\n\t\tp1 = new Coordinate(1.0, c / b - a / b);\r\n\t} else {\r\n\t\tp0 = new Coordinate(c / a, 0.0);\r\n\t\tp1 = new Coordinate(c / a - b / a, 1.0);\r\n\t}\r\n\treturn new LineSegment(p0, p1);\r\n};\r\n","import LineString from '../geom/LineString';\r\nimport CoordinateList from '../geom/CoordinateList';\r\nimport GeometryTransformer from '../geom/util/GeometryTransformer';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport MultiPolygon from '../geom/MultiPolygon';\r\nimport LineSegment from '../geom/LineSegment';\r\nimport inherits from '../../../../inherits';\r\nexport default function Densifier() {\r\n\tthis.inputGeom = null;\r\n\tthis.distanceTolerance = null;\r\n\tlet inputGeom = arguments[0];\r\n\tthis.inputGeom = inputGeom;\r\n}\r\nextend(Densifier.prototype, {\r\n\tgetResultGeometry: function () {\r\n\t\treturn new DensifyTransformer(this.distanceTolerance).transform(this.inputGeom);\r\n\t},\r\n\tsetDistanceTolerance: function (distanceTolerance) {\r\n\t\tif (distanceTolerance <= 0.0) throw new IllegalArgumentException(\"Tolerance must be positive\");\r\n\t\tthis.distanceTolerance = distanceTolerance;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Densifier;\r\n\t}\r\n});\r\nDensifier.densifyPoints = function (pts, distanceTolerance, precModel) {\r\n\tvar seg = new LineSegment();\r\n\tvar coordList = new CoordinateList();\r\n\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\tseg.p0 = pts[i];\r\n\t\tseg.p1 = pts[i + 1];\r\n\t\tcoordList.add(seg.p0, false);\r\n\t\tvar len = seg.getLength();\r\n\t\tvar densifiedSegCount = Math.trunc(len / distanceTolerance) + 1;\r\n\t\tif (densifiedSegCount > 1) {\r\n\t\t\tvar densifiedSegLen = len / densifiedSegCount;\r\n\t\t\tfor (var j = 1; j < densifiedSegCount; j++) {\r\n\t\t\t\tvar segFract = j * densifiedSegLen / len;\r\n\t\t\t\tvar p = seg.pointAlong(segFract);\r\n\t\t\t\tprecModel.makePrecise(p);\r\n\t\t\t\tcoordList.add(p, false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcoordList.add(pts[pts.length - 1], false);\r\n\treturn coordList.toCoordinateArray();\r\n};\r\nDensifier.densify = function (geom, distanceTolerance) {\r\n\tvar densifier = new Densifier(geom);\r\n\tdensifier.setDistanceTolerance(distanceTolerance);\r\n\treturn densifier.getResultGeometry();\r\n};\r\nfunction DensifyTransformer() {\r\n\tGeometryTransformer.apply(this);\r\n\tthis.distanceTolerance = null;\r\n\tlet distanceTolerance = arguments[0];\r\n\tthis.distanceTolerance = distanceTolerance;\r\n}\r\ninherits(DensifyTransformer, GeometryTransformer);\r\nextend(DensifyTransformer.prototype, {\r\n\ttransformMultiPolygon: function (geom, parent) {\r\n\t\tvar roughGeom = GeometryTransformer.prototype.transformMultiPolygon.call(this, geom, parent);\r\n\t\treturn this.createValidArea(roughGeom);\r\n\t},\r\n\ttransformPolygon: function (geom, parent) {\r\n\t\tvar roughGeom = GeometryTransformer.prototype.transformPolygon.call(this, geom, parent);\r\n\t\tif (parent instanceof MultiPolygon) {\r\n\t\t\treturn roughGeom;\r\n\t\t}\r\n\t\treturn this.createValidArea(roughGeom);\r\n\t},\r\n\ttransformCoordinates: function (coords, parent) {\r\n\t\tvar inputPts = coords.toCoordinateArray();\r\n\t\tvar newPts = Densifier.densifyPoints(inputPts, this.distanceTolerance, parent.getPrecisionModel());\r\n\t\tif (parent instanceof LineString && newPts.length === 1) {\r\n\t\t\tnewPts = new Array(0).fill(null);\r\n\t\t}\r\n\t\treturn this.factory.getCoordinateSequenceFactory().create(newPts);\r\n\t},\r\n\tcreateValidArea: function (roughAreaGeom) {\r\n\t\treturn roughAreaGeom.buffer(0.0);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DensifyTransformer;\r\n\t}\r\n});\r\nDensifier.DensifyTransformer = DensifyTransformer;\r\n","import CGAlgorithms from '../algorithm/CGAlgorithms';\r\nimport extend from '../../../../extend';\r\nimport Quadrant from '../geomgraph/Quadrant';\r\nimport Assert from '../util/Assert';\r\nexport default function HalfEdge() {\r\n\tthis._orig = null;\r\n\tthis._sym = null;\r\n\tthis._next = null;\r\n\tlet orig = arguments[0];\r\n\tthis._orig = orig;\r\n}\r\nextend(HalfEdge.prototype, {\r\n\tfind: function (dest) {\r\n\t\tvar oNext = this;\r\n\t\tdo {\r\n\t\t\tif (oNext === null) return null;\r\n\t\t\tif (oNext.dest().equals2D(dest)) return oNext;\r\n\t\t\toNext = oNext.oNext();\r\n\t\t} while (oNext !== this);\r\n\t\treturn null;\r\n\t},\r\n\tdest: function () {\r\n\t\treturn this._sym._orig;\r\n\t},\r\n\toNext: function () {\r\n\t\treturn this._sym._next;\r\n\t},\r\n\tinsert: function (e) {\r\n\t\tif (this.oNext() === this) {\r\n\t\t\tthis.insertAfter(e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar ecmp = this.compareTo(e);\r\n\t\tvar ePrev = this;\r\n\t\tdo {\r\n\t\t\tvar oNext = ePrev.oNext();\r\n\t\t\tvar cmp = oNext.compareTo(e);\r\n\t\t\tif (cmp !== ecmp || oNext === this) {\r\n\t\t\t\tePrev.insertAfter(e);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tePrev = oNext;\r\n\t\t} while (ePrev !== this);\r\n\t\tAssert.shouldNeverReachHere();\r\n\t},\r\n\tinsertAfter: function (e) {\r\n\t\tAssert.equals(this._orig, e.orig());\r\n\t\tvar save = this.oNext();\r\n\t\tthis._sym.setNext(e);\r\n\t\te.sym().setNext(save);\r\n\t},\r\n\tdegree: function () {\r\n\t\tvar degree = 0;\r\n\t\tvar e = this;\r\n\t\tdo {\r\n\t\t\tdegree++;\r\n\t\t\te = e.oNext();\r\n\t\t} while (e !== this);\r\n\t\treturn degree;\r\n\t},\r\n\tequals: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet p0 = arguments[0], p1 = arguments[1];\r\n\t\t\treturn this._orig.equals2D(p0) && this._sym._orig.equals(p1);\r\n\t\t}\r\n\t},\r\n\tdeltaY: function () {\r\n\t\treturn this._sym._orig.y - this._orig.y;\r\n\t},\r\n\tsym: function () {\r\n\t\treturn this._sym;\r\n\t},\r\n\tprev: function () {\r\n\t\treturn this._sym.next()._sym;\r\n\t},\r\n\tcompareAngularDirection: function (e) {\r\n\t\tvar dx = this.deltaX();\r\n\t\tvar dy = this.deltaY();\r\n\t\tvar dx2 = e.deltaX();\r\n\t\tvar dy2 = e.deltaY();\r\n\t\tif (dx === dx2 && dy === dy2) return 0;\r\n\t\tvar quadrant = Quadrant.quadrant(dx, dy);\r\n\t\tvar quadrant2 = Quadrant.quadrant(dx2, dy2);\r\n\t\tif (quadrant > quadrant2) return 1;\r\n\t\tif (quadrant < quadrant2) return -1;\r\n\t\treturn CGAlgorithms.computeOrientation(e._orig, e.dest(), this.dest());\r\n\t},\r\n\tprevNode: function () {\r\n\t\tvar e = this;\r\n\t\twhile (e.degree() === 2) {\r\n\t\t\te = e.prev();\r\n\t\t\tif (e === this) return null;\r\n\t\t}\r\n\t\treturn e;\r\n\t},\r\n\tcompareTo: function (obj) {\r\n\t\tvar e = obj;\r\n\t\tvar comp = this.compareAngularDirection(e);\r\n\t\treturn comp;\r\n\t},\r\n\tnext: function () {\r\n\t\treturn this._next;\r\n\t},\r\n\tsetSym: function (e) {\r\n\t\tthis._sym = e;\r\n\t},\r\n\torig: function () {\r\n\t\treturn this._orig;\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn \"HE(\" + this._orig.x + \" \" + this._orig.y + \", \" + this._sym._orig.x + \" \" + this._sym._orig.y + \")\";\r\n\t},\r\n\tsetNext: function (e) {\r\n\t\tthis._next = e;\r\n\t},\r\n\tinit: function (e) {\r\n\t\tthis.setSym(e);\r\n\t\te.setSym(this);\r\n\t\tthis.setNext(e);\r\n\t\te.setNext(this);\r\n\t},\r\n\tdeltaX: function () {\r\n\t\treturn this._sym._orig.x - this._orig.x;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn HalfEdge;\r\n\t}\r\n});\r\nHalfEdge.init = function (e0, e1) {\r\n\tif (e0._sym !== null || e1._sym !== null || e0._next !== null || e1._next !== null) throw new IllegalStateException(\"Edges are already initialized\");\r\n\te0.init(e1);\r\n\treturn e0;\r\n};\r\nHalfEdge.create = function (p0, p1) {\r\n\tvar e0 = new HalfEdge(p0);\r\n\tvar e1 = new HalfEdge(p1);\r\n\te0.init(e1);\r\n\treturn e0;\r\n};\r\n","import extend from '../../../../extend';\r\nimport HalfEdge from './HalfEdge';\r\nimport inherits from '../../../../inherits';\r\nexport default function MarkHalfEdge() {\r\n\tthis._isMarked = false;\r\n\tlet orig = arguments[0];\r\n\tHalfEdge.call(this, orig);\r\n}\r\ninherits(MarkHalfEdge, HalfEdge);\r\nextend(MarkHalfEdge.prototype, {\r\n\tmark: function () {\r\n\t\tthis._isMarked = true;\r\n\t},\r\n\tsetMark: function (isMarked) {\r\n\t\tthis._isMarked = isMarked;\r\n\t},\r\n\tisMarked: function () {\r\n\t\treturn this._isMarked;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MarkHalfEdge;\r\n\t}\r\n});\r\nMarkHalfEdge.setMarkBoth = function (e, isMarked) {\r\n\te.setMark(isMarked);\r\n\te.sym().setMark(isMarked);\r\n};\r\nMarkHalfEdge.isMarked = function (e) {\r\n\treturn e.isMarked();\r\n};\r\nMarkHalfEdge.setMark = function (e, isMarked) {\r\n\te.setMark(isMarked);\r\n};\r\nMarkHalfEdge.markBoth = function (e) {\r\n\te.mark();\r\n\te.sym().mark();\r\n};\r\nMarkHalfEdge.mark = function (e) {\r\n\te.mark();\r\n};\r\n","import HashMap from '../../../../java/util/HashMap';\r\nimport extend from '../../../../extend';\r\nimport HalfEdge from './HalfEdge';\r\nexport default function EdgeGraph() {\r\n\tthis.vertexMap = new HashMap();\r\n}\r\nextend(EdgeGraph.prototype, {\r\n\tinsert: function (orig, dest, eAdj) {\r\n\t\tvar e = this.create(orig, dest);\r\n\t\tif (eAdj !== null) {\r\n\t\t\teAdj.insert(e);\r\n\t\t} else {\r\n\t\t\tthis.vertexMap.put(orig, e);\r\n\t\t}\r\n\t\tvar eAdjDest = this.vertexMap.get(dest);\r\n\t\tif (eAdjDest !== null) {\r\n\t\t\teAdjDest.insert(e.sym());\r\n\t\t} else {\r\n\t\t\tthis.vertexMap.put(dest, e.sym());\r\n\t\t}\r\n\t\treturn e;\r\n\t},\r\n\tcreate: function (p0, p1) {\r\n\t\tvar e0 = this.createEdge(p0);\r\n\t\tvar e1 = this.createEdge(p1);\r\n\t\tHalfEdge.init(e0, e1);\r\n\t\treturn e0;\r\n\t},\r\n\tcreateEdge: function (orig) {\r\n\t\treturn new HalfEdge(orig);\r\n\t},\r\n\taddEdge: function (orig, dest) {\r\n\t\tif (!EdgeGraph.isValidEdge(orig, dest)) return null;\r\n\t\tvar eAdj = this.vertexMap.get(orig);\r\n\t\tvar eSame = null;\r\n\t\tif (eAdj !== null) {\r\n\t\t\teSame = eAdj.find(dest);\r\n\t\t}\r\n\t\tif (eSame !== null) {\r\n\t\t\treturn eSame;\r\n\t\t}\r\n\t\tvar e = this.insert(orig, dest, eAdj);\r\n\t\treturn e;\r\n\t},\r\n\tgetVertexEdges: function () {\r\n\t\treturn this.vertexMap.values();\r\n\t},\r\n\tfindEdge: function (orig, dest) {\r\n\t\tvar e = this.vertexMap.get(orig);\r\n\t\tif (e === null) return null;\r\n\t\treturn e.find(dest);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeGraph;\r\n\t}\r\n});\r\nEdgeGraph.isValidEdge = function (orig, dest) {\r\n\tvar cmp = dest.compareTo(orig);\r\n\treturn cmp !== 0;\r\n};\r\n","import extend from '../../../../extend';\r\nimport MarkHalfEdge from '../edgegraph/MarkHalfEdge';\r\nimport inherits from '../../../../inherits';\r\nexport default function DissolveHalfEdge() {\r\n\tthis._isStart = false;\r\n\tlet orig = arguments[0];\r\n\tMarkHalfEdge.call(this, orig);\r\n}\r\ninherits(DissolveHalfEdge, MarkHalfEdge);\r\nextend(DissolveHalfEdge.prototype, {\r\n\tsetStart: function () {\r\n\t\tthis._isStart = true;\r\n\t},\r\n\tisStart: function () {\r\n\t\treturn this._isStart;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DissolveHalfEdge;\r\n\t}\r\n});\r\n","import EdgeGraph from '../edgegraph/EdgeGraph';\r\nimport extend from '../../../../extend';\r\nimport DissolveHalfEdge from './DissolveHalfEdge';\r\nimport inherits from '../../../../inherits';\r\nexport default function DissolveEdgeGraph() {\r\n\tEdgeGraph.apply(this);\r\n}\r\ninherits(DissolveEdgeGraph, EdgeGraph);\r\nextend(DissolveEdgeGraph.prototype, {\r\n\tcreateEdge: function (p0) {\r\n\t\treturn new DissolveHalfEdge(p0);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DissolveEdgeGraph;\r\n\t}\r\n});\r\n","import LineString from '../geom/LineString';\r\nimport CoordinateList from '../geom/CoordinateList';\r\nimport Geometry from '../geom/Geometry';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport Collection from '../../../../java/util/Collection';\r\nimport Stack from '../../../../java/util/Stack';\r\nimport extend from '../../../../extend';\r\nimport MarkHalfEdge from '../edgegraph/MarkHalfEdge';\r\nimport DissolveEdgeGraph from './DissolveEdgeGraph';\r\nimport GeometryComponentFilter from '../geom/GeometryComponentFilter';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function LineDissolver() {\r\n\tthis.result = null;\r\n\tthis.factory = null;\r\n\tthis.graph = null;\r\n\tthis.lines = new ArrayList();\r\n\tthis.nodeEdgeStack = new Stack();\r\n\tthis.ringStartEdge = null;\r\n\tthis.graph = new DissolveEdgeGraph();\r\n}\r\nextend(LineDissolver.prototype, {\r\n\taddLine: function (line) {\r\n\t\tthis.lines.add(this.factory.createLineString(line.toCoordinateArray()));\r\n\t},\r\n\tupdateRingStartEdge: function (e) {\r\n\t\tif (!e.isStart()) {\r\n\t\t\te = e.sym();\r\n\t\t\tif (!e.isStart()) return null;\r\n\t\t}\r\n\t\tif (this.ringStartEdge === null) {\r\n\t\t\tthis.ringStartEdge = e;\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (e.orig().compareTo(this.ringStartEdge.orig()) < 0) {\r\n\t\t\tthis.ringStartEdge = e;\r\n\t\t}\r\n\t},\r\n\tgetResult: function () {\r\n\t\tif (this.result === null) this.computeResult();\r\n\t\treturn this.result;\r\n\t},\r\n\tprocess: function (e) {\r\n\t\tvar eNode = e.prevNode();\r\n\t\tif (eNode === null) eNode = e;\r\n\t\tthis.stackEdges(eNode);\r\n\t\tthis.buildLines();\r\n\t},\r\n\tbuildRing: function (eStartRing) {\r\n\t\tvar line = new CoordinateList();\r\n\t\tvar e = eStartRing;\r\n\t\tline.add(e.orig().copy(), false);\r\n\t\twhile (e.sym().degree() === 2) {\r\n\t\t\tvar eNext = e.next();\r\n\t\t\tif (eNext === eStartRing) break;\r\n\t\t\tline.add(eNext.orig().copy(), false);\r\n\t\t\te = eNext;\r\n\t\t}\r\n\t\tline.add(e.dest().copy(), false);\r\n\t\tthis.addLine(line);\r\n\t},\r\n\tbuildLine: function (eStart) {\r\n\t\tvar line = new CoordinateList();\r\n\t\tvar e = eStart;\r\n\t\tthis.ringStartEdge = null;\r\n\t\tMarkHalfEdge.markBoth(e);\r\n\t\tline.add(e.orig().copy(), false);\r\n\t\twhile (e.sym().degree() === 2) {\r\n\t\t\tthis.updateRingStartEdge(e);\r\n\t\t\tvar eNext = e.next();\r\n\t\t\tif (eNext === eStart) {\r\n\t\t\t\tthis.buildRing(this.ringStartEdge);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tline.add(eNext.orig().copy(), false);\r\n\t\t\te = eNext;\r\n\t\t\tMarkHalfEdge.markBoth(e);\r\n\t\t}\r\n\t\tline.add(e.dest().copy(), false);\r\n\t\tthis.stackEdges(e.sym());\r\n\t\tthis.addLine(line);\r\n\t},\r\n\tstackEdges: function (node) {\r\n\t\tvar e = node;\r\n\t\tdo {\r\n\t\t\tif (!MarkHalfEdge.isMarked(e)) this.nodeEdgeStack.add(e);\r\n\t\t\te = e.oNext();\r\n\t\t} while (e !== node);\r\n\t},\r\n\tcomputeResult: function () {\r\n\t\tvar edges = this.graph.getVertexEdges();\r\n\t\tfor (var i = edges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tif (MarkHalfEdge.isMarked(e)) continue;\r\n\t\t\tthis.process(e);\r\n\t\t}\r\n\t\tthis.result = this.factory.buildGeometry(this.lines);\r\n\t},\r\n\tbuildLines: function () {\r\n\t\twhile (!this.nodeEdgeStack.empty()) {\r\n\t\t\tvar e = this.nodeEdgeStack.pop();\r\n\t\t\tif (MarkHalfEdge.isMarked(e)) continue;\r\n\t\t\tthis.buildLine(e);\r\n\t\t}\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geometry = arguments[0];\r\n\t\t\tgeometry.apply({\r\n\t\t\t\tinterfaces_: function () {\r\n\t\t\t\t\treturn [GeometryComponentFilter];\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function (component) {\r\n\t\t\t\t\tif (component instanceof LineString) {\r\n\t\t\t\t\t\tthis.add(component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet geometries = arguments[0];\r\n\t\t\tfor (var i = geometries.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar geometry = i.next();\r\n\t\t\t\tthis.add(geometry);\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof LineString) {\r\n\t\t\tlet lineString = arguments[0];\r\n\t\t\tif (this.factory === null) {\r\n\t\t\t\tthis.factory = lineString.getFactory();\r\n\t\t\t}\r\n\t\t\tvar seq = lineString.getCoordinateSequence();\r\n\t\t\tvar doneStart = false;\r\n\t\t\tfor (var i = 1; i < seq.size(); i++) {\r\n\t\t\t\tvar e = this.graph.addEdge(seq.getCoordinate(i - 1), seq.getCoordinate(i));\r\n\t\t\t\tif (e === null) continue;\r\n\t\t\t\tif (!doneStart) {\r\n\t\t\t\t\te.setStart();\r\n\t\t\t\t\tdoneStart = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineDissolver;\r\n\t}\r\n});\r\nLineDissolver.dissolve = function (g) {\r\n\tvar d = new LineDissolver();\r\n\td.add(g);\r\n\treturn d.getResult();\r\n};\r\n","import extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Serializable from '../../../../../java/io/Serializable';\r\nexport default function NodeBase() {\r\n\tthis.items = new ArrayList();\r\n\tthis.subnode = new Array(4).fill(null);\r\n}\r\nextend(NodeBase.prototype, {\r\n\thasChildren: function () {\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (this.subnode[i] !== null) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tisPrunable: function () {\r\n\t\treturn !(this.hasChildren() || this.hasItems());\r\n\t},\r\n\taddAllItems: function (resultItems) {\r\n\t\tresultItems.addAll(this.items);\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tthis.subnode[i].addAllItems(resultItems);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resultItems;\r\n\t},\r\n\tgetNodeCount: function () {\r\n\t\tvar subSize = 0;\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tsubSize += this.subnode[i].size();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn subSize + 1;\r\n\t},\r\n\tsize: function () {\r\n\t\tvar subSize = 0;\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tsubSize += this.subnode[i].size();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn subSize + this.items.size();\r\n\t},\r\n\taddAllItemsFromOverlapping: function (searchEnv, resultItems) {\r\n\t\tif (!this.isSearchMatch(searchEnv)) return null;\r\n\t\tresultItems.addAll(this.items);\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tthis.subnode[i].addAllItemsFromOverlapping(searchEnv, resultItems);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tvisitItems: function (searchEnv, visitor) {\r\n\t\tfor (var i = this.items.iterator(); i.hasNext(); ) {\r\n\t\t\tvisitor.visitItem(i.next());\r\n\t\t}\r\n\t},\r\n\thasItems: function () {\r\n\t\treturn !this.items.isEmpty();\r\n\t},\r\n\tremove: function (itemEnv, item) {\r\n\t\tif (!this.isSearchMatch(itemEnv)) return false;\r\n\t\tvar found = false;\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tfound = this.subnode[i].remove(itemEnv, item);\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\tif (this.subnode[i].isPrunable()) this.subnode[i] = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (found) return found;\r\n\t\tfound = this.items.remove(item);\r\n\t\treturn found;\r\n\t},\r\n\tvisit: function (searchEnv, visitor) {\r\n\t\tif (!this.isSearchMatch(searchEnv)) return null;\r\n\t\tthis.visitItems(searchEnv, visitor);\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tthis.subnode[i].visit(searchEnv, visitor);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetItems: function () {\r\n\t\treturn this.items;\r\n\t},\r\n\tdepth: function () {\r\n\t\tvar maxSubDepth = 0;\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tvar sqd = this.subnode[i].depth();\r\n\t\t\t\tif (sqd > maxSubDepth) maxSubDepth = sqd;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxSubDepth + 1;\r\n\t},\r\n\tisEmpty: function () {\r\n\t\tvar isEmpty = true;\r\n\t\tif (!this.items.isEmpty()) isEmpty = false;\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (this.subnode[i] !== null) {\r\n\t\t\t\tif (!this.subnode[i].isEmpty()) isEmpty = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isEmpty;\r\n\t},\r\n\tadd: function (item) {\r\n\t\tthis.items.add(item);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodeBase;\r\n\t}\r\n});\r\nNodeBase.getSubnodeIndex = function (env, centrex, centrey) {\r\n\tvar subnodeIndex = -1;\r\n\tif (env.getMinX() >= centrex) {\r\n\t\tif (env.getMinY() >= centrey) subnodeIndex = 3;\r\n\t\tif (env.getMaxY() <= centrey) subnodeIndex = 1;\r\n\t}\r\n\tif (env.getMaxX() <= centrex) {\r\n\t\tif (env.getMinY() >= centrey) subnodeIndex = 2;\r\n\t\tif (env.getMaxY() <= centrey) subnodeIndex = 0;\r\n\t}\r\n\treturn subnodeIndex;\r\n};\r\n","import Coordinate from '../../geom/Coordinate';\r\nimport extend from '../../../../../extend';\r\nimport DoubleBits from './DoubleBits';\r\nimport Envelope from '../../geom/Envelope';\r\nexport default function Key() {\r\n\tthis.pt = new Coordinate();\r\n\tthis.level = 0;\r\n\tthis.env = null;\r\n\tlet itemEnv = arguments[0];\r\n\tthis.computeKey(itemEnv);\r\n}\r\nextend(Key.prototype, {\r\n\tgetLevel: function () {\r\n\t\treturn this.level;\r\n\t},\r\n\tcomputeKey: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet itemEnv = arguments[0];\r\n\t\t\tthis.level = Key.computeQuadLevel(itemEnv);\r\n\t\t\tthis.env = new Envelope();\r\n\t\t\tthis.computeKey(this.level, itemEnv);\r\n\t\t\twhile (!this.env.contains(itemEnv)) {\r\n\t\t\t\tthis.level += 1;\r\n\t\t\t\tthis.computeKey(this.level, itemEnv);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet level = arguments[0], itemEnv = arguments[1];\r\n\t\t\tvar quadSize = DoubleBits.powerOf2(level);\r\n\t\t\tthis.pt.x = Math.floor(itemEnv.getMinX() / quadSize) * quadSize;\r\n\t\t\tthis.pt.y = Math.floor(itemEnv.getMinY() / quadSize) * quadSize;\r\n\t\t\tthis.env.init(this.pt.x, this.pt.x + quadSize, this.pt.y, this.pt.y + quadSize);\r\n\t\t}\r\n\t},\r\n\tgetEnvelope: function () {\r\n\t\treturn this.env;\r\n\t},\r\n\tgetCentre: function () {\r\n\t\treturn new Coordinate((this.env.getMinX() + this.env.getMaxX()) / 2, (this.env.getMinY() + this.env.getMaxY()) / 2);\r\n\t},\r\n\tgetPoint: function () {\r\n\t\treturn this.pt;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Key;\r\n\t}\r\n});\r\nKey.computeQuadLevel = function (env) {\r\n\tvar dx = env.getWidth();\r\n\tvar dy = env.getHeight();\r\n\tvar dMax = dx > dy ? dx : dy;\r\n\tvar level = DoubleBits.exponent(dMax) + 1;\r\n\treturn level;\r\n};\r\n","import NodeBase from './NodeBase';\r\nimport extend from '../../../../../extend';\r\nimport Envelope from '../../geom/Envelope';\r\nimport Assert from '../../util/Assert';\r\nimport inherits from '../../../../../inherits';\r\nimport Key from './Key';\r\nexport default function Node() {\r\n\tNodeBase.apply(this);\r\n\tthis.env = null;\r\n\tthis.centrex = null;\r\n\tthis.centrey = null;\r\n\tthis.level = null;\r\n\tlet env = arguments[0], level = arguments[1];\r\n\tthis.env = env;\r\n\tthis.level = level;\r\n\tthis.centrex = (env.getMinX() + env.getMaxX()) / 2;\r\n\tthis.centrey = (env.getMinY() + env.getMaxY()) / 2;\r\n}\r\ninherits(Node, NodeBase);\r\nextend(Node.prototype, {\r\n\tfind: function (searchEnv) {\r\n\t\tvar subnodeIndex = NodeBase.getSubnodeIndex(searchEnv, this.centrex, this.centrey);\r\n\t\tif (subnodeIndex === -1) return this;\r\n\t\tif (this.subnode[subnodeIndex] !== null) {\r\n\t\t\tvar node = this.subnode[subnodeIndex];\r\n\t\t\treturn node.find(searchEnv);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\tisSearchMatch: function (searchEnv) {\r\n\t\treturn this.env.intersects(searchEnv);\r\n\t},\r\n\tgetSubnode: function (index) {\r\n\t\tif (this.subnode[index] === null) {\r\n\t\t\tthis.subnode[index] = this.createSubnode(index);\r\n\t\t}\r\n\t\treturn this.subnode[index];\r\n\t},\r\n\tgetEnvelope: function () {\r\n\t\treturn this.env;\r\n\t},\r\n\tgetNode: function (searchEnv) {\r\n\t\tvar subnodeIndex = NodeBase.getSubnodeIndex(searchEnv, this.centrex, this.centrey);\r\n\t\tif (subnodeIndex !== -1) {\r\n\t\t\tvar node = this.getSubnode(subnodeIndex);\r\n\t\t\treturn node.getNode(searchEnv);\r\n\t\t} else {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t},\r\n\tcreateSubnode: function (index) {\r\n\t\tvar minx = 0.0;\r\n\t\tvar maxx = 0.0;\r\n\t\tvar miny = 0.0;\r\n\t\tvar maxy = 0.0;\r\n\t\tswitch (index) {\r\n\t\t\tcase 0:\r\n\t\t\t\tminx = this.env.getMinX();\r\n\t\t\t\tmaxx = this.centrex;\r\n\t\t\t\tminy = this.env.getMinY();\r\n\t\t\t\tmaxy = this.centrey;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tminx = this.centrex;\r\n\t\t\t\tmaxx = this.env.getMaxX();\r\n\t\t\t\tminy = this.env.getMinY();\r\n\t\t\t\tmaxy = this.centrey;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tminx = this.env.getMinX();\r\n\t\t\t\tmaxx = this.centrex;\r\n\t\t\t\tminy = this.centrey;\r\n\t\t\t\tmaxy = this.env.getMaxY();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tminx = this.centrex;\r\n\t\t\t\tmaxx = this.env.getMaxX();\r\n\t\t\t\tminy = this.centrey;\r\n\t\t\t\tmaxy = this.env.getMaxY();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tvar sqEnv = new Envelope(minx, maxx, miny, maxy);\r\n\t\tvar node = new Node(sqEnv, this.level - 1);\r\n\t\treturn node;\r\n\t},\r\n\tinsertNode: function (node) {\r\n\t\tAssert.isTrue(this.env === null || this.env.contains(node.env));\r\n\t\tvar index = NodeBase.getSubnodeIndex(node.env, this.centrex, this.centrey);\r\n\t\tif (node.level === this.level - 1) {\r\n\t\t\tthis.subnode[index] = node;\r\n\t\t} else {\r\n\t\t\tvar childNode = this.createSubnode(index);\r\n\t\t\tchildNode.insertNode(node);\r\n\t\t\tthis.subnode[index] = childNode;\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Node;\r\n\t}\r\n});\r\nNode.createNode = function (env) {\r\n\tvar key = new Key(env);\r\n\tvar node = new Node(key.getEnvelope(), key.getLevel());\r\n\treturn node;\r\n};\r\nNode.createExpanded = function (node, addEnv) {\r\n\tvar expandEnv = new Envelope(addEnv);\r\n\tif (node !== null) expandEnv.expandToInclude(node.env);\r\n\tvar largerNode = Node.createNode(expandEnv);\r\n\tif (node !== null) largerNode.insertNode(node);\r\n\treturn largerNode;\r\n};\r\n","import Coordinate from '../../geom/Coordinate';\r\nimport NodeBase from './NodeBase';\r\nimport Node from './Node';\r\nimport extend from '../../../../../extend';\r\nimport IntervalSize from './IntervalSize';\r\nimport Assert from '../../util/Assert';\r\nimport inherits from '../../../../../inherits';\r\nexport default function Root() {\r\n\tNodeBase.apply(this);\r\n}\r\ninherits(Root, NodeBase);\r\nextend(Root.prototype, {\r\n\tinsert: function (itemEnv, item) {\r\n\t\tvar index = NodeBase.getSubnodeIndex(itemEnv, Root.origin.x, Root.origin.y);\r\n\t\tif (index === -1) {\r\n\t\t\tthis.add(item);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar node = this.subnode[index];\r\n\t\tif (node === null || !node.getEnvelope().contains(itemEnv)) {\r\n\t\t\tvar largerNode = Node.createExpanded(node, itemEnv);\r\n\t\t\tthis.subnode[index] = largerNode;\r\n\t\t}\r\n\t\tthis.insertContained(this.subnode[index], itemEnv, item);\r\n\t},\r\n\tisSearchMatch: function (searchEnv) {\r\n\t\treturn true;\r\n\t},\r\n\tinsertContained: function (tree, itemEnv, item) {\r\n\t\tAssert.isTrue(tree.getEnvelope().contains(itemEnv));\r\n\t\tvar isZeroX = IntervalSize.isZeroWidth(itemEnv.getMinX(), itemEnv.getMaxX());\r\n\t\tvar isZeroY = IntervalSize.isZeroWidth(itemEnv.getMinY(), itemEnv.getMaxY());\r\n\t\tvar node = null;\r\n\t\tif (isZeroX || isZeroY) node = tree.find(itemEnv); else node = tree.getNode(itemEnv);\r\n\t\tnode.add(item);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Root;\r\n\t}\r\n});\r\nRoot.origin = new Coordinate(0.0, 0.0);\r\n","import Root from './Root';\r\nimport SpatialIndex from '../SpatialIndex';\r\nimport extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport ArrayListVisitor from '../ArrayListVisitor';\r\nimport Serializable from '../../../../../java/io/Serializable';\r\nimport Envelope from '../../geom/Envelope';\r\nexport default function Quadtree() {\r\n\tthis.root = null;\r\n\tthis.minExtent = 1.0;\r\n\tthis.root = new Root();\r\n}\r\nextend(Quadtree.prototype, {\r\n\tsize: function () {\r\n\t\tif (this.root !== null) return this.root.size();\r\n\t\treturn 0;\r\n\t},\r\n\tinsert: function (itemEnv, item) {\r\n\t\tthis.collectStats(itemEnv);\r\n\t\tvar insertEnv = Quadtree.ensureExtent(itemEnv, this.minExtent);\r\n\t\tthis.root.insert(insertEnv, item);\r\n\t},\r\n\tquery: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet searchEnv = arguments[0];\r\n\t\t\tvar visitor = new ArrayListVisitor();\r\n\t\t\tthis.query(searchEnv, visitor);\r\n\t\t\treturn visitor.getItems();\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet searchEnv = arguments[0], visitor = arguments[1];\r\n\t\t\tthis.root.visit(searchEnv, visitor);\r\n\t\t}\r\n\t},\r\n\tqueryAll: function () {\r\n\t\tvar foundItems = new ArrayList();\r\n\t\tthis.root.addAllItems(foundItems);\r\n\t\treturn foundItems;\r\n\t},\r\n\tremove: function (itemEnv, item) {\r\n\t\tvar posEnv = Quadtree.ensureExtent(itemEnv, this.minExtent);\r\n\t\treturn this.root.remove(posEnv, item);\r\n\t},\r\n\tcollectStats: function (itemEnv) {\r\n\t\tvar delX = itemEnv.getWidth();\r\n\t\tif (delX < this.minExtent && delX > 0.0) this.minExtent = delX;\r\n\t\tvar delY = itemEnv.getHeight();\r\n\t\tif (delY < this.minExtent && delY > 0.0) this.minExtent = delY;\r\n\t},\r\n\tdepth: function () {\r\n\t\tif (this.root !== null) return this.root.depth();\r\n\t\treturn 0;\r\n\t},\r\n\tisEmpty: function () {\r\n\t\tif (this.root === null) return true;\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [SpatialIndex, Serializable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Quadtree;\r\n\t}\r\n});\r\nQuadtree.ensureExtent = function (itemEnv, minExtent) {\r\n\tvar minx = itemEnv.getMinX();\r\n\tvar maxx = itemEnv.getMaxX();\r\n\tvar miny = itemEnv.getMinY();\r\n\tvar maxy = itemEnv.getMaxY();\r\n\tif (minx !== maxx && miny !== maxy) return itemEnv;\r\n\tif (minx === maxx) {\r\n\t\tminx = minx - minExtent / 2.0;\r\n\t\tmaxx = minx + minExtent / 2.0;\r\n\t}\r\n\tif (miny === maxy) {\r\n\t\tminy = miny - minExtent / 2.0;\r\n\t\tmaxy = miny + minExtent / 2.0;\r\n\t}\r\n\treturn new Envelope(minx, maxx, miny, maxy);\r\n};\r\nQuadtree.serialVersionUID = -7461163625812743604;\r\n","import Coordinate from '../geom/Coordinate'\r\nimport GeometryFactory from '../geom/GeometryFactory'\r\nimport extend from '../../../../extend'\r\n\r\nconst geometryTypes = ['Point', 'MultiPoint', 'LineString', 'MultiLineString', 'Polygon', 'MultiPolygon']\r\n\r\n/**\r\n * Class for reading and writing Well-Known Text.Create a new parser for GeoJSON\r\n * NOTE: Adapted from OpenLayers 2.11 implementation.\r\n */\r\n\r\n/**\r\n * Create a new parser for GeoJSON\r\n *\r\n * @param {GeometryFactory} geometryFactory\r\n * @return An instance of GeoJsonParser.\r\n * @constructor\r\n * @private\r\n */\r\nexport default function GeoJSONParser (geometryFactory) {\r\n  this.geometryFactory = geometryFactory || new GeometryFactory()\r\n}\r\n\r\nextend(GeoJSONParser.prototype, {\r\n  /**\r\n   * Deserialize a GeoJSON object and return the Geometry or Feature(Collection) with JSTS Geometries\r\n   *\r\n   * @param {}\r\n   *          A GeoJSON object.\r\n   * @return {} A Geometry instance or object representing a Feature(Collection) with Geometry instances.\r\n   * @private\r\n   */\r\n  read (json) {\r\n    let obj\r\n    if (typeof json === 'string') {\r\n      obj = JSON.parse(json)\r\n    } else {\r\n      obj = json\r\n    }\r\n\r\n    const type = obj.type\r\n\r\n    if (!parse[type]) {\r\n      throw new Error('Unknown GeoJSON type: ' + obj.type)\r\n    }\r\n\r\n    if (geometryTypes.indexOf(type) !== -1) {\r\n      return parse[type].apply(this, [obj.coordinates])\r\n    } else if (type === 'GeometryCollection') {\r\n      return parse[type].apply(this, [obj.geometries])\r\n    }\r\n\r\n    // feature or feature collection\r\n    return parse[type].apply(this, [obj])\r\n  },\r\n\r\n  /**\r\n   * Serialize a Geometry object into GeoJSON\r\n   *\r\n   * @param {Geometry}\r\n   *          geometry A Geometry or array of Geometries.\r\n   * @return {Object} A GeoJSON object represting the input Geometry/Geometries.\r\n   * @private\r\n   */\r\n  write (geometry) {\r\n    const type = geometry.getGeometryType()\r\n\r\n    if (!extract[type]) {\r\n      throw new Error('Geometry is not supported')\r\n    }\r\n\r\n    return extract[type].apply(this, [geometry])\r\n  }\r\n})\r\n\r\nconst parse = {\r\n  /**\r\n   * Parse a GeoJSON Feature object\r\n   *\r\n   * @param {Object}\r\n   *          obj Object to parse.\r\n   *\r\n   * @return {Object} Feature with geometry/bbox converted to JSTS Geometries.\r\n   */\r\n  Feature: function (obj) {\r\n    const feature = {}\r\n\r\n    // copy features\r\n    for (let key in obj) {\r\n      feature[key] = obj[key]\r\n    }\r\n\r\n    // parse geometry\r\n    if (obj.geometry) {\r\n      const type = obj.geometry.type\r\n      if (!parse[type]) {\r\n        throw new Error('Unknown GeoJSON type: ' + obj.type)\r\n      }\r\n      feature.geometry = this.read(obj.geometry)\r\n    }\r\n\r\n    // bbox\r\n    if (obj.bbox) {\r\n      feature.bbox = parse.bbox.apply(this, [obj.bbox])\r\n    }\r\n\r\n    return feature\r\n  },\r\n\r\n  /**\r\n   * Parse a GeoJSON FeatureCollection object\r\n   *\r\n   * @param {Object}\r\n   *          obj Object to parse.\r\n   *\r\n   * @return {Object} FeatureCollection with geometry/bbox converted to JSTS Geometries.\r\n   */\r\n  FeatureCollection: function (obj) {\r\n    const featureCollection = {}\r\n\r\n    if (obj.features) {\r\n      featureCollection.features = []\r\n\r\n      for (let i = 0; i < obj.features.length; ++i) {\r\n        featureCollection.features.push(this.read(obj.features[i]))\r\n      }\r\n    }\r\n\r\n    if (obj.bbox) {\r\n      featureCollection.bbox = this.parse.bbox.apply(this, [obj.bbox])\r\n    }\r\n\r\n    return featureCollection\r\n  },\r\n\r\n  /**\r\n   * Convert the ordinates in an array to an array of Coordinates\r\n   *\r\n   * @param {Array}\r\n   *          array Array with {Number}s.\r\n   *\r\n   * @return {Array} Array with Coordinates.\r\n   */\r\n  coordinates: function (array) {\r\n    const coordinates = []\r\n    for (let i = 0; i < array.length; ++i) {\r\n      const sub = array[i]\r\n      coordinates.push(new Coordinate(sub[0], sub[1]))\r\n    }\r\n    return coordinates\r\n  },\r\n\r\n  /**\r\n   * Convert the bbox to a LinearRing\r\n   *\r\n   * @param {Array}\r\n   *          array Array with [xMin, yMin, xMax, yMax].\r\n   *\r\n   * @return {Array} Array with Coordinates.\r\n   */\r\n  bbox: function (array) {\r\n    return this.geometryFactory.createLinearRing([\r\n      new Coordinate(array[0], array[1]),\r\n      new Coordinate(array[2], array[1]),\r\n      new Coordinate(array[2], array[3]),\r\n      new Coordinate(array[0], array[3]),\r\n      new Coordinate(array[0], array[1])\r\n    ])\r\n  },\r\n\r\n  /**\r\n   * Convert an Array with ordinates to a Point\r\n   *\r\n   * @param {Array}\r\n   *          array Array with ordinates.\r\n   *\r\n   * @return {Point} Point.\r\n   */\r\n  Point: function (array) {\r\n    const coordinate = new Coordinate(array[0], array[1])\r\n    return this.geometryFactory.createPoint(coordinate)\r\n  },\r\n\r\n  /**\r\n   * Convert an Array with coordinates to a MultiPoint\r\n   *\r\n   * @param {Array}\r\n   *          array Array with coordinates.\r\n   *\r\n   * @return {MultiPoint} MultiPoint.\r\n   */\r\n  MultiPoint: function (array) {\r\n    const points = []\r\n    for (let i = 0; i < array.length; ++i) {\r\n      points.push(parse.Point.apply(this, [array[i]]))\r\n    }\r\n    return this.geometryFactory.createMultiPoint(points)\r\n  },\r\n\r\n  /**\r\n   * Convert an Array with coordinates to a LineString\r\n   *\r\n   * @param {Array}\r\n   *          array Array with coordinates.\r\n   *\r\n   * @return {LineString} LineString.\r\n   */\r\n  LineString: function (array) {\r\n    const coordinates = parse.coordinates.apply(this, [array])\r\n    return this.geometryFactory.createLineString(coordinates)\r\n  },\r\n\r\n  /**\r\n   * Convert an Array with coordinates to a MultiLineString\r\n   *\r\n   * @param {Array}\r\n   *          array Array with coordinates.\r\n   *\r\n   * @return {MultiLineString} MultiLineString.\r\n   */\r\n  MultiLineString: function (array) {\r\n    const lineStrings = []\r\n    for (let i = 0; i < array.length; ++i) {\r\n      lineStrings.push(parse.LineString.apply(this, [array[i]]))\r\n    }\r\n    return this.geometryFactory.createMultiLineString(lineStrings)\r\n  },\r\n\r\n  /**\r\n   * Convert an Array to a Polygon\r\n   *\r\n   * @param {Array}\r\n   *          array Array with shell and holes.\r\n   *\r\n   * @return {Polygon} Polygon.\r\n   */\r\n  Polygon: function (array) {\r\n    const shellCoordinates = parse.coordinates.apply(this, [array[0]])\r\n    const shell = this.geometryFactory.createLinearRing(shellCoordinates)\r\n    const holes = []\r\n    for (let i = 1; i < array.length; ++i) {\r\n      var hole = array[i]\r\n      var coordinates = parse.coordinates.apply(this, [hole])\r\n      var linearRing = this.geometryFactory.createLinearRing(coordinates)\r\n      holes.push(linearRing)\r\n    }\r\n    return this.geometryFactory.createPolygon(shell, holes)\r\n  },\r\n\r\n  /**\r\n   * Convert an Array to a MultiPolygon\r\n   *\r\n   * @param {Array}\r\n   *          array Array of arrays with shell and rings.\r\n   *\r\n   * @return {MultiPolygon} MultiPolygon.\r\n   */\r\n  MultiPolygon: function (array) {\r\n    const polygons = []\r\n    for (let i = 0; i < array.length; ++i) {\r\n      const polygon = array[i]\r\n      polygons.push(parse.Polygon.apply(this, [polygon]))\r\n    }\r\n    return this.geometryFactory.createMultiPolygon(polygons)\r\n  },\r\n\r\n  /**\r\n   * Convert an Array to a GeometryCollection\r\n   *\r\n   * @param {Array}\r\n   *          array Array of GeoJSON geometries.\r\n   *\r\n   * @return {GeometryCollection} GeometryCollection.\r\n   */\r\n  GeometryCollection: function (array) {\r\n    const geometries = []\r\n    for (let i = 0; i < array.length; ++i) {\r\n      const geometry = array[i]\r\n      geometries.push(this.read(geometry))\r\n    }\r\n    return this.geometryFactory.createGeometryCollection(geometries)\r\n  }\r\n}\r\n\r\nconst extract = {\r\n  /**\r\n   * Convert a Coordinate to an Array\r\n   *\r\n   * @param {Coordinate}\r\n   *          coordinate Coordinate to convert.\r\n   *\r\n   * @return {Array} Array of ordinates.\r\n   */\r\n  coordinate: function (coordinate) {\r\n    return [coordinate.x, coordinate.y]\r\n  },\r\n\r\n  /**\r\n   * Convert a Point to a GeoJSON object\r\n   *\r\n   * @param {Point}\r\n   *          point Point to convert.\r\n   *\r\n   * @return {Array} Array of 2 ordinates (paired to a coordinate).\r\n   */\r\n  Point: function (point) {\r\n    const array = extract.coordinate.apply(this, [point.getCoordinate()])\r\n    return {\r\n      type: 'Point',\r\n      coordinates: array\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert a MultiPoint to a GeoJSON object\r\n   *\r\n   * @param {MultiPoint}\r\n   *          multipoint MultiPoint to convert.\r\n   *\r\n   * @return {Array} Array of coordinates.\r\n   */\r\n  MultiPoint: function (multipoint) {\r\n    const array = []\r\n    for (let i = 0; i < multipoint.geometries.length; ++i) {\r\n      const point = multipoint.geometries[i]\r\n      const geoJson = extract.Point.apply(this, [point])\r\n      array.push(geoJson.coordinates)\r\n    }\r\n    return {\r\n      type: 'MultiPoint',\r\n      coordinates: array\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert a LineString to a GeoJSON object\r\n   *\r\n   * @param {LineString}\r\n   *          linestring LineString to convert.\r\n   *\r\n   * @return {Array} Array of coordinates.\r\n   */\r\n  LineString: function (linestring) {\r\n    const array = []\r\n    const coordinates = linestring.getCoordinates()\r\n    for (let i = 0; i < coordinates.length; ++i) {\r\n      const coordinate = coordinates[i]\r\n      array.push(extract.coordinate.apply(this, [coordinate]))\r\n    }\r\n    return {\r\n      type: 'LineString',\r\n      coordinates: array\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert a MultiLineString to a GeoJSON object\r\n   *\r\n   * @param {MultiLineString}\r\n   *          multilinestring MultiLineString to convert.\r\n   *\r\n   * @return {Array} Array of Array of coordinates.\r\n   */\r\n  MultiLineString: function (multilinestring) {\r\n    const array = []\r\n    for (let i = 0; i < multilinestring.geometries.length; ++i) {\r\n      const linestring = multilinestring.geometries[i]\r\n      const geoJson = extract.LineString.apply(this, [linestring])\r\n      array.push(geoJson.coordinates)\r\n    }\r\n    return {\r\n      type: 'MultiLineString',\r\n      coordinates: array\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert a Polygon to a GeoJSON object\r\n   *\r\n   * @param {Polygon}\r\n   *          polygon Polygon to convert.\r\n   *\r\n   * @return {Array} Array with shell, holes.\r\n   */\r\n  Polygon: function (polygon) {\r\n    const array = []\r\n    const shellGeoJson = extract.LineString.apply(this, [polygon.shell])\r\n    array.push(shellGeoJson.coordinates)\r\n    for (let i = 0; i < polygon.holes.length; ++i) {\r\n      const hole = polygon.holes[i]\r\n      const holeGeoJson = extract.LineString.apply(this, [hole])\r\n      array.push(holeGeoJson.coordinates)\r\n    }\r\n    return {\r\n      type: 'Polygon',\r\n      coordinates: array\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert a MultiPolygon to a GeoJSON object\r\n   *\r\n   * @param {MultiPolygon}\r\n   *          multipolygon MultiPolygon to convert.\r\n   *\r\n   * @return {Array} Array of polygons.\r\n   */\r\n  MultiPolygon: function (multipolygon) {\r\n    const array = []\r\n    for (let i = 0; i < multipolygon.geometries.length; ++i) {\r\n      const polygon = multipolygon.geometries[i]\r\n      const geoJson = extract.Polygon.apply(this, [polygon])\r\n      array.push(geoJson.coordinates)\r\n    }\r\n    return {\r\n      type: 'MultiPolygon',\r\n      coordinates: array\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert a GeometryCollection to a GeoJSON object\r\n   *\r\n   * @param {GeometryCollection}\r\n   *          collection GeometryCollection to convert.\r\n   *\r\n   * @return {Array} Array of geometries.\r\n   */\r\n  GeometryCollection: function (collection) {\r\n    const array = []\r\n    for (let i = 0; i < collection.geometries.length; ++i) {\r\n      const geometry = collection.geometries[i]\r\n      const type = geometry.getGeometryType()\r\n      array.push(extract[type].apply(this, [geometry]))\r\n    }\r\n    return {\r\n      type: 'GeometryCollection',\r\n      geometries: array\r\n    }\r\n  }\r\n}\r\n","import GeometryFactory from '../geom/GeometryFactory'\r\nimport PrecisionModel from '../geom/PrecisionModel'\r\nimport GeoJSONParser from './GeoJSONParser'\r\nimport extend from '../../../../extend'\r\n\r\n/**\r\n * Converts a geometry in GeoJSON to a {@link Geometry}.\r\n */\r\n\r\n/**\r\n * A <code>GeoJSONReader</code> is parameterized by a <code>GeometryFactory</code>,\r\n * to allow it to create <code>Geometry</code> objects of the appropriate\r\n * implementation. In particular, the <code>GeometryFactory</code> determines\r\n * the <code>PrecisionModel</code> and <code>SRID</code> that is used.\r\n *\r\n * @param {GeometryFactory} geometryFactory\r\n * @constructor\r\n */\r\nexport default function GeoJSONReader (geometryFactory) {\r\n  this.geometryFactory = geometryFactory || new GeometryFactory()\r\n  this.precisionModel = this.geometryFactory.getPrecisionModel()\r\n  this.parser = new GeoJSONParser(this.geometryFactory)\r\n}\r\n\r\nextend(GeoJSONReader.prototype, {\r\n  /**\r\n   * Reads a GeoJSON representation of a {@link Geometry}\r\n   *\r\n   * Will also parse GeoJSON Features/FeatureCollections as custom objects.\r\n   *\r\n   * @param {Object|String} geoJson a GeoJSON Object or String.\r\n   * @return {Geometry|Object} a <code>Geometry or Feature/FeatureCollection representation.</code>\r\n   * @memberof GeoJSONReader\r\n   */\r\n  read (geoJson) {\r\n    var geometry = this.parser.read(geoJson)\r\n\r\n    if (this.precisionModel.getType() === PrecisionModel.FIXED) {\r\n      this.reducePrecision(geometry)\r\n    }\r\n\r\n    return geometry\r\n  },\r\n\r\n  // NOTE: this is a hack\r\n  reducePrecision (geometry) {\r\n    var i, len\r\n\r\n    if (geometry.coordinate) {\r\n      this.precisionModel.makePrecise(geometry.coordinate)\r\n    } else if (geometry.points) {\r\n      for (i = 0, len = geometry.points.length; i < len; i++) {\r\n        this.precisionModel.makePrecise(geometry.points[i])\r\n      }\r\n    } else if (geometry.geometries) {\r\n      for (i = 0, len = geometry.geometries.length; i < len; i++) {\r\n        this.reducePrecision(geometry.geometries[i])\r\n      }\r\n    }\r\n  }\r\n})\r\n","/**\r\n * @module GeoJSONWriter\r\n */\r\n\r\nimport GeoJSONParser from './GeoJSONParser'\r\nimport extend from '../../../../extend'\r\n\r\n/**\r\n * Writes the GeoJSON representation of a {@link Geometry}. The\r\n * The GeoJSON format is defined <A\r\n * HREF=\"http://geojson.org/geojson-spec.html\">here</A>.\r\n */\r\n\r\n/**\r\n * The <code>GeoJSONWriter</code> outputs coordinates rounded to the precision\r\n * model. Only the maximum number of decimal places necessary to represent the\r\n * ordinates to the required precision will be output.\r\n *\r\n * @param {GeometryFactory} geometryFactory\r\n * @constructor\r\n */\r\nexport default function GeoJSONWriter () {\r\n  this.parser = new GeoJSONParser(this.geometryFactory)\r\n}\r\n\r\nextend(GeoJSONWriter.prototype, {\r\n  /**\r\n   * Converts a <code>Geometry</code> to its GeoJSON representation.\r\n   *\r\n   * @param {Geometry}\r\n   *          geometry a <code>Geometry</code> to process.\r\n   * @return {Object} The GeoJSON representation of the Geometry.\r\n   * @memberof GeoJSONWriter\r\n   */\r\n  write (geometry) {\r\n    return this.parser.write(geometry)\r\n  }\r\n})\r\n","import GeometryFactory from '../geom/GeometryFactory'\r\nimport PrecisionModel from '../geom/PrecisionModel'\r\nimport WKTParser from './WKTParser'\r\nimport extend from '../../../../extend'\r\n\r\n/**\r\n * Converts a geometry in Well-Known Text format to a {@link Geometry}.\r\n * <p>\r\n * <code>WKTReader</code> supports extracting <code>Geometry</code> objects\r\n * from either {@link Reader}s or {@link String}s. This allows it to function\r\n * as a parser to read <code>Geometry</code> objects from text blocks embedded\r\n * in other data formats (e.g. XML).\r\n */\r\n\r\n/**\r\n * A <code>WKTReader</code> is parameterized by a <code>GeometryFactory</code>,\r\n * to allow it to create <code>Geometry</code> objects of the appropriate\r\n * implementation. In particular, the <code>GeometryFactory</code> determines\r\n * the <code>PrecisionModel</code> and <code>SRID</code> that is used.\r\n * @param {GeometryFactory} geometryFactory\r\n * @constructor\r\n */\r\nexport default function WKTReader (geometryFactory) {\r\n  this.geometryFactory = geometryFactory || new GeometryFactory()\r\n  this.precisionModel = this.geometryFactory.getPrecisionModel()\r\n  this.parser = new WKTParser(this.geometryFactory)\r\n}\r\n\r\nextend(WKTReader.prototype, {\r\n  /**\r\n   * Reads a Well-Known Text representation of a {@link Geometry}\r\n   *\r\n   * @param {string}\r\n   *          wkt a <Geometry Tagged Text> string (see the OpenGIS Simple Features\r\n   *          Specification).\r\n   * @return {Geometry} a <code>Geometry</code> read from\r\n   *         <code>string.</code>\r\n   * @memberof WKTReader\r\n   */\r\n  read (wkt) {\r\n    var geometry = this.parser.read(wkt)\r\n\r\n    // TODO: port and use GeometryPrecisionReducer, this is a hack\r\n    if (this.precisionModel.getType() === PrecisionModel.FIXED) {\r\n      this.reducePrecision(geometry)\r\n    }\r\n\r\n    return geometry\r\n  },\r\n\r\n  reducePrecision (geometry) {\r\n    if (geometry.coordinate) {\r\n      this.precisionModel.makePrecise(geometry.coordinate)\r\n    } else if (geometry.points) {\r\n      for (let i = 0, len = geometry.points.coordinates.length; i < len; i++) {\r\n        this.precisionModel.makePrecise(geometry.points.coordinates[i])\r\n      }\r\n    } else if (geometry.geometries) {\r\n      for (let i = 0, len = geometry.geometries.length; i < len; i++) {\r\n        this.reducePrecision(geometry.geometries[i])\r\n      }\r\n    }\r\n  }\r\n})\r\n","/*eslint-disable no-undef */\r\n\r\nimport Coordinate from '../geom/Coordinate'\r\nimport GeometryFactory from '../geom/GeometryFactory'\r\nimport extend from '../../../../extend'\r\n\r\nfunction p2c (p) { return [p.x, p.y] }\r\n\r\n/**\r\n * OpenLayers 3 Geometry parser and writer\r\n * @param {GeometryFactory} geometryFactory\r\n * @param {ol} olReference\r\n * @constructor\r\n */\r\nexport default function OL3Parser (geometryFactory, olReference) {\r\n  this.geometryFactory = geometryFactory || new GeometryFactory()\r\n  this.ol = olReference || (typeof ol !== 'undefined' && ol)\r\n}\r\n\r\nextend(OL3Parser.prototype, {\r\n  /**\r\n   * @param geometry {ol.geom.Geometry}\r\n   * @return {Geometry}\r\n   * @memberof OL3Parser\r\n   */\r\n  read (geometry) {\r\n    const ol = this.ol\r\n    if (geometry instanceof ol.geom.Point) {\r\n      return this.convertFromPoint(geometry)\r\n    } else if (geometry instanceof ol.geom.LineString) {\r\n      return this.convertFromLineString(geometry)\r\n    } else if (geometry instanceof ol.geom.LinearRing) {\r\n      return this.convertFromLinearRing(geometry)\r\n    } else if (geometry instanceof ol.geom.Polygon) {\r\n      return this.convertFromPolygon(geometry)\r\n    } else if (geometry instanceof ol.geom.MultiPoint) {\r\n      return this.convertFromMultiPoint(geometry)\r\n    } else if (geometry instanceof ol.geom.MultiLineString) {\r\n      return this.convertFromMultiLineString(geometry)\r\n    } else if (geometry instanceof ol.geom.MultiPolygon) {\r\n      return this.convertFromMultiPolygon(geometry)\r\n    } else if (geometry instanceof ol.geom.GeometryCollection) {\r\n      return this.convertFromCollection(geometry)\r\n    }\r\n  },\r\n\r\n  convertFromPoint (point) {\r\n    const coordinates = point.getCoordinates()\r\n    return this.geometryFactory.createPoint(new Coordinate(coordinates[0], coordinates[1]))\r\n  },\r\n\r\n  convertFromLineString (lineString) {\r\n    return this.geometryFactory.createLineString(lineString.getCoordinates().map(function (coordinates) {\r\n      return new Coordinate(coordinates[0], coordinates[1])\r\n    }))\r\n  },\r\n\r\n  convertFromLinearRing (linearRing) {\r\n    return this.geometryFactory.createLinearRing(linearRing.getCoordinates().map(function (coordinates) {\r\n      return new Coordinate(coordinates[0], coordinates[1])\r\n    }))\r\n  },\r\n\r\n  convertFromPolygon (polygon) {\r\n    const linearRings = polygon.getLinearRings()\r\n    var shell = null\r\n    var holes = []\r\n    for (let i = 0; i < linearRings.length; i++) {\r\n      const linearRing = this.convertFromLinearRing(linearRings[i])\r\n      if (i === 0) {\r\n        shell = linearRing\r\n      } else {\r\n        holes.push(linearRing)\r\n      }\r\n    }\r\n    return this.geometryFactory.createPolygon(shell, holes)\r\n  },\r\n\r\n  convertFromMultiPoint (multiPoint) {\r\n    const points = multiPoint.getPoints().map(function (point) {\r\n      return this.convertFromPoint(point)\r\n    }, this)\r\n    return this.geometryFactory.createMultiPoint(points)\r\n  },\r\n\r\n  convertFromMultiLineString (multiLineString) {\r\n    const lineStrings = multiLineString.getLineStrings().map(function (lineString) {\r\n      return this.convertFromLineString(lineString)\r\n    }, this)\r\n    return this.geometryFactory.createMultiLineString(lineStrings)\r\n  },\r\n\r\n  convertFromMultiPolygon (multiPolygon) {\r\n    const polygons = multiPolygon.getPolygons().map(function (polygon) {\r\n      return this.convertFromPolygon(polygon)\r\n    }, this)\r\n    return this.geometryFactory.createMultiPolygon(polygons)\r\n  },\r\n\r\n  convertFromCollection (collection) {\r\n    const geometries = collection.getGeometries().map(function (geometry) {\r\n      return this.read(geometry)\r\n    }, this)\r\n    return this.geometryFactory.createGeometryCollection(geometries)\r\n  },\r\n\r\n  /**\r\n   * @param geometry\r\n   *          {Geometry}\r\n   * @return {ol.geom.Geometry}\r\n   * @memberof! OL3Parser\r\n   */\r\n  write (geometry) {\r\n    if (geometry.getGeometryType() === 'Point') {\r\n      return this.convertToPoint(geometry.getCoordinate())\r\n    } else if (geometry.getGeometryType() === 'LineString') {\r\n      return this.convertToLineString(geometry)\r\n    } else if (geometry.getGeometryType() === 'LinearRing') {\r\n      return this.convertToLinearRing(geometry)\r\n    } else if (geometry.getGeometryType() === 'Polygon') {\r\n      return this.convertToPolygon(geometry)\r\n    } else if (geometry.getGeometryType() === 'MultiPoint') {\r\n      return this.convertToMultiPoint(geometry)\r\n    } else if (geometry.getGeometryType() === 'MultiLineString') {\r\n      return this.convertToMultiLineString(geometry)\r\n    } else if (geometry.getGeometryType() === 'MultiPolygon') {\r\n      return this.convertToMultiPolygon(geometry)\r\n    } else if (geometry.getGeometryType() === 'GeometryCollection') {\r\n      return this.convertToCollection(geometry)\r\n    }\r\n  },\r\n\r\n  convertToPoint (coordinate) {\r\n    return new this.ol.geom.Point([coordinate.x, coordinate.y])\r\n  },\r\n\r\n  convertToLineString (lineString) {\r\n    var points = lineString.points.coordinates.map(p2c)\r\n    return new this.ol.geom.LineString(points)\r\n  },\r\n\r\n  convertToLinearRing (linearRing) {\r\n    var points = linearRing.points.coordinates.map(p2c)\r\n    return new this.ol.geom.LinearRing(points)\r\n  },\r\n\r\n  convertToPolygon (polygon) {\r\n    var rings = [polygon.shell.points.coordinates.map(p2c)]\r\n    for (let i = 0; i < polygon.holes.length; i++) {\r\n      rings.push(polygon.holes[i].points.coordinates.map(p2c))\r\n    }\r\n    return new this.ol.geom.Polygon(rings)\r\n  },\r\n\r\n  convertToMultiPoint (multiPoint) {\r\n    return new this.ol.geom.MultiPoint(multiPoint.getCoordinates().map(p2c))\r\n  },\r\n\r\n  convertToMultiLineString (multiLineString) {\r\n    var lineStrings = []\r\n    for (let i = 0; i < multiLineString.geometries.length; i++) {\r\n      lineStrings.push(this.convertToLineString(multiLineString.geometries[i]).getCoordinates())\r\n    }\r\n    return new this.ol.geom.MultiLineString(lineStrings)\r\n  },\r\n\r\n  convertToMultiPolygon (multiPolygon) {\r\n    var polygons = []\r\n    for (let i = 0; i < multiPolygon.geometries.length; i++) {\r\n      polygons.push(this.convertToPolygon(multiPolygon.geometries[i]).getCoordinates())\r\n    }\r\n    return new this.ol.geom.MultiPolygon(polygons)\r\n  },\r\n\r\n  convertToCollection (geometryCollection) {\r\n    var geometries = []\r\n    for (let i = 0; i < geometryCollection.geometries.length; i++) {\r\n      var geometry = geometryCollection.geometries[i]\r\n      geometries.push(this.write(geometry))\r\n    }\r\n    return new this.ol.geom.GeometryCollection(geometries)\r\n  }\r\n})\r\n","import hasInterface from '../../../../hasInterface';\r\nimport Collection from '../../../../java/util/Collection';\r\nimport Noder from './Noder';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport NodedSegmentString from './NodedSegmentString';\r\nimport extend from '../../../../extend';\r\nimport System from '../../../../java/lang/System';\r\nimport CoordinateArrays from '../geom/CoordinateArrays';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function ScaledNoder() {\r\n\tthis.noder = null;\r\n\tthis.scaleFactor = null;\r\n\tthis.offsetX = null;\r\n\tthis.offsetY = null;\r\n\tthis.isScaled = false;\r\n\tif (arguments.length === 2) {\r\n\t\tlet noder = arguments[0], scaleFactor = arguments[1];\r\n\t\tScaledNoder.call(this, noder, scaleFactor, 0, 0);\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet noder = arguments[0], scaleFactor = arguments[1], offsetX = arguments[2], offsetY = arguments[3];\r\n\t\tthis.noder = noder;\r\n\t\tthis.scaleFactor = scaleFactor;\r\n\t\tthis.isScaled = !this.isIntegerPrecision();\r\n\t}\r\n}\r\nextend(ScaledNoder.prototype, {\r\n\trescale: function () {\r\n\t\tif (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet segStrings = arguments[0];\r\n\t\t\tfor (var i = segStrings.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar ss = i.next();\r\n\t\t\t\tthis.rescale(ss.getCoordinates());\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof Array) {\r\n\t\t\tlet pts = arguments[0];\r\n\t\t\tvar p0 = null;\r\n\t\t\tvar p1 = null;\r\n\t\t\tif (pts.length === 2) {\r\n\t\t\t\tp0 = new Coordinate(pts[0]);\r\n\t\t\t\tp1 = new Coordinate(pts[1]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < pts.length; i++) {\r\n\t\t\t\tpts[i].x = pts[i].x / this.scaleFactor + this.offsetX;\r\n\t\t\t\tpts[i].y = pts[i].y / this.scaleFactor + this.offsetY;\r\n\t\t\t}\r\n\t\t\tif (pts.length === 2 && pts[0].equals2D(pts[1])) {\r\n\t\t\t\tSystem.out.println(pts);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tscale: function () {\r\n\t\tif (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet segStrings = arguments[0];\r\n\t\t\tvar nodedSegmentStrings = new ArrayList();\r\n\t\t\tfor (var i = segStrings.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar ss = i.next();\r\n\t\t\t\tnodedSegmentStrings.add(new NodedSegmentString(this.scale(ss.getCoordinates()), ss.getData()));\r\n\t\t\t}\r\n\t\t\treturn nodedSegmentStrings;\r\n\t\t} else if (arguments[0] instanceof Array) {\r\n\t\t\tlet pts = arguments[0];\r\n\t\t\tvar roundPts = new Array(pts.length).fill(null);\r\n\t\t\tfor (var i = 0; i < pts.length; i++) {\r\n\t\t\t\troundPts[i] = new Coordinate(Math.round((pts[i].x - this.offsetX) * this.scaleFactor), Math.round((pts[i].y - this.offsetY) * this.scaleFactor), pts[i].z);\r\n\t\t\t}\r\n\t\t\tvar roundPtsNoDup = CoordinateArrays.removeRepeatedPoints(roundPts);\r\n\t\t\treturn roundPtsNoDup;\r\n\t\t}\r\n\t},\r\n\tisIntegerPrecision: function () {\r\n\t\treturn this.scaleFactor === 1.0;\r\n\t},\r\n\tgetNodedSubstrings: function () {\r\n\t\tvar splitSS = this.noder.getNodedSubstrings();\r\n\t\tif (this.isScaled) this.rescale(splitSS);\r\n\t\treturn splitSS;\r\n\t},\r\n\tcomputeNodes: function (inputSegStrings) {\r\n\t\tvar intSegStrings = inputSegStrings;\r\n\t\tif (this.isScaled) intSegStrings = this.scale(inputSegStrings);\r\n\t\tthis.noder.computeNodes(intSegStrings);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Noder];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ScaledNoder;\r\n\t}\r\n});\r\n","import TreeSet from '../../../../java/util/TreeSet';\r\nimport LineString from '../geom/LineString';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport MultiPoint from '../geom/MultiPoint';\r\nimport extend from '../../../../extend';\r\nimport GeometryGraph from '../geomgraph/GeometryGraph';\r\nimport GeometryCollection from '../geom/GeometryCollection';\r\nimport Polygonal from '../geom/Polygonal';\r\nimport RobustLineIntersector from '../algorithm/RobustLineIntersector';\r\nimport LinearComponentExtracter from '../geom/util/LinearComponentExtracter';\r\nimport TreeMap from '../../../../java/util/TreeMap';\r\nimport MultiLineString from '../geom/MultiLineString';\r\nexport default function IsSimpleOp() {\r\n\tthis.inputGeom = null;\r\n\tthis.isClosedEndpointsInInterior = true;\r\n\tthis.nonSimpleLocation = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet geom = arguments[0];\r\n\t\tthis.inputGeom = geom;\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet geom = arguments[0], boundaryNodeRule = arguments[1];\r\n\t\tthis.inputGeom = geom;\r\n\t\tthis.isClosedEndpointsInInterior = !boundaryNodeRule.isInBoundary(2);\r\n\t}\r\n}\r\nextend(IsSimpleOp.prototype, {\r\n\tisSimpleMultiPoint: function (mp) {\r\n\t\tif (mp.isEmpty()) return true;\r\n\t\tvar points = new TreeSet();\r\n\t\tfor (var i = 0; i < mp.getNumGeometries(); i++) {\r\n\t\t\tvar pt = mp.getGeometryN(i);\r\n\t\t\tvar p = pt.getCoordinate();\r\n\t\t\tif (points.contains(p)) {\r\n\t\t\t\tthis.nonSimpleLocation = p;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tpoints.add(p);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tisSimplePolygonal: function (geom) {\r\n\t\tvar rings = LinearComponentExtracter.getLines(geom);\r\n\t\tfor (var i = rings.iterator(); i.hasNext(); ) {\r\n\t\t\tvar ring = i.next();\r\n\t\t\tif (!this.isSimpleLinearGeometry(ring)) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\thasClosedEndpointIntersection: function (graph) {\r\n\t\tvar endPoints = new TreeMap();\r\n\t\tfor (var i = graph.getEdgeIterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tvar maxSegmentIndex = e.getMaximumSegmentIndex();\r\n\t\t\tvar isClosed = e.isClosed();\r\n\t\t\tvar p0 = e.getCoordinate(0);\r\n\t\t\tthis.addEndpoint(endPoints, p0, isClosed);\r\n\t\t\tvar p1 = e.getCoordinate(e.getNumPoints() - 1);\r\n\t\t\tthis.addEndpoint(endPoints, p1, isClosed);\r\n\t\t}\r\n\t\tfor (var i = endPoints.values().iterator(); i.hasNext(); ) {\r\n\t\t\tvar eiInfo = i.next();\r\n\t\t\tif (eiInfo.isClosed && eiInfo.degree !== 2) {\r\n\t\t\t\tthis.nonSimpleLocation = eiInfo.getCoordinate();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tgetNonSimpleLocation: function () {\r\n\t\treturn this.nonSimpleLocation;\r\n\t},\r\n\tisSimpleLinearGeometry: function (geom) {\r\n\t\tif (geom.isEmpty()) return true;\r\n\t\tvar graph = new GeometryGraph(0, geom);\r\n\t\tvar li = new RobustLineIntersector();\r\n\t\tvar si = graph.computeSelfNodes(li, true);\r\n\t\tif (!si.hasIntersection()) return true;\r\n\t\tif (si.hasProperIntersection()) {\r\n\t\t\tthis.nonSimpleLocation = si.getProperIntersectionPoint();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.hasNonEndpointIntersection(graph)) return false;\r\n\t\tif (this.isClosedEndpointsInInterior) {\r\n\t\t\tif (this.hasClosedEndpointIntersection(graph)) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\thasNonEndpointIntersection: function (graph) {\r\n\t\tfor (var i = graph.getEdgeIterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tvar maxSegmentIndex = e.getMaximumSegmentIndex();\r\n\t\t\tfor (var eiIt = e.getEdgeIntersectionList().iterator(); eiIt.hasNext(); ) {\r\n\t\t\t\tvar ei = eiIt.next();\r\n\t\t\t\tif (!ei.isEndPoint(maxSegmentIndex)) {\r\n\t\t\t\t\tthis.nonSimpleLocation = ei.getCoordinate();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\taddEndpoint: function (endPoints, p, isClosed) {\r\n\t\tvar eiInfo = endPoints.get(p);\r\n\t\tif (eiInfo === null) {\r\n\t\t\teiInfo = new EndpointInfo(p);\r\n\t\t\tendPoints.put(p, eiInfo);\r\n\t\t}\r\n\t\teiInfo.addEndpoint(isClosed);\r\n\t},\r\n\tcomputeSimple: function (geom) {\r\n\t\tthis.nonSimpleLocation = null;\r\n\t\tif (geom.isEmpty()) return true;\r\n\t\tif (geom instanceof LineString) return this.isSimpleLinearGeometry(geom);\r\n\t\tif (geom instanceof MultiLineString) return this.isSimpleLinearGeometry(geom);\r\n\t\tif (geom instanceof MultiPoint) return this.isSimpleMultiPoint(geom);\r\n\t\tif (hasInterface(geom, Polygonal)) return this.isSimplePolygonal(geom);\r\n\t\tif (geom instanceof GeometryCollection) return this.isSimpleGeometryCollection(geom);\r\n\t\treturn true;\r\n\t},\r\n\tisSimple: function () {\r\n\t\tthis.nonSimpleLocation = null;\r\n\t\treturn this.computeSimple(this.inputGeom);\r\n\t},\r\n\tisSimpleGeometryCollection: function (geom) {\r\n\t\tfor (var i = 0; i < geom.getNumGeometries(); i++) {\r\n\t\t\tvar comp = geom.getGeometryN(i);\r\n\t\t\tif (!this.computeSimple(comp)) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IsSimpleOp;\r\n\t}\r\n});\r\nfunction EndpointInfo() {\r\n\tthis.pt = null;\r\n\tthis.isClosed = null;\r\n\tthis.degree = null;\r\n\tlet pt = arguments[0];\r\n\tthis.pt = pt;\r\n\tthis.isClosed = false;\r\n\tthis.degree = 0;\r\n}\r\nextend(EndpointInfo.prototype, {\r\n\taddEndpoint: function (isClosed) {\r\n\t\tthis.degree++;\r\n\t\tthis.isClosed |= isClosed;\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.pt;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EndpointInfo;\r\n\t}\r\n});\r\nIsSimpleOp.EndpointInfo = EndpointInfo;\r\n","import extend from '../../../../../extend';\r\nexport default function BufferParameters() {\r\n\tthis.quadrantSegments = BufferParameters.DEFAULT_QUADRANT_SEGMENTS;\r\n\tthis.endCapStyle = BufferParameters.CAP_ROUND;\r\n\tthis.joinStyle = BufferParameters.JOIN_ROUND;\r\n\tthis.mitreLimit = BufferParameters.DEFAULT_MITRE_LIMIT;\r\n\tthis._isSingleSided = false;\r\n\tthis.simplifyFactor = BufferParameters.DEFAULT_SIMPLIFY_FACTOR;\r\n\tif (arguments.length === 0) {} else if (arguments.length === 1) {\r\n\t\tlet quadrantSegments = arguments[0];\r\n\t\tthis.setQuadrantSegments(quadrantSegments);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet quadrantSegments = arguments[0], endCapStyle = arguments[1];\r\n\t\tthis.setQuadrantSegments(quadrantSegments);\r\n\t\tthis.setEndCapStyle(endCapStyle);\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet quadrantSegments = arguments[0], endCapStyle = arguments[1], joinStyle = arguments[2], mitreLimit = arguments[3];\r\n\t\tthis.setQuadrantSegments(quadrantSegments);\r\n\t\tthis.setEndCapStyle(endCapStyle);\r\n\t\tthis.setJoinStyle(joinStyle);\r\n\t\tthis.setMitreLimit(mitreLimit);\r\n\t}\r\n}\r\nextend(BufferParameters.prototype, {\r\n\tgetEndCapStyle: function () {\r\n\t\treturn this.endCapStyle;\r\n\t},\r\n\tisSingleSided: function () {\r\n\t\treturn this._isSingleSided;\r\n\t},\r\n\tsetQuadrantSegments: function (quadSegs) {\r\n\t\tthis.quadrantSegments = quadSegs;\r\n\t\tif (this.quadrantSegments === 0) this.joinStyle = BufferParameters.JOIN_BEVEL;\r\n\t\tif (this.quadrantSegments < 0) {\r\n\t\t\tthis.joinStyle = BufferParameters.JOIN_MITRE;\r\n\t\t\tthis.mitreLimit = Math.abs(this.quadrantSegments);\r\n\t\t}\r\n\t\tif (quadSegs <= 0) {\r\n\t\t\tthis.quadrantSegments = 1;\r\n\t\t}\r\n\t\tif (this.joinStyle !== BufferParameters.JOIN_ROUND) {\r\n\t\t\tthis.quadrantSegments = BufferParameters.DEFAULT_QUADRANT_SEGMENTS;\r\n\t\t}\r\n\t},\r\n\tgetJoinStyle: function () {\r\n\t\treturn this.joinStyle;\r\n\t},\r\n\tsetJoinStyle: function (joinStyle) {\r\n\t\tthis.joinStyle = joinStyle;\r\n\t},\r\n\tsetSimplifyFactor: function (simplifyFactor) {\r\n\t\tthis.simplifyFactor = simplifyFactor < 0 ? 0 : simplifyFactor;\r\n\t},\r\n\tgetSimplifyFactor: function () {\r\n\t\treturn this.simplifyFactor;\r\n\t},\r\n\tgetQuadrantSegments: function () {\r\n\t\treturn this.quadrantSegments;\r\n\t},\r\n\tsetEndCapStyle: function (endCapStyle) {\r\n\t\tthis.endCapStyle = endCapStyle;\r\n\t},\r\n\tgetMitreLimit: function () {\r\n\t\treturn this.mitreLimit;\r\n\t},\r\n\tsetMitreLimit: function (mitreLimit) {\r\n\t\tthis.mitreLimit = mitreLimit;\r\n\t},\r\n\tsetSingleSided: function (isSingleSided) {\r\n\t\tthis._isSingleSided = isSingleSided;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BufferParameters;\r\n\t}\r\n});\r\nBufferParameters.bufferDistanceError = function (quadSegs) {\r\n\tvar alpha = Math.PI / 2.0 / quadSegs;\r\n\treturn 1 - Math.cos(alpha / 2.0);\r\n};\r\nBufferParameters.CAP_ROUND = 1;\r\nBufferParameters.CAP_FLAT = 2;\r\nBufferParameters.CAP_SQUARE = 3;\r\nBufferParameters.JOIN_ROUND = 1;\r\nBufferParameters.JOIN_MITRE = 2;\r\nBufferParameters.JOIN_BEVEL = 3;\r\nBufferParameters.DEFAULT_QUADRANT_SEGMENTS = 8;\r\nBufferParameters.DEFAULT_MITRE_LIMIT = 5.0;\r\nBufferParameters.DEFAULT_SIMPLIFY_FACTOR = 0.01;\r\n","import CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport Position from '../../geomgraph/Position';\r\nimport extend from '../../../../../extend';\r\nimport Assert from '../../util/Assert';\r\nexport default function RightmostEdgeFinder() {\r\n\tthis.minIndex = -1;\r\n\tthis.minCoord = null;\r\n\tthis.minDe = null;\r\n\tthis.orientedDe = null;\r\n}\r\nextend(RightmostEdgeFinder.prototype, {\r\n\tgetCoordinate: function () {\r\n\t\treturn this.minCoord;\r\n\t},\r\n\tgetRightmostSide: function (de, index) {\r\n\t\tvar side = this.getRightmostSideOfSegment(de, index);\r\n\t\tif (side < 0) side = this.getRightmostSideOfSegment(de, index - 1);\r\n\t\tif (side < 0) {\r\n\t\t\tthis.minCoord = null;\r\n\t\t\tthis.checkForRightmostCoordinate(de);\r\n\t\t}\r\n\t\treturn side;\r\n\t},\r\n\tfindRightmostEdgeAtVertex: function () {\r\n\t\tvar pts = this.minDe.getEdge().getCoordinates();\r\n\t\tAssert.isTrue(this.minIndex > 0 && this.minIndex < pts.length, \"rightmost point expected to be interior vertex of edge\");\r\n\t\tvar pPrev = pts[this.minIndex - 1];\r\n\t\tvar pNext = pts[this.minIndex + 1];\r\n\t\tvar orientation = CGAlgorithms.computeOrientation(this.minCoord, pNext, pPrev);\r\n\t\tvar usePrev = false;\r\n\t\tif (pPrev.y < this.minCoord.y && pNext.y < this.minCoord.y && orientation === CGAlgorithms.COUNTERCLOCKWISE) {\r\n\t\t\tusePrev = true;\r\n\t\t} else if (pPrev.y > this.minCoord.y && pNext.y > this.minCoord.y && orientation === CGAlgorithms.CLOCKWISE) {\r\n\t\t\tusePrev = true;\r\n\t\t}\r\n\t\tif (usePrev) {\r\n\t\t\tthis.minIndex = this.minIndex - 1;\r\n\t\t}\r\n\t},\r\n\tgetRightmostSideOfSegment: function (de, i) {\r\n\t\tvar e = de.getEdge();\r\n\t\tvar coord = e.getCoordinates();\r\n\t\tif (i < 0 || i + 1 >= coord.length) return -1;\r\n\t\tif (coord[i].y === coord[i + 1].y) return -1;\r\n\t\tvar pos = Position.LEFT;\r\n\t\tif (coord[i].y < coord[i + 1].y) pos = Position.RIGHT;\r\n\t\treturn pos;\r\n\t},\r\n\tgetEdge: function () {\r\n\t\treturn this.orientedDe;\r\n\t},\r\n\tcheckForRightmostCoordinate: function (de) {\r\n\t\tvar coord = de.getEdge().getCoordinates();\r\n\t\tfor (var i = 0; i < coord.length - 1; i++) {\r\n\t\t\tif (this.minCoord === null || coord[i].x > this.minCoord.x) {\r\n\t\t\t\tthis.minDe = de;\r\n\t\t\t\tthis.minIndex = i;\r\n\t\t\t\tthis.minCoord = coord[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfindRightmostEdgeAtNode: function () {\r\n\t\tvar node = this.minDe.getNode();\r\n\t\tvar star = node.getEdges();\r\n\t\tthis.minDe = star.getRightmostEdge();\r\n\t\tif (!this.minDe.isForward()) {\r\n\t\t\tthis.minDe = this.minDe.getSym();\r\n\t\t\tthis.minIndex = this.minDe.getEdge().getCoordinates().length - 1;\r\n\t\t}\r\n\t},\r\n\tfindEdge: function (dirEdgeList) {\r\n\t\tfor (var i = dirEdgeList.iterator(); i.hasNext(); ) {\r\n\t\t\tvar de = i.next();\r\n\t\t\tif (!de.isForward()) continue;\r\n\t\t\tthis.checkForRightmostCoordinate(de);\r\n\t\t}\r\n\t\tAssert.isTrue(this.minIndex !== 0 || this.minCoord.equals(this.minDe.getCoordinate()), \"inconsistency in rightmost processing\");\r\n\t\tif (this.minIndex === 0) {\r\n\t\t\tthis.findRightmostEdgeAtNode();\r\n\t\t} else {\r\n\t\t\tthis.findRightmostEdgeAtVertex();\r\n\t\t}\r\n\t\tthis.orientedDe = this.minDe;\r\n\t\tvar rightmostSide = this.getRightmostSide(this.minDe, this.minIndex);\r\n\t\tif (rightmostSide === Position.LEFT) {\r\n\t\t\tthis.orientedDe = this.minDe.getSym();\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RightmostEdgeFinder;\r\n\t}\r\n});\r\n","export default function LinkedList () {\r\n  this.array_ = []\r\n}\r\nLinkedList.prototype.addLast = function (e) {\r\n  this.array_.push(e)\r\n}\r\nLinkedList.prototype.removeFirst = function () {\r\n  return this.array_.shift()\r\n}\r\nLinkedList.prototype.isEmpty = function () {\r\n  return this.array_.length === 0\r\n}\r\n","import HashSet from '../../../../../java/util/HashSet';\r\nimport Position from '../../geomgraph/Position';\r\nimport Stack from '../../../../../java/util/Stack';\r\nimport RightmostEdgeFinder from './RightmostEdgeFinder';\r\nimport TopologyException from '../../geom/TopologyException';\r\nimport extend from '../../../../../extend';\r\nimport LinkedList from '../../../../../java/util/LinkedList';\r\nimport Comparable from '../../../../../java/lang/Comparable';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Envelope from '../../geom/Envelope';\r\nexport default function BufferSubgraph() {\r\n\tthis.finder = null;\r\n\tthis.dirEdgeList = new ArrayList();\r\n\tthis.nodes = new ArrayList();\r\n\tthis.rightMostCoord = null;\r\n\tthis.env = null;\r\n\tthis.finder = new RightmostEdgeFinder();\r\n}\r\nextend(BufferSubgraph.prototype, {\r\n\tclearVisitedEdges: function () {\r\n\t\tfor (var it = this.dirEdgeList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tde.setVisited(false);\r\n\t\t}\r\n\t},\r\n\tgetRightmostCoordinate: function () {\r\n\t\treturn this.rightMostCoord;\r\n\t},\r\n\tcomputeNodeDepth: function (n) {\r\n\t\tvar startEdge = null;\r\n\t\tfor (var i = n.getEdges().iterator(); i.hasNext(); ) {\r\n\t\t\tvar de = i.next();\r\n\t\t\tif (de.isVisited() || de.getSym().isVisited()) {\r\n\t\t\t\tstartEdge = de;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (startEdge === null) throw new TopologyException(\"unable to find edge to compute depths at \" + n.getCoordinate());\r\n\t\tn.getEdges().computeDepths(startEdge);\r\n\t\tfor (var i = n.getEdges().iterator(); i.hasNext(); ) {\r\n\t\t\tvar de = i.next();\r\n\t\t\tde.setVisited(true);\r\n\t\t\tthis.copySymDepths(de);\r\n\t\t}\r\n\t},\r\n\tcomputeDepth: function (outsideDepth) {\r\n\t\tthis.clearVisitedEdges();\r\n\t\tvar de = this.finder.getEdge();\r\n\t\tvar n = de.getNode();\r\n\t\tvar label = de.getLabel();\r\n\t\tde.setEdgeDepths(Position.RIGHT, outsideDepth);\r\n\t\tthis.copySymDepths(de);\r\n\t\tthis.computeDepths(de);\r\n\t},\r\n\tcreate: function (node) {\r\n\t\tthis.addReachable(node);\r\n\t\tthis.finder.findEdge(this.dirEdgeList);\r\n\t\tthis.rightMostCoord = this.finder.getCoordinate();\r\n\t},\r\n\tfindResultEdges: function () {\r\n\t\tfor (var it = this.dirEdgeList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tif (de.getDepth(Position.RIGHT) >= 1 && de.getDepth(Position.LEFT) <= 0 && !de.isInteriorAreaEdge()) {\r\n\t\t\t\tde.setInResult(true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputeDepths: function (startEdge) {\r\n\t\tvar nodesVisited = new HashSet();\r\n\t\tvar nodeQueue = new LinkedList();\r\n\t\tvar startNode = startEdge.getNode();\r\n\t\tnodeQueue.addLast(startNode);\r\n\t\tnodesVisited.add(startNode);\r\n\t\tstartEdge.setVisited(true);\r\n\t\twhile (!nodeQueue.isEmpty()) {\r\n\t\t\tvar n = nodeQueue.removeFirst();\r\n\t\t\tnodesVisited.add(n);\r\n\t\t\tthis.computeNodeDepth(n);\r\n\t\t\tfor (var i = n.getEdges().iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar de = i.next();\r\n\t\t\t\tvar sym = de.getSym();\r\n\t\t\t\tif (sym.isVisited()) continue;\r\n\t\t\t\tvar adjNode = sym.getNode();\r\n\t\t\t\tif (!nodesVisited.contains(adjNode)) {\r\n\t\t\t\t\tnodeQueue.addLast(adjNode);\r\n\t\t\t\t\tnodesVisited.add(adjNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcompareTo: function (o) {\r\n\t\tvar graph = o;\r\n\t\tif (this.rightMostCoord.x < graph.rightMostCoord.x) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (this.rightMostCoord.x > graph.rightMostCoord.x) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\tgetEnvelope: function () {\r\n\t\tif (this.env === null) {\r\n\t\t\tvar edgeEnv = new Envelope();\r\n\t\t\tfor (var it = this.dirEdgeList.iterator(); it.hasNext(); ) {\r\n\t\t\t\tvar dirEdge = it.next();\r\n\t\t\t\tvar pts = dirEdge.getEdge().getCoordinates();\r\n\t\t\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\t\t\tedgeEnv.expandToInclude(pts[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.env = edgeEnv;\r\n\t\t}\r\n\t\treturn this.env;\r\n\t},\r\n\taddReachable: function (startNode) {\r\n\t\tvar nodeStack = new Stack();\r\n\t\tnodeStack.add(startNode);\r\n\t\twhile (!nodeStack.empty()) {\r\n\t\t\tvar node = nodeStack.pop();\r\n\t\t\tthis.add(node, nodeStack);\r\n\t\t}\r\n\t},\r\n\tcopySymDepths: function (de) {\r\n\t\tvar sym = de.getSym();\r\n\t\tsym.setDepth(Position.LEFT, de.getDepth(Position.RIGHT));\r\n\t\tsym.setDepth(Position.RIGHT, de.getDepth(Position.LEFT));\r\n\t},\r\n\tadd: function (node, nodeStack) {\r\n\t\tnode.setVisited(true);\r\n\t\tthis.nodes.add(node);\r\n\t\tfor (var i = node.getEdges().iterator(); i.hasNext(); ) {\r\n\t\t\tvar de = i.next();\r\n\t\t\tthis.dirEdgeList.add(de);\r\n\t\t\tvar sym = de.getSym();\r\n\t\t\tvar symNode = sym.getNode();\r\n\t\t\tif (!symNode.isVisited()) nodeStack.push(symNode);\r\n\t\t}\r\n\t},\r\n\tgetNodes: function () {\r\n\t\treturn this.nodes;\r\n\t},\r\n\tgetDirectedEdges: function () {\r\n\t\treturn this.dirEdgeList;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BufferSubgraph;\r\n\t}\r\n});\r\n","import CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport CoordinateList from '../../geom/CoordinateList';\r\nimport extend from '../../../../../extend';\r\nexport default function BufferInputLineSimplifier() {\r\n\tthis.inputLine = null;\r\n\tthis.distanceTol = null;\r\n\tthis.isDeleted = null;\r\n\tthis.angleOrientation = CGAlgorithms.COUNTERCLOCKWISE;\r\n\tlet inputLine = arguments[0];\r\n\tthis.inputLine = inputLine;\r\n}\r\nextend(BufferInputLineSimplifier.prototype, {\r\n\tisDeletable: function (i0, i1, i2, distanceTol) {\r\n\t\tvar p0 = this.inputLine[i0];\r\n\t\tvar p1 = this.inputLine[i1];\r\n\t\tvar p2 = this.inputLine[i2];\r\n\t\tif (!this.isConcave(p0, p1, p2)) return false;\r\n\t\tif (!this.isShallow(p0, p1, p2, distanceTol)) return false;\r\n\t\treturn this.isShallowSampled(p0, p1, i0, i2, distanceTol);\r\n\t},\r\n\tdeleteShallowConcavities: function () {\r\n\t\tvar index = 1;\r\n\t\tvar maxIndex = this.inputLine.length - 1;\r\n\t\tvar midIndex = this.findNextNonDeletedIndex(index);\r\n\t\tvar lastIndex = this.findNextNonDeletedIndex(midIndex);\r\n\t\tvar isChanged = false;\r\n\t\twhile (lastIndex < this.inputLine.length) {\r\n\t\t\tvar isMiddleVertexDeleted = false;\r\n\t\t\tif (this.isDeletable(index, midIndex, lastIndex, this.distanceTol)) {\r\n\t\t\t\tthis.isDeleted[midIndex] = BufferInputLineSimplifier.DELETE;\r\n\t\t\t\tisMiddleVertexDeleted = true;\r\n\t\t\t\tisChanged = true;\r\n\t\t\t}\r\n\t\t\tif (isMiddleVertexDeleted) index = lastIndex; else index = midIndex;\r\n\t\t\tmidIndex = this.findNextNonDeletedIndex(index);\r\n\t\t\tlastIndex = this.findNextNonDeletedIndex(midIndex);\r\n\t\t}\r\n\t\treturn isChanged;\r\n\t},\r\n\tisShallowConcavity: function (p0, p1, p2, distanceTol) {\r\n\t\tvar orientation = CGAlgorithms.computeOrientation(p0, p1, p2);\r\n\t\tvar isAngleToSimplify = orientation === this.angleOrientation;\r\n\t\tif (!isAngleToSimplify) return false;\r\n\t\tvar dist = CGAlgorithms.distancePointLine(p1, p0, p2);\r\n\t\treturn dist < distanceTol;\r\n\t},\r\n\tisShallowSampled: function (p0, p2, i0, i2, distanceTol) {\r\n\t\tvar inc = Math.trunc((i2 - i0) / BufferInputLineSimplifier.NUM_PTS_TO_CHECK);\r\n\t\tif (inc <= 0) inc = 1;\r\n\t\tfor (var i = i0; i < i2; i += inc) {\r\n\t\t\tif (!this.isShallow(p0, p2, this.inputLine[i], distanceTol)) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tisConcave: function (p0, p1, p2) {\r\n\t\tvar orientation = CGAlgorithms.computeOrientation(p0, p1, p2);\r\n\t\tvar isConcave = orientation === this.angleOrientation;\r\n\t\treturn isConcave;\r\n\t},\r\n\tsimplify: function (distanceTol) {\r\n\t\tthis.distanceTol = Math.abs(distanceTol);\r\n\t\tif (distanceTol < 0) this.angleOrientation = CGAlgorithms.CLOCKWISE;\r\n\t\tthis.isDeleted = new Array(this.inputLine.length).fill(null);\r\n\t\tvar isChanged = false;\r\n\t\tdo {\r\n\t\t\tisChanged = this.deleteShallowConcavities();\r\n\t\t} while (isChanged);\r\n\t\treturn this.collapseLine();\r\n\t},\r\n\tfindNextNonDeletedIndex: function (index) {\r\n\t\tvar next = index + 1;\r\n\t\twhile (next < this.inputLine.length && this.isDeleted[next] === BufferInputLineSimplifier.DELETE) next++;\r\n\t\treturn next;\r\n\t},\r\n\tisShallow: function (p0, p1, p2, distanceTol) {\r\n\t\tvar dist = CGAlgorithms.distancePointLine(p1, p0, p2);\r\n\t\treturn dist < distanceTol;\r\n\t},\r\n\tcollapseLine: function () {\r\n\t\tvar coordList = new CoordinateList();\r\n\t\tfor (var i = 0; i < this.inputLine.length; i++) {\r\n\t\t\tif (this.isDeleted[i] !== BufferInputLineSimplifier.DELETE) coordList.add(this.inputLine[i]);\r\n\t\t}\r\n\t\treturn coordList.toCoordinateArray();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BufferInputLineSimplifier;\r\n\t}\r\n});\r\nBufferInputLineSimplifier.simplify = function (inputLine, distanceTol) {\r\n\tvar simp = new BufferInputLineSimplifier(inputLine);\r\n\treturn simp.simplify(distanceTol);\r\n};\r\nBufferInputLineSimplifier.INIT = 0;\r\nBufferInputLineSimplifier.DELETE = 1;\r\nBufferInputLineSimplifier.KEEP = 1;\r\nBufferInputLineSimplifier.NUM_PTS_TO_CHECK = 10;\r\n","import GeometryFactory from '../../geom/GeometryFactory';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nexport default function OffsetSegmentString() {\r\n\tthis.ptList = null;\r\n\tthis.precisionModel = null;\r\n\tthis.minimimVertexDistance = 0.0;\r\n\tthis.ptList = new ArrayList();\r\n}\r\nextend(OffsetSegmentString.prototype, {\r\n\tgetCoordinates: function () {\r\n\t\tvar coord = this.ptList.toArray(OffsetSegmentString.COORDINATE_ARRAY_TYPE);\r\n\t\treturn coord;\r\n\t},\r\n\tsetPrecisionModel: function (precisionModel) {\r\n\t\tthis.precisionModel = precisionModel;\r\n\t},\r\n\taddPt: function (pt) {\r\n\t\tvar bufPt = new Coordinate(pt);\r\n\t\tthis.precisionModel.makePrecise(bufPt);\r\n\t\tif (this.isRedundant(bufPt)) return null;\r\n\t\tthis.ptList.add(bufPt);\r\n\t},\r\n\treverse: function () {},\r\n\taddPts: function (pt, isForward) {\r\n\t\tif (isForward) {\r\n\t\t\tfor (var i = 0; i < pt.length; i++) {\r\n\t\t\t\tthis.addPt(pt[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (var i = pt.length - 1; i >= 0; i--) {\r\n\t\t\t\tthis.addPt(pt[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisRedundant: function (pt) {\r\n\t\tif (this.ptList.size() < 1) return false;\r\n\t\tvar lastPt = this.ptList.get(this.ptList.size() - 1);\r\n\t\tvar ptDist = pt.distance(lastPt);\r\n\t\tif (ptDist < this.minimimVertexDistance) return true;\r\n\t\treturn false;\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar fact = new GeometryFactory();\r\n\t\tvar line = fact.createLineString(this.getCoordinates());\r\n\t\treturn line.toString();\r\n\t},\r\n\tcloseRing: function () {\r\n\t\tif (this.ptList.size() < 1) return null;\r\n\t\tvar startPt = new Coordinate(this.ptList.get(0));\r\n\t\tvar lastPt = this.ptList.get(this.ptList.size() - 1);\r\n\t\tvar last2Pt = null;\r\n\t\tif (this.ptList.size() >= 2) last2Pt = this.ptList.get(this.ptList.size() - 2);\r\n\t\tif (startPt.equals(lastPt)) return null;\r\n\t\tthis.ptList.add(startPt);\r\n\t},\r\n\tsetMinimumVertexDistance: function (minimimVertexDistance) {\r\n\t\tthis.minimimVertexDistance = minimimVertexDistance;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn OffsetSegmentString;\r\n\t}\r\n});\r\nOffsetSegmentString.COORDINATE_ARRAY_TYPE = new Array(0).fill(null);\r\n","import BufferParameters from './BufferParameters';\r\nimport NotRepresentableException from '../../algorithm/NotRepresentableException';\r\nimport CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport Position from '../../geomgraph/Position';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport extend from '../../../../../extend';\r\nimport OffsetSegmentString from './OffsetSegmentString';\r\nimport LineSegment from '../../geom/LineSegment';\r\nimport Angle from '../../algorithm/Angle';\r\nimport RobustLineIntersector from '../../algorithm/RobustLineIntersector';\r\nimport HCoordinate from '../../algorithm/HCoordinate';\r\nexport default function OffsetSegmentGenerator() {\r\n\tthis.maxCurveSegmentError = 0.0;\r\n\tthis.filletAngleQuantum = null;\r\n\tthis.closingSegLengthFactor = 1;\r\n\tthis.segList = null;\r\n\tthis.distance = 0.0;\r\n\tthis.precisionModel = null;\r\n\tthis.bufParams = null;\r\n\tthis.li = null;\r\n\tthis.s0 = null;\r\n\tthis.s1 = null;\r\n\tthis.s2 = null;\r\n\tthis.seg0 = new LineSegment();\r\n\tthis.seg1 = new LineSegment();\r\n\tthis.offset0 = new LineSegment();\r\n\tthis.offset1 = new LineSegment();\r\n\tthis.side = 0;\r\n\tthis._hasNarrowConcaveAngle = false;\r\n\tlet precisionModel = arguments[0], bufParams = arguments[1], distance = arguments[2];\r\n\tthis.precisionModel = precisionModel;\r\n\tthis.bufParams = bufParams;\r\n\tthis.li = new RobustLineIntersector();\r\n\tthis.filletAngleQuantum = Math.PI / 2.0 / bufParams.getQuadrantSegments();\r\n\tif (bufParams.getQuadrantSegments() >= 8 && bufParams.getJoinStyle() === BufferParameters.JOIN_ROUND) this.closingSegLengthFactor = OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR;\r\n\tthis.init(distance);\r\n}\r\nextend(OffsetSegmentGenerator.prototype, {\r\n\taddNextSegment: function (p, addStartPoint) {\r\n\t\tthis.s0 = this.s1;\r\n\t\tthis.s1 = this.s2;\r\n\t\tthis.s2 = p;\r\n\t\tthis.seg0.setCoordinates(this.s0, this.s1);\r\n\t\tthis.computeOffsetSegment(this.seg0, this.side, this.distance, this.offset0);\r\n\t\tthis.seg1.setCoordinates(this.s1, this.s2);\r\n\t\tthis.computeOffsetSegment(this.seg1, this.side, this.distance, this.offset1);\r\n\t\tif (this.s1.equals(this.s2)) return null;\r\n\t\tvar orientation = CGAlgorithms.computeOrientation(this.s0, this.s1, this.s2);\r\n\t\tvar outsideTurn = orientation === CGAlgorithms.CLOCKWISE && this.side === Position.LEFT || orientation === CGAlgorithms.COUNTERCLOCKWISE && this.side === Position.RIGHT;\r\n\t\tif (orientation === 0) {\r\n\t\t\tthis.addCollinear(addStartPoint);\r\n\t\t} else if (outsideTurn) {\r\n\t\t\tthis.addOutsideTurn(orientation, addStartPoint);\r\n\t\t} else {\r\n\t\t\tthis.addInsideTurn(orientation, addStartPoint);\r\n\t\t}\r\n\t},\r\n\taddLineEndCap: function (p0, p1) {\r\n\t\tvar seg = new LineSegment(p0, p1);\r\n\t\tvar offsetL = new LineSegment();\r\n\t\tthis.computeOffsetSegment(seg, Position.LEFT, this.distance, offsetL);\r\n\t\tvar offsetR = new LineSegment();\r\n\t\tthis.computeOffsetSegment(seg, Position.RIGHT, this.distance, offsetR);\r\n\t\tvar dx = p1.x - p0.x;\r\n\t\tvar dy = p1.y - p0.y;\r\n\t\tvar angle = Math.atan2(dy, dx);\r\n\t\tswitch (this.bufParams.getEndCapStyle()) {\r\n\t\t\tcase BufferParameters.CAP_ROUND:\r\n\t\t\t\tthis.segList.addPt(offsetL.p1);\r\n\t\t\t\tthis.addFilletArc(p1, angle + Math.PI / 2, angle - Math.PI / 2, CGAlgorithms.CLOCKWISE, this.distance);\r\n\t\t\t\tthis.segList.addPt(offsetR.p1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase BufferParameters.CAP_FLAT:\r\n\t\t\t\tthis.segList.addPt(offsetL.p1);\r\n\t\t\t\tthis.segList.addPt(offsetR.p1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase BufferParameters.CAP_SQUARE:\r\n\t\t\t\tvar squareCapSideOffset = new Coordinate();\r\n\t\t\t\tsquareCapSideOffset.x = Math.abs(this.distance) * Math.cos(angle);\r\n\t\t\t\tsquareCapSideOffset.y = Math.abs(this.distance) * Math.sin(angle);\r\n\t\t\t\tvar squareCapLOffset = new Coordinate(offsetL.p1.x + squareCapSideOffset.x, offsetL.p1.y + squareCapSideOffset.y);\r\n\t\t\t\tvar squareCapROffset = new Coordinate(offsetR.p1.x + squareCapSideOffset.x, offsetR.p1.y + squareCapSideOffset.y);\r\n\t\t\t\tthis.segList.addPt(squareCapLOffset);\r\n\t\t\t\tthis.segList.addPt(squareCapROffset);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\tgetCoordinates: function () {\r\n\t\tvar pts = this.segList.getCoordinates();\r\n\t\treturn pts;\r\n\t},\r\n\taddMitreJoin: function (p, offset0, offset1, distance) {\r\n\t\tvar isMitreWithinLimit = true;\r\n\t\tvar intPt = null;\r\n\t\ttry {\r\n\t\t\tintPt = HCoordinate.intersection(offset0.p0, offset0.p1, offset1.p0, offset1.p1);\r\n\t\t\tvar mitreRatio = distance <= 0.0 ? 1.0 : intPt.distance(p) / Math.abs(distance);\r\n\t\t\tif (mitreRatio > this.bufParams.getMitreLimit()) isMitreWithinLimit = false;\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex instanceof NotRepresentableException) {\r\n\t\t\t\tintPt = new Coordinate(0, 0);\r\n\t\t\t\tisMitreWithinLimit = false;\r\n\t\t\t} else throw ex;\r\n\t\t} finally {}\r\n\t\tif (isMitreWithinLimit) {\r\n\t\t\tthis.segList.addPt(intPt);\r\n\t\t} else {\r\n\t\t\tthis.addLimitedMitreJoin(offset0, offset1, distance, this.bufParams.getMitreLimit());\r\n\t\t}\r\n\t},\r\n\taddFilletCorner: function (p, p0, p1, direction, radius) {\r\n\t\tvar dx0 = p0.x - p.x;\r\n\t\tvar dy0 = p0.y - p.y;\r\n\t\tvar startAngle = Math.atan2(dy0, dx0);\r\n\t\tvar dx1 = p1.x - p.x;\r\n\t\tvar dy1 = p1.y - p.y;\r\n\t\tvar endAngle = Math.atan2(dy1, dx1);\r\n\t\tif (direction === CGAlgorithms.CLOCKWISE) {\r\n\t\t\tif (startAngle <= endAngle) startAngle += 2.0 * Math.PI;\r\n\t\t} else {\r\n\t\t\tif (startAngle >= endAngle) startAngle -= 2.0 * Math.PI;\r\n\t\t}\r\n\t\tthis.segList.addPt(p0);\r\n\t\tthis.addFilletArc(p, startAngle, endAngle, direction, radius);\r\n\t\tthis.segList.addPt(p1);\r\n\t},\r\n\taddOutsideTurn: function (orientation, addStartPoint) {\r\n\t\tif (this.offset0.p1.distance(this.offset1.p0) < this.distance * OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR) {\r\n\t\t\tthis.segList.addPt(this.offset0.p1);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.bufParams.getJoinStyle() === BufferParameters.JOIN_MITRE) {\r\n\t\t\tthis.addMitreJoin(this.s1, this.offset0, this.offset1, this.distance);\r\n\t\t} else if (this.bufParams.getJoinStyle() === BufferParameters.JOIN_BEVEL) {\r\n\t\t\tthis.addBevelJoin(this.offset0, this.offset1);\r\n\t\t} else {\r\n\t\t\tif (addStartPoint) this.segList.addPt(this.offset0.p1);\r\n\t\t\tthis.addFilletCorner(this.s1, this.offset0.p1, this.offset1.p0, orientation, this.distance);\r\n\t\t\tthis.segList.addPt(this.offset1.p0);\r\n\t\t}\r\n\t},\r\n\tcreateSquare: function (p) {\r\n\t\tthis.segList.addPt(new Coordinate(p.x + this.distance, p.y + this.distance));\r\n\t\tthis.segList.addPt(new Coordinate(p.x + this.distance, p.y - this.distance));\r\n\t\tthis.segList.addPt(new Coordinate(p.x - this.distance, p.y - this.distance));\r\n\t\tthis.segList.addPt(new Coordinate(p.x - this.distance, p.y + this.distance));\r\n\t\tthis.segList.closeRing();\r\n\t},\r\n\taddSegments: function (pt, isForward) {\r\n\t\tthis.segList.addPts(pt, isForward);\r\n\t},\r\n\taddFirstSegment: function () {\r\n\t\tthis.segList.addPt(this.offset1.p0);\r\n\t},\r\n\taddLastSegment: function () {\r\n\t\tthis.segList.addPt(this.offset1.p1);\r\n\t},\r\n\tinitSideSegments: function (s1, s2, side) {\r\n\t\tthis.s1 = s1;\r\n\t\tthis.s2 = s2;\r\n\t\tthis.side = side;\r\n\t\tthis.seg1.setCoordinates(s1, s2);\r\n\t\tthis.computeOffsetSegment(this.seg1, side, this.distance, this.offset1);\r\n\t},\r\n\taddLimitedMitreJoin: function (offset0, offset1, distance, mitreLimit) {\r\n\t\tvar basePt = this.seg0.p1;\r\n\t\tvar ang0 = Angle.angle(basePt, this.seg0.p0);\r\n\t\tvar ang1 = Angle.angle(basePt, this.seg1.p1);\r\n\t\tvar angDiff = Angle.angleBetweenOriented(this.seg0.p0, basePt, this.seg1.p1);\r\n\t\tvar angDiffHalf = angDiff / 2;\r\n\t\tvar midAng = Angle.normalize(ang0 + angDiffHalf);\r\n\t\tvar mitreMidAng = Angle.normalize(midAng + Math.PI);\r\n\t\tvar mitreDist = mitreLimit * distance;\r\n\t\tvar bevelDelta = mitreDist * Math.abs(Math.sin(angDiffHalf));\r\n\t\tvar bevelHalfLen = distance - bevelDelta;\r\n\t\tvar bevelMidX = basePt.x + mitreDist * Math.cos(mitreMidAng);\r\n\t\tvar bevelMidY = basePt.y + mitreDist * Math.sin(mitreMidAng);\r\n\t\tvar bevelMidPt = new Coordinate(bevelMidX, bevelMidY);\r\n\t\tvar mitreMidLine = new LineSegment(basePt, bevelMidPt);\r\n\t\tvar bevelEndLeft = mitreMidLine.pointAlongOffset(1.0, bevelHalfLen);\r\n\t\tvar bevelEndRight = mitreMidLine.pointAlongOffset(1.0, -bevelHalfLen);\r\n\t\tif (this.side === Position.LEFT) {\r\n\t\t\tthis.segList.addPt(bevelEndLeft);\r\n\t\t\tthis.segList.addPt(bevelEndRight);\r\n\t\t} else {\r\n\t\t\tthis.segList.addPt(bevelEndRight);\r\n\t\t\tthis.segList.addPt(bevelEndLeft);\r\n\t\t}\r\n\t},\r\n\tcomputeOffsetSegment: function (seg, side, distance, offset) {\r\n\t\tvar sideSign = side === Position.LEFT ? 1 : -1;\r\n\t\tvar dx = seg.p1.x - seg.p0.x;\r\n\t\tvar dy = seg.p1.y - seg.p0.y;\r\n\t\tvar len = Math.sqrt(dx * dx + dy * dy);\r\n\t\tvar ux = sideSign * distance * dx / len;\r\n\t\tvar uy = sideSign * distance * dy / len;\r\n\t\toffset.p0.x = seg.p0.x - uy;\r\n\t\toffset.p0.y = seg.p0.y + ux;\r\n\t\toffset.p1.x = seg.p1.x - uy;\r\n\t\toffset.p1.y = seg.p1.y + ux;\r\n\t},\r\n\taddFilletArc: function (p, startAngle, endAngle, direction, radius) {\r\n\t\tvar directionFactor = direction === CGAlgorithms.CLOCKWISE ? -1 : 1;\r\n\t\tvar totalAngle = Math.abs(startAngle - endAngle);\r\n\t\tvar nSegs = Math.trunc(totalAngle / this.filletAngleQuantum + 0.5);\r\n\t\tif (nSegs < 1) return null;\r\n\t\tvar initAngle = null, currAngleInc = null;\r\n\t\tinitAngle = 0.0;\r\n\t\tcurrAngleInc = totalAngle / nSegs;\r\n\t\tvar currAngle = initAngle;\r\n\t\tvar pt = new Coordinate();\r\n\t\twhile (currAngle < totalAngle) {\r\n\t\t\tvar angle = startAngle + directionFactor * currAngle;\r\n\t\t\tpt.x = p.x + radius * Math.cos(angle);\r\n\t\t\tpt.y = p.y + radius * Math.sin(angle);\r\n\t\t\tthis.segList.addPt(pt);\r\n\t\t\tcurrAngle += currAngleInc;\r\n\t\t}\r\n\t},\r\n\taddInsideTurn: function (orientation, addStartPoint) {\r\n\t\tthis.li.computeIntersection(this.offset0.p0, this.offset0.p1, this.offset1.p0, this.offset1.p1);\r\n\t\tif (this.li.hasIntersection()) {\r\n\t\t\tthis.segList.addPt(this.li.getIntersection(0));\r\n\t\t} else {\r\n\t\t\tthis._hasNarrowConcaveAngle = true;\r\n\t\t\tif (this.offset0.p1.distance(this.offset1.p0) < this.distance * OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR) {\r\n\t\t\t\tthis.segList.addPt(this.offset0.p1);\r\n\t\t\t} else {\r\n\t\t\t\tthis.segList.addPt(this.offset0.p1);\r\n\t\t\t\tif (this.closingSegLengthFactor > 0) {\r\n\t\t\t\t\tvar mid0 = new Coordinate((this.closingSegLengthFactor * this.offset0.p1.x + this.s1.x) / (this.closingSegLengthFactor + 1), (this.closingSegLengthFactor * this.offset0.p1.y + this.s1.y) / (this.closingSegLengthFactor + 1));\r\n\t\t\t\t\tthis.segList.addPt(mid0);\r\n\t\t\t\t\tvar mid1 = new Coordinate((this.closingSegLengthFactor * this.offset1.p0.x + this.s1.x) / (this.closingSegLengthFactor + 1), (this.closingSegLengthFactor * this.offset1.p0.y + this.s1.y) / (this.closingSegLengthFactor + 1));\r\n\t\t\t\t\tthis.segList.addPt(mid1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.segList.addPt(this.s1);\r\n\t\t\t\t}\r\n\t\t\t\tthis.segList.addPt(this.offset1.p0);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreateCircle: function (p) {\r\n\t\tvar pt = new Coordinate(p.x + this.distance, p.y);\r\n\t\tthis.segList.addPt(pt);\r\n\t\tthis.addFilletArc(p, 0.0, 2.0 * Math.PI, -1, this.distance);\r\n\t\tthis.segList.closeRing();\r\n\t},\r\n\taddBevelJoin: function (offset0, offset1) {\r\n\t\tthis.segList.addPt(offset0.p1);\r\n\t\tthis.segList.addPt(offset1.p0);\r\n\t},\r\n\tinit: function (distance) {\r\n\t\tthis.distance = distance;\r\n\t\tthis.maxCurveSegmentError = distance * (1 - Math.cos(this.filletAngleQuantum / 2.0));\r\n\t\tthis.segList = new OffsetSegmentString();\r\n\t\tthis.segList.setPrecisionModel(this.precisionModel);\r\n\t\tthis.segList.setMinimumVertexDistance(distance * OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR);\r\n\t},\r\n\taddCollinear: function (addStartPoint) {\r\n\t\tthis.li.computeIntersection(this.s0, this.s1, this.s1, this.s2);\r\n\t\tvar numInt = this.li.getIntersectionNum();\r\n\t\tif (numInt >= 2) {\r\n\t\t\tif (this.bufParams.getJoinStyle() === BufferParameters.JOIN_BEVEL || this.bufParams.getJoinStyle() === BufferParameters.JOIN_MITRE) {\r\n\t\t\t\tif (addStartPoint) this.segList.addPt(this.offset0.p1);\r\n\t\t\t\tthis.segList.addPt(this.offset1.p0);\r\n\t\t\t} else {\r\n\t\t\t\tthis.addFilletCorner(this.s1, this.offset0.p1, this.offset1.p0, CGAlgorithms.CLOCKWISE, this.distance);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcloseRing: function () {\r\n\t\tthis.segList.closeRing();\r\n\t},\r\n\thasNarrowConcaveAngle: function () {\r\n\t\treturn this._hasNarrowConcaveAngle;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn OffsetSegmentGenerator;\r\n\t}\r\n});\r\nOffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR = 1.0E-3;\r\nOffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR = 1.0E-3;\r\nOffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR = 1.0E-6;\r\nOffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR = 80;\r\n","import BufferParameters from './BufferParameters';\r\nimport Position from '../../geomgraph/Position';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport extend from '../../../../../extend';\r\nimport BufferInputLineSimplifier from './BufferInputLineSimplifier';\r\nimport CoordinateArrays from '../../geom/CoordinateArrays';\r\nimport OffsetSegmentGenerator from './OffsetSegmentGenerator';\r\nexport default function OffsetCurveBuilder() {\r\n\tthis.distance = 0.0;\r\n\tthis.precisionModel = null;\r\n\tthis.bufParams = null;\r\n\tlet precisionModel = arguments[0], bufParams = arguments[1];\r\n\tthis.precisionModel = precisionModel;\r\n\tthis.bufParams = bufParams;\r\n}\r\nextend(OffsetCurveBuilder.prototype, {\r\n\tgetOffsetCurve: function (inputPts, distance) {\r\n\t\tthis.distance = distance;\r\n\t\tif (distance === 0.0) return null;\r\n\t\tvar isRightSide = distance < 0.0;\r\n\t\tvar posDistance = Math.abs(distance);\r\n\t\tvar segGen = this.getSegGen(posDistance);\r\n\t\tif (inputPts.length <= 1) {\r\n\t\t\tthis.computePointCurve(inputPts[0], segGen);\r\n\t\t} else {\r\n\t\t\tthis.computeOffsetCurve(inputPts, isRightSide, segGen);\r\n\t\t}\r\n\t\tvar curvePts = segGen.getCoordinates();\r\n\t\tif (isRightSide) CoordinateArrays.reverse(curvePts);\r\n\t\treturn curvePts;\r\n\t},\r\n\tcomputeSingleSidedBufferCurve: function (inputPts, isRightSide, segGen) {\r\n\t\tvar distTol = this.simplifyTolerance(this.distance);\r\n\t\tif (isRightSide) {\r\n\t\t\tsegGen.addSegments(inputPts, true);\r\n\t\t\tvar simp2 = BufferInputLineSimplifier.simplify(inputPts, -distTol);\r\n\t\t\tvar n2 = simp2.length - 1;\r\n\t\t\tsegGen.initSideSegments(simp2[n2], simp2[n2 - 1], Position.LEFT);\r\n\t\t\tsegGen.addFirstSegment();\r\n\t\t\tfor (var i = n2 - 2; i >= 0; i--) {\r\n\t\t\t\tsegGen.addNextSegment(simp2[i], true);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsegGen.addSegments(inputPts, false);\r\n\t\t\tvar simp1 = BufferInputLineSimplifier.simplify(inputPts, distTol);\r\n\t\t\tvar n1 = simp1.length - 1;\r\n\t\t\tsegGen.initSideSegments(simp1[0], simp1[1], Position.LEFT);\r\n\t\t\tsegGen.addFirstSegment();\r\n\t\t\tfor (var i = 2; i <= n1; i++) {\r\n\t\t\t\tsegGen.addNextSegment(simp1[i], true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsegGen.addLastSegment();\r\n\t\tsegGen.closeRing();\r\n\t},\r\n\tcomputeRingBufferCurve: function (inputPts, side, segGen) {\r\n\t\tvar distTol = this.simplifyTolerance(this.distance);\r\n\t\tif (side === Position.RIGHT) distTol = -distTol;\r\n\t\tvar simp = BufferInputLineSimplifier.simplify(inputPts, distTol);\r\n\t\tvar n = simp.length - 1;\r\n\t\tsegGen.initSideSegments(simp[n - 1], simp[0], side);\r\n\t\tfor (var i = 1; i <= n; i++) {\r\n\t\t\tvar addStartPoint = i !== 1;\r\n\t\t\tsegGen.addNextSegment(simp[i], addStartPoint);\r\n\t\t}\r\n\t\tsegGen.closeRing();\r\n\t},\r\n\tcomputeLineBufferCurve: function (inputPts, segGen) {\r\n\t\tvar distTol = this.simplifyTolerance(this.distance);\r\n\t\tvar simp1 = BufferInputLineSimplifier.simplify(inputPts, distTol);\r\n\t\tvar n1 = simp1.length - 1;\r\n\t\tsegGen.initSideSegments(simp1[0], simp1[1], Position.LEFT);\r\n\t\tfor (var i = 2; i <= n1; i++) {\r\n\t\t\tsegGen.addNextSegment(simp1[i], true);\r\n\t\t}\r\n\t\tsegGen.addLastSegment();\r\n\t\tsegGen.addLineEndCap(simp1[n1 - 1], simp1[n1]);\r\n\t\tvar simp2 = BufferInputLineSimplifier.simplify(inputPts, -distTol);\r\n\t\tvar n2 = simp2.length - 1;\r\n\t\tsegGen.initSideSegments(simp2[n2], simp2[n2 - 1], Position.LEFT);\r\n\t\tfor (var i = n2 - 2; i >= 0; i--) {\r\n\t\t\tsegGen.addNextSegment(simp2[i], true);\r\n\t\t}\r\n\t\tsegGen.addLastSegment();\r\n\t\tsegGen.addLineEndCap(simp2[1], simp2[0]);\r\n\t\tsegGen.closeRing();\r\n\t},\r\n\tcomputePointCurve: function (pt, segGen) {\r\n\t\tswitch (this.bufParams.getEndCapStyle()) {\r\n\t\t\tcase BufferParameters.CAP_ROUND:\r\n\t\t\t\tsegGen.createCircle(pt);\r\n\t\t\t\tbreak;\r\n\t\t\tcase BufferParameters.CAP_SQUARE:\r\n\t\t\t\tsegGen.createSquare(pt);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\tgetLineCurve: function (inputPts, distance) {\r\n\t\tthis.distance = distance;\r\n\t\tif (distance < 0.0 && !this.bufParams.isSingleSided()) return null;\r\n\t\tif (distance === 0.0) return null;\r\n\t\tvar posDistance = Math.abs(distance);\r\n\t\tvar segGen = this.getSegGen(posDistance);\r\n\t\tif (inputPts.length <= 1) {\r\n\t\t\tthis.computePointCurve(inputPts[0], segGen);\r\n\t\t} else {\r\n\t\t\tif (this.bufParams.isSingleSided()) {\r\n\t\t\t\tvar isRightSide = distance < 0.0;\r\n\t\t\t\tthis.computeSingleSidedBufferCurve(inputPts, isRightSide, segGen);\r\n\t\t\t} else this.computeLineBufferCurve(inputPts, segGen);\r\n\t\t}\r\n\t\tvar lineCoord = segGen.getCoordinates();\r\n\t\treturn lineCoord;\r\n\t},\r\n\tgetBufferParameters: function () {\r\n\t\treturn this.bufParams;\r\n\t},\r\n\tsimplifyTolerance: function (bufDistance) {\r\n\t\treturn bufDistance * this.bufParams.getSimplifyFactor();\r\n\t},\r\n\tgetRingCurve: function (inputPts, side, distance) {\r\n\t\tthis.distance = distance;\r\n\t\tif (inputPts.length <= 2) return this.getLineCurve(inputPts, distance);\r\n\t\tif (distance === 0.0) {\r\n\t\t\treturn OffsetCurveBuilder.copyCoordinates(inputPts);\r\n\t\t}\r\n\t\tvar segGen = this.getSegGen(distance);\r\n\t\tthis.computeRingBufferCurve(inputPts, side, segGen);\r\n\t\treturn segGen.getCoordinates();\r\n\t},\r\n\tcomputeOffsetCurve: function (inputPts, isRightSide, segGen) {\r\n\t\tvar distTol = this.simplifyTolerance(this.distance);\r\n\t\tif (isRightSide) {\r\n\t\t\tvar simp2 = BufferInputLineSimplifier.simplify(inputPts, -distTol);\r\n\t\t\tvar n2 = simp2.length - 1;\r\n\t\t\tsegGen.initSideSegments(simp2[n2], simp2[n2 - 1], Position.LEFT);\r\n\t\t\tsegGen.addFirstSegment();\r\n\t\t\tfor (var i = n2 - 2; i >= 0; i--) {\r\n\t\t\t\tsegGen.addNextSegment(simp2[i], true);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar simp1 = BufferInputLineSimplifier.simplify(inputPts, distTol);\r\n\t\t\tvar n1 = simp1.length - 1;\r\n\t\t\tsegGen.initSideSegments(simp1[0], simp1[1], Position.LEFT);\r\n\t\t\tsegGen.addFirstSegment();\r\n\t\t\tfor (var i = 2; i <= n1; i++) {\r\n\t\t\t\tsegGen.addNextSegment(simp1[i], true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsegGen.addLastSegment();\r\n\t},\r\n\tgetSegGen: function (distance) {\r\n\t\treturn new OffsetSegmentGenerator(this.precisionModel, this.bufParams, distance);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn OffsetCurveBuilder;\r\n\t}\r\n});\r\nOffsetCurveBuilder.copyCoordinates = function (pts) {\r\n\tvar copy = new Array(pts.length).fill(null);\r\n\tfor (var i = 0; i < copy.length; i++) {\r\n\t\tcopy[i] = new Coordinate(pts[i]);\r\n\t}\r\n\treturn copy;\r\n};\r\n","import CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport Position from '../../geomgraph/Position';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport extend from '../../../../../extend';\r\nimport Collections from '../../../../../java/util/Collections';\r\nimport DirectedEdge from '../../geomgraph/DirectedEdge';\r\nimport LineSegment from '../../geom/LineSegment';\r\nimport Comparable from '../../../../../java/lang/Comparable';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport List from '../../../../../java/util/List';\r\nexport default function SubgraphDepthLocater() {\r\n\tthis.subgraphs = null;\r\n\tthis.seg = new LineSegment();\r\n\tthis.cga = new CGAlgorithms();\r\n\tlet subgraphs = arguments[0];\r\n\tthis.subgraphs = subgraphs;\r\n}\r\nextend(SubgraphDepthLocater.prototype, {\r\n\tfindStabbedSegments: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet stabbingRayLeftPt = arguments[0];\r\n\t\t\tvar stabbedSegments = new ArrayList();\r\n\t\t\tfor (var i = this.subgraphs.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar bsg = i.next();\r\n\t\t\t\tvar env = bsg.getEnvelope();\r\n\t\t\t\tif (stabbingRayLeftPt.y < env.getMinY() || stabbingRayLeftPt.y > env.getMaxY()) continue;\r\n\t\t\t\tthis.findStabbedSegments(stabbingRayLeftPt, bsg.getDirectedEdges(), stabbedSegments);\r\n\t\t\t}\r\n\t\t\treturn stabbedSegments;\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tif (hasInterface(arguments[2], List) && (arguments[0] instanceof Coordinate && arguments[1] instanceof DirectedEdge)) {\r\n\t\t\t\tlet stabbingRayLeftPt = arguments[0], dirEdge = arguments[1], stabbedSegments = arguments[2];\r\n\t\t\t\tvar pts = dirEdge.getEdge().getCoordinates();\r\n\t\t\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\t\t\tthis.seg.p0 = pts[i];\r\n\t\t\t\t\tthis.seg.p1 = pts[i + 1];\r\n\t\t\t\t\tif (this.seg.p0.y > this.seg.p1.y) this.seg.reverse();\r\n\t\t\t\t\tvar maxx = Math.max(this.seg.p0.x, this.seg.p1.x);\r\n\t\t\t\t\tif (maxx < stabbingRayLeftPt.x) continue;\r\n\t\t\t\t\tif (this.seg.isHorizontal()) continue;\r\n\t\t\t\t\tif (stabbingRayLeftPt.y < this.seg.p0.y || stabbingRayLeftPt.y > this.seg.p1.y) continue;\r\n\t\t\t\t\tif (CGAlgorithms.computeOrientation(this.seg.p0, this.seg.p1, stabbingRayLeftPt) === CGAlgorithms.RIGHT) continue;\r\n\t\t\t\t\tvar depth = dirEdge.getDepth(Position.LEFT);\r\n\t\t\t\t\tif (!this.seg.p0.equals(pts[i])) depth = dirEdge.getDepth(Position.RIGHT);\r\n\t\t\t\t\tvar ds = new DepthSegment(this.seg, depth);\r\n\t\t\t\t\tstabbedSegments.add(ds);\r\n\t\t\t\t}\r\n\t\t\t} else if (hasInterface(arguments[2], List) && (arguments[0] instanceof Coordinate && hasInterface(arguments[1], List))) {\r\n\t\t\t\tlet stabbingRayLeftPt = arguments[0], dirEdges = arguments[1], stabbedSegments = arguments[2];\r\n\t\t\t\tfor (var i = dirEdges.iterator(); i.hasNext(); ) {\r\n\t\t\t\t\tvar de = i.next();\r\n\t\t\t\t\tif (!de.isForward()) continue;\r\n\t\t\t\t\tthis.findStabbedSegments(stabbingRayLeftPt, de, stabbedSegments);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetDepth: function (p) {\r\n\t\tvar stabbedSegments = this.findStabbedSegments(p);\r\n\t\tif (stabbedSegments.size() === 0) return 0;\r\n\t\tvar ds = Collections.min(stabbedSegments);\r\n\t\treturn ds.leftDepth;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SubgraphDepthLocater;\r\n\t}\r\n});\r\nfunction DepthSegment() {\r\n\tthis.upwardSeg = null;\r\n\tthis.leftDepth = null;\r\n\tlet seg = arguments[0], depth = arguments[1];\r\n\tthis.upwardSeg = new LineSegment(seg);\r\n\tthis.leftDepth = depth;\r\n}\r\nextend(DepthSegment.prototype, {\r\n\tcompareTo: function (obj) {\r\n\t\tvar other = obj;\r\n\t\tif (this.upwardSeg.minX() >= other.upwardSeg.maxX()) return 1;\r\n\t\tif (this.upwardSeg.maxX() <= other.upwardSeg.minX()) return -1;\r\n\t\tvar orientIndex = this.upwardSeg.orientationIndex(other.upwardSeg);\r\n\t\tif (orientIndex !== 0) return orientIndex;\r\n\t\torientIndex = -1 * other.upwardSeg.orientationIndex(this.upwardSeg);\r\n\t\tif (orientIndex !== 0) return orientIndex;\r\n\t\treturn this.upwardSeg.compareTo(other.upwardSeg);\r\n\t},\r\n\tcompareX: function (seg0, seg1) {\r\n\t\tvar compare0 = seg0.p0.compareTo(seg1.p0);\r\n\t\tif (compare0 !== 0) return compare0;\r\n\t\treturn seg0.p1.compareTo(seg1.p1);\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn this.upwardSeg.toString();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DepthSegment;\r\n\t}\r\n});\r\nSubgraphDepthLocater.DepthSegment = DepthSegment;\r\n","import Location from '../../geom/Location';\r\nimport LineString from '../../geom/LineString';\r\nimport CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport Position from '../../geomgraph/Position';\r\nimport Point from '../../geom/Point';\r\nimport NodedSegmentString from '../../noding/NodedSegmentString';\r\nimport Polygon from '../../geom/Polygon';\r\nimport MultiPoint from '../../geom/MultiPoint';\r\nimport LinearRing from '../../geom/LinearRing';\r\nimport extend from '../../../../../extend';\r\nimport MultiPolygon from '../../geom/MultiPolygon';\r\nimport Label from '../../geomgraph/Label';\r\nimport GeometryCollection from '../../geom/GeometryCollection';\r\nimport CoordinateArrays from '../../geom/CoordinateArrays';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport MultiLineString from '../../geom/MultiLineString';\r\nimport Triangle from '../../geom/Triangle';\r\nexport default function OffsetCurveSetBuilder() {\r\n\tthis.inputGeom = null;\r\n\tthis.distance = null;\r\n\tthis.curveBuilder = null;\r\n\tthis.curveList = new ArrayList();\r\n\tlet inputGeom = arguments[0], distance = arguments[1], curveBuilder = arguments[2];\r\n\tthis.inputGeom = inputGeom;\r\n\tthis.distance = distance;\r\n\tthis.curveBuilder = curveBuilder;\r\n}\r\nextend(OffsetCurveSetBuilder.prototype, {\r\n\taddPoint: function (p) {\r\n\t\tif (this.distance <= 0.0) return null;\r\n\t\tvar coord = p.getCoordinates();\r\n\t\tvar curve = this.curveBuilder.getLineCurve(coord, this.distance);\r\n\t\tthis.addCurve(curve, Location.EXTERIOR, Location.INTERIOR);\r\n\t},\r\n\taddPolygon: function (p) {\r\n\t\tvar offsetDistance = this.distance;\r\n\t\tvar offsetSide = Position.LEFT;\r\n\t\tif (this.distance < 0.0) {\r\n\t\t\toffsetDistance = -this.distance;\r\n\t\t\toffsetSide = Position.RIGHT;\r\n\t\t}\r\n\t\tvar shell = p.getExteriorRing();\r\n\t\tvar shellCoord = CoordinateArrays.removeRepeatedPoints(shell.getCoordinates());\r\n\t\tif (this.distance < 0.0 && this.isErodedCompletely(shell, this.distance)) return null;\r\n\t\tif (this.distance <= 0.0 && shellCoord.length < 3) return null;\r\n\t\tthis.addPolygonRing(shellCoord, offsetDistance, offsetSide, Location.EXTERIOR, Location.INTERIOR);\r\n\t\tfor (var i = 0; i < p.getNumInteriorRing(); i++) {\r\n\t\t\tvar hole = p.getInteriorRingN(i);\r\n\t\t\tvar holeCoord = CoordinateArrays.removeRepeatedPoints(hole.getCoordinates());\r\n\t\t\tif (this.distance > 0.0 && this.isErodedCompletely(hole, -this.distance)) continue;\r\n\t\t\tthis.addPolygonRing(holeCoord, offsetDistance, Position.opposite(offsetSide), Location.INTERIOR, Location.EXTERIOR);\r\n\t\t}\r\n\t},\r\n\tisTriangleErodedCompletely: function (triangleCoord, bufferDistance) {\r\n\t\tvar tri = new Triangle(triangleCoord[0], triangleCoord[1], triangleCoord[2]);\r\n\t\tvar inCentre = tri.inCentre();\r\n\t\tvar distToCentre = CGAlgorithms.distancePointLine(inCentre, tri.p0, tri.p1);\r\n\t\treturn distToCentre < Math.abs(bufferDistance);\r\n\t},\r\n\taddLineString: function (line) {\r\n\t\tif (this.distance <= 0.0 && !this.curveBuilder.getBufferParameters().isSingleSided()) return null;\r\n\t\tvar coord = CoordinateArrays.removeRepeatedPoints(line.getCoordinates());\r\n\t\tvar curve = this.curveBuilder.getLineCurve(coord, this.distance);\r\n\t\tthis.addCurve(curve, Location.EXTERIOR, Location.INTERIOR);\r\n\t},\r\n\taddCurve: function (coord, leftLoc, rightLoc) {\r\n\t\tif (coord === null || coord.length < 2) return null;\r\n\t\tvar e = new NodedSegmentString(coord, new Label(0, Location.BOUNDARY, leftLoc, rightLoc));\r\n\t\tthis.curveList.add(e);\r\n\t},\r\n\tgetCurves: function () {\r\n\t\tthis.add(this.inputGeom);\r\n\t\treturn this.curveList;\r\n\t},\r\n\taddPolygonRing: function (coord, offsetDistance, side, cwLeftLoc, cwRightLoc) {\r\n\t\tif (offsetDistance === 0.0 && coord.length < LinearRing.MINIMUM_VALID_SIZE) return null;\r\n\t\tvar leftLoc = cwLeftLoc;\r\n\t\tvar rightLoc = cwRightLoc;\r\n\t\tif (coord.length >= LinearRing.MINIMUM_VALID_SIZE && CGAlgorithms.isCCW(coord)) {\r\n\t\t\tleftLoc = cwRightLoc;\r\n\t\t\trightLoc = cwLeftLoc;\r\n\t\t\tside = Position.opposite(side);\r\n\t\t}\r\n\t\tvar curve = this.curveBuilder.getRingCurve(coord, side, offsetDistance);\r\n\t\tthis.addCurve(curve, leftLoc, rightLoc);\r\n\t},\r\n\tadd: function (g) {\r\n\t\tif (g.isEmpty()) return null;\r\n\t\tif (g instanceof Polygon) this.addPolygon(g); else if (g instanceof LineString) this.addLineString(g); else if (g instanceof Point) this.addPoint(g); else if (g instanceof MultiPoint) this.addCollection(g); else if (g instanceof MultiLineString) this.addCollection(g); else if (g instanceof MultiPolygon) this.addCollection(g); else if (g instanceof GeometryCollection) this.addCollection(g); else throw new UnsupportedOperationException(g.getClass().getName());\r\n\t},\r\n\tisErodedCompletely: function (ring, bufferDistance) {\r\n\t\tvar ringCoord = ring.getCoordinates();\r\n\t\tvar minDiam = 0.0;\r\n\t\tif (ringCoord.length < 4) return bufferDistance < 0;\r\n\t\tif (ringCoord.length === 4) return this.isTriangleErodedCompletely(ringCoord, bufferDistance);\r\n\t\tvar env = ring.getEnvelopeInternal();\r\n\t\tvar envMinDimension = Math.min(env.getHeight(), env.getWidth());\r\n\t\tif (bufferDistance < 0.0 && 2 * Math.abs(bufferDistance) > envMinDimension) return true;\r\n\t\treturn false;\r\n\t},\r\n\taddCollection: function (gc) {\r\n\t\tfor (var i = 0; i < gc.getNumGeometries(); i++) {\r\n\t\t\tvar g = gc.getGeometryN(i);\r\n\t\t\tthis.add(g);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn OffsetCurveSetBuilder;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport SegmentIntersector from './SegmentIntersector';\r\nexport default function IntersectionAdder() {\r\n\tthis._hasIntersection = false;\r\n\tthis.hasProper = false;\r\n\tthis.hasProperInterior = false;\r\n\tthis.hasInterior = false;\r\n\tthis.properIntersectionPoint = null;\r\n\tthis.li = null;\r\n\tthis.isSelfIntersection = null;\r\n\tthis.numIntersections = 0;\r\n\tthis.numInteriorIntersections = 0;\r\n\tthis.numProperIntersections = 0;\r\n\tthis.numTests = 0;\r\n\tlet li = arguments[0];\r\n\tthis.li = li;\r\n}\r\nextend(IntersectionAdder.prototype, {\r\n\tisTrivialIntersection: function (e0, segIndex0, e1, segIndex1) {\r\n\t\tif (e0 === e1) {\r\n\t\t\tif (this.li.getIntersectionNum() === 1) {\r\n\t\t\t\tif (IntersectionAdder.isAdjacentSegments(segIndex0, segIndex1)) return true;\r\n\t\t\t\tif (e0.isClosed()) {\r\n\t\t\t\t\tvar maxSegIndex = e0.size() - 1;\r\n\t\t\t\t\tif (segIndex0 === 0 && segIndex1 === maxSegIndex || segIndex1 === 0 && segIndex0 === maxSegIndex) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tgetProperIntersectionPoint: function () {\r\n\t\treturn this.properIntersectionPoint;\r\n\t},\r\n\thasProperInteriorIntersection: function () {\r\n\t\treturn this.hasProperInterior;\r\n\t},\r\n\tgetLineIntersector: function () {\r\n\t\treturn this.li;\r\n\t},\r\n\thasProperIntersection: function () {\r\n\t\treturn this.hasProper;\r\n\t},\r\n\tprocessIntersections: function (e0, segIndex0, e1, segIndex1) {\r\n\t\tif (e0 === e1 && segIndex0 === segIndex1) return null;\r\n\t\tthis.numTests++;\r\n\t\tvar p00 = e0.getCoordinates()[segIndex0];\r\n\t\tvar p01 = e0.getCoordinates()[segIndex0 + 1];\r\n\t\tvar p10 = e1.getCoordinates()[segIndex1];\r\n\t\tvar p11 = e1.getCoordinates()[segIndex1 + 1];\r\n\t\tthis.li.computeIntersection(p00, p01, p10, p11);\r\n\t\tif (this.li.hasIntersection()) {\r\n\t\t\tthis.numIntersections++;\r\n\t\t\tif (this.li.isInteriorIntersection()) {\r\n\t\t\t\tthis.numInteriorIntersections++;\r\n\t\t\t\tthis.hasInterior = true;\r\n\t\t\t}\r\n\t\t\tif (!this.isTrivialIntersection(e0, segIndex0, e1, segIndex1)) {\r\n\t\t\t\tthis._hasIntersection = true;\r\n\t\t\t\te0.addIntersections(this.li, segIndex0, 0);\r\n\t\t\t\te1.addIntersections(this.li, segIndex1, 1);\r\n\t\t\t\tif (this.li.isProper()) {\r\n\t\t\t\t\tthis.numProperIntersections++;\r\n\t\t\t\t\tthis.hasProper = true;\r\n\t\t\t\t\tthis.hasProperInterior = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\thasIntersection: function () {\r\n\t\treturn this._hasIntersection;\r\n\t},\r\n\tisDone: function () {\r\n\t\treturn false;\r\n\t},\r\n\thasInteriorIntersection: function () {\r\n\t\treturn this.hasInterior;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [SegmentIntersector];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IntersectionAdder;\r\n\t}\r\n});\r\nIntersectionAdder.isAdjacentSegments = function (i1, i2) {\r\n\treturn Math.abs(i1 - i2) === 1;\r\n};\r\n","import Location from '../../geom/Location';\r\nimport BufferSubgraph from './BufferSubgraph';\r\nimport PolygonBuilder from '../overlay/PolygonBuilder';\r\nimport GeometryFactory from '../../geom/GeometryFactory';\r\nimport Position from '../../geomgraph/Position';\r\nimport MCIndexNoder from '../../noding/MCIndexNoder';\r\nimport OffsetCurveBuilder from './OffsetCurveBuilder';\r\nimport extend from '../../../../../extend';\r\nimport Collections from '../../../../../java/util/Collections';\r\nimport SubgraphDepthLocater from './SubgraphDepthLocater';\r\nimport OffsetCurveSetBuilder from './OffsetCurveSetBuilder';\r\nimport Label from '../../geomgraph/Label';\r\nimport OverlayNodeFactory from '../overlay/OverlayNodeFactory';\r\nimport EdgeList from '../../geomgraph/EdgeList';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport RobustLineIntersector from '../../algorithm/RobustLineIntersector';\r\nimport IntersectionAdder from '../../noding/IntersectionAdder';\r\nimport Edge from '../../geomgraph/Edge';\r\nimport PlanarGraph from '../../geomgraph/PlanarGraph';\r\nexport default function BufferBuilder() {\r\n\tthis.bufParams = null;\r\n\tthis.workingPrecisionModel = null;\r\n\tthis.workingNoder = null;\r\n\tthis.geomFact = null;\r\n\tthis.graph = null;\r\n\tthis.edgeList = new EdgeList();\r\n\tlet bufParams = arguments[0];\r\n\tthis.bufParams = bufParams;\r\n}\r\nextend(BufferBuilder.prototype, {\r\n\tsetWorkingPrecisionModel: function (pm) {\r\n\t\tthis.workingPrecisionModel = pm;\r\n\t},\r\n\tinsertUniqueEdge: function (e) {\r\n\t\tvar existingEdge = this.edgeList.findEqualEdge(e);\r\n\t\tif (existingEdge !== null) {\r\n\t\t\tvar existingLabel = existingEdge.getLabel();\r\n\t\t\tvar labelToMerge = e.getLabel();\r\n\t\t\tif (!existingEdge.isPointwiseEqual(e)) {\r\n\t\t\t\tlabelToMerge = new Label(e.getLabel());\r\n\t\t\t\tlabelToMerge.flip();\r\n\t\t\t}\r\n\t\t\texistingLabel.merge(labelToMerge);\r\n\t\t\tvar mergeDelta = BufferBuilder.depthDelta(labelToMerge);\r\n\t\t\tvar existingDelta = existingEdge.getDepthDelta();\r\n\t\t\tvar newDelta = existingDelta + mergeDelta;\r\n\t\t\texistingEdge.setDepthDelta(newDelta);\r\n\t\t} else {\r\n\t\t\tthis.edgeList.add(e);\r\n\t\t\te.setDepthDelta(BufferBuilder.depthDelta(e.getLabel()));\r\n\t\t}\r\n\t},\r\n\tbuildSubgraphs: function (subgraphList, polyBuilder) {\r\n\t\tvar processedGraphs = new ArrayList();\r\n\t\tfor (var i = subgraphList.iterator(); i.hasNext(); ) {\r\n\t\t\tvar subgraph = i.next();\r\n\t\t\tvar p = subgraph.getRightmostCoordinate();\r\n\t\t\tvar locater = new SubgraphDepthLocater(processedGraphs);\r\n\t\t\tvar outsideDepth = locater.getDepth(p);\r\n\t\t\tsubgraph.computeDepth(outsideDepth);\r\n\t\t\tsubgraph.findResultEdges();\r\n\t\t\tprocessedGraphs.add(subgraph);\r\n\t\t\tpolyBuilder.add(subgraph.getDirectedEdges(), subgraph.getNodes());\r\n\t\t}\r\n\t},\r\n\tcreateSubgraphs: function (graph) {\r\n\t\tvar subgraphList = new ArrayList();\r\n\t\tfor (var i = graph.getNodes().iterator(); i.hasNext(); ) {\r\n\t\t\tvar node = i.next();\r\n\t\t\tif (!node.isVisited()) {\r\n\t\t\t\tvar subgraph = new BufferSubgraph();\r\n\t\t\t\tsubgraph.create(node);\r\n\t\t\t\tsubgraphList.add(subgraph);\r\n\t\t\t}\r\n\t\t}\r\n\t\tCollections.sort(subgraphList, Collections.reverseOrder());\r\n\t\treturn subgraphList;\r\n\t},\r\n\tcreateEmptyResultGeometry: function () {\r\n\t\tvar emptyGeom = this.geomFact.createPolygon();\r\n\t\treturn emptyGeom;\r\n\t},\r\n\tgetNoder: function (precisionModel) {\r\n\t\tif (this.workingNoder !== null) return this.workingNoder;\r\n\t\tvar noder = new MCIndexNoder();\r\n\t\tvar li = new RobustLineIntersector();\r\n\t\tli.setPrecisionModel(precisionModel);\r\n\t\tnoder.setSegmentIntersector(new IntersectionAdder(li));\r\n\t\treturn noder;\r\n\t},\r\n\tbuffer: function (g, distance) {\r\n\t\tvar precisionModel = this.workingPrecisionModel;\r\n\t\tif (precisionModel === null) precisionModel = g.getPrecisionModel();\r\n\t\tthis.geomFact = g.getFactory();\r\n\t\tvar curveBuilder = new OffsetCurveBuilder(precisionModel, this.bufParams);\r\n\t\tvar curveSetBuilder = new OffsetCurveSetBuilder(g, distance, curveBuilder);\r\n\t\tvar bufferSegStrList = curveSetBuilder.getCurves();\r\n\t\tif (bufferSegStrList.size() <= 0) {\r\n\t\t\treturn this.createEmptyResultGeometry();\r\n\t\t}\r\n\t\tthis.computeNodedEdges(bufferSegStrList, precisionModel);\r\n\t\tthis.graph = new PlanarGraph(new OverlayNodeFactory());\r\n\t\tthis.graph.addEdges(this.edgeList.getEdges());\r\n\t\tvar subgraphList = this.createSubgraphs(this.graph);\r\n\t\tvar polyBuilder = new PolygonBuilder(this.geomFact);\r\n\t\tthis.buildSubgraphs(subgraphList, polyBuilder);\r\n\t\tvar resultPolyList = polyBuilder.getPolygons();\r\n\t\tif (resultPolyList.size() <= 0) {\r\n\t\t\treturn this.createEmptyResultGeometry();\r\n\t\t}\r\n\t\tvar resultGeom = this.geomFact.buildGeometry(resultPolyList);\r\n\t\treturn resultGeom;\r\n\t},\r\n\tcomputeNodedEdges: function (bufferSegStrList, precisionModel) {\r\n\t\tvar noder = this.getNoder(precisionModel);\r\n\t\tnoder.computeNodes(bufferSegStrList);\r\n\t\tvar nodedSegStrings = noder.getNodedSubstrings();\r\n\t\tfor (var i = nodedSegStrings.iterator(); i.hasNext(); ) {\r\n\t\t\tvar segStr = i.next();\r\n\t\t\tvar pts = segStr.getCoordinates();\r\n\t\t\tif (pts.length === 2 && pts[0].equals2D(pts[1])) continue;\r\n\t\t\tvar oldLabel = segStr.getData();\r\n\t\t\tvar edge = new Edge(segStr.getCoordinates(), new Label(oldLabel));\r\n\t\t\tthis.insertUniqueEdge(edge);\r\n\t\t}\r\n\t},\r\n\tsetNoder: function (noder) {\r\n\t\tthis.workingNoder = noder;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BufferBuilder;\r\n\t}\r\n});\r\nBufferBuilder.depthDelta = function (label) {\r\n\tvar lLoc = label.getLocation(0, Position.LEFT);\r\n\tvar rLoc = label.getLocation(0, Position.RIGHT);\r\n\tif (lLoc === Location.INTERIOR && rLoc === Location.EXTERIOR) return 1; else if (lLoc === Location.EXTERIOR && rLoc === Location.INTERIOR) return -1;\r\n\treturn 0;\r\n};\r\nBufferBuilder.convertSegStrings = function (it) {\r\n\tvar fact = new GeometryFactory();\r\n\tvar lines = new ArrayList();\r\n\twhile (it.hasNext()) {\r\n\t\tvar ss = it.next();\r\n\t\tvar line = fact.createLineString(ss.getCoordinates());\r\n\t\tlines.add(line);\r\n\t}\r\n\treturn fact.buildGeometry(lines);\r\n};\r\n","import GeometryFactory from '../geom/GeometryFactory';\r\nimport extend from '../../../../extend';\r\nimport RobustLineIntersector from '../algorithm/RobustLineIntersector';\r\nimport RuntimeException from '../../../../java/lang/RuntimeException';\r\nexport default function NodingValidator() {\r\n\tthis.li = new RobustLineIntersector();\r\n\tthis.segStrings = null;\r\n\tlet segStrings = arguments[0];\r\n\tthis.segStrings = segStrings;\r\n}\r\nextend(NodingValidator.prototype, {\r\n\tcheckEndPtVertexIntersections: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tfor (var i = this.segStrings.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar ss = i.next();\r\n\t\t\t\tvar pts = ss.getCoordinates();\r\n\t\t\t\tthis.checkEndPtVertexIntersections(pts[0], this.segStrings);\r\n\t\t\t\tthis.checkEndPtVertexIntersections(pts[pts.length - 1], this.segStrings);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet testPt = arguments[0], segStrings = arguments[1];\r\n\t\t\tfor (var i = segStrings.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar ss = i.next();\r\n\t\t\t\tvar pts = ss.getCoordinates();\r\n\t\t\t\tfor (var j = 1; j < pts.length - 1; j++) {\r\n\t\t\t\t\tif (pts[j].equals(testPt)) throw new RuntimeException(\"found endpt/interior pt intersection at index \" + j + \" :pt \" + testPt);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcheckInteriorIntersections: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tfor (var i = this.segStrings.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar ss0 = i.next();\r\n\t\t\t\tfor (var j = this.segStrings.iterator(); j.hasNext(); ) {\r\n\t\t\t\t\tvar ss1 = j.next();\r\n\t\t\t\t\tthis.checkInteriorIntersections(ss0, ss1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet ss0 = arguments[0], ss1 = arguments[1];\r\n\t\t\tvar pts0 = ss0.getCoordinates();\r\n\t\t\tvar pts1 = ss1.getCoordinates();\r\n\t\t\tfor (var i0 = 0; i0 < pts0.length - 1; i0++) {\r\n\t\t\t\tfor (var i1 = 0; i1 < pts1.length - 1; i1++) {\r\n\t\t\t\t\tthis.checkInteriorIntersections(ss0, i0, ss1, i1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 4) {\r\n\t\t\tlet e0 = arguments[0], segIndex0 = arguments[1], e1 = arguments[2], segIndex1 = arguments[3];\r\n\t\t\tif (e0 === e1 && segIndex0 === segIndex1) return null;\r\n\t\t\tvar p00 = e0.getCoordinates()[segIndex0];\r\n\t\t\tvar p01 = e0.getCoordinates()[segIndex0 + 1];\r\n\t\t\tvar p10 = e1.getCoordinates()[segIndex1];\r\n\t\t\tvar p11 = e1.getCoordinates()[segIndex1 + 1];\r\n\t\t\tthis.li.computeIntersection(p00, p01, p10, p11);\r\n\t\t\tif (this.li.hasIntersection()) {\r\n\t\t\t\tif (this.li.isProper() || this.hasInteriorIntersection(this.li, p00, p01) || this.hasInteriorIntersection(this.li, p10, p11)) {\r\n\t\t\t\t\tthrow new RuntimeException(\"found non-noded intersection at \" + p00 + \"-\" + p01 + \" and \" + p10 + \"-\" + p11);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcheckValid: function () {\r\n\t\tthis.checkEndPtVertexIntersections();\r\n\t\tthis.checkInteriorIntersections();\r\n\t\tthis.checkCollapses();\r\n\t},\r\n\tcheckCollapses: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tfor (var i = this.segStrings.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar ss = i.next();\r\n\t\t\t\tthis.checkCollapses(ss);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet ss = arguments[0];\r\n\t\t\tvar pts = ss.getCoordinates();\r\n\t\t\tfor (var i = 0; i < pts.length - 2; i++) {\r\n\t\t\t\tthis.checkCollapse(pts[i], pts[i + 1], pts[i + 2]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\thasInteriorIntersection: function (li, p0, p1) {\r\n\t\tfor (var i = 0; i < li.getIntersectionNum(); i++) {\r\n\t\t\tvar intPt = li.getIntersection(i);\r\n\t\t\tif (!(intPt.equals(p0) || intPt.equals(p1))) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tcheckCollapse: function (p0, p1, p2) {\r\n\t\tif (p0.equals(p2)) throw new RuntimeException(\"found non-noded collapse at \" + NodingValidator.fact.createLineString([p0, p1, p2]));\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodingValidator;\r\n\t}\r\n});\r\nNodingValidator.fact = new GeometryFactory();\r\n","import Coordinate from '../../geom/Coordinate';\r\nimport IllegalArgumentException from '../../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../../extend';\r\nimport Envelope from '../../geom/Envelope';\r\nimport Assert from '../../util/Assert';\r\nexport default function HotPixel() {\r\n\tthis.li = null;\r\n\tthis.pt = null;\r\n\tthis.originalPt = null;\r\n\tthis.ptScaled = null;\r\n\tthis.p0Scaled = null;\r\n\tthis.p1Scaled = null;\r\n\tthis.scaleFactor = null;\r\n\tthis.minx = null;\r\n\tthis.maxx = null;\r\n\tthis.miny = null;\r\n\tthis.maxy = null;\r\n\tthis.corner = new Array(4).fill(null);\r\n\tthis.safeEnv = null;\r\n\tlet pt = arguments[0], scaleFactor = arguments[1], li = arguments[2];\r\n\tthis.originalPt = pt;\r\n\tthis.pt = pt;\r\n\tthis.scaleFactor = scaleFactor;\r\n\tthis.li = li;\r\n\tif (scaleFactor <= 0) throw new IllegalArgumentException(\"Scale factor must be non-zero\");\r\n\tif (scaleFactor !== 1.0) {\r\n\t\tthis.pt = new Coordinate(this.scale(pt.x), this.scale(pt.y));\r\n\t\tthis.p0Scaled = new Coordinate();\r\n\t\tthis.p1Scaled = new Coordinate();\r\n\t}\r\n\tthis.initCorners(this.pt);\r\n}\r\nextend(HotPixel.prototype, {\r\n\tintersectsScaled: function (p0, p1) {\r\n\t\tvar segMinx = Math.min(p0.x, p1.x);\r\n\t\tvar segMaxx = Math.max(p0.x, p1.x);\r\n\t\tvar segMiny = Math.min(p0.y, p1.y);\r\n\t\tvar segMaxy = Math.max(p0.y, p1.y);\r\n\t\tvar isOutsidePixelEnv = this.maxx < segMinx || this.minx > segMaxx || this.maxy < segMiny || this.miny > segMaxy;\r\n\t\tif (isOutsidePixelEnv) return false;\r\n\t\tvar intersects = this.intersectsToleranceSquare(p0, p1);\r\n\t\tAssert.isTrue(!(isOutsidePixelEnv && intersects), \"Found bad envelope test\");\r\n\t\treturn intersects;\r\n\t},\r\n\tinitCorners: function (pt) {\r\n\t\tvar tolerance = 0.5;\r\n\t\tthis.minx = pt.x - tolerance;\r\n\t\tthis.maxx = pt.x + tolerance;\r\n\t\tthis.miny = pt.y - tolerance;\r\n\t\tthis.maxy = pt.y + tolerance;\r\n\t\tthis.corner[0] = new Coordinate(this.maxx, this.maxy);\r\n\t\tthis.corner[1] = new Coordinate(this.minx, this.maxy);\r\n\t\tthis.corner[2] = new Coordinate(this.minx, this.miny);\r\n\t\tthis.corner[3] = new Coordinate(this.maxx, this.miny);\r\n\t},\r\n\tintersects: function (p0, p1) {\r\n\t\tif (this.scaleFactor === 1.0) return this.intersectsScaled(p0, p1);\r\n\t\tthis.copyScaled(p0, this.p0Scaled);\r\n\t\tthis.copyScaled(p1, this.p1Scaled);\r\n\t\treturn this.intersectsScaled(this.p0Scaled, this.p1Scaled);\r\n\t},\r\n\tscale: function (val) {\r\n\t\treturn Math.round(val * this.scaleFactor);\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.originalPt;\r\n\t},\r\n\tcopyScaled: function (p, pScaled) {\r\n\t\tpScaled.x = this.scale(p.x);\r\n\t\tpScaled.y = this.scale(p.y);\r\n\t},\r\n\tgetSafeEnvelope: function () {\r\n\t\tif (this.safeEnv === null) {\r\n\t\t\tvar safeTolerance = HotPixel.SAFE_ENV_EXPANSION_FACTOR / this.scaleFactor;\r\n\t\t\tthis.safeEnv = new Envelope(this.originalPt.x - safeTolerance, this.originalPt.x + safeTolerance, this.originalPt.y - safeTolerance, this.originalPt.y + safeTolerance);\r\n\t\t}\r\n\t\treturn this.safeEnv;\r\n\t},\r\n\tintersectsPixelClosure: function (p0, p1) {\r\n\t\tthis.li.computeIntersection(p0, p1, this.corner[0], this.corner[1]);\r\n\t\tif (this.li.hasIntersection()) return true;\r\n\t\tthis.li.computeIntersection(p0, p1, this.corner[1], this.corner[2]);\r\n\t\tif (this.li.hasIntersection()) return true;\r\n\t\tthis.li.computeIntersection(p0, p1, this.corner[2], this.corner[3]);\r\n\t\tif (this.li.hasIntersection()) return true;\r\n\t\tthis.li.computeIntersection(p0, p1, this.corner[3], this.corner[0]);\r\n\t\tif (this.li.hasIntersection()) return true;\r\n\t\treturn false;\r\n\t},\r\n\tintersectsToleranceSquare: function (p0, p1) {\r\n\t\tvar intersectsLeft = false;\r\n\t\tvar intersectsBottom = false;\r\n\t\tthis.li.computeIntersection(p0, p1, this.corner[0], this.corner[1]);\r\n\t\tif (this.li.isProper()) return true;\r\n\t\tthis.li.computeIntersection(p0, p1, this.corner[1], this.corner[2]);\r\n\t\tif (this.li.isProper()) return true;\r\n\t\tif (this.li.hasIntersection()) intersectsLeft = true;\r\n\t\tthis.li.computeIntersection(p0, p1, this.corner[2], this.corner[3]);\r\n\t\tif (this.li.isProper()) return true;\r\n\t\tif (this.li.hasIntersection()) intersectsBottom = true;\r\n\t\tthis.li.computeIntersection(p0, p1, this.corner[3], this.corner[0]);\r\n\t\tif (this.li.isProper()) return true;\r\n\t\tif (intersectsLeft && intersectsBottom) return true;\r\n\t\tif (p0.equals(this.pt)) return true;\r\n\t\tif (p1.equals(this.pt)) return true;\r\n\t\treturn false;\r\n\t},\r\n\taddSnappedNode: function (segStr, segIndex) {\r\n\t\tvar p0 = segStr.getCoordinate(segIndex);\r\n\t\tvar p1 = segStr.getCoordinate(segIndex + 1);\r\n\t\tif (this.intersects(p0, p1)) {\r\n\t\t\tsegStr.addIntersection(this.getCoordinate(), segIndex);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn HotPixel;\r\n\t}\r\n});\r\nHotPixel.SAFE_ENV_EXPANSION_FACTOR = 0.75;\r\n","import MonotoneChainSelectAction from '../../index/chain/MonotoneChainSelectAction';\r\nimport ItemVisitor from '../../index/ItemVisitor';\r\nimport extend from '../../../../../extend';\r\nimport inherits from '../../../../../inherits';\r\nexport default function MCIndexPointSnapper() {\r\n\tthis.index = null;\r\n\tlet index = arguments[0];\r\n\tthis.index = index;\r\n}\r\nextend(MCIndexPointSnapper.prototype, {\r\n\tsnap: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet hotPixel = arguments[0];\r\n\t\t\treturn this.snap(hotPixel, null, -1);\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet hotPixel = arguments[0], parentEdge = arguments[1], hotPixelVertexIndex = arguments[2];\r\n\t\t\tvar pixelEnv = hotPixel.getSafeEnvelope();\r\n\t\t\tvar hotPixelSnapAction = new HotPixelSnapAction(hotPixel, parentEdge, hotPixelVertexIndex);\r\n\t\t\tthis.index.query(pixelEnv, {\r\n\t\t\t\tinterfaces_: function () {\r\n\t\t\t\t\treturn [ItemVisitor];\r\n\t\t\t\t},\r\n\t\t\t\tvisitItem: function (item) {\r\n\t\t\t\t\tvar testChain = item;\r\n\t\t\t\t\ttestChain.select(pixelEnv, hotPixelSnapAction);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn hotPixelSnapAction.isNodeAdded();\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MCIndexPointSnapper;\r\n\t}\r\n});\r\nfunction HotPixelSnapAction() {\r\n\tMonotoneChainSelectAction.apply(this);\r\n\tthis.hotPixel = null;\r\n\tthis.parentEdge = null;\r\n\tthis.hotPixelVertexIndex = null;\r\n\tthis._isNodeAdded = false;\r\n\tlet hotPixel = arguments[0], parentEdge = arguments[1], hotPixelVertexIndex = arguments[2];\r\n\tthis.hotPixel = hotPixel;\r\n\tthis.parentEdge = parentEdge;\r\n\tthis.hotPixelVertexIndex = hotPixelVertexIndex;\r\n}\r\ninherits(HotPixelSnapAction, MonotoneChainSelectAction);\r\nextend(HotPixelSnapAction.prototype, {\r\n\tisNodeAdded: function () {\r\n\t\treturn this._isNodeAdded;\r\n\t},\r\n\tselect: function () {\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tlet mc = arguments[0], startIndex = arguments[1];\r\n\t\t\tvar ss = mc.getContext();\r\n\t\t\tif (this.parentEdge !== null) {\r\n\t\t\t\tif (ss === this.parentEdge && startIndex === this.hotPixelVertexIndex) return null;\r\n\t\t\t}\r\n\t\t\tthis._isNodeAdded = this.hotPixel.addSnappedNode(ss, startIndex);\r\n\t\t} else return MonotoneChainSelectAction.prototype.select.apply(this, arguments);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn HotPixelSnapAction;\r\n\t}\r\n});\r\nMCIndexPointSnapper.HotPixelSnapAction = HotPixelSnapAction;\r\n","import extend from '../../../../extend';\r\nimport SegmentIntersector from './SegmentIntersector';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function InteriorIntersectionFinderAdder() {\r\n\tthis.li = null;\r\n\tthis.interiorIntersections = null;\r\n\tlet li = arguments[0];\r\n\tthis.li = li;\r\n\tthis.interiorIntersections = new ArrayList();\r\n}\r\nextend(InteriorIntersectionFinderAdder.prototype, {\r\n\tprocessIntersections: function (e0, segIndex0, e1, segIndex1) {\r\n\t\tif (e0 === e1 && segIndex0 === segIndex1) return null;\r\n\t\tvar p00 = e0.getCoordinates()[segIndex0];\r\n\t\tvar p01 = e0.getCoordinates()[segIndex0 + 1];\r\n\t\tvar p10 = e1.getCoordinates()[segIndex1];\r\n\t\tvar p11 = e1.getCoordinates()[segIndex1 + 1];\r\n\t\tthis.li.computeIntersection(p00, p01, p10, p11);\r\n\t\tif (this.li.hasIntersection()) {\r\n\t\t\tif (this.li.isInteriorIntersection()) {\r\n\t\t\t\tfor (var intIndex = 0; intIndex < this.li.getIntersectionNum(); intIndex++) {\r\n\t\t\t\t\tthis.interiorIntersections.add(this.li.getIntersection(intIndex));\r\n\t\t\t\t}\r\n\t\t\t\te0.addIntersections(this.li, segIndex0, 0);\r\n\t\t\t\te1.addIntersections(this.li, segIndex1, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisDone: function () {\r\n\t\treturn false;\r\n\t},\r\n\tgetInteriorIntersections: function () {\r\n\t\treturn this.interiorIntersections;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [SegmentIntersector];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn InteriorIntersectionFinderAdder;\r\n\t}\r\n});\r\n","import NodingValidator from '../NodingValidator';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport Collection from '../../../../../java/util/Collection';\r\nimport Noder from '../Noder';\r\nimport MCIndexNoder from '../MCIndexNoder';\r\nimport NodedSegmentString from '../NodedSegmentString';\r\nimport HotPixel from './HotPixel';\r\nimport extend from '../../../../../extend';\r\nimport Exception from '../../../../../java/lang/Exception';\r\nimport MCIndexPointSnapper from './MCIndexPointSnapper';\r\nimport RobustLineIntersector from '../../algorithm/RobustLineIntersector';\r\nimport InteriorIntersectionFinderAdder from '../InteriorIntersectionFinderAdder';\r\nexport default function MCIndexSnapRounder() {\r\n\tthis.pm = null;\r\n\tthis.li = null;\r\n\tthis.scaleFactor = null;\r\n\tthis.noder = null;\r\n\tthis.pointSnapper = null;\r\n\tthis.nodedSegStrings = null;\r\n\tlet pm = arguments[0];\r\n\tthis.pm = pm;\r\n\tthis.li = new RobustLineIntersector();\r\n\tthis.li.setPrecisionModel(pm);\r\n\tthis.scaleFactor = pm.getScale();\r\n}\r\nextend(MCIndexSnapRounder.prototype, {\r\n\tcheckCorrectness: function (inputSegmentStrings) {\r\n\t\tvar resultSegStrings = NodedSegmentString.getNodedSubstrings(inputSegmentStrings);\r\n\t\tvar nv = new NodingValidator(resultSegStrings);\r\n\t\ttry {\r\n\t\t\tnv.checkValid();\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex instanceof Exception) {\r\n\t\t\t\tex.printStackTrace();\r\n\t\t\t} else throw ex;\r\n\t\t} finally {}\r\n\t},\r\n\tgetNodedSubstrings: function () {\r\n\t\treturn NodedSegmentString.getNodedSubstrings(this.nodedSegStrings);\r\n\t},\r\n\tsnapRound: function (segStrings, li) {\r\n\t\tvar intersections = this.findInteriorIntersections(segStrings, li);\r\n\t\tthis.computeIntersectionSnaps(intersections);\r\n\t\tthis.computeVertexSnaps(segStrings);\r\n\t},\r\n\tfindInteriorIntersections: function (segStrings, li) {\r\n\t\tvar intFinderAdder = new InteriorIntersectionFinderAdder(li);\r\n\t\tthis.noder.setSegmentIntersector(intFinderAdder);\r\n\t\tthis.noder.computeNodes(segStrings);\r\n\t\treturn intFinderAdder.getInteriorIntersections();\r\n\t},\r\n\tcomputeVertexSnaps: function () {\r\n\t\tif (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet edges = arguments[0];\r\n\t\t\tfor (var i0 = edges.iterator(); i0.hasNext(); ) {\r\n\t\t\t\tvar edge0 = i0.next();\r\n\t\t\t\tthis.computeVertexSnaps(edge0);\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof NodedSegmentString) {\r\n\t\t\tlet e = arguments[0];\r\n\t\t\tvar pts0 = e.getCoordinates();\r\n\t\t\tfor (var i = 0; i < pts0.length; i++) {\r\n\t\t\t\tvar hotPixel = new HotPixel(pts0[i], this.scaleFactor, this.li);\r\n\t\t\t\tvar isNodeAdded = this.pointSnapper.snap(hotPixel, e, i);\r\n\t\t\t\tif (isNodeAdded) {\r\n\t\t\t\t\te.addIntersection(pts0[i], i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputeNodes: function (inputSegmentStrings) {\r\n\t\tthis.nodedSegStrings = inputSegmentStrings;\r\n\t\tthis.noder = new MCIndexNoder();\r\n\t\tthis.pointSnapper = new MCIndexPointSnapper(this.noder.getIndex());\r\n\t\tthis.snapRound(inputSegmentStrings, this.li);\r\n\t},\r\n\tcomputeIntersectionSnaps: function (snapPts) {\r\n\t\tfor (var it = snapPts.iterator(); it.hasNext(); ) {\r\n\t\t\tvar snapPt = it.next();\r\n\t\t\tvar hotPixel = new HotPixel(snapPt, this.scaleFactor, this.li);\r\n\t\t\tthis.pointSnapper.snap(hotPixel);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Noder];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn MCIndexSnapRounder;\r\n\t}\r\n});\r\n","import BufferParameters from './BufferParameters';\r\nimport Geometry from '../../geom/Geometry';\r\nimport BufferBuilder from './BufferBuilder';\r\nimport ScaledNoder from '../../noding/ScaledNoder';\r\nimport TopologyException from '../../geom/TopologyException';\r\nimport extend from '../../../../../extend';\r\nimport MathUtil from '../../math/MathUtil';\r\nimport PrecisionModel from '../../geom/PrecisionModel';\r\nimport RuntimeException from '../../../../../java/lang/RuntimeException';\r\nimport MCIndexSnapRounder from '../../noding/snapround/MCIndexSnapRounder';\r\nexport default function BufferOp() {\r\n\tthis.argGeom = null;\r\n\tthis.distance = null;\r\n\tthis.bufParams = new BufferParameters();\r\n\tthis.resultGeometry = null;\r\n\tthis.saveException = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet g = arguments[0];\r\n\t\tthis.argGeom = g;\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet g = arguments[0], bufParams = arguments[1];\r\n\t\tthis.argGeom = g;\r\n\t\tthis.bufParams = bufParams;\r\n\t}\r\n}\r\nextend(BufferOp.prototype, {\r\n\tbufferFixedPrecision: function (fixedPM) {\r\n\t\tvar noder = new ScaledNoder(new MCIndexSnapRounder(new PrecisionModel(1.0)), fixedPM.getScale());\r\n\t\tvar bufBuilder = new BufferBuilder(this.bufParams);\r\n\t\tbufBuilder.setWorkingPrecisionModel(fixedPM);\r\n\t\tbufBuilder.setNoder(noder);\r\n\t\tthis.resultGeometry = bufBuilder.buffer(this.argGeom, this.distance);\r\n\t},\r\n\tbufferReducedPrecision: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tfor (var precDigits = BufferOp.MAX_PRECISION_DIGITS; precDigits >= 0; precDigits--) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.bufferReducedPrecision(precDigits);\r\n\t\t\t\t} catch (ex) {\r\n\t\t\t\t\tif (ex instanceof TopologyException) {\r\n\t\t\t\t\t\tthis.saveException = ex;\r\n\t\t\t\t\t} else throw ex;\r\n\t\t\t\t} finally {}\r\n\t\t\t\tif (this.resultGeometry !== null) return null;\r\n\t\t\t}\r\n\t\t\tthrow this.saveException;\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet precisionDigits = arguments[0];\r\n\t\t\tvar sizeBasedScaleFactor = BufferOp.precisionScaleFactor(this.argGeom, this.distance, precisionDigits);\r\n\t\t\tvar fixedPM = new PrecisionModel(sizeBasedScaleFactor);\r\n\t\t\tthis.bufferFixedPrecision(fixedPM);\r\n\t\t}\r\n\t},\r\n\tcomputeGeometry: function () {\r\n\t\tthis.bufferOriginalPrecision();\r\n\t\tif (this.resultGeometry !== null) return null;\r\n\t\tvar argPM = this.argGeom.getFactory().getPrecisionModel();\r\n\t\tif (argPM.getType() === PrecisionModel.FIXED) this.bufferFixedPrecision(argPM); else this.bufferReducedPrecision();\r\n\t},\r\n\tsetQuadrantSegments: function (quadrantSegments) {\r\n\t\tthis.bufParams.setQuadrantSegments(quadrantSegments);\r\n\t},\r\n\tbufferOriginalPrecision: function () {\r\n\t\ttry {\r\n\t\t\tvar bufBuilder = new BufferBuilder(this.bufParams);\r\n\t\t\tthis.resultGeometry = bufBuilder.buffer(this.argGeom, this.distance);\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex instanceof RuntimeException) {\r\n\t\t\t\tthis.saveException = ex;\r\n\t\t\t} else throw ex;\r\n\t\t} finally {}\r\n\t},\r\n\tgetResultGeometry: function (distance) {\r\n\t\tthis.distance = distance;\r\n\t\tthis.computeGeometry();\r\n\t\treturn this.resultGeometry;\r\n\t},\r\n\tsetEndCapStyle: function (endCapStyle) {\r\n\t\tthis.bufParams.setEndCapStyle(endCapStyle);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BufferOp;\r\n\t}\r\n});\r\nBufferOp.bufferOp = function () {\r\n\tif (arguments.length === 2) {\r\n\t\tlet g = arguments[0], distance = arguments[1];\r\n\t\tvar gBuf = new BufferOp(g);\r\n\t\tvar geomBuf = gBuf.getResultGeometry(distance);\r\n\t\treturn geomBuf;\r\n\t} else if (arguments.length === 3) {\r\n\t\tif (Number.isInteger(arguments[2]) && (arguments[0] instanceof Geometry && typeof arguments[1] === \"number\")) {\r\n\t\t\tlet g = arguments[0], distance = arguments[1], quadrantSegments = arguments[2];\r\n\t\t\tvar bufOp = new BufferOp(g);\r\n\t\t\tbufOp.setQuadrantSegments(quadrantSegments);\r\n\t\t\tvar geomBuf = bufOp.getResultGeometry(distance);\r\n\t\t\treturn geomBuf;\r\n\t\t} else if (arguments[2] instanceof BufferParameters && (arguments[0] instanceof Geometry && typeof arguments[1] === \"number\")) {\r\n\t\t\tlet g = arguments[0], distance = arguments[1], params = arguments[2];\r\n\t\t\tvar bufOp = new BufferOp(g, params);\r\n\t\t\tvar geomBuf = bufOp.getResultGeometry(distance);\r\n\t\t\treturn geomBuf;\r\n\t\t}\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet g = arguments[0], distance = arguments[1], quadrantSegments = arguments[2], endCapStyle = arguments[3];\r\n\t\tvar bufOp = new BufferOp(g);\r\n\t\tbufOp.setQuadrantSegments(quadrantSegments);\r\n\t\tbufOp.setEndCapStyle(endCapStyle);\r\n\t\tvar geomBuf = bufOp.getResultGeometry(distance);\r\n\t\treturn geomBuf;\r\n\t}\r\n};\r\nBufferOp.precisionScaleFactor = function (g, distance, maxPrecisionDigits) {\r\n\tvar env = g.getEnvelopeInternal();\r\n\tvar envMax = MathUtil.max(Math.abs(env.getMaxX()), Math.abs(env.getMaxY()), Math.abs(env.getMinX()), Math.abs(env.getMinY()));\r\n\tvar expandByDistance = distance > 0.0 ? distance : 0.0;\r\n\tvar bufEnvMax = envMax + 2 * expandByDistance;\r\n\tvar bufEnvPrecisionDigits = Math.trunc(Math.log(bufEnvMax) / Math.log(10) + 1.0);\r\n\tvar minUnitLog10 = maxPrecisionDigits - bufEnvPrecisionDigits;\r\n\tvar scaleFactor = Math.pow(10.0, minUnitLog10);\r\n\treturn scaleFactor;\r\n};\r\nBufferOp.CAP_ROUND = BufferParameters.CAP_ROUND;\r\nBufferOp.CAP_BUTT = BufferParameters.CAP_FLAT;\r\nBufferOp.CAP_FLAT = BufferParameters.CAP_FLAT;\r\nBufferOp.CAP_SQUARE = BufferParameters.CAP_SQUARE;\r\nBufferOp.MAX_PRECISION_DIGITS = 12;\r\n","import Polygon from '../Polygon';\r\nimport extend from '../../../../../extend';\r\nimport GeometryCollection from '../GeometryCollection';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport GeometryFilter from '../GeometryFilter';\r\nexport default function PolygonExtracter() {\r\n\tthis.comps = null;\r\n\tlet comps = arguments[0];\r\n\tthis.comps = comps;\r\n}\r\nextend(PolygonExtracter.prototype, {\r\n\tfilter: function (geom) {\r\n\t\tif (geom instanceof Polygon) this.comps.add(geom);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PolygonExtracter;\r\n\t}\r\n});\r\nPolygonExtracter.getPolygons = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet geom = arguments[0];\r\n\t\treturn PolygonExtracter.getPolygons(geom, new ArrayList());\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet geom = arguments[0], list = arguments[1];\r\n\t\tif (geom instanceof Polygon) {\r\n\t\t\tlist.add(geom);\r\n\t\t} else if (geom instanceof GeometryCollection) {\r\n\t\t\tgeom.apply(new PolygonExtracter(list));\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n};\r\n","import extend from '../../../../../extend';\r\nexport default function GeometryLocation() {\r\n\tthis.component = null;\r\n\tthis.segIndex = null;\r\n\tthis.pt = null;\r\n\tif (arguments.length === 2) {\r\n\t\tlet component = arguments[0], pt = arguments[1];\r\n\t\tGeometryLocation.call(this, component, GeometryLocation.INSIDE_AREA, pt);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet component = arguments[0], segIndex = arguments[1], pt = arguments[2];\r\n\t\tthis.component = component;\r\n\t\tthis.segIndex = segIndex;\r\n\t\tthis.pt = pt;\r\n\t}\r\n}\r\nextend(GeometryLocation.prototype, {\r\n\tisInsideArea: function () {\r\n\t\treturn this.segIndex === GeometryLocation.INSIDE_AREA;\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.pt;\r\n\t},\r\n\tgetGeometryComponent: function () {\r\n\t\treturn this.component;\r\n\t},\r\n\tgetSegmentIndex: function () {\r\n\t\treturn this.segIndex;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryLocation;\r\n\t}\r\n});\r\nGeometryLocation.INSIDE_AREA = -1;\r\n","import Point from '../Point';\r\nimport extend from '../../../../../extend';\r\nimport Collections from '../../../../../java/util/Collections';\r\nimport GeometryCollection from '../GeometryCollection';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport GeometryFilter from '../GeometryFilter';\r\nexport default function PointExtracter() {\r\n\tthis.pts = null;\r\n\tlet pts = arguments[0];\r\n\tthis.pts = pts;\r\n}\r\nextend(PointExtracter.prototype, {\r\n\tfilter: function (geom) {\r\n\t\tif (geom instanceof Point) this.pts.add(geom);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PointExtracter;\r\n\t}\r\n});\r\nPointExtracter.getPoints = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet geom = arguments[0];\r\n\t\tif (geom instanceof Point) {\r\n\t\t\treturn Collections.singletonList(geom);\r\n\t\t}\r\n\t\treturn PointExtracter.getPoints(geom, new ArrayList());\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet geom = arguments[0], list = arguments[1];\r\n\t\tif (geom instanceof Point) {\r\n\t\t\tlist.add(geom);\r\n\t\t} else if (geom instanceof GeometryCollection) {\r\n\t\t\tgeom.apply(new PointExtracter(list));\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n};\r\n","import LineString from '../../geom/LineString';\r\nimport Point from '../../geom/Point';\r\nimport Polygon from '../../geom/Polygon';\r\nimport GeometryLocation from './GeometryLocation';\r\nimport extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport GeometryFilter from '../../geom/GeometryFilter';\r\nexport default function ConnectedElementLocationFilter() {\r\n\tthis.locations = null;\r\n\tlet locations = arguments[0];\r\n\tthis.locations = locations;\r\n}\r\nextend(ConnectedElementLocationFilter.prototype, {\r\n\tfilter: function (geom) {\r\n\t\tif (geom instanceof Point || geom instanceof LineString || geom instanceof Polygon) this.locations.add(new GeometryLocation(geom, 0, geom.getCoordinate()));\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ConnectedElementLocationFilter;\r\n\t}\r\n});\r\nConnectedElementLocationFilter.getLocations = function (geom) {\r\n\tvar locations = new ArrayList();\r\n\tgeom.apply(new ConnectedElementLocationFilter(locations));\r\n\treturn locations;\r\n};\r\n","import PointLocator from '../../algorithm/PointLocator';\r\nimport PolygonExtracter from '../../geom/util/PolygonExtracter';\r\nimport Location from '../../geom/Location';\r\nimport LineString from '../../geom/LineString';\r\nimport CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport IllegalArgumentException from '../../../../../java/lang/IllegalArgumentException';\r\nimport Point from '../../geom/Point';\r\nimport Polygon from '../../geom/Polygon';\r\nimport GeometryLocation from './GeometryLocation';\r\nimport Double from '../../../../../java/lang/Double';\r\nimport PointExtracter from '../../geom/util/PointExtracter';\r\nimport extend from '../../../../../extend';\r\nimport ConnectedElementLocationFilter from './ConnectedElementLocationFilter';\r\nimport LineSegment from '../../geom/LineSegment';\r\nimport LinearComponentExtracter from '../../geom/util/LinearComponentExtracter';\r\nimport List from '../../../../../java/util/List';\r\nexport default function DistanceOp() {\r\n\tthis.geom = null;\r\n\tthis.terminateDistance = 0.0;\r\n\tthis.ptLocator = new PointLocator();\r\n\tthis.minDistanceLocation = null;\r\n\tthis.minDistance = Double.MAX_VALUE;\r\n\tif (arguments.length === 2) {\r\n\t\tlet g0 = arguments[0], g1 = arguments[1];\r\n\t\tDistanceOp.call(this, g0, g1, 0.0);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet g0 = arguments[0], g1 = arguments[1], terminateDistance = arguments[2];\r\n\t\tthis.geom = new Array(2).fill(null);\r\n\t\tthis.geom[0] = g0;\r\n\t\tthis.geom[1] = g1;\r\n\t\tthis.terminateDistance = terminateDistance;\r\n\t}\r\n}\r\nextend(DistanceOp.prototype, {\r\n\tcomputeContainmentDistance: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tvar locPtPoly = new Array(2).fill(null);\r\n\t\t\tthis.computeContainmentDistance(0, locPtPoly);\r\n\t\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\t\tthis.computeContainmentDistance(1, locPtPoly);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet polyGeomIndex = arguments[0], locPtPoly = arguments[1];\r\n\t\t\tvar locationsIndex = 1 - polyGeomIndex;\r\n\t\t\tvar polys = PolygonExtracter.getPolygons(this.geom[polyGeomIndex]);\r\n\t\t\tif (polys.size() > 0) {\r\n\t\t\t\tvar insideLocs = ConnectedElementLocationFilter.getLocations(this.geom[locationsIndex]);\r\n\t\t\t\tthis.computeContainmentDistance(insideLocs, polys, locPtPoly);\r\n\t\t\t\tif (this.minDistance <= this.terminateDistance) {\r\n\t\t\t\t\tthis.minDistanceLocation[locationsIndex] = locPtPoly[0];\r\n\t\t\t\t\tthis.minDistanceLocation[polyGeomIndex] = locPtPoly[1];\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tif (arguments[2] instanceof Array && (hasInterface(arguments[0], List) && hasInterface(arguments[1], List))) {\r\n\t\t\t\tlet locs = arguments[0], polys = arguments[1], locPtPoly = arguments[2];\r\n\t\t\t\tfor (var i = 0; i < locs.size(); i++) {\r\n\t\t\t\t\tvar loc = locs.get(i);\r\n\t\t\t\t\tfor (var j = 0; j < polys.size(); j++) {\r\n\t\t\t\t\t\tthis.computeContainmentDistance(loc, polys.get(j), locPtPoly);\r\n\t\t\t\t\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (arguments[2] instanceof Array && (arguments[0] instanceof GeometryLocation && arguments[1] instanceof Polygon)) {\r\n\t\t\t\tlet ptLoc = arguments[0], poly = arguments[1], locPtPoly = arguments[2];\r\n\t\t\t\tvar pt = ptLoc.getCoordinate();\r\n\t\t\t\tif (Location.EXTERIOR !== this.ptLocator.locate(pt, poly)) {\r\n\t\t\t\t\tthis.minDistance = 0.0;\r\n\t\t\t\t\tlocPtPoly[0] = ptLoc;\r\n\t\t\t\t\tlocPtPoly[1] = new GeometryLocation(poly, pt);\r\n\t\t\t\t\t;\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputeMinDistanceLinesPoints: function (lines, points, locGeom) {\r\n\t\tfor (var i = 0; i < lines.size(); i++) {\r\n\t\t\tvar line = lines.get(i);\r\n\t\t\tfor (var j = 0; j < points.size(); j++) {\r\n\t\t\t\tvar pt = points.get(j);\r\n\t\t\t\tthis.computeMinDistance(line, pt, locGeom);\r\n\t\t\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputeFacetDistance: function () {\r\n\t\tvar locGeom = new Array(2).fill(null);\r\n\t\tvar lines0 = LinearComponentExtracter.getLines(this.geom[0]);\r\n\t\tvar lines1 = LinearComponentExtracter.getLines(this.geom[1]);\r\n\t\tvar pts0 = PointExtracter.getPoints(this.geom[0]);\r\n\t\tvar pts1 = PointExtracter.getPoints(this.geom[1]);\r\n\t\tthis.computeMinDistanceLines(lines0, lines1, locGeom);\r\n\t\tthis.updateMinDistance(locGeom, false);\r\n\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\tlocGeom[0] = null;\r\n\t\tlocGeom[1] = null;\r\n\t\tthis.computeMinDistanceLinesPoints(lines0, pts1, locGeom);\r\n\t\tthis.updateMinDistance(locGeom, false);\r\n\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\tlocGeom[0] = null;\r\n\t\tlocGeom[1] = null;\r\n\t\tthis.computeMinDistanceLinesPoints(lines1, pts0, locGeom);\r\n\t\tthis.updateMinDistance(locGeom, true);\r\n\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\tlocGeom[0] = null;\r\n\t\tlocGeom[1] = null;\r\n\t\tthis.computeMinDistancePoints(pts0, pts1, locGeom);\r\n\t\tthis.updateMinDistance(locGeom, false);\r\n\t},\r\n\tnearestLocations: function () {\r\n\t\tthis.computeMinDistance();\r\n\t\treturn this.minDistanceLocation;\r\n\t},\r\n\tupdateMinDistance: function (locGeom, flip) {\r\n\t\tif (locGeom[0] === null) return null;\r\n\t\tif (flip) {\r\n\t\t\tthis.minDistanceLocation[0] = locGeom[1];\r\n\t\t\tthis.minDistanceLocation[1] = locGeom[0];\r\n\t\t} else {\r\n\t\t\tthis.minDistanceLocation[0] = locGeom[0];\r\n\t\t\tthis.minDistanceLocation[1] = locGeom[1];\r\n\t\t}\r\n\t},\r\n\tnearestPoints: function () {\r\n\t\tthis.computeMinDistance();\r\n\t\tvar nearestPts = [this.minDistanceLocation[0].getCoordinate(), this.minDistanceLocation[1].getCoordinate()];\r\n\t\treturn nearestPts;\r\n\t},\r\n\tcomputeMinDistance: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tif (this.minDistanceLocation !== null) return null;\r\n\t\t\tthis.minDistanceLocation = new Array(2).fill(null);\r\n\t\t\tthis.computeContainmentDistance();\r\n\t\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\t\tthis.computeFacetDistance();\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tif (arguments[2] instanceof Array && (arguments[0] instanceof LineString && arguments[1] instanceof Point)) {\r\n\t\t\t\tlet line = arguments[0], pt = arguments[1], locGeom = arguments[2];\r\n\t\t\t\tif (line.getEnvelopeInternal().distance(pt.getEnvelopeInternal()) > this.minDistance) return null;\r\n\t\t\t\tvar coord0 = line.getCoordinates();\r\n\t\t\t\tvar coord = pt.getCoordinate();\r\n\t\t\t\tfor (var i = 0; i < coord0.length - 1; i++) {\r\n\t\t\t\t\tvar dist = CGAlgorithms.distancePointLine(coord, coord0[i], coord0[i + 1]);\r\n\t\t\t\t\tif (dist < this.minDistance) {\r\n\t\t\t\t\t\tthis.minDistance = dist;\r\n\t\t\t\t\t\tvar seg = new LineSegment(coord0[i], coord0[i + 1]);\r\n\t\t\t\t\t\tvar segClosestPoint = seg.closestPoint(coord);\r\n\t\t\t\t\t\tlocGeom[0] = new GeometryLocation(line, i, segClosestPoint);\r\n\t\t\t\t\t\tlocGeom[1] = new GeometryLocation(pt, 0, coord);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\t\t\t}\r\n\t\t\t} else if (arguments[2] instanceof Array && (arguments[0] instanceof LineString && arguments[1] instanceof LineString)) {\r\n\t\t\t\tlet line0 = arguments[0], line1 = arguments[1], locGeom = arguments[2];\r\n\t\t\t\tif (line0.getEnvelopeInternal().distance(line1.getEnvelopeInternal()) > this.minDistance) return null;\r\n\t\t\t\tvar coord0 = line0.getCoordinates();\r\n\t\t\t\tvar coord1 = line1.getCoordinates();\r\n\t\t\t\tfor (var i = 0; i < coord0.length - 1; i++) {\r\n\t\t\t\t\tfor (var j = 0; j < coord1.length - 1; j++) {\r\n\t\t\t\t\t\tvar dist = CGAlgorithms.distanceLineLine(coord0[i], coord0[i + 1], coord1[j], coord1[j + 1]);\r\n\t\t\t\t\t\tif (dist < this.minDistance) {\r\n\t\t\t\t\t\t\tthis.minDistance = dist;\r\n\t\t\t\t\t\t\tvar seg0 = new LineSegment(coord0[i], coord0[i + 1]);\r\n\t\t\t\t\t\t\tvar seg1 = new LineSegment(coord1[j], coord1[j + 1]);\r\n\t\t\t\t\t\t\tvar closestPt = seg0.closestPoints(seg1);\r\n\t\t\t\t\t\t\tlocGeom[0] = new GeometryLocation(line0, i, closestPt[0]);\r\n\t\t\t\t\t\t\tlocGeom[1] = new GeometryLocation(line1, j, closestPt[1]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputeMinDistancePoints: function (points0, points1, locGeom) {\r\n\t\tfor (var i = 0; i < points0.size(); i++) {\r\n\t\t\tvar pt0 = points0.get(i);\r\n\t\t\tfor (var j = 0; j < points1.size(); j++) {\r\n\t\t\t\tvar pt1 = points1.get(j);\r\n\t\t\t\tvar dist = pt0.getCoordinate().distance(pt1.getCoordinate());\r\n\t\t\t\tif (dist < this.minDistance) {\r\n\t\t\t\t\tthis.minDistance = dist;\r\n\t\t\t\t\tlocGeom[0] = new GeometryLocation(pt0, 0, pt0.getCoordinate());\r\n\t\t\t\t\tlocGeom[1] = new GeometryLocation(pt1, 0, pt1.getCoordinate());\r\n\t\t\t\t}\r\n\t\t\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdistance: function () {\r\n\t\tif (this.geom[0] === null || this.geom[1] === null) throw new IllegalArgumentException(\"null geometries are not supported\");\r\n\t\tif (this.geom[0].isEmpty() || this.geom[1].isEmpty()) return 0.0;\r\n\t\tthis.computeMinDistance();\r\n\t\treturn this.minDistance;\r\n\t},\r\n\tcomputeMinDistanceLines: function (lines0, lines1, locGeom) {\r\n\t\tfor (var i = 0; i < lines0.size(); i++) {\r\n\t\t\tvar line0 = lines0.get(i);\r\n\t\t\tfor (var j = 0; j < lines1.size(); j++) {\r\n\t\t\t\tvar line1 = lines1.get(j);\r\n\t\t\t\tthis.computeMinDistance(line0, line1, locGeom);\r\n\t\t\t\tif (this.minDistance <= this.terminateDistance) return null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DistanceOp;\r\n\t}\r\n});\r\nDistanceOp.distance = function (g0, g1) {\r\n\tvar distOp = new DistanceOp(g0, g1);\r\n\treturn distOp.distance();\r\n};\r\nDistanceOp.isWithinDistance = function (g0, g1, distance) {\r\n\tvar distOp = new DistanceOp(g0, g1, distance);\r\n\treturn distOp.distance() <= distance;\r\n};\r\nDistanceOp.nearestPoints = function (g0, g1) {\r\n\tvar distOp = new DistanceOp(g0, g1);\r\n\treturn distOp.nearestPoints();\r\n};\r\n","import CoordinateList from '../../geom/CoordinateList';\r\nimport extend from '../../../../../extend';\r\nimport CoordinateArrays from '../../geom/CoordinateArrays';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nexport default function EdgeString() {\r\n\tthis.factory = null;\r\n\tthis.directedEdges = new ArrayList();\r\n\tthis.coordinates = null;\r\n\tlet factory = arguments[0];\r\n\tthis.factory = factory;\r\n}\r\nextend(EdgeString.prototype, {\r\n\tgetCoordinates: function () {\r\n\t\tif (this.coordinates === null) {\r\n\t\t\tvar forwardDirectedEdges = 0;\r\n\t\t\tvar reverseDirectedEdges = 0;\r\n\t\t\tvar coordinateList = new CoordinateList();\r\n\t\t\tfor (var i = this.directedEdges.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar directedEdge = i.next();\r\n\t\t\t\tif (directedEdge.getEdgeDirection()) {\r\n\t\t\t\t\tforwardDirectedEdges++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treverseDirectedEdges++;\r\n\t\t\t\t}\r\n\t\t\t\tcoordinateList.add(directedEdge.getEdge().getLine().getCoordinates(), false, directedEdge.getEdgeDirection());\r\n\t\t\t}\r\n\t\t\tthis.coordinates = coordinateList.toCoordinateArray();\r\n\t\t\tif (reverseDirectedEdges > forwardDirectedEdges) {\r\n\t\t\t\tCoordinateArrays.reverse(this.coordinates);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.coordinates;\r\n\t},\r\n\ttoLineString: function () {\r\n\t\treturn this.factory.createLineString(this.getCoordinates());\r\n\t},\r\n\tadd: function (directedEdge) {\r\n\t\tthis.directedEdges.add(directedEdge);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeString;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nexport default function GraphComponent() {\r\n\tthis._isMarked = false;\r\n\tthis._isVisited = false;\r\n\tthis.data = null;\r\n}\r\nextend(GraphComponent.prototype, {\r\n\tsetVisited: function (isVisited) {\r\n\t\tthis._isVisited = isVisited;\r\n\t},\r\n\tisMarked: function () {\r\n\t\treturn this._isMarked;\r\n\t},\r\n\tsetData: function (data) {\r\n\t\tthis.data = data;\r\n\t},\r\n\tgetData: function () {\r\n\t\treturn this.data;\r\n\t},\r\n\tsetMarked: function (isMarked) {\r\n\t\tthis._isMarked = isMarked;\r\n\t},\r\n\tgetContext: function () {\r\n\t\treturn this.data;\r\n\t},\r\n\tisVisited: function () {\r\n\t\treturn this._isVisited;\r\n\t},\r\n\tsetContext: function (data) {\r\n\t\tthis.data = data;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GraphComponent;\r\n\t}\r\n});\r\nGraphComponent.getComponentWithVisitedState = function (i, visitedState) {\r\n\twhile (i.hasNext()) {\r\n\t\tvar comp = i.next();\r\n\t\tif (comp.isVisited() === visitedState) return comp;\r\n\t}\r\n\treturn null;\r\n};\r\nGraphComponent.setVisited = function (i, visited) {\r\n\twhile (i.hasNext()) {\r\n\t\tvar comp = i.next();\r\n\t\tcomp.setVisited(visited);\r\n\t}\r\n};\r\nGraphComponent.setMarked = function (i, marked) {\r\n\twhile (i.hasNext()) {\r\n\t\tvar comp = i.next();\r\n\t\tcomp.setMarked(marked);\r\n\t}\r\n};\r\n","import CGAlgorithms from '../algorithm/CGAlgorithms';\r\nimport extend from '../../../../extend';\r\nimport Comparable from '../../../../java/lang/Comparable';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Quadrant from '../geomgraph/Quadrant';\r\nimport inherits from '../../../../inherits';\r\nimport GraphComponent from './GraphComponent';\r\nexport default function DirectedEdge() {\r\n\tGraphComponent.apply(this);\r\n\tthis.parentEdge = null;\r\n\tthis.from = null;\r\n\tthis.to = null;\r\n\tthis.p0 = null;\r\n\tthis.p1 = null;\r\n\tthis.sym = null;\r\n\tthis.edgeDirection = null;\r\n\tthis.quadrant = null;\r\n\tthis.angle = null;\r\n\tlet from = arguments[0], to = arguments[1], directionPt = arguments[2], edgeDirection = arguments[3];\r\n\tthis.from = from;\r\n\tthis.to = to;\r\n\tthis.edgeDirection = edgeDirection;\r\n\tthis.p0 = from.getCoordinate();\r\n\tthis.p1 = directionPt;\r\n\tvar dx = this.p1.x - this.p0.x;\r\n\tvar dy = this.p1.y - this.p0.y;\r\n\tthis.quadrant = Quadrant.quadrant(dx, dy);\r\n\tthis.angle = Math.atan2(dy, dx);\r\n}\r\ninherits(DirectedEdge, GraphComponent);\r\nextend(DirectedEdge.prototype, {\r\n\tisRemoved: function () {\r\n\t\treturn this.parentEdge === null;\r\n\t},\r\n\tcompareDirection: function (e) {\r\n\t\tif (this.quadrant > e.quadrant) return 1;\r\n\t\tif (this.quadrant < e.quadrant) return -1;\r\n\t\treturn CGAlgorithms.computeOrientation(e.p0, e.p1, this.p1);\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.from.getCoordinate();\r\n\t},\r\n\tprint: function (out) {\r\n\t\tvar className = this.getClass().getName();\r\n\t\tvar lastDotPos = className.lastIndexOf('.');\r\n\t\tvar name = className.substring(lastDotPos + 1);\r\n\t\tout.print(\"  \" + name + \": \" + this.p0 + \" - \" + this.p1 + \" \" + this.quadrant + \":\" + this.angle);\r\n\t},\r\n\tgetDirectionPt: function () {\r\n\t\treturn this.p1;\r\n\t},\r\n\tgetAngle: function () {\r\n\t\treturn this.angle;\r\n\t},\r\n\tcompareTo: function (obj) {\r\n\t\tvar de = obj;\r\n\t\treturn this.compareDirection(de);\r\n\t},\r\n\tgetFromNode: function () {\r\n\t\treturn this.from;\r\n\t},\r\n\tgetSym: function () {\r\n\t\treturn this.sym;\r\n\t},\r\n\tsetEdge: function (parentEdge) {\r\n\t\tthis.parentEdge = parentEdge;\r\n\t},\r\n\tremove: function () {\r\n\t\tthis.sym = null;\r\n\t\tthis.parentEdge = null;\r\n\t},\r\n\tgetEdge: function () {\r\n\t\treturn this.parentEdge;\r\n\t},\r\n\tgetQuadrant: function () {\r\n\t\treturn this.quadrant;\r\n\t},\r\n\tsetSym: function (sym) {\r\n\t\tthis.sym = sym;\r\n\t},\r\n\tgetToNode: function () {\r\n\t\treturn this.to;\r\n\t},\r\n\tgetEdgeDirection: function () {\r\n\t\treturn this.edgeDirection;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparable];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DirectedEdge;\r\n\t}\r\n});\r\nDirectedEdge.toEdges = function (dirEdges) {\r\n\tvar edges = new ArrayList();\r\n\tfor (var i = dirEdges.iterator(); i.hasNext(); ) {\r\n\t\tedges.add(i.next().parentEdge);\r\n\t}\r\n\treturn edges;\r\n};\r\n","import extend from '../../../../../extend';\r\nimport DirectedEdge from '../../planargraph/DirectedEdge';\r\nimport Assert from '../../util/Assert';\r\nimport inherits from '../../../../../inherits';\r\nexport default function LineMergeDirectedEdge() {\r\n\tlet from = arguments[0], to = arguments[1], directionPt = arguments[2], edgeDirection = arguments[3];\r\n\tDirectedEdge.call(this, from, to, directionPt, edgeDirection);\r\n}\r\ninherits(LineMergeDirectedEdge, DirectedEdge);\r\nextend(LineMergeDirectedEdge.prototype, {\r\n\tgetNext: function () {\r\n\t\tif (this.getToNode().getDegree() !== 2) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.getToNode().getOutEdges().getEdges().get(0) === this.getSym()) {\r\n\t\t\treturn this.getToNode().getOutEdges().getEdges().get(1);\r\n\t\t}\r\n\t\tAssert.isTrue(this.getToNode().getOutEdges().getEdges().get(1) === this.getSym());\r\n\t\treturn this.getToNode().getOutEdges().getEdges().get(0);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineMergeDirectedEdge;\r\n\t}\r\n});\r\n","import Node from './Node';\r\nimport extend from '../../../../extend';\r\nimport inherits from '../../../../inherits';\r\nimport GraphComponent from './GraphComponent';\r\nexport default function Edge() {\r\n\tGraphComponent.apply(this);\r\n\tthis.dirEdge = null;\r\n\tif (arguments.length === 0) {} else if (arguments.length === 2) {\r\n\t\tlet de0 = arguments[0], de1 = arguments[1];\r\n\t\tthis.setDirectedEdges(de0, de1);\r\n\t}\r\n}\r\ninherits(Edge, GraphComponent);\r\nextend(Edge.prototype, {\r\n\tisRemoved: function () {\r\n\t\treturn this.dirEdge === null;\r\n\t},\r\n\tsetDirectedEdges: function (de0, de1) {\r\n\t\tthis.dirEdge = [de0, de1];\r\n\t\tde0.setEdge(this);\r\n\t\tde1.setEdge(this);\r\n\t\tde0.setSym(de1);\r\n\t\tde1.setSym(de0);\r\n\t\tde0.getFromNode().addOutEdge(de0);\r\n\t\tde1.getFromNode().addOutEdge(de1);\r\n\t},\r\n\tgetDirEdge: function () {\r\n\t\tif (Number.isInteger(arguments[0])) {\r\n\t\t\tlet i = arguments[0];\r\n\t\t\treturn this.dirEdge[i];\r\n\t\t} else if (arguments[0] instanceof Node) {\r\n\t\t\tlet fromNode = arguments[0];\r\n\t\t\tif (this.dirEdge[0].getFromNode() === fromNode) return this.dirEdge[0];\r\n\t\t\tif (this.dirEdge[1].getFromNode() === fromNode) return this.dirEdge[1];\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tremove: function () {\r\n\t\tthis.dirEdge = null;\r\n\t},\r\n\tgetOppositeNode: function (node) {\r\n\t\tif (this.dirEdge[0].getFromNode() === node) return this.dirEdge[0].getToNode();\r\n\t\tif (this.dirEdge[1].getFromNode() === node) return this.dirEdge[1].getToNode();\r\n\t\treturn null;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Edge;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport Collections from '../../../../java/util/Collections';\r\nimport DirectedEdge from './DirectedEdge';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Edge from './Edge';\r\nexport default function DirectedEdgeStar() {\r\n\tthis.outEdges = new ArrayList();\r\n\tthis.sorted = false;\r\n}\r\nextend(DirectedEdgeStar.prototype, {\r\n\tgetNextEdge: function (dirEdge) {\r\n\t\tvar i = this.getIndex(dirEdge);\r\n\t\treturn this.outEdges.get(this.getIndex(i + 1));\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\tvar it = this.iterator();\r\n\t\tif (!it.hasNext()) return null;\r\n\t\tvar e = it.next();\r\n\t\treturn e.getCoordinate();\r\n\t},\r\n\titerator: function () {\r\n\t\tthis.sortEdges();\r\n\t\treturn this.outEdges.iterator();\r\n\t},\r\n\tsortEdges: function () {\r\n\t\tif (!this.sorted) {\r\n\t\t\tCollections.sort(this.outEdges);\r\n\t\t\tthis.sorted = true;\r\n\t\t}\r\n\t},\r\n\tremove: function (de) {\r\n\t\tthis.outEdges.remove(de);\r\n\t},\r\n\tgetEdges: function () {\r\n\t\tthis.sortEdges();\r\n\t\treturn this.outEdges;\r\n\t},\r\n\tgetNextCWEdge: function (dirEdge) {\r\n\t\tvar i = this.getIndex(dirEdge);\r\n\t\treturn this.outEdges.get(this.getIndex(i - 1));\r\n\t},\r\n\tgetIndex: function () {\r\n\t\tif (arguments[0] instanceof Edge) {\r\n\t\t\tlet edge = arguments[0];\r\n\t\t\tthis.sortEdges();\r\n\t\t\tfor (var i = 0; i < this.outEdges.size(); i++) {\r\n\t\t\t\tvar de = this.outEdges.get(i);\r\n\t\t\t\tif (de.getEdge() === edge) return i;\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t} else if (arguments[0] instanceof DirectedEdge) {\r\n\t\t\tlet dirEdge = arguments[0];\r\n\t\t\tthis.sortEdges();\r\n\t\t\tfor (var i = 0; i < this.outEdges.size(); i++) {\r\n\t\t\t\tvar de = this.outEdges.get(i);\r\n\t\t\t\tif (de === dirEdge) return i;\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t} else if (Number.isInteger(arguments[0])) {\r\n\t\t\tlet i = arguments[0];\r\n\t\t\tvar modi = i % this.outEdges.size();\r\n\t\t\tif (modi < 0) modi += this.outEdges.size();\r\n\t\t\treturn modi;\r\n\t\t}\r\n\t},\r\n\tadd: function (de) {\r\n\t\tthis.outEdges.add(de);\r\n\t\tthis.sorted = false;\r\n\t},\r\n\tgetDegree: function () {\r\n\t\treturn this.outEdges.size();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DirectedEdgeStar;\r\n\t}\r\n});\r\n","import DirectedEdgeStar from './DirectedEdgeStar';\r\nimport HashSet from '../../../../java/util/HashSet';\r\nimport extend from '../../../../extend';\r\nimport DirectedEdge from './DirectedEdge';\r\nimport inherits from '../../../../inherits';\r\nimport GraphComponent from './GraphComponent';\r\nexport default function Node() {\r\n\tGraphComponent.apply(this);\r\n\tthis.pt = null;\r\n\tthis.deStar = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet pt = arguments[0];\r\n\t\tNode.call(this, pt, new DirectedEdgeStar());\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet pt = arguments[0], deStar = arguments[1];\r\n\t\tthis.pt = pt;\r\n\t\tthis.deStar = deStar;\r\n\t}\r\n}\r\ninherits(Node, GraphComponent);\r\nextend(Node.prototype, {\r\n\tisRemoved: function () {\r\n\t\treturn this.pt === null;\r\n\t},\r\n\taddOutEdge: function (de) {\r\n\t\tthis.deStar.add(de);\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.pt;\r\n\t},\r\n\tgetOutEdges: function () {\r\n\t\treturn this.deStar;\r\n\t},\r\n\tremove: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\tthis.pt = null;\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet de = arguments[0];\r\n\t\t\tthis.deStar.remove(de);\r\n\t\t}\r\n\t},\r\n\tgetIndex: function (edge) {\r\n\t\treturn this.deStar.getIndex(edge);\r\n\t},\r\n\tgetDegree: function () {\r\n\t\treturn this.deStar.getDegree();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Node;\r\n\t}\r\n});\r\nNode.getEdgesBetween = function (node0, node1) {\r\n\tvar edges0 = DirectedEdge.toEdges(node0.getOutEdges().getEdges());\r\n\tvar commonEdges = new HashSet(edges0);\r\n\tvar edges1 = DirectedEdge.toEdges(node1.getOutEdges().getEdges());\r\n\tcommonEdges.retainAll(edges1);\r\n\treturn commonEdges;\r\n};\r\n","import extend from '../../../../../extend';\r\nimport Edge from '../../planargraph/Edge';\r\nimport inherits from '../../../../../inherits';\r\nexport default function LineMergeEdge() {\r\n\tEdge.apply(this);\r\n\tthis.line = null;\r\n\tlet line = arguments[0];\r\n\tthis.line = line;\r\n}\r\ninherits(LineMergeEdge, Edge);\r\nextend(LineMergeEdge.prototype, {\r\n\tgetLine: function () {\r\n\t\treturn this.line;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineMergeEdge;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport TreeMap from '../../../../java/util/TreeMap';\r\nexport default function NodeMap() {\r\n\tthis.nodeMap = new TreeMap();\r\n}\r\nextend(NodeMap.prototype, {\r\n\tfind: function (coord) {\r\n\t\treturn this.nodeMap.get(coord);\r\n\t},\r\n\titerator: function () {\r\n\t\treturn this.nodeMap.values().iterator();\r\n\t},\r\n\tremove: function (pt) {\r\n\t\treturn this.nodeMap.remove(pt);\r\n\t},\r\n\tvalues: function () {\r\n\t\treturn this.nodeMap.values();\r\n\t},\r\n\tadd: function (n) {\r\n\t\tthis.nodeMap.put(n.getCoordinate(), n);\r\n\t\treturn n;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NodeMap;\r\n\t}\r\n});\r\n","import HashSet from '../../../../java/util/HashSet';\r\nimport Node from './Node';\r\nimport extend from '../../../../extend';\r\nimport NodeMap from './NodeMap';\r\nimport DirectedEdge from './DirectedEdge';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Edge from './Edge';\r\nexport default function PlanarGraph() {\r\n\tthis.edges = new HashSet();\r\n\tthis.dirEdges = new HashSet();\r\n\tthis.nodeMap = new NodeMap();\r\n}\r\nextend(PlanarGraph.prototype, {\r\n\tfindNodesOfDegree: function (degree) {\r\n\t\tvar nodesFound = new ArrayList();\r\n\t\tfor (var i = this.nodeIterator(); i.hasNext(); ) {\r\n\t\t\tvar node = i.next();\r\n\t\t\tif (node.getDegree() === degree) nodesFound.add(node);\r\n\t\t}\r\n\t\treturn nodesFound;\r\n\t},\r\n\tdirEdgeIterator: function () {\r\n\t\treturn this.dirEdges.iterator();\r\n\t},\r\n\tedgeIterator: function () {\r\n\t\treturn this.edges.iterator();\r\n\t},\r\n\tremove: function () {\r\n\t\tif (arguments[0] instanceof Edge) {\r\n\t\t\tlet edge = arguments[0];\r\n\t\t\tthis.remove(edge.getDirEdge(0));\r\n\t\t\tthis.remove(edge.getDirEdge(1));\r\n\t\t\tthis.edges.remove(edge);\r\n\t\t\tedge.remove();\r\n\t\t} else if (arguments[0] instanceof DirectedEdge) {\r\n\t\t\tlet de = arguments[0];\r\n\t\t\tvar sym = de.getSym();\r\n\t\t\tif (sym !== null) sym.setSym(null);\r\n\t\t\tde.getFromNode().remove(de);\r\n\t\t\tde.remove();\r\n\t\t\tthis.dirEdges.remove(de);\r\n\t\t} else if (arguments[0] instanceof Node) {\r\n\t\t\tlet node = arguments[0];\r\n\t\t\tvar outEdges = node.getOutEdges().getEdges();\r\n\t\t\tfor (var i = outEdges.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar de = i.next();\r\n\t\t\t\tvar sym = de.getSym();\r\n\t\t\t\tif (sym !== null) this.remove(sym);\r\n\t\t\t\tthis.dirEdges.remove(de);\r\n\t\t\t\tvar edge = de.getEdge();\r\n\t\t\t\tif (edge !== null) {\r\n\t\t\t\t\tthis.edges.remove(edge);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.nodeMap.remove(node.getCoordinate());\r\n\t\t\tnode.remove();\r\n\t\t}\r\n\t},\r\n\tfindNode: function (pt) {\r\n\t\treturn this.nodeMap.find(pt);\r\n\t},\r\n\tgetEdges: function () {\r\n\t\treturn this.edges;\r\n\t},\r\n\tnodeIterator: function () {\r\n\t\treturn this.nodeMap.iterator();\r\n\t},\r\n\tcontains: function () {\r\n\t\tif (arguments[0] instanceof Edge) {\r\n\t\t\tlet e = arguments[0];\r\n\t\t\treturn this.edges.contains(e);\r\n\t\t} else if (arguments[0] instanceof DirectedEdge) {\r\n\t\t\tlet de = arguments[0];\r\n\t\t\treturn this.dirEdges.contains(de);\r\n\t\t}\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments[0] instanceof Node) {\r\n\t\t\tlet node = arguments[0];\r\n\t\t\tthis.nodeMap.add(node);\r\n\t\t} else if (arguments[0] instanceof Edge) {\r\n\t\t\tlet edge = arguments[0];\r\n\t\t\tthis.edges.add(edge);\r\n\t\t\tthis.add(edge.getDirEdge(0));\r\n\t\t\tthis.add(edge.getDirEdge(1));\r\n\t\t} else if (arguments[0] instanceof DirectedEdge) {\r\n\t\t\tlet dirEdge = arguments[0];\r\n\t\t\tthis.dirEdges.add(dirEdge);\r\n\t\t}\r\n\t},\r\n\tgetNodes: function () {\r\n\t\treturn this.nodeMap.values();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PlanarGraph;\r\n\t}\r\n});\r\n","import LineMergeDirectedEdge from './LineMergeDirectedEdge';\r\nimport Node from '../../planargraph/Node';\r\nimport extend from '../../../../../extend';\r\nimport CoordinateArrays from '../../geom/CoordinateArrays';\r\nimport LineMergeEdge from './LineMergeEdge';\r\nimport inherits from '../../../../../inherits';\r\nimport PlanarGraph from '../../planargraph/PlanarGraph';\r\nexport default function LineMergeGraph() {\r\n\tPlanarGraph.apply(this);\r\n}\r\ninherits(LineMergeGraph, PlanarGraph);\r\nextend(LineMergeGraph.prototype, {\r\n\taddEdge: function (lineString) {\r\n\t\tif (lineString.isEmpty()) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar coordinates = CoordinateArrays.removeRepeatedPoints(lineString.getCoordinates());\r\n\t\tif (coordinates.length <= 1) return null;\r\n\t\tvar startCoordinate = coordinates[0];\r\n\t\tvar endCoordinate = coordinates[coordinates.length - 1];\r\n\t\tvar startNode = this.getNode(startCoordinate);\r\n\t\tvar endNode = this.getNode(endCoordinate);\r\n\t\tvar directedEdge0 = new LineMergeDirectedEdge(startNode, endNode, coordinates[1], true);\r\n\t\tvar directedEdge1 = new LineMergeDirectedEdge(endNode, startNode, coordinates[coordinates.length - 2], false);\r\n\t\tvar edge = new LineMergeEdge(lineString);\r\n\t\tedge.setDirectedEdges(directedEdge0, directedEdge1);\r\n\t\tthis.add(edge);\r\n\t},\r\n\tgetNode: function (coordinate) {\r\n\t\tvar node = this.findNode(coordinate);\r\n\t\tif (node === null) {\r\n\t\t\tnode = new Node(coordinate);\r\n\t\t\tthis.add(node);\r\n\t\t}\r\n\t\treturn node;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineMergeGraph;\r\n\t}\r\n});\r\n","import LineString from '../../geom/LineString';\r\nimport Geometry from '../../geom/Geometry';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport Collection from '../../../../../java/util/Collection';\r\nimport EdgeString from './EdgeString';\r\nimport extend from '../../../../../extend';\r\nimport LineMergeGraph from './LineMergeGraph';\r\nimport GeometryComponentFilter from '../../geom/GeometryComponentFilter';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Assert from '../../util/Assert';\r\nimport GraphComponent from '../../planargraph/GraphComponent';\r\nexport default function LineMerger() {\r\n\tthis.graph = new LineMergeGraph();\r\n\tthis.mergedLineStrings = null;\r\n\tthis.factory = null;\r\n\tthis.edgeStrings = null;\r\n}\r\nextend(LineMerger.prototype, {\r\n\tbuildEdgeStringsForUnprocessedNodes: function () {\r\n\t\tfor (var i = this.graph.getNodes().iterator(); i.hasNext(); ) {\r\n\t\t\tvar node = i.next();\r\n\t\t\tif (!node.isMarked()) {\r\n\t\t\t\tAssert.isTrue(node.getDegree() === 2);\r\n\t\t\t\tthis.buildEdgeStringsStartingAt(node);\r\n\t\t\t\tnode.setMarked(true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbuildEdgeStringsForNonDegree2Nodes: function () {\r\n\t\tfor (var i = this.graph.getNodes().iterator(); i.hasNext(); ) {\r\n\t\t\tvar node = i.next();\r\n\t\t\tif (node.getDegree() !== 2) {\r\n\t\t\t\tthis.buildEdgeStringsStartingAt(node);\r\n\t\t\t\tnode.setMarked(true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbuildEdgeStringsForObviousStartNodes: function () {\r\n\t\tthis.buildEdgeStringsForNonDegree2Nodes();\r\n\t},\r\n\tgetMergedLineStrings: function () {\r\n\t\tthis.merge();\r\n\t\treturn this.mergedLineStrings;\r\n\t},\r\n\tbuildEdgeStringsStartingAt: function (node) {\r\n\t\tfor (var i = node.getOutEdges().iterator(); i.hasNext(); ) {\r\n\t\t\tvar directedEdge = i.next();\r\n\t\t\tif (directedEdge.getEdge().isMarked()) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tthis.edgeStrings.add(this.buildEdgeStringStartingWith(directedEdge));\r\n\t\t}\r\n\t},\r\n\tmerge: function () {\r\n\t\tif (this.mergedLineStrings !== null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tGraphComponent.setMarked(this.graph.nodeIterator(), false);\r\n\t\tGraphComponent.setMarked(this.graph.edgeIterator(), false);\r\n\t\tthis.edgeStrings = new ArrayList();\r\n\t\tthis.buildEdgeStringsForObviousStartNodes();\r\n\t\tthis.buildEdgeStringsForIsolatedLoops();\r\n\t\tthis.mergedLineStrings = new ArrayList();\r\n\t\tfor (var i = this.edgeStrings.iterator(); i.hasNext(); ) {\r\n\t\t\tvar edgeString = i.next();\r\n\t\t\tthis.mergedLineStrings.add(edgeString.toLineString());\r\n\t\t}\r\n\t},\r\n\tbuildEdgeStringStartingWith: function (start) {\r\n\t\tvar edgeString = new EdgeString(this.factory);\r\n\t\tvar current = start;\r\n\t\tdo {\r\n\t\t\tedgeString.add(current);\r\n\t\t\tcurrent.getEdge().setMarked(true);\r\n\t\t\tcurrent = current.getNext();\r\n\t\t} while (current !== null && current !== start);\r\n\t\treturn edgeString;\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geometry = arguments[0];\r\n\t\t\tgeometry.apply({\r\n\t\t\t\tinterfaces_: function () {\r\n\t\t\t\t\treturn [GeometryComponentFilter];\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function (component) {\r\n\t\t\t\t\tif (component instanceof LineString) {\r\n\t\t\t\t\t\tthis.add(component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet geometries = arguments[0];\r\n\t\t\tthis.mergedLineStrings = null;\r\n\t\t\tfor (var i = geometries.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar geometry = i.next();\r\n\t\t\t\tthis.add(geometry);\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof LineString) {\r\n\t\t\tlet lineString = arguments[0];\r\n\t\t\tif (this.factory === null) {\r\n\t\t\t\tthis.factory = lineString.getFactory();\r\n\t\t\t}\r\n\t\t\tthis.graph.addEdge(lineString);\r\n\t\t}\r\n\t},\r\n\tbuildEdgeStringsForIsolatedLoops: function () {\r\n\t\tthis.buildEdgeStringsForUnprocessedNodes();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineMerger;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport DirectedEdge from '../../planargraph/DirectedEdge';\r\nimport inherits from '../../../../../inherits';\r\nexport default function PolygonizeDirectedEdge() {\r\n\tthis.edgeRing = null;\r\n\tthis.next = null;\r\n\tthis.label = -1;\r\n\tlet from = arguments[0], to = arguments[1], directionPt = arguments[2], edgeDirection = arguments[3];\r\n\tDirectedEdge.call(this, from, to, directionPt, edgeDirection);\r\n}\r\ninherits(PolygonizeDirectedEdge, DirectedEdge);\r\nextend(PolygonizeDirectedEdge.prototype, {\r\n\tgetNext: function () {\r\n\t\treturn this.next;\r\n\t},\r\n\tisInRing: function () {\r\n\t\treturn this.edgeRing !== null;\r\n\t},\r\n\tsetRing: function (edgeRing) {\r\n\t\tthis.edgeRing = edgeRing;\r\n\t},\r\n\tsetLabel: function (label) {\r\n\t\tthis.label = label;\r\n\t},\r\n\tgetLabel: function () {\r\n\t\treturn this.label;\r\n\t},\r\n\tsetNext: function (next) {\r\n\t\tthis.next = next;\r\n\t},\r\n\tgetRing: function () {\r\n\t\treturn this.edgeRing;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PolygonizeDirectedEdge;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport Edge from '../../planargraph/Edge';\r\nimport inherits from '../../../../../inherits';\r\nexport default function PolygonizeEdge() {\r\n\tEdge.apply(this);\r\n\tthis.line = null;\r\n\tlet line = arguments[0];\r\n\tthis.line = line;\r\n}\r\ninherits(PolygonizeEdge, Edge);\r\nextend(PolygonizeEdge.prototype, {\r\n\tgetLine: function () {\r\n\t\treturn this.line;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PolygonizeEdge;\r\n\t}\r\n});\r\n","import Location from '../../geom/Location';\r\nimport GeometryFactory from '../../geom/GeometryFactory';\r\nimport Position from '../../geomgraph/Position';\r\nimport Polygon from '../../geom/Polygon';\r\nimport extend from '../../../../../extend';\r\nimport MultiPolygon from '../../geom/MultiPolygon';\r\nimport MaximalEdgeRing from '../overlay/MaximalEdgeRing';\r\nimport OverlayNodeFactory from '../overlay/OverlayNodeFactory';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Assert from '../../util/Assert';\r\nimport PlanarGraph from '../../geomgraph/PlanarGraph';\r\nexport default function ConnectedInteriorTester() {\r\n\tthis.geometryFactory = new GeometryFactory();\r\n\tthis.geomGraph = null;\r\n\tthis.disconnectedRingcoord = null;\r\n\tlet geomGraph = arguments[0];\r\n\tthis.geomGraph = geomGraph;\r\n}\r\nextend(ConnectedInteriorTester.prototype, {\r\n\tvisitInteriorRing: function (ring, graph) {\r\n\t\tvar pts = ring.getCoordinates();\r\n\t\tvar pt0 = pts[0];\r\n\t\tvar pt1 = ConnectedInteriorTester.findDifferentPoint(pts, pt0);\r\n\t\tvar e = graph.findEdgeInSameDirection(pt0, pt1);\r\n\t\tvar de = graph.findEdgeEnd(e);\r\n\t\tvar intDe = null;\r\n\t\tif (de.getLabel().getLocation(0, Position.RIGHT) === Location.INTERIOR) {\r\n\t\t\tintDe = de;\r\n\t\t} else if (de.getSym().getLabel().getLocation(0, Position.RIGHT) === Location.INTERIOR) {\r\n\t\t\tintDe = de.getSym();\r\n\t\t}\r\n\t\tAssert.isTrue(intDe !== null, \"unable to find dirEdge with Interior on RHS\");\r\n\t\tthis.visitLinkedDirectedEdges(intDe);\r\n\t},\r\n\tvisitShellInteriors: function (g, graph) {\r\n\t\tif (g instanceof Polygon) {\r\n\t\t\tvar p = g;\r\n\t\t\tthis.visitInteriorRing(p.getExteriorRing(), graph);\r\n\t\t}\r\n\t\tif (g instanceof MultiPolygon) {\r\n\t\t\tvar mp = g;\r\n\t\t\tfor (var i = 0; i < mp.getNumGeometries(); i++) {\r\n\t\t\t\tvar p = mp.getGeometryN(i);\r\n\t\t\t\tthis.visitInteriorRing(p.getExteriorRing(), graph);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.disconnectedRingcoord;\r\n\t},\r\n\tsetInteriorEdgesInResult: function (graph) {\r\n\t\tfor (var it = graph.getEdgeEnds().iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tif (de.getLabel().getLocation(0, Position.RIGHT) === Location.INTERIOR) {\r\n\t\t\t\tde.setInResult(true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tvisitLinkedDirectedEdges: function (start) {\r\n\t\tvar startDe = start;\r\n\t\tvar de = start;\r\n\t\tdo {\r\n\t\t\tAssert.isTrue(de !== null, \"found null Directed Edge\");\r\n\t\t\tde.setVisited(true);\r\n\t\t\tde = de.getNext();\r\n\t\t} while (de !== startDe);\r\n\t},\r\n\tbuildEdgeRings: function (dirEdges) {\r\n\t\tvar edgeRings = new ArrayList();\r\n\t\tfor (var it = dirEdges.iterator(); it.hasNext(); ) {\r\n\t\t\tvar de = it.next();\r\n\t\t\tif (de.isInResult() && de.getEdgeRing() === null) {\r\n\t\t\t\tvar er = new MaximalEdgeRing(de, this.geometryFactory);\r\n\t\t\t\ter.linkDirectedEdgesForMinimalEdgeRings();\r\n\t\t\t\tvar minEdgeRings = er.buildMinimalRings();\r\n\t\t\t\tedgeRings.addAll(minEdgeRings);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn edgeRings;\r\n\t},\r\n\thasUnvisitedShellEdge: function (edgeRings) {\r\n\t\tfor (var i = 0; i < edgeRings.size(); i++) {\r\n\t\t\tvar er = edgeRings.get(i);\r\n\t\t\tif (er.isHole()) continue;\r\n\t\t\tvar edges = er.getEdges();\r\n\t\t\tvar de = edges.get(0);\r\n\t\t\tif (de.getLabel().getLocation(0, Position.RIGHT) !== Location.INTERIOR) continue;\r\n\t\t\tfor (var j = 0; j < edges.size(); j++) {\r\n\t\t\t\tde = edges.get(j);\r\n\t\t\t\tif (!de.isVisited()) {\r\n\t\t\t\t\tthis.disconnectedRingcoord = de.getCoordinate();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tisInteriorsConnected: function () {\r\n\t\tvar splitEdges = new ArrayList();\r\n\t\tthis.geomGraph.computeSplitEdges(splitEdges);\r\n\t\tvar graph = new PlanarGraph(new OverlayNodeFactory());\r\n\t\tgraph.addEdges(splitEdges);\r\n\t\tthis.setInteriorEdgesInResult(graph);\r\n\t\tgraph.linkResultDirectedEdges();\r\n\t\tvar edgeRings = this.buildEdgeRings(graph.getEdgeEnds());\r\n\t\tthis.visitShellInteriors(this.geomGraph.getGeometry(), graph);\r\n\t\treturn !this.hasUnvisitedShellEdge(edgeRings);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ConnectedInteriorTester;\r\n\t}\r\n});\r\nConnectedInteriorTester.findDifferentPoint = function (coord, pt) {\r\n\tfor (var i = 0; i < coord.length; i++) {\r\n\t\tif (!coord[i].equals(pt)) return coord[i];\r\n\t}\r\n\treturn null;\r\n};\r\n","import EdgeEnd from '../../geomgraph/EdgeEnd';\r\nimport extend from '../../../../../extend';\r\nimport Label from '../../geomgraph/Label';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nexport default function EdgeEndBuilder() {}\r\nextend(EdgeEndBuilder.prototype, {\r\n\tcreateEdgeEndForNext: function (edge, l, eiCurr, eiNext) {\r\n\t\tvar iNext = eiCurr.segmentIndex + 1;\r\n\t\tif (iNext >= edge.getNumPoints() && eiNext === null) return null;\r\n\t\tvar pNext = edge.getCoordinate(iNext);\r\n\t\tif (eiNext !== null && eiNext.segmentIndex === eiCurr.segmentIndex) pNext = eiNext.coord;\r\n\t\tvar e = new EdgeEnd(edge, eiCurr.coord, pNext, new Label(edge.getLabel()));\r\n\t\tl.add(e);\r\n\t},\r\n\tcreateEdgeEndForPrev: function (edge, l, eiCurr, eiPrev) {\r\n\t\tvar iPrev = eiCurr.segmentIndex;\r\n\t\tif (eiCurr.dist === 0.0) {\r\n\t\t\tif (iPrev === 0) return null;\r\n\t\t\tiPrev--;\r\n\t\t}\r\n\t\tvar pPrev = edge.getCoordinate(iPrev);\r\n\t\tif (eiPrev !== null && eiPrev.segmentIndex >= iPrev) pPrev = eiPrev.coord;\r\n\t\tvar label = new Label(edge.getLabel());\r\n\t\tlabel.flip();\r\n\t\tvar e = new EdgeEnd(edge, eiCurr.coord, pPrev, label);\r\n\t\tl.add(e);\r\n\t},\r\n\tcomputeEdgeEnds: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet edges = arguments[0];\r\n\t\t\tvar l = new ArrayList();\r\n\t\t\tfor (var i = edges; i.hasNext(); ) {\r\n\t\t\t\tvar e = i.next();\r\n\t\t\t\tthis.computeEdgeEnds(e, l);\r\n\t\t\t}\r\n\t\t\treturn l;\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet edge = arguments[0], l = arguments[1];\r\n\t\t\tvar eiList = edge.getEdgeIntersectionList();\r\n\t\t\teiList.addEndpoints();\r\n\t\t\tvar it = eiList.iterator();\r\n\t\t\tvar eiPrev = null;\r\n\t\t\tvar eiCurr = null;\r\n\t\t\tif (!it.hasNext()) return null;\r\n\t\t\tvar eiNext = it.next();\r\n\t\t\tdo {\r\n\t\t\t\teiPrev = eiCurr;\r\n\t\t\t\teiCurr = eiNext;\r\n\t\t\t\teiNext = null;\r\n\t\t\t\tif (it.hasNext()) eiNext = it.next();\r\n\t\t\t\tif (eiCurr !== null) {\r\n\t\t\t\t\tthis.createEdgeEndForPrev(edge, l, eiCurr, eiPrev);\r\n\t\t\t\t\tthis.createEdgeEndForNext(edge, l, eiCurr, eiNext);\r\n\t\t\t\t}\r\n\t\t\t} while (eiCurr !== null);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeEndBuilder;\r\n\t}\r\n});\r\n","import Location from '../../geom/Location';\r\nimport EdgeEnd from '../../geomgraph/EdgeEnd';\r\nimport Position from '../../geomgraph/Position';\r\nimport extend from '../../../../../extend';\r\nimport GeometryGraph from '../../geomgraph/GeometryGraph';\r\nimport Label from '../../geomgraph/Label';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Edge from '../../geomgraph/Edge';\r\nimport inherits from '../../../../../inherits';\r\nexport default function EdgeEndBundle() {\r\n\tthis.edgeEnds = new ArrayList();\r\n\tif (arguments.length === 1) {\r\n\t\tlet e = arguments[0];\r\n\t\tEdgeEndBundle.call(this, null, e);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet boundaryNodeRule = arguments[0], e = arguments[1];\r\n\t\tEdgeEnd.call(this, e.getEdge(), e.getCoordinate(), e.getDirectedCoordinate(), new Label(e.getLabel()));\r\n\t\tthis.insert(e);\r\n\t}\r\n}\r\ninherits(EdgeEndBundle, EdgeEnd);\r\nextend(EdgeEndBundle.prototype, {\r\n\tinsert: function (e) {\r\n\t\tthis.edgeEnds.add(e);\r\n\t},\r\n\tprint: function (out) {\r\n\t\tout.println(\"EdgeEndBundle--> Label: \" + this.label);\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar ee = it.next();\r\n\t\t\tee.print(out);\r\n\t\t\tout.println();\r\n\t\t}\r\n\t},\r\n\titerator: function () {\r\n\t\treturn this.edgeEnds.iterator();\r\n\t},\r\n\tgetEdgeEnds: function () {\r\n\t\treturn this.edgeEnds;\r\n\t},\r\n\tcomputeLabelOn: function (geomIndex, boundaryNodeRule) {\r\n\t\tvar boundaryCount = 0;\r\n\t\tvar foundInterior = false;\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tvar loc = e.getLabel().getLocation(geomIndex);\r\n\t\t\tif (loc === Location.BOUNDARY) boundaryCount++;\r\n\t\t\tif (loc === Location.INTERIOR) foundInterior = true;\r\n\t\t}\r\n\t\tvar loc = Location.NONE;\r\n\t\tif (foundInterior) loc = Location.INTERIOR;\r\n\t\tif (boundaryCount > 0) {\r\n\t\t\tloc = GeometryGraph.determineBoundary(boundaryNodeRule, boundaryCount);\r\n\t\t}\r\n\t\tthis.label.setLocation(geomIndex, loc);\r\n\t},\r\n\tcomputeLabelSide: function (geomIndex, side) {\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tif (e.getLabel().isArea()) {\r\n\t\t\t\tvar loc = e.getLabel().getLocation(geomIndex, side);\r\n\t\t\t\tif (loc === Location.INTERIOR) {\r\n\t\t\t\t\tthis.label.setLocation(geomIndex, side, Location.INTERIOR);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else if (loc === Location.EXTERIOR) this.label.setLocation(geomIndex, side, Location.EXTERIOR);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetLabel: function () {\r\n\t\treturn this.label;\r\n\t},\r\n\tcomputeLabelSides: function (geomIndex) {\r\n\t\tthis.computeLabelSide(geomIndex, Position.LEFT);\r\n\t\tthis.computeLabelSide(geomIndex, Position.RIGHT);\r\n\t},\r\n\tupdateIM: function (im) {\r\n\t\tEdge.updateIM(this.label, im);\r\n\t},\r\n\tcomputeLabel: function (boundaryNodeRule) {\r\n\t\tvar isArea = false;\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar e = it.next();\r\n\t\t\tif (e.getLabel().isArea()) isArea = true;\r\n\t\t}\r\n\t\tif (isArea) this.label = new Label(Location.NONE, Location.NONE, Location.NONE); else this.label = new Label(Location.NONE);\r\n\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\tthis.computeLabelOn(i, boundaryNodeRule);\r\n\t\t\tif (isArea) this.computeLabelSides(i);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeEndBundle;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport EdgeEndStar from '../../geomgraph/EdgeEndStar';\r\nimport inherits from '../../../../../inherits';\r\nimport EdgeEndBundle from './EdgeEndBundle';\r\nexport default function EdgeEndBundleStar() {\r\n\tEdgeEndStar.apply(this);\r\n}\r\ninherits(EdgeEndBundleStar, EdgeEndStar);\r\nextend(EdgeEndBundleStar.prototype, {\r\n\tupdateIM: function (im) {\r\n\t\tfor (var it = this.iterator(); it.hasNext(); ) {\r\n\t\t\tvar esb = it.next();\r\n\t\t\tesb.updateIM(im);\r\n\t\t}\r\n\t},\r\n\tinsert: function (e) {\r\n\t\tvar eb = this.edgeMap.get(e);\r\n\t\tif (eb === null) {\r\n\t\t\teb = new EdgeEndBundle(e);\r\n\t\t\tthis.insertEdgeEnd(e, eb);\r\n\t\t} else {\r\n\t\t\teb.insert(e);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeEndBundleStar;\r\n\t}\r\n});\r\n","import Node from '../../geomgraph/Node';\r\nimport extend from '../../../../../extend';\r\nimport inherits from '../../../../../inherits';\r\nexport default function RelateNode() {\r\n\tlet coord = arguments[0], edges = arguments[1];\r\n\tNode.call(this, coord, edges);\r\n}\r\ninherits(RelateNode, Node);\r\nextend(RelateNode.prototype, {\r\n\tupdateIMFromEdges: function (im) {\r\n\t\tthis.edges.updateIM(im);\r\n\t},\r\n\tcomputeIM: function (im) {\r\n\t\tim.setAtLeastIfValid(this.label.getLocation(0), this.label.getLocation(1), 0);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RelateNode;\r\n\t}\r\n});\r\n","import EdgeEndBundleStar from './EdgeEndBundleStar';\r\nimport extend from '../../../../../extend';\r\nimport RelateNode from './RelateNode';\r\nimport inherits from '../../../../../inherits';\r\nimport NodeFactory from '../../geomgraph/NodeFactory';\r\nexport default function RelateNodeFactory() {\r\n\tNodeFactory.apply(this);\r\n}\r\ninherits(RelateNodeFactory, NodeFactory);\r\nextend(RelateNodeFactory.prototype, {\r\n\tcreateNode: function (coord) {\r\n\t\treturn new RelateNode(coord, new EdgeEndBundleStar());\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RelateNodeFactory;\r\n\t}\r\n});\r\n","import Location from '../../geom/Location';\r\nimport EdgeEndBuilder from './EdgeEndBuilder';\r\nimport extend from '../../../../../extend';\r\nimport NodeMap from '../../geomgraph/NodeMap';\r\nimport RelateNodeFactory from './RelateNodeFactory';\r\nexport default function RelateNodeGraph() {\r\n\tthis.nodes = new NodeMap(new RelateNodeFactory());\r\n}\r\nextend(RelateNodeGraph.prototype, {\r\n\tinsertEdgeEnds: function (ee) {\r\n\t\tfor (var i = ee.iterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tthis.nodes.add(e);\r\n\t\t}\r\n\t},\r\n\tgetNodeIterator: function () {\r\n\t\treturn this.nodes.iterator();\r\n\t},\r\n\tcopyNodesAndLabels: function (geomGraph, argIndex) {\r\n\t\tfor (var nodeIt = geomGraph.getNodeIterator(); nodeIt.hasNext(); ) {\r\n\t\t\tvar graphNode = nodeIt.next();\r\n\t\t\tvar newNode = this.nodes.addNode(graphNode.getCoordinate());\r\n\t\t\tnewNode.setLabel(argIndex, graphNode.getLabel().getLocation(argIndex));\r\n\t\t}\r\n\t},\r\n\tbuild: function (geomGraph) {\r\n\t\tthis.computeIntersectionNodes(geomGraph, 0);\r\n\t\tthis.copyNodesAndLabels(geomGraph, 0);\r\n\t\tvar eeBuilder = new EdgeEndBuilder();\r\n\t\tvar eeList = eeBuilder.computeEdgeEnds(geomGraph.getEdgeIterator());\r\n\t\tthis.insertEdgeEnds(eeList);\r\n\t},\r\n\tcomputeIntersectionNodes: function (geomGraph, argIndex) {\r\n\t\tfor (var edgeIt = geomGraph.getEdgeIterator(); edgeIt.hasNext(); ) {\r\n\t\t\tvar e = edgeIt.next();\r\n\t\t\tvar eLoc = e.getLabel().getLocation(argIndex);\r\n\t\t\tfor (var eiIt = e.getEdgeIntersectionList().iterator(); eiIt.hasNext(); ) {\r\n\t\t\t\tvar ei = eiIt.next();\r\n\t\t\t\tvar n = this.nodes.addNode(ei.coord);\r\n\t\t\t\tif (eLoc === Location.BOUNDARY) n.setLabelBoundary(argIndex); else {\r\n\t\t\t\t\tif (n.getLabel().isNull(argIndex)) n.setLabel(argIndex, Location.INTERIOR);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RelateNodeGraph;\r\n\t}\r\n});\r\n","import RelateNodeGraph from '../relate/RelateNodeGraph';\r\nimport extend from '../../../../../extend';\r\nimport RobustLineIntersector from '../../algorithm/RobustLineIntersector';\r\nexport default function ConsistentAreaTester() {\r\n\tthis.li = new RobustLineIntersector();\r\n\tthis.geomGraph = null;\r\n\tthis.nodeGraph = new RelateNodeGraph();\r\n\tthis.invalidPoint = null;\r\n\tlet geomGraph = arguments[0];\r\n\tthis.geomGraph = geomGraph;\r\n}\r\nextend(ConsistentAreaTester.prototype, {\r\n\tisNodeEdgeAreaLabelsConsistent: function () {\r\n\t\tfor (var nodeIt = this.nodeGraph.getNodeIterator(); nodeIt.hasNext(); ) {\r\n\t\t\tvar node = nodeIt.next();\r\n\t\t\tif (!node.getEdges().isAreaLabelsConsistent(this.geomGraph)) {\r\n\t\t\t\tthis.invalidPoint = node.getCoordinate().copy();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tgetInvalidPoint: function () {\r\n\t\treturn this.invalidPoint;\r\n\t},\r\n\thasDuplicateRings: function () {\r\n\t\tfor (var nodeIt = this.nodeGraph.getNodeIterator(); nodeIt.hasNext(); ) {\r\n\t\t\tvar node = nodeIt.next();\r\n\t\t\tfor (var i = node.getEdges().iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar eeb = i.next();\r\n\t\t\t\tif (eeb.getEdgeEnds().size() > 1) {\r\n\t\t\t\t\tthis.invalidPoint = eeb.getEdge().getCoordinate(0);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tisNodeConsistentArea: function () {\r\n\t\tvar intersector = this.geomGraph.computeSelfNodes(this.li, true, true);\r\n\t\tif (intersector.hasProperIntersection()) {\r\n\t\t\tthis.invalidPoint = intersector.getProperIntersectionPoint();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.nodeGraph.build(this.geomGraph);\r\n\t\treturn this.isNodeEdgeAreaLabelsConsistent();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ConsistentAreaTester;\r\n\t}\r\n});\r\n","import CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport STRtree from '../../index/strtree/STRtree';\r\nimport IsValidOp from './IsValidOp';\r\nimport extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Envelope from '../../geom/Envelope';\r\nexport default function IndexedNestedRingTester() {\r\n\tthis.graph = null;\r\n\tthis.rings = new ArrayList();\r\n\tthis.totalEnv = new Envelope();\r\n\tthis.index = null;\r\n\tthis.nestedPt = null;\r\n\tlet graph = arguments[0];\r\n\tthis.graph = graph;\r\n}\r\nextend(IndexedNestedRingTester.prototype, {\r\n\tbuildIndex: function () {\r\n\t\tthis.index = new STRtree();\r\n\t\tfor (var i = 0; i < this.rings.size(); i++) {\r\n\t\t\tvar ring = this.rings.get(i);\r\n\t\t\tvar env = ring.getEnvelopeInternal();\r\n\t\t\tthis.index.insert(env, ring);\r\n\t\t}\r\n\t},\r\n\tgetNestedPoint: function () {\r\n\t\treturn this.nestedPt;\r\n\t},\r\n\tisNonNested: function () {\r\n\t\tthis.buildIndex();\r\n\t\tfor (var i = 0; i < this.rings.size(); i++) {\r\n\t\t\tvar innerRing = this.rings.get(i);\r\n\t\t\tvar innerRingPts = innerRing.getCoordinates();\r\n\t\t\tvar results = this.index.query(innerRing.getEnvelopeInternal());\r\n\t\t\tfor (var j = 0; j < results.size(); j++) {\r\n\t\t\t\tvar searchRing = results.get(j);\r\n\t\t\t\tvar searchRingPts = searchRing.getCoordinates();\r\n\t\t\t\tif (innerRing === searchRing) continue;\r\n\t\t\t\tif (!innerRing.getEnvelopeInternal().intersects(searchRing.getEnvelopeInternal())) continue;\r\n\t\t\t\tvar innerRingPt = IsValidOp.findPtNotNode(innerRingPts, searchRing, this.graph);\r\n\t\t\t\tif (innerRingPt === null) continue;\r\n\t\t\t\tvar isInside = CGAlgorithms.isPointInRing(innerRingPt, searchRingPts);\r\n\t\t\t\tif (isInside) {\r\n\t\t\t\t\tthis.nestedPt = innerRingPt;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tadd: function (ring) {\r\n\t\tthis.rings.add(ring);\r\n\t\tthis.totalEnv.expandToInclude(ring.getEnvelopeInternal());\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IndexedNestedRingTester;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nexport default function TopologyValidationError() {\r\n\tthis.errorType = null;\r\n\tthis.pt = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet errorType = arguments[0];\r\n\t\tTopologyValidationError.call(this, errorType, null);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet errorType = arguments[0], pt = arguments[1];\r\n\t\tthis.errorType = errorType;\r\n\t\tif (pt !== null) this.pt = pt.copy();\r\n\t}\r\n}\r\nextend(TopologyValidationError.prototype, {\r\n\tgetErrorType: function () {\r\n\t\treturn this.errorType;\r\n\t},\r\n\tgetMessage: function () {\r\n\t\treturn TopologyValidationError.errMsg[this.errorType];\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.pt;\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar locStr = \"\";\r\n\t\tif (this.pt !== null) locStr = \" at or near point \" + this.pt;\r\n\t\treturn this.getMessage() + locStr;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TopologyValidationError;\r\n\t}\r\n});\r\nTopologyValidationError.ERROR = 0;\r\nTopologyValidationError.REPEATED_POINT = 1;\r\nTopologyValidationError.HOLE_OUTSIDE_SHELL = 2;\r\nTopologyValidationError.NESTED_HOLES = 3;\r\nTopologyValidationError.DISCONNECTED_INTERIOR = 4;\r\nTopologyValidationError.SELF_INTERSECTION = 5;\r\nTopologyValidationError.RING_SELF_INTERSECTION = 6;\r\nTopologyValidationError.NESTED_SHELLS = 7;\r\nTopologyValidationError.DUPLICATE_RINGS = 8;\r\nTopologyValidationError.TOO_FEW_POINTS = 9;\r\nTopologyValidationError.INVALID_COORDINATE = 10;\r\nTopologyValidationError.RING_NOT_CLOSED = 11;\r\nTopologyValidationError.errMsg = [\"Topology Validation Error\", \"Repeated Point\", \"Hole lies outside shell\", \"Holes are nested\", \"Interior is disconnected\", \"Self-intersection\", \"Ring Self-intersection\", \"Nested shells\", \"Duplicate Rings\", \"Too few distinct points in geometry component\", \"Invalid Coordinate\", \"Ring is not closed\"];\r\n","import TreeSet from '../../../../../java/util/TreeSet';\r\nimport LineString from '../../geom/LineString';\r\nimport CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport Geometry from '../../geom/Geometry';\r\nimport ConnectedInteriorTester from './ConnectedInteriorTester';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport Point from '../../geom/Point';\r\nimport Polygon from '../../geom/Polygon';\r\nimport MultiPoint from '../../geom/MultiPoint';\r\nimport LinearRing from '../../geom/LinearRing';\r\nimport Double from '../../../../../java/lang/Double';\r\nimport extend from '../../../../../extend';\r\nimport MCPointInRing from '../../algorithm/MCPointInRing';\r\nimport GeometryGraph from '../../geomgraph/GeometryGraph';\r\nimport MultiPolygon from '../../geom/MultiPolygon';\r\nimport ConsistentAreaTester from './ConsistentAreaTester';\r\nimport GeometryCollection from '../../geom/GeometryCollection';\r\nimport IndexedNestedRingTester from './IndexedNestedRingTester';\r\nimport RobustLineIntersector from '../../algorithm/RobustLineIntersector';\r\nimport TopologyValidationError from './TopologyValidationError';\r\nimport Assert from '../../util/Assert';\r\nexport default function IsValidOp() {\r\n\tthis.parentGeometry = null;\r\n\tthis.isSelfTouchingRingFormingHoleValid = false;\r\n\tthis.validErr = null;\r\n\tlet parentGeometry = arguments[0];\r\n\tthis.parentGeometry = parentGeometry;\r\n}\r\nextend(IsValidOp.prototype, {\r\n\tcheckInvalidCoordinates: function () {\r\n\t\tif (arguments[0] instanceof Array) {\r\n\t\t\tlet coords = arguments[0];\r\n\t\t\tfor (var i = 0; i < coords.length; i++) {\r\n\t\t\t\tif (!IsValidOp.isValid(coords[i])) {\r\n\t\t\t\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.INVALID_COORDINATE, coords[i]);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof Polygon) {\r\n\t\t\tlet poly = arguments[0];\r\n\t\t\tthis.checkInvalidCoordinates(poly.getExteriorRing().getCoordinates());\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tfor (var i = 0; i < poly.getNumInteriorRing(); i++) {\r\n\t\t\t\tthis.checkInvalidCoordinates(poly.getInteriorRingN(i).getCoordinates());\r\n\t\t\t\tif (this.validErr !== null) return null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcheckHolesNotNested: function (p, graph) {\r\n\t\tvar nestedTester = new IndexedNestedRingTester(graph);\r\n\t\tfor (var i = 0; i < p.getNumInteriorRing(); i++) {\r\n\t\t\tvar innerHole = p.getInteriorRingN(i);\r\n\t\t\tnestedTester.add(innerHole);\r\n\t\t}\r\n\t\tvar isNonNested = nestedTester.isNonNested();\r\n\t\tif (!isNonNested) {\r\n\t\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.NESTED_HOLES, nestedTester.getNestedPoint());\r\n\t\t}\r\n\t},\r\n\tcheckConsistentArea: function (graph) {\r\n\t\tvar cat = new ConsistentAreaTester(graph);\r\n\t\tvar isValidArea = cat.isNodeConsistentArea();\r\n\t\tif (!isValidArea) {\r\n\t\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.SELF_INTERSECTION, cat.getInvalidPoint());\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (cat.hasDuplicateRings()) {\r\n\t\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.DUPLICATE_RINGS, cat.getInvalidPoint());\r\n\t\t}\r\n\t},\r\n\tisValid: function () {\r\n\t\tthis.checkValid(this.parentGeometry);\r\n\t\treturn this.validErr === null;\r\n\t},\r\n\tcheckShellInsideHole: function (shell, hole, graph) {\r\n\t\tvar shellPts = shell.getCoordinates();\r\n\t\tvar holePts = hole.getCoordinates();\r\n\t\tvar shellPt = IsValidOp.findPtNotNode(shellPts, hole, graph);\r\n\t\tif (shellPt !== null) {\r\n\t\t\tvar insideHole = CGAlgorithms.isPointInRing(shellPt, holePts);\r\n\t\t\tif (!insideHole) {\r\n\t\t\t\treturn shellPt;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar holePt = IsValidOp.findPtNotNode(holePts, shell, graph);\r\n\t\tif (holePt !== null) {\r\n\t\t\tvar insideShell = CGAlgorithms.isPointInRing(holePt, shellPts);\r\n\t\t\tif (insideShell) {\r\n\t\t\t\treturn holePt;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tAssert.shouldNeverReachHere(\"points in shell and hole appear to be equal\");\r\n\t\treturn null;\r\n\t},\r\n\tcheckNoSelfIntersectingRings: function (graph) {\r\n\t\tfor (var i = graph.getEdgeIterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tthis.checkNoSelfIntersectingRing(e.getEdgeIntersectionList());\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t}\r\n\t},\r\n\tcheckConnectedInteriors: function (graph) {\r\n\t\tvar cit = new ConnectedInteriorTester(graph);\r\n\t\tif (!cit.isInteriorsConnected()) this.validErr = new TopologyValidationError(TopologyValidationError.DISCONNECTED_INTERIOR, cit.getCoordinate());\r\n\t},\r\n\tcheckNoSelfIntersectingRing: function (eiList) {\r\n\t\tvar nodeSet = new TreeSet();\r\n\t\tvar isFirst = true;\r\n\t\tfor (var i = eiList.iterator(); i.hasNext(); ) {\r\n\t\t\tvar ei = i.next();\r\n\t\t\tif (isFirst) {\r\n\t\t\t\tisFirst = false;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (nodeSet.contains(ei.coord)) {\r\n\t\t\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.RING_SELF_INTERSECTION, ei.coord);\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\tnodeSet.add(ei.coord);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcheckHolesInShell: function (p, graph) {\r\n\t\tvar shell = p.getExteriorRing();\r\n\t\tvar pir = new MCPointInRing(shell);\r\n\t\tfor (var i = 0; i < p.getNumInteriorRing(); i++) {\r\n\t\t\tvar hole = p.getInteriorRingN(i);\r\n\t\t\tvar holePt = IsValidOp.findPtNotNode(hole.getCoordinates(), shell, graph);\r\n\t\t\tif (holePt === null) return null;\r\n\t\t\tvar outside = !pir.isInside(holePt);\r\n\t\t\tif (outside) {\r\n\t\t\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.HOLE_OUTSIDE_SHELL, holePt);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcheckTooFewPoints: function (graph) {\r\n\t\tif (graph.hasTooFewPoints()) {\r\n\t\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.TOO_FEW_POINTS, graph.getInvalidPoint());\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetValidationError: function () {\r\n\t\tthis.checkValid(this.parentGeometry);\r\n\t\treturn this.validErr;\r\n\t},\r\n\tcheckValid: function () {\r\n\t\tif (arguments[0] instanceof Point) {\r\n\t\t\tlet g = arguments[0];\r\n\t\t\tthis.checkInvalidCoordinates(g.getCoordinates());\r\n\t\t} else if (arguments[0] instanceof MultiPoint) {\r\n\t\t\tlet g = arguments[0];\r\n\t\t\tthis.checkInvalidCoordinates(g.getCoordinates());\r\n\t\t} else if (arguments[0] instanceof LinearRing) {\r\n\t\t\tlet g = arguments[0];\r\n\t\t\tthis.checkInvalidCoordinates(g.getCoordinates());\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tthis.checkClosedRing(g);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tvar graph = new GeometryGraph(0, g);\r\n\t\t\tthis.checkTooFewPoints(graph);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tvar li = new RobustLineIntersector();\r\n\t\t\tgraph.computeSelfNodes(li, true, true);\r\n\t\t\tthis.checkNoSelfIntersectingRings(graph);\r\n\t\t} else if (arguments[0] instanceof LineString) {\r\n\t\t\tlet g = arguments[0];\r\n\t\t\tthis.checkInvalidCoordinates(g.getCoordinates());\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tvar graph = new GeometryGraph(0, g);\r\n\t\t\tthis.checkTooFewPoints(graph);\r\n\t\t} else if (arguments[0] instanceof Polygon) {\r\n\t\t\tlet g = arguments[0];\r\n\t\t\tthis.checkInvalidCoordinates(g);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tthis.checkClosedRings(g);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tvar graph = new GeometryGraph(0, g);\r\n\t\t\tthis.checkTooFewPoints(graph);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tthis.checkConsistentArea(graph);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tif (!this.isSelfTouchingRingFormingHoleValid) {\r\n\t\t\t\tthis.checkNoSelfIntersectingRings(graph);\r\n\t\t\t\tif (this.validErr !== null) return null;\r\n\t\t\t}\r\n\t\t\tthis.checkHolesInShell(g, graph);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tthis.checkHolesNotNested(g, graph);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tthis.checkConnectedInteriors(graph);\r\n\t\t} else if (arguments[0] instanceof MultiPolygon) {\r\n\t\t\tlet g = arguments[0];\r\n\t\t\tfor (var i = 0; i < g.getNumGeometries(); i++) {\r\n\t\t\t\tvar p = g.getGeometryN(i);\r\n\t\t\t\tthis.checkInvalidCoordinates(p);\r\n\t\t\t\tif (this.validErr !== null) return null;\r\n\t\t\t\tthis.checkClosedRings(p);\r\n\t\t\t\tif (this.validErr !== null) return null;\r\n\t\t\t}\r\n\t\t\tvar graph = new GeometryGraph(0, g);\r\n\t\t\tthis.checkTooFewPoints(graph);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tthis.checkConsistentArea(graph);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tif (!this.isSelfTouchingRingFormingHoleValid) {\r\n\t\t\t\tthis.checkNoSelfIntersectingRings(graph);\r\n\t\t\t\tif (this.validErr !== null) return null;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < g.getNumGeometries(); i++) {\r\n\t\t\t\tvar p = g.getGeometryN(i);\r\n\t\t\t\tthis.checkHolesInShell(p, graph);\r\n\t\t\t\tif (this.validErr !== null) return null;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < g.getNumGeometries(); i++) {\r\n\t\t\t\tvar p = g.getGeometryN(i);\r\n\t\t\t\tthis.checkHolesNotNested(p, graph);\r\n\t\t\t\tif (this.validErr !== null) return null;\r\n\t\t\t}\r\n\t\t\tthis.checkShellsNotNested(g, graph);\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t\tthis.checkConnectedInteriors(graph);\r\n\t\t} else if (arguments[0] instanceof GeometryCollection) {\r\n\t\t\tlet gc = arguments[0];\r\n\t\t\tfor (var i = 0; i < gc.getNumGeometries(); i++) {\r\n\t\t\t\tvar g = gc.getGeometryN(i);\r\n\t\t\t\tthis.checkValid(g);\r\n\t\t\t\tif (this.validErr !== null) return null;\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof Geometry) {\r\n\t\t\tlet g = arguments[0];\r\n\t\t\tthis.validErr = null;\r\n\t\t\tif (g.isEmpty()) return null;\r\n\t\t\tif (g instanceof Point) this.checkValid(g); else if (g instanceof MultiPoint) this.checkValid(g); else if (g instanceof LinearRing) this.checkValid(g); else if (g instanceof LineString) this.checkValid(g); else if (g instanceof Polygon) this.checkValid(g); else if (g instanceof MultiPolygon) this.checkValid(g); else if (g instanceof GeometryCollection) this.checkValid(g); else throw new UnsupportedOperationException(g.getClass().getName());\r\n\t\t}\r\n\t},\r\n\tsetSelfTouchingRingFormingHoleValid: function (isValid) {\r\n\t\tthis.isSelfTouchingRingFormingHoleValid = isValid;\r\n\t},\r\n\tcheckShellNotNested: function (shell, p, graph) {\r\n\t\tvar shellPts = shell.getCoordinates();\r\n\t\tvar polyShell = p.getExteriorRing();\r\n\t\tvar polyPts = polyShell.getCoordinates();\r\n\t\tvar shellPt = IsValidOp.findPtNotNode(shellPts, polyShell, graph);\r\n\t\tif (shellPt === null) return null;\r\n\t\tvar insidePolyShell = CGAlgorithms.isPointInRing(shellPt, polyPts);\r\n\t\tif (!insidePolyShell) return null;\r\n\t\tif (p.getNumInteriorRing() <= 0) {\r\n\t\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.NESTED_SHELLS, shellPt);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar badNestedPt = null;\r\n\t\tfor (var i = 0; i < p.getNumInteriorRing(); i++) {\r\n\t\t\tvar hole = p.getInteriorRingN(i);\r\n\t\t\tbadNestedPt = this.checkShellInsideHole(shell, hole, graph);\r\n\t\t\tif (badNestedPt === null) return null;\r\n\t\t}\r\n\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.NESTED_SHELLS, badNestedPt);\r\n\t},\r\n\tcheckClosedRings: function (poly) {\r\n\t\tthis.checkClosedRing(poly.getExteriorRing());\r\n\t\tif (this.validErr !== null) return null;\r\n\t\tfor (var i = 0; i < poly.getNumInteriorRing(); i++) {\r\n\t\t\tthis.checkClosedRing(poly.getInteriorRingN(i));\r\n\t\t\tif (this.validErr !== null) return null;\r\n\t\t}\r\n\t},\r\n\tcheckClosedRing: function (ring) {\r\n\t\tif (!ring.isClosed()) {\r\n\t\t\tvar pt = null;\r\n\t\t\tif (ring.getNumPoints() >= 1) pt = ring.getCoordinateN(0);\r\n\t\t\tthis.validErr = new TopologyValidationError(TopologyValidationError.RING_NOT_CLOSED, pt);\r\n\t\t}\r\n\t},\r\n\tcheckShellsNotNested: function (mp, graph) {\r\n\t\tfor (var i = 0; i < mp.getNumGeometries(); i++) {\r\n\t\t\tvar p = mp.getGeometryN(i);\r\n\t\t\tvar shell = p.getExteriorRing();\r\n\t\t\tfor (var j = 0; j < mp.getNumGeometries(); j++) {\r\n\t\t\t\tif (i === j) continue;\r\n\t\t\t\tvar p2 = mp.getGeometryN(j);\r\n\t\t\t\tthis.checkShellNotNested(shell, p2, graph);\r\n\t\t\t\tif (this.validErr !== null) return null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IsValidOp;\r\n\t}\r\n});\r\nIsValidOp.findPtNotNode = function (testCoords, searchRing, graph) {\r\n\tvar searchEdge = graph.findEdge(searchRing);\r\n\tvar eiList = searchEdge.getEdgeIntersectionList();\r\n\tfor (var i = 0; i < testCoords.length; i++) {\r\n\t\tvar pt = testCoords[i];\r\n\t\tif (!eiList.isIntersection(pt)) return pt;\r\n\t}\r\n\treturn null;\r\n};\r\nIsValidOp.isValid = function () {\r\n\tif (arguments[0] instanceof Geometry) {\r\n\t\tlet geom = arguments[0];\r\n\t\tvar isValidOp = new IsValidOp(geom);\r\n\t\treturn isValidOp.isValid();\r\n\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\tlet coord = arguments[0];\r\n\t\tif (Double.isNaN(coord.x)) return false;\r\n\t\tif (Double.isInfinite(coord.x)) return false;\r\n\t\tif (Double.isNaN(coord.y)) return false;\r\n\t\tif (Double.isInfinite(coord.y)) return false;\r\n\t\treturn true;\r\n\t}\r\n};\r\n","import CGAlgorithms from '../../algorithm/CGAlgorithms';\r\nimport CoordinateList from '../../geom/CoordinateList';\r\nimport WKTWriter from '../../io/WKTWriter';\r\nimport CoordinateArraySequence from '../../geom/impl/CoordinateArraySequence';\r\nimport IsValidOp from '../valid/IsValidOp';\r\nimport LinearRing from '../../geom/LinearRing';\r\nimport extend from '../../../../../extend';\r\nimport Exception from '../../../../../java/lang/Exception';\r\nimport System from '../../../../../java/lang/System';\r\nimport CoordinateArrays from '../../geom/CoordinateArrays';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Comparator from '../../../../../java/util/Comparator';\r\nimport Assert from '../../util/Assert';\r\nexport default function EdgeRing() {\r\n\tthis.factory = null;\r\n\tthis.deList = new ArrayList();\r\n\tthis.lowestEdge = null;\r\n\tthis.ring = null;\r\n\tthis.ringPts = null;\r\n\tthis.holes = null;\r\n\tthis.shell = null;\r\n\tthis._isHole = null;\r\n\tthis._isProcessed = false;\r\n\tthis._isIncludedSet = false;\r\n\tthis._isIncluded = false;\r\n\tlet factory = arguments[0];\r\n\tthis.factory = factory;\r\n}\r\nextend(EdgeRing.prototype, {\r\n\tisIncluded: function () {\r\n\t\treturn this._isIncluded;\r\n\t},\r\n\tgetCoordinates: function () {\r\n\t\tif (this.ringPts === null) {\r\n\t\t\tvar coordList = new CoordinateList();\r\n\t\t\tfor (var i = this.deList.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar de = i.next();\r\n\t\t\t\tvar edge = de.getEdge();\r\n\t\t\t\tEdgeRing.addEdge(edge.getLine().getCoordinates(), de.getEdgeDirection(), coordList);\r\n\t\t\t}\r\n\t\t\tthis.ringPts = coordList.toCoordinateArray();\r\n\t\t}\r\n\t\treturn this.ringPts;\r\n\t},\r\n\tisIncludedSet: function () {\r\n\t\treturn this._isIncludedSet;\r\n\t},\r\n\tisValid: function () {\r\n\t\tthis.getCoordinates();\r\n\t\tif (this.ringPts.length <= 3) return false;\r\n\t\tthis.getRing();\r\n\t\treturn IsValidOp.isValid(this.ring);\r\n\t},\r\n\tbuild: function (startDE) {\r\n\t\tvar de = startDE;\r\n\t\tdo {\r\n\t\t\tthis.add(de);\r\n\t\t\tde.setRing(this);\r\n\t\t\tde = de.getNext();\r\n\t\t\tAssert.isTrue(de !== null, \"found null DE in ring\");\r\n\t\t\tAssert.isTrue(de === startDE || !de.isInRing(), \"found DE already in ring\");\r\n\t\t} while (de !== startDE);\r\n\t},\r\n\tisOuterHole: function () {\r\n\t\tif (!this._isHole) return false;\r\n\t\treturn !this.hasShell();\r\n\t},\r\n\tgetPolygon: function () {\r\n\t\tvar holeLR = null;\r\n\t\tif (this.holes !== null) {\r\n\t\t\tholeLR = new Array(this.holes.size()).fill(null);\r\n\t\t\tfor (var i = 0; i < this.holes.size(); i++) {\r\n\t\t\t\tholeLR[i] = this.holes.get(i);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar poly = this.factory.createPolygon(this.ring, holeLR);\r\n\t\treturn poly;\r\n\t},\r\n\tisHole: function () {\r\n\t\treturn this._isHole;\r\n\t},\r\n\tisProcessed: function () {\r\n\t\treturn this._isProcessed;\r\n\t},\r\n\taddHole: function () {\r\n\t\tif (arguments[0] instanceof LinearRing) {\r\n\t\t\tlet hole = arguments[0];\r\n\t\t\tif (this.holes === null) this.holes = new ArrayList();\r\n\t\t\tthis.holes.add(hole);\r\n\t\t} else if (arguments[0] instanceof EdgeRing) {\r\n\t\t\tlet holeER = arguments[0];\r\n\t\t\tholeER.setShell(this);\r\n\t\t\tvar hole = holeER.getRing();\r\n\t\t\tif (this.holes === null) this.holes = new ArrayList();\r\n\t\t\tthis.holes.add(hole);\r\n\t\t}\r\n\t},\r\n\tsetIncluded: function (isIncluded) {\r\n\t\tthis._isIncluded = isIncluded;\r\n\t\tthis._isIncludedSet = true;\r\n\t},\r\n\tgetOuterHole: function () {\r\n\t\tif (this.isHole()) return null;\r\n\t\tfor (var i = 0; i < this.deList.size(); i++) {\r\n\t\t\tvar de = this.deList.get(i);\r\n\t\t\tvar adjRing = de.getSym().getRing();\r\n\t\t\tif (adjRing.isOuterHole()) return adjRing;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tcomputeHole: function () {\r\n\t\tvar ring = this.getRing();\r\n\t\tthis._isHole = CGAlgorithms.isCCW(ring.getCoordinates());\r\n\t},\r\n\thasShell: function () {\r\n\t\treturn this.shell !== null;\r\n\t},\r\n\tisOuterShell: function () {\r\n\t\treturn this.getOuterHole() !== null;\r\n\t},\r\n\tgetLineString: function () {\r\n\t\tthis.getCoordinates();\r\n\t\treturn this.factory.createLineString(this.ringPts);\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn WKTWriter.toLineString(new CoordinateArraySequence(this.getCoordinates()));\r\n\t},\r\n\tgetShell: function () {\r\n\t\tif (this.isHole()) return this.shell;\r\n\t\treturn this;\r\n\t},\r\n\tadd: function (de) {\r\n\t\tthis.deList.add(de);\r\n\t},\r\n\tgetRing: function () {\r\n\t\tif (this.ring !== null) return this.ring;\r\n\t\tthis.getCoordinates();\r\n\t\tif (this.ringPts.length < 3) System.out.println(this.ringPts);\r\n\t\ttry {\r\n\t\t\tthis.ring = this.factory.createLinearRing(this.ringPts);\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex instanceof Exception) {\r\n\t\t\t\tSystem.out.println(this.ringPts);\r\n\t\t\t} else throw ex;\r\n\t\t} finally {}\r\n\t\treturn this.ring;\r\n\t},\r\n\tupdateIncluded: function () {\r\n\t\tif (this.isHole()) return null;\r\n\t\tfor (var i = 0; i < this.deList.size(); i++) {\r\n\t\t\tvar de = this.deList.get(i);\r\n\t\t\tvar adjShell = de.getSym().getRing().getShell();\r\n\t\t\tif (adjShell !== null && adjShell.isIncludedSet()) {\r\n\t\t\t\tthis.setIncluded(!adjShell.isIncluded());\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tsetShell: function (shell) {\r\n\t\tthis.shell = shell;\r\n\t},\r\n\tsetProcessed: function (isProcessed) {\r\n\t\tthis._isProcessed = isProcessed;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EdgeRing;\r\n\t}\r\n});\r\nEdgeRing.findDirEdgesInRing = function (startDE) {\r\n\tvar de = startDE;\r\n\tvar edges = new ArrayList();\r\n\tdo {\r\n\t\tedges.add(de);\r\n\t\tde = de.getNext();\r\n\t\tAssert.isTrue(de !== null, \"found null DE in ring\");\r\n\t\tAssert.isTrue(de === startDE || !de.isInRing(), \"found DE already in ring\");\r\n\t} while (de !== startDE);\r\n\treturn edges;\r\n};\r\nEdgeRing.addEdge = function (coords, isForward, coordList) {\r\n\tif (isForward) {\r\n\t\tfor (var i = 0; i < coords.length; i++) {\r\n\t\t\tcoordList.add(coords[i], false);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (var i = coords.length - 1; i >= 0; i--) {\r\n\t\t\tcoordList.add(coords[i], false);\r\n\t\t}\r\n\t}\r\n};\r\nEdgeRing.findEdgeRingContaining = function (testEr, shellList) {\r\n\tvar testRing = testEr.getRing();\r\n\tvar testEnv = testRing.getEnvelopeInternal();\r\n\tvar testPt = testRing.getCoordinateN(0);\r\n\tvar minShell = null;\r\n\tvar minShellEnv = null;\r\n\tfor (var it = shellList.iterator(); it.hasNext(); ) {\r\n\t\tvar tryShell = it.next();\r\n\t\tvar tryShellRing = tryShell.getRing();\r\n\t\tvar tryShellEnv = tryShellRing.getEnvelopeInternal();\r\n\t\tif (tryShellEnv.equals(testEnv)) continue;\r\n\t\tif (!tryShellEnv.contains(testEnv)) continue;\r\n\t\ttestPt = CoordinateArrays.ptNotInList(testRing.getCoordinates(), tryShellRing.getCoordinates());\r\n\t\tvar isContained = false;\r\n\t\tif (CGAlgorithms.isPointInRing(testPt, tryShellRing.getCoordinates())) isContained = true;\r\n\t\tif (isContained) {\r\n\t\t\tif (minShell === null || minShellEnv.contains(tryShellEnv)) {\r\n\t\t\t\tminShell = tryShell;\r\n\t\t\t\tminShellEnv = minShell.getRing().getEnvelopeInternal();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn minShell;\r\n};\r\nfunction EnvelopeComparator() {}\r\nextend(EnvelopeComparator.prototype, {\r\n\tcompare: function (obj0, obj1) {\r\n\t\tvar r0 = obj0;\r\n\t\tvar r1 = obj1;\r\n\t\treturn r0.getRing().getEnvelope().compareTo(r1.getRing().getEnvelope());\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [Comparator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EnvelopeComparator;\r\n\t}\r\n});\r\nEdgeRing.EnvelopeComparator = EnvelopeComparator;\r\n","import PolygonizeDirectedEdge from './PolygonizeDirectedEdge';\r\nimport HashSet from '../../../../../java/util/HashSet';\r\nimport Stack from '../../../../../java/util/Stack';\r\nimport Node from '../../planargraph/Node';\r\nimport PolygonizeEdge from './PolygonizeEdge';\r\nimport extend from '../../../../../extend';\r\nimport EdgeRing from './EdgeRing';\r\nimport CoordinateArrays from '../../geom/CoordinateArrays';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Assert from '../../util/Assert';\r\nimport inherits from '../../../../../inherits';\r\nimport PlanarGraph from '../../planargraph/PlanarGraph';\r\nexport default function PolygonizeGraph() {\r\n\tPlanarGraph.apply(this);\r\n\tthis.factory = null;\r\n\tlet factory = arguments[0];\r\n\tthis.factory = factory;\r\n}\r\ninherits(PolygonizeGraph, PlanarGraph);\r\nextend(PolygonizeGraph.prototype, {\r\n\tfindEdgeRing: function (startDE) {\r\n\t\tvar er = new EdgeRing(this.factory);\r\n\t\ter.build(startDE);\r\n\t\treturn er;\r\n\t},\r\n\tcomputeDepthParity: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\twhile (true) {\r\n\t\t\t\tvar de = null;\r\n\t\t\t\tif (de === null) return null;\r\n\t\t\t\tthis.computeDepthParity(de);\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet de = arguments[0];\r\n\t\t}\r\n\t},\r\n\tcomputeNextCWEdges: function () {\r\n\t\tfor (var iNode = this.nodeIterator(); iNode.hasNext(); ) {\r\n\t\t\tvar node = iNode.next();\r\n\t\t\tPolygonizeGraph.computeNextCWEdges(node);\r\n\t\t}\r\n\t},\r\n\taddEdge: function (line) {\r\n\t\tif (line.isEmpty()) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar linePts = CoordinateArrays.removeRepeatedPoints(line.getCoordinates());\r\n\t\tif (linePts.length < 2) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar startPt = linePts[0];\r\n\t\tvar endPt = linePts[linePts.length - 1];\r\n\t\tvar nStart = this.getNode(startPt);\r\n\t\tvar nEnd = this.getNode(endPt);\r\n\t\tvar de0 = new PolygonizeDirectedEdge(nStart, nEnd, linePts[1], true);\r\n\t\tvar de1 = new PolygonizeDirectedEdge(nEnd, nStart, linePts[linePts.length - 2], false);\r\n\t\tvar edge = new PolygonizeEdge(line);\r\n\t\tedge.setDirectedEdges(de0, de1);\r\n\t\tthis.add(edge);\r\n\t},\r\n\tdeleteCutEdges: function () {\r\n\t\tthis.computeNextCWEdges();\r\n\t\tPolygonizeGraph.findLabeledEdgeRings(this.dirEdges);\r\n\t\tvar cutLines = new ArrayList();\r\n\t\tfor (var i = this.dirEdges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar de = i.next();\r\n\t\t\tif (de.isMarked()) continue;\r\n\t\t\tvar sym = de.getSym();\r\n\t\t\tif (de.getLabel() === sym.getLabel()) {\r\n\t\t\t\tde.setMarked(true);\r\n\t\t\t\tsym.setMarked(true);\r\n\t\t\t\tvar e = de.getEdge();\r\n\t\t\t\tcutLines.add(e.getLine());\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cutLines;\r\n\t},\r\n\tgetEdgeRings: function () {\r\n\t\tthis.computeNextCWEdges();\r\n\t\tPolygonizeGraph.label(this.dirEdges, -1);\r\n\t\tvar maximalRings = PolygonizeGraph.findLabeledEdgeRings(this.dirEdges);\r\n\t\tthis.convertMaximalToMinimalEdgeRings(maximalRings);\r\n\t\tvar edgeRingList = new ArrayList();\r\n\t\tfor (var i = this.dirEdges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar de = i.next();\r\n\t\t\tif (de.isMarked()) continue;\r\n\t\t\tif (de.isInRing()) continue;\r\n\t\t\tvar er = this.findEdgeRing(de);\r\n\t\t\tedgeRingList.add(er);\r\n\t\t}\r\n\t\treturn edgeRingList;\r\n\t},\r\n\tgetNode: function (pt) {\r\n\t\tvar node = this.findNode(pt);\r\n\t\tif (node === null) {\r\n\t\t\tnode = new Node(pt);\r\n\t\t\tthis.add(node);\r\n\t\t}\r\n\t\treturn node;\r\n\t},\r\n\tconvertMaximalToMinimalEdgeRings: function (ringEdges) {\r\n\t\tfor (var i = ringEdges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar de = i.next();\r\n\t\t\tvar label = de.getLabel();\r\n\t\t\tvar intNodes = PolygonizeGraph.findIntersectionNodes(de, label);\r\n\t\t\tif (intNodes === null) continue;\r\n\t\t\tfor (var iNode = intNodes.iterator(); iNode.hasNext(); ) {\r\n\t\t\t\tvar node = iNode.next();\r\n\t\t\t\tPolygonizeGraph.computeNextCCWEdges(node, label);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdeleteDangles: function () {\r\n\t\tvar nodesToRemove = this.findNodesOfDegree(1);\r\n\t\tvar dangleLines = new HashSet();\r\n\t\tvar nodeStack = new Stack();\r\n\t\tfor (var i = nodesToRemove.iterator(); i.hasNext(); ) {\r\n\t\t\tnodeStack.push(i.next());\r\n\t\t}\r\n\t\twhile (!nodeStack.isEmpty()) {\r\n\t\t\tvar node = nodeStack.pop();\r\n\t\t\tPolygonizeGraph.deleteAllEdges(node);\r\n\t\t\tvar nodeOutEdges = node.getOutEdges().getEdges();\r\n\t\t\tfor (var i = nodeOutEdges.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar de = i.next();\r\n\t\t\t\tde.setMarked(true);\r\n\t\t\t\tvar sym = de.getSym();\r\n\t\t\t\tif (sym !== null) sym.setMarked(true);\r\n\t\t\t\tvar e = de.getEdge();\r\n\t\t\t\tdangleLines.add(e.getLine());\r\n\t\t\t\tvar toNode = de.getToNode();\r\n\t\t\t\tif (PolygonizeGraph.getDegreeNonDeleted(toNode) === 1) nodeStack.push(toNode);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dangleLines;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PolygonizeGraph;\r\n\t}\r\n});\r\nPolygonizeGraph.findLabeledEdgeRings = function (dirEdges) {\r\n\tvar edgeRingStarts = new ArrayList();\r\n\tvar currLabel = 1;\r\n\tfor (var i = dirEdges.iterator(); i.hasNext(); ) {\r\n\t\tvar de = i.next();\r\n\t\tif (de.isMarked()) continue;\r\n\t\tif (de.getLabel() >= 0) continue;\r\n\t\tedgeRingStarts.add(de);\r\n\t\tvar edges = EdgeRing.findDirEdgesInRing(de);\r\n\t\tPolygonizeGraph.label(edges, currLabel);\r\n\t\tcurrLabel++;\r\n\t}\r\n\treturn edgeRingStarts;\r\n};\r\nPolygonizeGraph.getDegreeNonDeleted = function (node) {\r\n\tvar edges = node.getOutEdges().getEdges();\r\n\tvar degree = 0;\r\n\tfor (var i = edges.iterator(); i.hasNext(); ) {\r\n\t\tvar de = i.next();\r\n\t\tif (!de.isMarked()) degree++;\r\n\t}\r\n\treturn degree;\r\n};\r\nPolygonizeGraph.deleteAllEdges = function (node) {\r\n\tvar edges = node.getOutEdges().getEdges();\r\n\tfor (var i = edges.iterator(); i.hasNext(); ) {\r\n\t\tvar de = i.next();\r\n\t\tde.setMarked(true);\r\n\t\tvar sym = de.getSym();\r\n\t\tif (sym !== null) sym.setMarked(true);\r\n\t}\r\n};\r\nPolygonizeGraph.label = function (dirEdges, label) {\r\n\tfor (var i = dirEdges.iterator(); i.hasNext(); ) {\r\n\t\tvar de = i.next();\r\n\t\tde.setLabel(label);\r\n\t}\r\n};\r\nPolygonizeGraph.computeNextCWEdges = function (node) {\r\n\tvar deStar = node.getOutEdges();\r\n\tvar startDE = null;\r\n\tvar prevDE = null;\r\n\tfor (var i = deStar.getEdges().iterator(); i.hasNext(); ) {\r\n\t\tvar outDE = i.next();\r\n\t\tif (outDE.isMarked()) continue;\r\n\t\tif (startDE === null) startDE = outDE;\r\n\t\tif (prevDE !== null) {\r\n\t\t\tvar sym = prevDE.getSym();\r\n\t\t\tsym.setNext(outDE);\r\n\t\t}\r\n\t\tprevDE = outDE;\r\n\t}\r\n\tif (prevDE !== null) {\r\n\t\tvar sym = prevDE.getSym();\r\n\t\tsym.setNext(startDE);\r\n\t}\r\n};\r\nPolygonizeGraph.computeNextCCWEdges = function (node, label) {\r\n\tvar deStar = node.getOutEdges();\r\n\tvar firstOutDE = null;\r\n\tvar prevInDE = null;\r\n\tvar edges = deStar.getEdges();\r\n\tfor (var i = edges.size() - 1; i >= 0; i--) {\r\n\t\tvar de = edges.get(i);\r\n\t\tvar sym = de.getSym();\r\n\t\tvar outDE = null;\r\n\t\tif (de.getLabel() === label) outDE = de;\r\n\t\tvar inDE = null;\r\n\t\tif (sym.getLabel() === label) inDE = sym;\r\n\t\tif (outDE === null && inDE === null) continue;\r\n\t\tif (inDE !== null) {\r\n\t\t\tprevInDE = inDE;\r\n\t\t}\r\n\t\tif (outDE !== null) {\r\n\t\t\tif (prevInDE !== null) {\r\n\t\t\t\tprevInDE.setNext(outDE);\r\n\t\t\t\tprevInDE = null;\r\n\t\t\t}\r\n\t\t\tif (firstOutDE === null) firstOutDE = outDE;\r\n\t\t}\r\n\t}\r\n\tif (prevInDE !== null) {\r\n\t\tAssert.isTrue(firstOutDE !== null);\r\n\t\tprevInDE.setNext(firstOutDE);\r\n\t}\r\n};\r\nPolygonizeGraph.getDegree = function (node, label) {\r\n\tvar edges = node.getOutEdges().getEdges();\r\n\tvar degree = 0;\r\n\tfor (var i = edges.iterator(); i.hasNext(); ) {\r\n\t\tvar de = i.next();\r\n\t\tif (de.getLabel() === label) degree++;\r\n\t}\r\n\treturn degree;\r\n};\r\nPolygonizeGraph.findIntersectionNodes = function (startDE, label) {\r\n\tvar de = startDE;\r\n\tvar intNodes = null;\r\n\tdo {\r\n\t\tvar node = de.getFromNode();\r\n\t\tif (PolygonizeGraph.getDegree(node, label) > 1) {\r\n\t\t\tif (intNodes === null) intNodes = new ArrayList();\r\n\t\t\tintNodes.add(node);\r\n\t\t}\r\n\t\tde = de.getNext();\r\n\t\tAssert.isTrue(de !== null, \"found null DE in ring\");\r\n\t\tAssert.isTrue(de === startDE || !de.isInRing(), \"found DE already in ring\");\r\n\t} while (de !== startDE);\r\n\treturn intNodes;\r\n};\r\n","import LineString from '../../geom/LineString';\r\nimport Geometry from '../../geom/Geometry';\r\nimport PolygonizeGraph from './PolygonizeGraph';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport GeometryFactory from '../../geom/GeometryFactory';\r\nimport Collection from '../../../../../java/util/Collection';\r\nimport extend from '../../../../../extend';\r\nimport Collections from '../../../../../java/util/Collections';\r\nimport EdgeRing from './EdgeRing';\r\nimport GeometryComponentFilter from '../../geom/GeometryComponentFilter';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nexport default function Polygonizer() {\r\n\tthis.lineStringAdder = new LineStringAdder(this);\r\n\tthis.graph = null;\r\n\tthis.dangles = new ArrayList();\r\n\tthis.cutEdges = new ArrayList();\r\n\tthis.invalidRingLines = new ArrayList();\r\n\tthis.holeList = null;\r\n\tthis.shellList = null;\r\n\tthis.polyList = null;\r\n\tthis.isCheckingRingsValid = true;\r\n\tthis.extractOnlyPolygonal = null;\r\n\tthis.geomFactory = null;\r\n\tif (arguments.length === 0) {\r\n\t\tPolygonizer.call(this, false);\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet extractOnlyPolygonal = arguments[0];\r\n\t\tthis.extractOnlyPolygonal = extractOnlyPolygonal;\r\n\t}\r\n}\r\nextend(Polygonizer.prototype, {\r\n\tgetGeometry: function () {\r\n\t\tif (this.geomFactory === null) this.geomFactory = new GeometryFactory();\r\n\t\tthis.polygonize();\r\n\t\tif (this.extractOnlyPolygonal) {\r\n\t\t\treturn this.geomFactory.buildGeometry(this.polyList);\r\n\t\t}\r\n\t\treturn this.geomFactory.createGeometryCollection(GeometryFactory.toGeometryArray(this.polyList));\r\n\t},\r\n\tgetInvalidRingLines: function () {\r\n\t\tthis.polygonize();\r\n\t\treturn this.invalidRingLines;\r\n\t},\r\n\tfindValidRings: function (edgeRingList, validEdgeRingList, invalidRingList) {\r\n\t\tfor (var i = edgeRingList.iterator(); i.hasNext(); ) {\r\n\t\t\tvar er = i.next();\r\n\t\t\tif (er.isValid()) validEdgeRingList.add(er); else invalidRingList.add(er.getLineString());\r\n\t\t}\r\n\t},\r\n\tpolygonize: function () {\r\n\t\tif (this.polyList !== null) return null;\r\n\t\tthis.polyList = new ArrayList();\r\n\t\tif (this.graph === null) return null;\r\n\t\tthis.dangles = this.graph.deleteDangles();\r\n\t\tthis.cutEdges = this.graph.deleteCutEdges();\r\n\t\tvar edgeRingList = this.graph.getEdgeRings();\r\n\t\tvar validEdgeRingList = new ArrayList();\r\n\t\tthis.invalidRingLines = new ArrayList();\r\n\t\tif (this.isCheckingRingsValid) {\r\n\t\t\tthis.findValidRings(edgeRingList, validEdgeRingList, this.invalidRingLines);\r\n\t\t} else {\r\n\t\t\tvalidEdgeRingList = edgeRingList;\r\n\t\t}\r\n\t\tthis.findShellsAndHoles(validEdgeRingList);\r\n\t\tPolygonizer.assignHolesToShells(this.holeList, this.shellList);\r\n\t\tCollections.sort(this.shellList, new EdgeRing.EnvelopeComparator());\r\n\t\tvar includeAll = true;\r\n\t\tif (this.extractOnlyPolygonal) {\r\n\t\t\tPolygonizer.findDisjointShells(this.shellList);\r\n\t\t\tincludeAll = false;\r\n\t\t}\r\n\t\tthis.polyList = Polygonizer.extractPolygons(this.shellList, includeAll);\r\n\t},\r\n\tgetDangles: function () {\r\n\t\tthis.polygonize();\r\n\t\treturn this.dangles;\r\n\t},\r\n\tgetCutEdges: function () {\r\n\t\tthis.polygonize();\r\n\t\treturn this.cutEdges;\r\n\t},\r\n\tgetPolygons: function () {\r\n\t\tthis.polygonize();\r\n\t\treturn this.polyList;\r\n\t},\r\n\tadd: function () {\r\n\t\tif (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet geomList = arguments[0];\r\n\t\t\tfor (var i = geomList.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar geometry = i.next();\r\n\t\t\t\tthis.add(geometry);\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof LineString) {\r\n\t\t\tlet line = arguments[0];\r\n\t\t\tthis.geomFactory = line.getFactory();\r\n\t\t\tif (this.graph === null) this.graph = new PolygonizeGraph(this.geomFactory);\r\n\t\t\tthis.graph.addEdge(line);\r\n\t\t} else if (arguments[0] instanceof Geometry) {\r\n\t\t\tlet g = arguments[0];\r\n\t\t\tg.apply(this.lineStringAdder);\r\n\t\t}\r\n\t},\r\n\tsetCheckRingsValid: function (isCheckingRingsValid) {\r\n\t\tthis.isCheckingRingsValid = isCheckingRingsValid;\r\n\t},\r\n\tfindShellsAndHoles: function (edgeRingList) {\r\n\t\tthis.holeList = new ArrayList();\r\n\t\tthis.shellList = new ArrayList();\r\n\t\tfor (var i = edgeRingList.iterator(); i.hasNext(); ) {\r\n\t\t\tvar er = i.next();\r\n\t\t\ter.computeHole();\r\n\t\t\tif (er.isHole()) this.holeList.add(er); else this.shellList.add(er);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Polygonizer;\r\n\t}\r\n});\r\nPolygonizer.findOuterShells = function (shellList) {\r\n\tfor (var i = shellList.iterator(); i.hasNext(); ) {\r\n\t\tvar er = i.next();\r\n\t\tvar outerHoleER = er.getOuterHole();\r\n\t\tif (outerHoleER !== null && !outerHoleER.isProcessed()) {\r\n\t\t\ter.setIncluded(true);\r\n\t\t\touterHoleER.setProcessed(true);\r\n\t\t}\r\n\t}\r\n};\r\nPolygonizer.extractPolygons = function (shellList, includeAll) {\r\n\tvar polyList = new ArrayList();\r\n\tfor (var i = shellList.iterator(); i.hasNext(); ) {\r\n\t\tvar er = i.next();\r\n\t\tif (includeAll || er.isIncluded()) {\r\n\t\t\tpolyList.add(er.getPolygon());\r\n\t\t}\r\n\t}\r\n\treturn polyList;\r\n};\r\nPolygonizer.assignHolesToShells = function (holeList, shellList) {\r\n\tfor (var i = holeList.iterator(); i.hasNext(); ) {\r\n\t\tvar holeER = i.next();\r\n\t\tPolygonizer.assignHoleToShell(holeER, shellList);\r\n\t}\r\n};\r\nPolygonizer.assignHoleToShell = function (holeER, shellList) {\r\n\tvar shell = EdgeRing.findEdgeRingContaining(holeER, shellList);\r\n\tif (shell !== null) {\r\n\t\tshell.addHole(holeER);\r\n\t}\r\n};\r\nPolygonizer.findDisjointShells = function (shellList) {\r\n\tPolygonizer.findOuterShells(shellList);\r\n\tvar isMoreToScan = null;\r\n\tdo {\r\n\t\tisMoreToScan = false;\r\n\t\tfor (var i = shellList.iterator(); i.hasNext(); ) {\r\n\t\t\tvar er = i.next();\r\n\t\t\tif (er.isIncludedSet()) continue;\r\n\t\t\ter.updateIncluded();\r\n\t\t\tif (!er.isIncludedSet()) {\r\n\t\t\t\tisMoreToScan = true;\r\n\t\t\t}\r\n\t\t}\r\n\t} while (isMoreToScan);\r\n};\r\nfunction LineStringAdder() {\r\n\tthis.p = null;\r\n\tlet p = arguments[0];\r\n\tthis.p = p;\r\n}\r\nextend(LineStringAdder.prototype, {\r\n\tfilter: function (g) {\r\n\t\tif (g instanceof LineString) this.p.add(g);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryComponentFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineStringAdder;\r\n\t}\r\n});\r\nPolygonizer.LineStringAdder = LineStringAdder;\r\n","import PointLocator from '../../algorithm/PointLocator';\r\nimport Location from '../../geom/Location';\r\nimport IntersectionMatrix from '../../geom/IntersectionMatrix';\r\nimport EdgeEndBuilder from './EdgeEndBuilder';\r\nimport extend from '../../../../../extend';\r\nimport NodeMap from '../../geomgraph/NodeMap';\r\nimport RelateNodeFactory from './RelateNodeFactory';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport RobustLineIntersector from '../../algorithm/RobustLineIntersector';\r\nimport Assert from '../../util/Assert';\r\nexport default function RelateComputer() {\r\n\tthis.li = new RobustLineIntersector();\r\n\tthis.ptLocator = new PointLocator();\r\n\tthis.arg = null;\r\n\tthis.nodes = new NodeMap(new RelateNodeFactory());\r\n\tthis.im = null;\r\n\tthis.isolatedEdges = new ArrayList();\r\n\tthis.invalidPoint = null;\r\n\tlet arg = arguments[0];\r\n\tthis.arg = arg;\r\n}\r\nextend(RelateComputer.prototype, {\r\n\tinsertEdgeEnds: function (ee) {\r\n\t\tfor (var i = ee.iterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tthis.nodes.add(e);\r\n\t\t}\r\n\t},\r\n\tcomputeProperIntersectionIM: function (intersector, im) {\r\n\t\tvar dimA = this.arg[0].getGeometry().getDimension();\r\n\t\tvar dimB = this.arg[1].getGeometry().getDimension();\r\n\t\tvar hasProper = intersector.hasProperIntersection();\r\n\t\tvar hasProperInterior = intersector.hasProperInteriorIntersection();\r\n\t\tif (dimA === 2 && dimB === 2) {\r\n\t\t\tif (hasProper) im.setAtLeast(\"212101212\");\r\n\t\t} else if (dimA === 2 && dimB === 1) {\r\n\t\t\tif (hasProper) im.setAtLeast(\"FFF0FFFF2\");\r\n\t\t\tif (hasProperInterior) im.setAtLeast(\"1FFFFF1FF\");\r\n\t\t} else if (dimA === 1 && dimB === 2) {\r\n\t\t\tif (hasProper) im.setAtLeast(\"F0FFFFFF2\");\r\n\t\t\tif (hasProperInterior) im.setAtLeast(\"1F1FFFFFF\");\r\n\t\t} else if (dimA === 1 && dimB === 1) {\r\n\t\t\tif (hasProperInterior) im.setAtLeast(\"0FFFFFFFF\");\r\n\t\t}\r\n\t},\r\n\tlabelIsolatedEdges: function (thisIndex, targetIndex) {\r\n\t\tfor (var ei = this.arg[thisIndex].getEdgeIterator(); ei.hasNext(); ) {\r\n\t\t\tvar e = ei.next();\r\n\t\t\tif (e.isIsolated()) {\r\n\t\t\t\tthis.labelIsolatedEdge(e, targetIndex, this.arg[targetIndex].getGeometry());\r\n\t\t\t\tthis.isolatedEdges.add(e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tlabelIsolatedEdge: function (e, targetIndex, target) {\r\n\t\tif (target.getDimension() > 0) {\r\n\t\t\tvar loc = this.ptLocator.locate(e.getCoordinate(), target);\r\n\t\t\te.getLabel().setAllLocations(targetIndex, loc);\r\n\t\t} else {\r\n\t\t\te.getLabel().setAllLocations(targetIndex, Location.EXTERIOR);\r\n\t\t}\r\n\t},\r\n\tcomputeIM: function () {\r\n\t\tvar im = new IntersectionMatrix();\r\n\t\tim.set(Location.EXTERIOR, Location.EXTERIOR, 2);\r\n\t\tif (!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal())) {\r\n\t\t\tthis.computeDisjointIM(im);\r\n\t\t\treturn im;\r\n\t\t}\r\n\t\tthis.arg[0].computeSelfNodes(this.li, false);\r\n\t\tthis.arg[1].computeSelfNodes(this.li, false);\r\n\t\tvar intersector = this.arg[0].computeEdgeIntersections(this.arg[1], this.li, false);\r\n\t\tthis.computeIntersectionNodes(0);\r\n\t\tthis.computeIntersectionNodes(1);\r\n\t\tthis.copyNodesAndLabels(0);\r\n\t\tthis.copyNodesAndLabels(1);\r\n\t\tthis.labelIsolatedNodes();\r\n\t\tthis.computeProperIntersectionIM(intersector, im);\r\n\t\tvar eeBuilder = new EdgeEndBuilder();\r\n\t\tvar ee0 = eeBuilder.computeEdgeEnds(this.arg[0].getEdgeIterator());\r\n\t\tthis.insertEdgeEnds(ee0);\r\n\t\tvar ee1 = eeBuilder.computeEdgeEnds(this.arg[1].getEdgeIterator());\r\n\t\tthis.insertEdgeEnds(ee1);\r\n\t\tthis.labelNodeEdges();\r\n\t\tthis.labelIsolatedEdges(0, 1);\r\n\t\tthis.labelIsolatedEdges(1, 0);\r\n\t\tthis.updateIM(im);\r\n\t\treturn im;\r\n\t},\r\n\tlabelNodeEdges: function () {\r\n\t\tfor (var ni = this.nodes.iterator(); ni.hasNext(); ) {\r\n\t\t\tvar node = ni.next();\r\n\t\t\tnode.getEdges().computeLabelling(this.arg);\r\n\t\t}\r\n\t},\r\n\tcopyNodesAndLabels: function (argIndex) {\r\n\t\tfor (var i = this.arg[argIndex].getNodeIterator(); i.hasNext(); ) {\r\n\t\t\tvar graphNode = i.next();\r\n\t\t\tvar newNode = this.nodes.addNode(graphNode.getCoordinate());\r\n\t\t\tnewNode.setLabel(argIndex, graphNode.getLabel().getLocation(argIndex));\r\n\t\t}\r\n\t},\r\n\tlabelIntersectionNodes: function (argIndex) {\r\n\t\tfor (var i = this.arg[argIndex].getEdgeIterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tvar eLoc = e.getLabel().getLocation(argIndex);\r\n\t\t\tfor (var eiIt = e.getEdgeIntersectionList().iterator(); eiIt.hasNext(); ) {\r\n\t\t\t\tvar ei = eiIt.next();\r\n\t\t\t\tvar n = this.nodes.find(ei.coord);\r\n\t\t\t\tif (n.getLabel().isNull(argIndex)) {\r\n\t\t\t\t\tif (eLoc === Location.BOUNDARY) n.setLabelBoundary(argIndex); else n.setLabel(argIndex, Location.INTERIOR);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tlabelIsolatedNode: function (n, targetIndex) {\r\n\t\tvar loc = this.ptLocator.locate(n.getCoordinate(), this.arg[targetIndex].getGeometry());\r\n\t\tn.getLabel().setAllLocations(targetIndex, loc);\r\n\t},\r\n\tcomputeIntersectionNodes: function (argIndex) {\r\n\t\tfor (var i = this.arg[argIndex].getEdgeIterator(); i.hasNext(); ) {\r\n\t\t\tvar e = i.next();\r\n\t\t\tvar eLoc = e.getLabel().getLocation(argIndex);\r\n\t\t\tfor (var eiIt = e.getEdgeIntersectionList().iterator(); eiIt.hasNext(); ) {\r\n\t\t\t\tvar ei = eiIt.next();\r\n\t\t\t\tvar n = this.nodes.addNode(ei.coord);\r\n\t\t\t\tif (eLoc === Location.BOUNDARY) n.setLabelBoundary(argIndex); else {\r\n\t\t\t\t\tif (n.getLabel().isNull(argIndex)) n.setLabel(argIndex, Location.INTERIOR);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tlabelIsolatedNodes: function () {\r\n\t\tfor (var ni = this.nodes.iterator(); ni.hasNext(); ) {\r\n\t\t\tvar n = ni.next();\r\n\t\t\tvar label = n.getLabel();\r\n\t\t\tAssert.isTrue(label.getGeometryCount() > 0, \"node with empty label found\");\r\n\t\t\tif (n.isIsolated()) {\r\n\t\t\t\tif (label.isNull(0)) this.labelIsolatedNode(n, 0); else this.labelIsolatedNode(n, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tupdateIM: function (im) {\r\n\t\tfor (var ei = this.isolatedEdges.iterator(); ei.hasNext(); ) {\r\n\t\t\tvar e = ei.next();\r\n\t\t\te.updateIM(im);\r\n\t\t}\r\n\t\tfor (var ni = this.nodes.iterator(); ni.hasNext(); ) {\r\n\t\t\tvar node = ni.next();\r\n\t\t\tnode.updateIM(im);\r\n\t\t\tnode.updateIMFromEdges(im);\r\n\t\t}\r\n\t},\r\n\tcomputeDisjointIM: function (im) {\r\n\t\tvar ga = this.arg[0].getGeometry();\r\n\t\tif (!ga.isEmpty()) {\r\n\t\t\tim.set(Location.INTERIOR, Location.EXTERIOR, ga.getDimension());\r\n\t\t\tim.set(Location.BOUNDARY, Location.EXTERIOR, ga.getBoundaryDimension());\r\n\t\t}\r\n\t\tvar gb = this.arg[1].getGeometry();\r\n\t\tif (!gb.isEmpty()) {\r\n\t\t\tim.set(Location.EXTERIOR, Location.INTERIOR, gb.getDimension());\r\n\t\t\tim.set(Location.EXTERIOR, Location.BOUNDARY, gb.getBoundaryDimension());\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RelateComputer;\r\n\t}\r\n});\r\n","import LineString from '../../geom/LineString';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport Point from '../../geom/Point';\r\nimport Polygon from '../../geom/Polygon';\r\nimport extend from '../../../../../extend';\r\nexport default function RectangleContains() {\r\n\tthis.rectEnv = null;\r\n\tlet rectangle = arguments[0];\r\n\tthis.rectEnv = rectangle.getEnvelopeInternal();\r\n}\r\nextend(RectangleContains.prototype, {\r\n\tisContainedInBoundary: function (geom) {\r\n\t\tif (geom instanceof Polygon) return false;\r\n\t\tif (geom instanceof Point) return this.isPointContainedInBoundary(geom);\r\n\t\tif (geom instanceof LineString) return this.isLineStringContainedInBoundary(geom);\r\n\t\tfor (var i = 0; i < geom.getNumGeometries(); i++) {\r\n\t\t\tvar comp = geom.getGeometryN(i);\r\n\t\t\tif (!this.isContainedInBoundary(comp)) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tisLineSegmentContainedInBoundary: function (p0, p1) {\r\n\t\tif (p0.equals(p1)) return this.isPointContainedInBoundary(p0);\r\n\t\tif (p0.x === p1.x) {\r\n\t\t\tif (p0.x === this.rectEnv.getMinX() || p0.x === this.rectEnv.getMaxX()) return true;\r\n\t\t} else if (p0.y === p1.y) {\r\n\t\t\tif (p0.y === this.rectEnv.getMinY() || p0.y === this.rectEnv.getMaxY()) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tisLineStringContainedInBoundary: function (line) {\r\n\t\tvar seq = line.getCoordinateSequence();\r\n\t\tvar p0 = new Coordinate();\r\n\t\tvar p1 = new Coordinate();\r\n\t\tfor (var i = 0; i < seq.size() - 1; i++) {\r\n\t\t\tseq.getCoordinate(i, p0);\r\n\t\t\tseq.getCoordinate(i + 1, p1);\r\n\t\t\tif (!this.isLineSegmentContainedInBoundary(p0, p1)) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tisPointContainedInBoundary: function () {\r\n\t\tif (arguments[0] instanceof Point) {\r\n\t\t\tlet point = arguments[0];\r\n\t\t\treturn this.isPointContainedInBoundary(point.getCoordinate());\r\n\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet pt = arguments[0];\r\n\t\t\treturn pt.x === this.rectEnv.getMinX() || pt.x === this.rectEnv.getMaxX() || pt.y === this.rectEnv.getMinY() || pt.y === this.rectEnv.getMaxY();\r\n\t\t}\r\n\t},\r\n\tcontains: function (geom) {\r\n\t\tif (!this.rectEnv.contains(geom.getEnvelopeInternal())) return false;\r\n\t\tif (this.isContainedInBoundary(geom)) return false;\r\n\t\treturn true;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RectangleContains;\r\n\t}\r\n});\r\nRectangleContains.contains = function (rectangle, b) {\r\n\tvar rc = new RectangleContains(rectangle);\r\n\treturn rc.contains(b);\r\n};\r\n","import Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport RobustLineIntersector from './RobustLineIntersector';\r\nimport Envelope from '../geom/Envelope';\r\nexport default function RectangleLineIntersector() {\r\n\tthis.li = new RobustLineIntersector();\r\n\tthis.rectEnv = null;\r\n\tthis.diagUp0 = null;\r\n\tthis.diagUp1 = null;\r\n\tthis.diagDown0 = null;\r\n\tthis.diagDown1 = null;\r\n\tlet rectEnv = arguments[0];\r\n\tthis.rectEnv = rectEnv;\r\n\tthis.diagUp0 = new Coordinate(rectEnv.getMinX(), rectEnv.getMinY());\r\n\tthis.diagUp1 = new Coordinate(rectEnv.getMaxX(), rectEnv.getMaxY());\r\n\tthis.diagDown0 = new Coordinate(rectEnv.getMinX(), rectEnv.getMaxY());\r\n\tthis.diagDown1 = new Coordinate(rectEnv.getMaxX(), rectEnv.getMinY());\r\n}\r\nextend(RectangleLineIntersector.prototype, {\r\n\tintersects: function (p0, p1) {\r\n\t\tvar segEnv = new Envelope(p0, p1);\r\n\t\tif (!this.rectEnv.intersects(segEnv)) return false;\r\n\t\tif (this.rectEnv.intersects(p0)) return true;\r\n\t\tif (this.rectEnv.intersects(p1)) return true;\r\n\t\tif (p0.compareTo(p1) > 0) {\r\n\t\t\tvar tmp = p0;\r\n\t\t\tp0 = p1;\r\n\t\t\tp1 = tmp;\r\n\t\t}\r\n\t\tvar isSegUpwards = false;\r\n\t\tif (p1.y > p0.y) isSegUpwards = true;\r\n\t\tif (isSegUpwards) {\r\n\t\t\tthis.li.computeIntersection(p0, p1, this.diagDown0, this.diagDown1);\r\n\t\t} else {\r\n\t\t\tthis.li.computeIntersection(p0, p1, this.diagUp0, this.diagUp1);\r\n\t\t}\r\n\t\tif (this.li.hasIntersection()) return true;\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RectangleLineIntersector;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport GeometryCollection from '../GeometryCollection';\r\nexport default function ShortCircuitedGeometryVisitor() {\r\n\tthis._isDone = false;\r\n}\r\nextend(ShortCircuitedGeometryVisitor.prototype, {\r\n\tapplyTo: function (geom) {\r\n\t\tfor (var i = 0; i < geom.getNumGeometries() && !this._isDone; i++) {\r\n\t\t\tvar element = geom.getGeometryN(i);\r\n\t\t\tif (!(element instanceof GeometryCollection)) {\r\n\t\t\t\tthis.visit(element);\r\n\t\t\t\tif (this.isDone()) {\r\n\t\t\t\t\tthis._isDone = true;\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t} else this.applyTo(element);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ShortCircuitedGeometryVisitor;\r\n\t}\r\n});\r\n","import Coordinate from '../../geom/Coordinate';\r\nimport Polygon from '../../geom/Polygon';\r\nimport RectangleLineIntersector from '../../algorithm/RectangleLineIntersector';\r\nimport extend from '../../../../../extend';\r\nimport ShortCircuitedGeometryVisitor from '../../geom/util/ShortCircuitedGeometryVisitor';\r\nimport SimplePointInAreaLocator from '../../algorithm/locate/SimplePointInAreaLocator';\r\nimport LinearComponentExtracter from '../../geom/util/LinearComponentExtracter';\r\nimport inherits from '../../../../../inherits';\r\nexport default function RectangleIntersects() {\r\n\tthis.rectangle = null;\r\n\tthis.rectEnv = null;\r\n\tlet rectangle = arguments[0];\r\n\tthis.rectangle = rectangle;\r\n\tthis.rectEnv = rectangle.getEnvelopeInternal();\r\n}\r\nextend(RectangleIntersects.prototype, {\r\n\tintersects: function (geom) {\r\n\t\tif (!this.rectEnv.intersects(geom.getEnvelopeInternal())) return false;\r\n\t\tvar visitor = new EnvelopeIntersectsVisitor(this.rectEnv);\r\n\t\tvisitor.applyTo(geom);\r\n\t\tif (visitor.intersects()) return true;\r\n\t\tvar ecpVisitor = new GeometryContainsPointVisitor(this.rectangle);\r\n\t\tecpVisitor.applyTo(geom);\r\n\t\tif (ecpVisitor.containsPoint()) return true;\r\n\t\tvar riVisitor = new RectangleIntersectsSegmentVisitor(this.rectangle);\r\n\t\triVisitor.applyTo(geom);\r\n\t\tif (riVisitor.intersects()) return true;\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RectangleIntersects;\r\n\t}\r\n});\r\nRectangleIntersects.intersects = function (rectangle, b) {\r\n\tvar rp = new RectangleIntersects(rectangle);\r\n\treturn rp.intersects(b);\r\n};\r\nfunction EnvelopeIntersectsVisitor() {\r\n\tShortCircuitedGeometryVisitor.apply(this);\r\n\tthis.rectEnv = null;\r\n\tthis._intersects = false;\r\n\tlet rectEnv = arguments[0];\r\n\tthis.rectEnv = rectEnv;\r\n}\r\ninherits(EnvelopeIntersectsVisitor, ShortCircuitedGeometryVisitor);\r\nextend(EnvelopeIntersectsVisitor.prototype, {\r\n\tisDone: function () {\r\n\t\treturn this._intersects === true;\r\n\t},\r\n\tvisit: function (element) {\r\n\t\tvar elementEnv = element.getEnvelopeInternal();\r\n\t\tif (!this.rectEnv.intersects(elementEnv)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.rectEnv.contains(elementEnv)) {\r\n\t\t\tthis._intersects = true;\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (elementEnv.getMinX() >= this.rectEnv.getMinX() && elementEnv.getMaxX() <= this.rectEnv.getMaxX()) {\r\n\t\t\tthis._intersects = true;\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (elementEnv.getMinY() >= this.rectEnv.getMinY() && elementEnv.getMaxY() <= this.rectEnv.getMaxY()) {\r\n\t\t\tthis._intersects = true;\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tintersects: function () {\r\n\t\treturn this._intersects;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn EnvelopeIntersectsVisitor;\r\n\t}\r\n});\r\nfunction GeometryContainsPointVisitor() {\r\n\tShortCircuitedGeometryVisitor.apply(this);\r\n\tthis.rectSeq = null;\r\n\tthis.rectEnv = null;\r\n\tthis._containsPoint = false;\r\n\tlet rectangle = arguments[0];\r\n\tthis.rectSeq = rectangle.getExteriorRing().getCoordinateSequence();\r\n\tthis.rectEnv = rectangle.getEnvelopeInternal();\r\n}\r\ninherits(GeometryContainsPointVisitor, ShortCircuitedGeometryVisitor);\r\nextend(GeometryContainsPointVisitor.prototype, {\r\n\tisDone: function () {\r\n\t\treturn this._containsPoint === true;\r\n\t},\r\n\tvisit: function (geom) {\r\n\t\tif (!(geom instanceof Polygon)) return null;\r\n\t\tvar elementEnv = geom.getEnvelopeInternal();\r\n\t\tif (!this.rectEnv.intersects(elementEnv)) return null;\r\n\t\tvar rectPt = new Coordinate();\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tthis.rectSeq.getCoordinate(i, rectPt);\r\n\t\t\tif (!elementEnv.contains(rectPt)) continue;\r\n\t\t\tif (SimplePointInAreaLocator.containsPointInPolygon(rectPt, geom)) {\r\n\t\t\t\tthis._containsPoint = true;\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcontainsPoint: function () {\r\n\t\treturn this._containsPoint;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryContainsPointVisitor;\r\n\t}\r\n});\r\nfunction RectangleIntersectsSegmentVisitor() {\r\n\tShortCircuitedGeometryVisitor.apply(this);\r\n\tthis.rectEnv = null;\r\n\tthis.rectIntersector = null;\r\n\tthis.hasIntersection = false;\r\n\tthis.p0 = new Coordinate();\r\n\tthis.p1 = new Coordinate();\r\n\tlet rectangle = arguments[0];\r\n\tthis.rectEnv = rectangle.getEnvelopeInternal();\r\n\tthis.rectIntersector = new RectangleLineIntersector(this.rectEnv);\r\n}\r\ninherits(RectangleIntersectsSegmentVisitor, ShortCircuitedGeometryVisitor);\r\nextend(RectangleIntersectsSegmentVisitor.prototype, {\r\n\tintersects: function () {\r\n\t\treturn this.hasIntersection;\r\n\t},\r\n\tisDone: function () {\r\n\t\treturn this.hasIntersection === true;\r\n\t},\r\n\tvisit: function (geom) {\r\n\t\tvar elementEnv = geom.getEnvelopeInternal();\r\n\t\tif (!this.rectEnv.intersects(elementEnv)) return null;\r\n\t\tvar lines = LinearComponentExtracter.getLines(geom);\r\n\t\tthis.checkIntersectionWithLineStrings(lines);\r\n\t},\r\n\tcheckIntersectionWithLineStrings: function (lines) {\r\n\t\tfor (var i = lines.iterator(); i.hasNext(); ) {\r\n\t\t\tvar testLine = i.next();\r\n\t\t\tthis.checkIntersectionWithSegments(testLine);\r\n\t\t\tif (this.hasIntersection) return null;\r\n\t\t}\r\n\t},\r\n\tcheckIntersectionWithSegments: function (testLine) {\r\n\t\tvar seq1 = testLine.getCoordinateSequence();\r\n\t\tfor (var j = 1; j < seq1.size(); j++) {\r\n\t\t\tseq1.getCoordinate(j - 1, this.p0);\r\n\t\t\tseq1.getCoordinate(j, this.p1);\r\n\t\t\tif (this.rectIntersector.intersects(this.p0, this.p1)) {\r\n\t\t\t\tthis.hasIntersection = true;\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RectangleIntersectsSegmentVisitor;\r\n\t}\r\n});\r\n","import Geometry from '../../geom/Geometry';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport RelateComputer from './RelateComputer';\r\nimport BoundaryNodeRule from '../../algorithm/BoundaryNodeRule';\r\nimport extend from '../../../../../extend';\r\nimport GeometryGraphOperation from '../GeometryGraphOperation';\r\nimport RectangleContains from '../predicate/RectangleContains';\r\nimport inherits from '../../../../../inherits';\r\nimport RectangleIntersects from '../predicate/RectangleIntersects';\r\nexport default function RelateOp() {\r\n\tthis._relate = null;\r\n\tif (arguments.length === 2) {\r\n\t\tlet g0 = arguments[0], g1 = arguments[1];\r\n\t\tGeometryGraphOperation.call(this, g0, g1);\r\n\t\tthis._relate = new RelateComputer(this.arg);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet g0 = arguments[0], g1 = arguments[1], boundaryNodeRule = arguments[2];\r\n\t\tGeometryGraphOperation.call(this, g0, g1, boundaryNodeRule);\r\n\t\tthis._relate = new RelateComputer(this.arg);\r\n\t}\r\n}\r\ninherits(RelateOp, GeometryGraphOperation);\r\nextend(RelateOp.prototype, {\r\n\tgetIntersectionMatrix: function () {\r\n\t\treturn this._relate.computeIM();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn RelateOp;\r\n\t}\r\n});\r\nRelateOp.covers = function (g1, g2) {\r\n\tif (!g1.getEnvelopeInternal().covers(g2.getEnvelopeInternal())) return false;\r\n\tif (g1.isRectangle()) {\r\n\t\treturn true;\r\n\t}\r\n\treturn RelateOp.relate(g1, g2).isCovers();\r\n};\r\nRelateOp.intersects = function (g1, g2) {\r\n\tif (!g1.getEnvelopeInternal().intersects(g2.getEnvelopeInternal())) return false;\r\n\tif (g1.isRectangle()) {\r\n\t\treturn RectangleIntersects.intersects(g1, g2);\r\n\t}\r\n\tif (g2.isRectangle()) {\r\n\t\treturn RectangleIntersects.intersects(g2, g1);\r\n\t}\r\n\treturn RelateOp.relate(g1, g2).isIntersects();\r\n};\r\nRelateOp.touches = function (g1, g2) {\r\n\tif (!g1.getEnvelopeInternal().intersects(g2.getEnvelopeInternal())) return false;\r\n\treturn RelateOp.relate(g1, g2).isTouches(g1.getDimension(), g2.getDimension());\r\n};\r\nRelateOp.within = function (g1, g2) {\r\n\treturn g2.contains(g1);\r\n};\r\nRelateOp.coveredBy = function (g1, g2) {\r\n\treturn RelateOp.covers(g2, g1);\r\n};\r\nRelateOp.relate = function () {\r\n\tif (arguments.length === 2) {\r\n\t\tlet a = arguments[0], b = arguments[1];\r\n\t\tvar relOp = new RelateOp(a, b);\r\n\t\tvar im = relOp.getIntersectionMatrix();\r\n\t\treturn im;\r\n\t} else if (arguments.length === 3) {\r\n\t\tif (typeof arguments[2] === \"string\" && (arguments[0] instanceof Geometry && arguments[1] instanceof Geometry)) {\r\n\t\t\tlet g1 = arguments[0], g2 = arguments[1], intersectionPattern = arguments[2];\r\n\t\t\treturn RelateOp.relateWithCheck(g1, g2).matches(intersectionPattern);\r\n\t\t} else if (hasInterface(arguments[2], BoundaryNodeRule) && (arguments[0] instanceof Geometry && arguments[1] instanceof Geometry)) {\r\n\t\t\tlet a = arguments[0], b = arguments[1], boundaryNodeRule = arguments[2];\r\n\t\t\tvar relOp = new RelateOp(a, b, boundaryNodeRule);\r\n\t\t\tvar im = relOp.getIntersectionMatrix();\r\n\t\t\treturn im;\r\n\t\t}\r\n\t}\r\n};\r\nRelateOp.overlaps = function (g1, g2) {\r\n\tif (!g1.getEnvelopeInternal().intersects(g2.getEnvelopeInternal())) return false;\r\n\treturn RelateOp.relate(g1, g2).isOverlaps(g1.getDimension(), g2.getDimension());\r\n};\r\nRelateOp.disjoint = function (g1, g2) {\r\n\treturn !g1.intersects(g2);\r\n};\r\nRelateOp.relateWithCheck = function (g1, g2) {\r\n\tg1.checkNotGeometryCollection(g1);\r\n\tg1.checkNotGeometryCollection(g2);\r\n\treturn RelateOp.relate(g1, g2);\r\n};\r\nRelateOp.crosses = function (g1, g2) {\r\n\tif (!g1.getEnvelopeInternal().intersects(g2.getEnvelopeInternal())) return false;\r\n\treturn RelateOp.relate(g1, g2).isCrosses(g1.getDimension(), g2.getDimension());\r\n};\r\nRelateOp.contains = function (g1, g2) {\r\n\tif (!g1.getEnvelopeInternal().contains(g2.getEnvelopeInternal())) return false;\r\n\tif (g1.isRectangle()) {\r\n\t\treturn RectangleContains.contains(g1, g2);\r\n\t}\r\n\treturn RelateOp.relate(g1, g2).isContains();\r\n};\r\n","import extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nexport default function GeometryCombiner() {\r\n\tthis.geomFactory = null;\r\n\tthis.skipEmpty = false;\r\n\tthis.inputGeoms = null;\r\n\tlet geoms = arguments[0];\r\n\tthis.geomFactory = GeometryCombiner.extractFactory(geoms);\r\n\tthis.inputGeoms = geoms;\r\n}\r\nextend(GeometryCombiner.prototype, {\r\n\textractElements: function (geom, elems) {\r\n\t\tif (geom === null) return null;\r\n\t\tfor (var i = 0; i < geom.getNumGeometries(); i++) {\r\n\t\t\tvar elemGeom = geom.getGeometryN(i);\r\n\t\t\tif (this.skipEmpty && elemGeom.isEmpty()) continue;\r\n\t\t\telems.add(elemGeom);\r\n\t\t}\r\n\t},\r\n\tcombine: function () {\r\n\t\tvar elems = new ArrayList();\r\n\t\tfor (var i = this.inputGeoms.iterator(); i.hasNext(); ) {\r\n\t\t\tvar g = i.next();\r\n\t\t\tthis.extractElements(g, elems);\r\n\t\t}\r\n\t\tif (elems.size() === 0) {\r\n\t\t\tif (this.geomFactory !== null) {\r\n\t\t\t\treturn this.geomFactory.createGeometryCollection(null);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.geomFactory.buildGeometry(elems);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryCombiner;\r\n\t}\r\n});\r\nGeometryCombiner.combine = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet geoms = arguments[0];\r\n\t\tvar combiner = new GeometryCombiner(geoms);\r\n\t\treturn combiner.combine();\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet g0 = arguments[0], g1 = arguments[1];\r\n\t\tvar combiner = new GeometryCombiner(GeometryCombiner.createList(g0, g1));\r\n\t\treturn combiner.combine();\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet g0 = arguments[0], g1 = arguments[1], g2 = arguments[2];\r\n\t\tvar combiner = new GeometryCombiner(GeometryCombiner.createList(g0, g1, g2));\r\n\t\treturn combiner.combine();\r\n\t}\r\n};\r\nGeometryCombiner.extractFactory = function (geoms) {\r\n\tif (geoms.isEmpty()) return null;\r\n\treturn geoms.iterator().next().getFactory();\r\n};\r\nGeometryCombiner.createList = function () {\r\n\tif (arguments.length === 2) {\r\n\t\tlet obj0 = arguments[0], obj1 = arguments[1];\r\n\t\tvar list = new ArrayList();\r\n\t\tlist.add(obj0);\r\n\t\tlist.add(obj1);\r\n\t\treturn list;\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet obj0 = arguments[0], obj1 = arguments[1], obj2 = arguments[2];\r\n\t\tvar list = new ArrayList();\r\n\t\tlist.add(obj0);\r\n\t\tlist.add(obj1);\r\n\t\tlist.add(obj2);\r\n\t\treturn list;\r\n\t}\r\n};\r\n","import PointLocator from '../../algorithm/PointLocator';\r\nimport Location from '../../geom/Location';\r\nimport TreeSet from '../../../../../java/util/TreeSet';\r\nimport extend from '../../../../../extend';\r\nimport GeometryCombiner from '../../geom/util/GeometryCombiner';\r\nimport CoordinateArrays from '../../geom/CoordinateArrays';\r\nexport default function PointGeometryUnion() {\r\n\tthis.pointGeom = null;\r\n\tthis.otherGeom = null;\r\n\tthis.geomFact = null;\r\n\tlet pointGeom = arguments[0], otherGeom = arguments[1];\r\n\tthis.pointGeom = pointGeom;\r\n\tthis.otherGeom = otherGeom;\r\n\tthis.geomFact = otherGeom.getFactory();\r\n}\r\nextend(PointGeometryUnion.prototype, {\r\n\tunion: function () {\r\n\t\tvar locater = new PointLocator();\r\n\t\tvar exteriorCoords = new TreeSet();\r\n\t\tfor (var i = 0; i < this.pointGeom.getNumGeometries(); i++) {\r\n\t\t\tvar point = this.pointGeom.getGeometryN(i);\r\n\t\t\tvar coord = point.getCoordinate();\r\n\t\t\tvar loc = locater.locate(coord, this.otherGeom);\r\n\t\t\tif (loc === Location.EXTERIOR) exteriorCoords.add(coord);\r\n\t\t}\r\n\t\tif (exteriorCoords.size() === 0) return this.otherGeom;\r\n\t\tvar ptComp = null;\r\n\t\tvar coords = CoordinateArrays.toCoordinateArray(exteriorCoords);\r\n\t\tif (coords.length === 1) {\r\n\t\t\tptComp = this.geomFact.createPoint(coords[0]);\r\n\t\t} else {\r\n\t\t\tptComp = this.geomFact.createMultiPointFromCoords(coords);\r\n\t\t}\r\n\t\treturn GeometryCombiner.combine(ptComp, this.otherGeom);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PointGeometryUnion;\r\n\t}\r\n});\r\nPointGeometryUnion.union = function (pointGeom, otherGeom) {\r\n\tvar unioner = new PointGeometryUnion(pointGeom, otherGeom);\r\n\treturn unioner.union();\r\n};\r\n","import extend from '../../../../../extend';\r\nimport GeometryCollection from '../GeometryCollection';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport GeometryFilter from '../GeometryFilter';\r\nexport default function GeometryExtracter() {\r\n\tthis.sortIndex = -1;\r\n\tthis.comps = null;\r\n\tlet sortIndex = arguments[0], comps = arguments[1];\r\n\tthis.sortIndex = sortIndex;\r\n\tthis.comps = comps;\r\n}\r\nextend(GeometryExtracter.prototype, {\r\n\tfilter: function (geom) {\r\n\t\tif (this.sortIndex === -1 || geom.getSortIndex() === this.sortIndex) this.comps.add(geom);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryExtracter;\r\n\t}\r\n});\r\nGeometryExtracter.extract = function () {\r\n\tif (arguments.length === 2) {\r\n\t\tlet geom = arguments[0], sortIndex = arguments[1];\r\n\t\treturn GeometryExtracter.extract(geom, sortIndex, new ArrayList());\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet geom = arguments[0], sortIndex = arguments[1], list = arguments[2];\r\n\t\tif (geom.getSortIndex() === sortIndex) {\r\n\t\t\tlist.add(geom);\r\n\t\t} else if (geom instanceof GeometryCollection) {\r\n\t\t\tgeom.apply(new GeometryExtracter(sortIndex, list));\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n};\r\n","import PolygonExtracter from '../../geom/util/PolygonExtracter';\r\nimport STRtree from '../../index/strtree/STRtree';\r\nimport Geometry from '../../geom/Geometry';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport GeometryFactory from '../../geom/GeometryFactory';\r\nimport extend from '../../../../../extend';\r\nimport GeometryCombiner from '../../geom/util/GeometryCombiner';\r\nimport Polygonal from '../../geom/Polygonal';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport List from '../../../../../java/util/List';\r\nexport default function CascadedPolygonUnion() {\r\n\tthis.inputPolys = null;\r\n\tthis.geomFactory = null;\r\n\tlet polys = arguments[0];\r\n\tthis.inputPolys = polys;\r\n\tif (this.inputPolys === null) this.inputPolys = new ArrayList();\r\n}\r\nextend(CascadedPolygonUnion.prototype, {\r\n\treduceToGeometries: function (geomTree) {\r\n\t\tvar geoms = new ArrayList();\r\n\t\tfor (var i = geomTree.iterator(); i.hasNext(); ) {\r\n\t\t\tvar o = i.next();\r\n\t\t\tvar geom = null;\r\n\t\t\tif (hasInterface(o, List)) {\r\n\t\t\t\tgeom = this.unionTree(o);\r\n\t\t\t} else if (o instanceof Geometry) {\r\n\t\t\t\tgeom = o;\r\n\t\t\t}\r\n\t\t\tgeoms.add(geom);\r\n\t\t}\r\n\t\treturn geoms;\r\n\t},\r\n\textractByEnvelope: function (env, geom, disjointGeoms) {\r\n\t\tvar intersectingGeoms = new ArrayList();\r\n\t\tfor (var i = 0; i < geom.getNumGeometries(); i++) {\r\n\t\t\tvar elem = geom.getGeometryN(i);\r\n\t\t\tif (elem.getEnvelopeInternal().intersects(env)) intersectingGeoms.add(elem); else disjointGeoms.add(elem);\r\n\t\t}\r\n\t\treturn this.geomFactory.buildGeometry(intersectingGeoms);\r\n\t},\r\n\tunionOptimized: function (g0, g1) {\r\n\t\tvar g0Env = g0.getEnvelopeInternal();\r\n\t\tvar g1Env = g1.getEnvelopeInternal();\r\n\t\tif (!g0Env.intersects(g1Env)) {\r\n\t\t\tvar combo = GeometryCombiner.combine(g0, g1);\r\n\t\t\treturn combo;\r\n\t\t}\r\n\t\tif (g0.getNumGeometries() <= 1 && g1.getNumGeometries() <= 1) return this.unionActual(g0, g1);\r\n\t\tvar commonEnv = g0Env.intersection(g1Env);\r\n\t\treturn this.unionUsingEnvelopeIntersection(g0, g1, commonEnv);\r\n\t},\r\n\tunion: function () {\r\n\t\tif (this.inputPolys === null) throw new IllegalStateException(\"union() method cannot be called twice\");\r\n\t\tif (this.inputPolys.isEmpty()) return null;\r\n\t\tthis.geomFactory = this.inputPolys.iterator().next().getFactory();\r\n\t\tvar index = new STRtree(CascadedPolygonUnion.STRTREE_NODE_CAPACITY);\r\n\t\tfor (var i = this.inputPolys.iterator(); i.hasNext(); ) {\r\n\t\t\tvar item = i.next();\r\n\t\t\tindex.insert(item.getEnvelopeInternal(), item);\r\n\t\t}\r\n\t\tthis.inputPolys = null;\r\n\t\tvar itemTree = index.itemsTree();\r\n\t\tvar unionAll = this.unionTree(itemTree);\r\n\t\treturn unionAll;\r\n\t},\r\n\tbinaryUnion: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet geoms = arguments[0];\r\n\t\t\treturn this.binaryUnion(geoms, 0, geoms.size());\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet geoms = arguments[0], start = arguments[1], end = arguments[2];\r\n\t\t\tif (end - start <= 1) {\r\n\t\t\t\tvar g0 = CascadedPolygonUnion.getGeometry(geoms, start);\r\n\t\t\t\treturn this.unionSafe(g0, null);\r\n\t\t\t} else if (end - start === 2) {\r\n\t\t\t\treturn this.unionSafe(CascadedPolygonUnion.getGeometry(geoms, start), CascadedPolygonUnion.getGeometry(geoms, start + 1));\r\n\t\t\t} else {\r\n\t\t\t\tvar mid = Math.trunc((end + start) / 2);\r\n\t\t\t\tvar g0 = this.binaryUnion(geoms, start, mid);\r\n\t\t\t\tvar g1 = this.binaryUnion(geoms, mid, end);\r\n\t\t\t\treturn this.unionSafe(g0, g1);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\trepeatedUnion: function (geoms) {\r\n\t\tvar union = null;\r\n\t\tfor (var i = geoms.iterator(); i.hasNext(); ) {\r\n\t\t\tvar g = i.next();\r\n\t\t\tif (union === null) union = g.copy(); else union = union.union(g);\r\n\t\t}\r\n\t\treturn union;\r\n\t},\r\n\tunionSafe: function (g0, g1) {\r\n\t\tif (g0 === null && g1 === null) return null;\r\n\t\tif (g0 === null) return g1.copy();\r\n\t\tif (g1 === null) return g0.copy();\r\n\t\treturn this.unionOptimized(g0, g1);\r\n\t},\r\n\tunionActual: function (g0, g1) {\r\n\t\treturn CascadedPolygonUnion.restrictToPolygons(g0.union(g1));\r\n\t},\r\n\tunionTree: function (geomTree) {\r\n\t\tvar geoms = this.reduceToGeometries(geomTree);\r\n\t\tvar union = this.binaryUnion(geoms);\r\n\t\treturn union;\r\n\t},\r\n\tunionUsingEnvelopeIntersection: function (g0, g1, common) {\r\n\t\tvar disjointPolys = new ArrayList();\r\n\t\tvar g0Int = this.extractByEnvelope(common, g0, disjointPolys);\r\n\t\tvar g1Int = this.extractByEnvelope(common, g1, disjointPolys);\r\n\t\tvar union = this.unionActual(g0Int, g1Int);\r\n\t\tdisjointPolys.add(union);\r\n\t\tvar overallUnion = GeometryCombiner.combine(disjointPolys);\r\n\t\treturn overallUnion;\r\n\t},\r\n\tbufferUnion: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet geoms = arguments[0];\r\n\t\t\tvar factory = geoms.get(0).getFactory();\r\n\t\t\tvar gColl = factory.buildGeometry(geoms);\r\n\t\t\tvar unionAll = gColl.buffer(0.0);\r\n\t\t\treturn unionAll;\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet g0 = arguments[0], g1 = arguments[1];\r\n\t\t\tvar factory = g0.getFactory();\r\n\t\t\tvar gColl = factory.createGeometryCollection([g0, g1]);\r\n\t\t\tvar unionAll = gColl.buffer(0.0);\r\n\t\t\treturn unionAll;\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn CascadedPolygonUnion;\r\n\t}\r\n});\r\nCascadedPolygonUnion.restrictToPolygons = function (g) {\r\n\tif (hasInterface(g, Polygonal)) {\r\n\t\treturn g;\r\n\t}\r\n\tvar polygons = PolygonExtracter.getPolygons(g);\r\n\tif (polygons.size() === 1) return polygons.get(0);\r\n\treturn g.getFactory().createMultiPolygon(GeometryFactory.toPolygonArray(polygons));\r\n};\r\nCascadedPolygonUnion.getGeometry = function (list, index) {\r\n\tif (index >= list.size()) return null;\r\n\treturn list.get(index);\r\n};\r\nCascadedPolygonUnion.union = function (polys) {\r\n\tvar op = new CascadedPolygonUnion(polys);\r\n\treturn op.union();\r\n};\r\nCascadedPolygonUnion.STRTREE_NODE_CAPACITY = 4;\r\n","import Geometry from '../../geom/Geometry';\r\nimport PointGeometryUnion from './PointGeometryUnion';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport Collection from '../../../../../java/util/Collection';\r\nimport SnapIfNeededOverlayOp from '../overlay/snap/SnapIfNeededOverlayOp';\r\nimport extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport GeometryExtracter from '../../geom/util/GeometryExtracter';\r\nimport OverlayOp from '../overlay/OverlayOp';\r\nimport CascadedPolygonUnion from './CascadedPolygonUnion';\r\nexport default function UnaryUnionOp() {\r\n\tthis.polygons = new ArrayList();\r\n\tthis.lines = new ArrayList();\r\n\tthis.points = new ArrayList();\r\n\tthis.geomFact = null;\r\n\tif (arguments.length === 1) {\r\n\t\tif (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet geoms = arguments[0];\r\n\t\t\tthis.extract(geoms);\r\n\t\t} else if (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geom = arguments[0];\r\n\t\t\tthis.extract(geom);\r\n\t\t}\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet geoms = arguments[0], geomFact = arguments[1];\r\n\t\tthis.geomFact = geomFact;\r\n\t\tthis.extract(geoms);\r\n\t}\r\n}\r\nextend(UnaryUnionOp.prototype, {\r\n\tunionNoOpt: function (g0) {\r\n\t\tvar empty = this.geomFact.createPoint();\r\n\t\treturn SnapIfNeededOverlayOp.overlayOp(g0, empty, OverlayOp.UNION);\r\n\t},\r\n\tunionWithNull: function (g0, g1) {\r\n\t\tif (g0 === null && g1 === null) return null;\r\n\t\tif (g1 === null) return g0;\r\n\t\tif (g0 === null) return g1;\r\n\t\treturn g0.union(g1);\r\n\t},\r\n\textract: function () {\r\n\t\tif (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet geoms = arguments[0];\r\n\t\t\tfor (var i = geoms.iterator(); i.hasNext(); ) {\r\n\t\t\t\tvar geom = i.next();\r\n\t\t\t\tthis.extract(geom);\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geom = arguments[0];\r\n\t\t\tif (this.geomFact === null) this.geomFact = geom.getFactory();\r\n\t\t\tGeometryExtracter.extract(geom, Geometry.SORTINDEX_POLYGON, this.polygons);\r\n\t\t\tGeometryExtracter.extract(geom, Geometry.SORTINDEX_LINESTRING, this.lines);\r\n\t\t\tGeometryExtracter.extract(geom, Geometry.SORTINDEX_POINT, this.points);\r\n\t\t}\r\n\t},\r\n\tunion: function () {\r\n\t\tif (this.geomFact === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar unionPoints = null;\r\n\t\tif (this.points.size() > 0) {\r\n\t\t\tvar ptGeom = this.geomFact.buildGeometry(this.points);\r\n\t\t\tunionPoints = this.unionNoOpt(ptGeom);\r\n\t\t}\r\n\t\tvar unionLines = null;\r\n\t\tif (this.lines.size() > 0) {\r\n\t\t\tvar lineGeom = this.geomFact.buildGeometry(this.lines);\r\n\t\t\tunionLines = this.unionNoOpt(lineGeom);\r\n\t\t}\r\n\t\tvar unionPolygons = null;\r\n\t\tif (this.polygons.size() > 0) {\r\n\t\t\tunionPolygons = CascadedPolygonUnion.union(this.polygons);\r\n\t\t}\r\n\t\tvar unionLA = this.unionWithNull(unionLines, unionPolygons);\r\n\t\tvar union = null;\r\n\t\tif (unionPoints === null) union = unionLA; else if (unionLA === null) union = unionPoints; else union = PointGeometryUnion.union(unionPoints, unionLA);\r\n\t\tif (union === null) return this.geomFact.createGeometryCollection();\r\n\t\treturn union;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn UnaryUnionOp;\r\n\t}\r\n});\r\nUnaryUnionOp.union = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tif (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet geoms = arguments[0];\r\n\t\t\tvar op = new UnaryUnionOp(geoms);\r\n\t\t\treturn op.union();\r\n\t\t} else if (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geom = arguments[0];\r\n\t\t\tvar op = new UnaryUnionOp(geom);\r\n\t\t\treturn op.union();\r\n\t\t}\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet geoms = arguments[0], geomFact = arguments[1];\r\n\t\tvar op = new UnaryUnionOp(geoms, geomFact);\r\n\t\treturn op.union();\r\n\t}\r\n};\r\n","import LineString from '../geom/LineString';\r\nimport CoordinateList from '../geom/CoordinateList';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport GeometryEditor from '../geom/util/GeometryEditor';\r\nimport LinearRing from '../geom/LinearRing';\r\nimport extend from '../../../../extend';\r\nimport inherits from '../../../../inherits';\r\nexport default function PrecisionReducerCoordinateOperation() {\r\n\tGeometryEditor.CoordinateOperation.apply(this);\r\n\tthis.targetPM = null;\r\n\tthis.removeCollapsed = true;\r\n\tlet targetPM = arguments[0], removeCollapsed = arguments[1];\r\n\tthis.targetPM = targetPM;\r\n\tthis.removeCollapsed = removeCollapsed;\r\n}\r\ninherits(PrecisionReducerCoordinateOperation, GeometryEditor.CoordinateOperation);\r\nextend(PrecisionReducerCoordinateOperation.prototype, {\r\n\teditCoordinates: function (coordinates, geom) {\r\n\t\tif (coordinates.length === 0) return null;\r\n\t\tvar reducedCoords = new Array(coordinates.length).fill(null);\r\n\t\tfor (var i = 0; i < coordinates.length; i++) {\r\n\t\t\tvar coord = new Coordinate(coordinates[i]);\r\n\t\t\tthis.targetPM.makePrecise(coord);\r\n\t\t\treducedCoords[i] = coord;\r\n\t\t}\r\n\t\tvar noRepeatedCoordList = new CoordinateList(reducedCoords, false);\r\n\t\tvar noRepeatedCoords = noRepeatedCoordList.toCoordinateArray();\r\n\t\tvar minLength = 0;\r\n\t\tif (geom instanceof LineString) minLength = 2;\r\n\t\tif (geom instanceof LinearRing) minLength = 4;\r\n\t\tvar collapsedCoords = reducedCoords;\r\n\t\tif (this.removeCollapsed) collapsedCoords = null;\r\n\t\tif (noRepeatedCoords.length < minLength) {\r\n\t\t\treturn collapsedCoords;\r\n\t\t}\r\n\t\treturn noRepeatedCoords;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn PrecisionReducerCoordinateOperation;\r\n\t}\r\n});\r\n","import hasInterface from '../../../../hasInterface';\r\nimport GeometryFactory from '../geom/GeometryFactory';\r\nimport GeometryEditor from '../geom/util/GeometryEditor';\r\nimport extend from '../../../../extend';\r\nimport Polygonal from '../geom/Polygonal';\r\nimport PrecisionReducerCoordinateOperation from './PrecisionReducerCoordinateOperation';\r\nexport default function GeometryPrecisionReducer() {\r\n\tthis.targetPM = null;\r\n\tthis.removeCollapsed = true;\r\n\tthis.changePrecisionModel = false;\r\n\tthis.isPointwise = false;\r\n\tlet pm = arguments[0];\r\n\tthis.targetPM = pm;\r\n}\r\nextend(GeometryPrecisionReducer.prototype, {\r\n\tfixPolygonalTopology: function (geom) {\r\n\t\tvar geomToBuffer = geom;\r\n\t\tif (!this.changePrecisionModel) {\r\n\t\t\tgeomToBuffer = this.changePM(geom, this.targetPM);\r\n\t\t}\r\n\t\tvar bufGeom = geomToBuffer.buffer(0);\r\n\t\tvar finalGeom = bufGeom;\r\n\t\tif (!this.changePrecisionModel) {\r\n\t\t\tfinalGeom = this.changePM(bufGeom, geom.getPrecisionModel());\r\n\t\t}\r\n\t\treturn finalGeom;\r\n\t},\r\n\treducePointwise: function (geom) {\r\n\t\tvar geomEdit = null;\r\n\t\tif (this.changePrecisionModel) {\r\n\t\t\tvar newFactory = this.createFactory(geom.getFactory(), this.targetPM);\r\n\t\t\tgeomEdit = new GeometryEditor(newFactory);\r\n\t\t} else geomEdit = new GeometryEditor();\r\n\t\tvar finalRemoveCollapsed = this.removeCollapsed;\r\n\t\tif (geom.getDimension() >= 2) finalRemoveCollapsed = true;\r\n\t\tvar reduceGeom = geomEdit.edit(geom, new PrecisionReducerCoordinateOperation(this.targetPM, finalRemoveCollapsed));\r\n\t\treturn reduceGeom;\r\n\t},\r\n\tchangePM: function (geom, newPM) {\r\n\t\tvar geomEditor = this.createEditor(geom.getFactory(), newPM);\r\n\t\treturn geomEditor.edit(geom, new GeometryEditor.NoOpGeometryOperation());\r\n\t},\r\n\tsetRemoveCollapsedComponents: function (removeCollapsed) {\r\n\t\tthis.removeCollapsed = removeCollapsed;\r\n\t},\r\n\tcreateFactory: function (inputFactory, pm) {\r\n\t\tvar newFactory = new GeometryFactory(pm, inputFactory.getSRID(), inputFactory.getCoordinateSequenceFactory());\r\n\t\treturn newFactory;\r\n\t},\r\n\tsetChangePrecisionModel: function (changePrecisionModel) {\r\n\t\tthis.changePrecisionModel = changePrecisionModel;\r\n\t},\r\n\treduce: function (geom) {\r\n\t\tvar reducePW = this.reducePointwise(geom);\r\n\t\tif (this.isPointwise) return reducePW;\r\n\t\tif (!hasInterface(reducePW, Polygonal)) return reducePW;\r\n\t\tif (reducePW.isValid()) return reducePW;\r\n\t\treturn this.fixPolygonalTopology(reducePW);\r\n\t},\r\n\tsetPointwise: function (isPointwise) {\r\n\t\tthis.isPointwise = isPointwise;\r\n\t},\r\n\tcreateEditor: function (geomFactory, newPM) {\r\n\t\tif (geomFactory.getPrecisionModel() === newPM) return new GeometryEditor();\r\n\t\tvar newFactory = this.createFactory(geomFactory, newPM);\r\n\t\tvar geomEdit = new GeometryEditor(newFactory);\r\n\t\treturn geomEdit;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn GeometryPrecisionReducer;\r\n\t}\r\n});\r\nGeometryPrecisionReducer.reduce = function (g, precModel) {\r\n\tvar reducer = new GeometryPrecisionReducer(precModel);\r\n\treturn reducer.reduce(g);\r\n};\r\nGeometryPrecisionReducer.reducePointwise = function (g, precModel) {\r\n\tvar reducer = new GeometryPrecisionReducer(precModel);\r\n\treducer.setPointwise(true);\r\n\treturn reducer.reduce(g);\r\n};\r\n","import CoordinateList from '../geom/CoordinateList';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport LineSegment from '../geom/LineSegment';\r\nexport default function DouglasPeuckerLineSimplifier() {\r\n\tthis.pts = null;\r\n\tthis.usePt = null;\r\n\tthis.distanceTolerance = null;\r\n\tthis.seg = new LineSegment();\r\n\tlet pts = arguments[0];\r\n\tthis.pts = pts;\r\n}\r\nextend(DouglasPeuckerLineSimplifier.prototype, {\r\n\tsimplifySection: function (i, j) {\r\n\t\tif (i + 1 === j) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tthis.seg.p0 = this.pts[i];\r\n\t\tthis.seg.p1 = this.pts[j];\r\n\t\tvar maxDistance = -1.0;\r\n\t\tvar maxIndex = i;\r\n\t\tfor (var k = i + 1; k < j; k++) {\r\n\t\t\tvar distance = this.seg.distance(this.pts[k]);\r\n\t\t\tif (distance > maxDistance) {\r\n\t\t\t\tmaxDistance = distance;\r\n\t\t\t\tmaxIndex = k;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (maxDistance <= this.distanceTolerance) {\r\n\t\t\tfor (var k = i + 1; k < j; k++) {\r\n\t\t\t\tthis.usePt[k] = false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.simplifySection(i, maxIndex);\r\n\t\t\tthis.simplifySection(maxIndex, j);\r\n\t\t}\r\n\t},\r\n\tsetDistanceTolerance: function (distanceTolerance) {\r\n\t\tthis.distanceTolerance = distanceTolerance;\r\n\t},\r\n\tsimplify: function () {\r\n\t\tthis.usePt = new Array(this.pts.length).fill(null);\r\n\t\tfor (var i = 0; i < this.pts.length; i++) {\r\n\t\t\tthis.usePt[i] = true;\r\n\t\t}\r\n\t\tthis.simplifySection(0, this.pts.length - 1);\r\n\t\tvar coordList = new CoordinateList();\r\n\t\tfor (var i = 0; i < this.pts.length; i++) {\r\n\t\t\tif (this.usePt[i]) coordList.add(new Coordinate(this.pts[i]));\r\n\t\t}\r\n\t\treturn coordList.toCoordinateArray();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DouglasPeuckerLineSimplifier;\r\n\t}\r\n});\r\nDouglasPeuckerLineSimplifier.simplify = function (pts, distanceTolerance) {\r\n\tvar simp = new DouglasPeuckerLineSimplifier(pts);\r\n\tsimp.setDistanceTolerance(distanceTolerance);\r\n\treturn simp.simplify();\r\n};\r\n","import DouglasPeuckerLineSimplifier from './DouglasPeuckerLineSimplifier';\r\nimport GeometryTransformer from '../geom/util/GeometryTransformer';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport Polygon from '../geom/Polygon';\r\nimport LinearRing from '../geom/LinearRing';\r\nimport extend from '../../../../extend';\r\nimport MultiPolygon from '../geom/MultiPolygon';\r\nimport inherits from '../../../../inherits';\r\nexport default function DouglasPeuckerSimplifier() {\r\n\tthis.inputGeom = null;\r\n\tthis.distanceTolerance = null;\r\n\tthis.isEnsureValidTopology = true;\r\n\tlet inputGeom = arguments[0];\r\n\tthis.inputGeom = inputGeom;\r\n}\r\nextend(DouglasPeuckerSimplifier.prototype, {\r\n\tsetEnsureValid: function (isEnsureValidTopology) {\r\n\t\tthis.isEnsureValidTopology = isEnsureValidTopology;\r\n\t},\r\n\tgetResultGeometry: function () {\r\n\t\tif (this.inputGeom.isEmpty()) return this.inputGeom.copy();\r\n\t\treturn new DPTransformer(this.isEnsureValidTopology, this.distanceTolerance).transform(this.inputGeom);\r\n\t},\r\n\tsetDistanceTolerance: function (distanceTolerance) {\r\n\t\tif (distanceTolerance < 0.0) throw new IllegalArgumentException(\"Tolerance must be non-negative\");\r\n\t\tthis.distanceTolerance = distanceTolerance;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DouglasPeuckerSimplifier;\r\n\t}\r\n});\r\nDouglasPeuckerSimplifier.simplify = function (geom, distanceTolerance) {\r\n\tvar tss = new DouglasPeuckerSimplifier(geom);\r\n\ttss.setDistanceTolerance(distanceTolerance);\r\n\treturn tss.getResultGeometry();\r\n};\r\nfunction DPTransformer() {\r\n\tGeometryTransformer.apply(this);\r\n\tthis.isEnsureValidTopology = true;\r\n\tthis.distanceTolerance = null;\r\n\tlet isEnsureValidTopology = arguments[0], distanceTolerance = arguments[1];\r\n\tthis.isEnsureValidTopology = isEnsureValidTopology;\r\n\tthis.distanceTolerance = distanceTolerance;\r\n}\r\ninherits(DPTransformer, GeometryTransformer);\r\nextend(DPTransformer.prototype, {\r\n\ttransformPolygon: function (geom, parent) {\r\n\t\tif (geom.isEmpty()) return null;\r\n\t\tvar rawGeom = GeometryTransformer.prototype.transformPolygon.call(this, geom, parent);\r\n\t\tif (parent instanceof MultiPolygon) {\r\n\t\t\treturn rawGeom;\r\n\t\t}\r\n\t\treturn this.createValidArea(rawGeom);\r\n\t},\r\n\tcreateValidArea: function (rawAreaGeom) {\r\n\t\tif (this.isEnsureValidTopology) return rawAreaGeom.buffer(0.0);\r\n\t\treturn rawAreaGeom;\r\n\t},\r\n\ttransformCoordinates: function (coords, parent) {\r\n\t\tvar inputPts = coords.toCoordinateArray();\r\n\t\tvar newPts = null;\r\n\t\tif (inputPts.length === 0) {\r\n\t\t\tnewPts = new Array(0).fill(null);\r\n\t\t} else {\r\n\t\t\tnewPts = DouglasPeuckerLineSimplifier.simplify(inputPts, this.distanceTolerance);\r\n\t\t}\r\n\t\treturn this.factory.getCoordinateSequenceFactory().create(newPts);\r\n\t},\r\n\ttransformMultiPolygon: function (geom, parent) {\r\n\t\tvar rawGeom = GeometryTransformer.prototype.transformMultiPolygon.call(this, geom, parent);\r\n\t\treturn this.createValidArea(rawGeom);\r\n\t},\r\n\ttransformLinearRing: function (geom, parent) {\r\n\t\tvar removeDegenerateRings = parent instanceof Polygon;\r\n\t\tvar simpResult = GeometryTransformer.prototype.transformLinearRing.call(this, geom, parent);\r\n\t\tif (removeDegenerateRings && !(simpResult instanceof LinearRing)) return null;\r\n\t\t;\r\n\t\treturn simpResult;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DPTransformer;\r\n\t}\r\n});\r\nDouglasPeuckerSimplifier.DPTransformer = DPTransformer;\r\n","import extend from '../../../../extend';\r\nimport LineSegment from '../geom/LineSegment';\r\nimport inherits from '../../../../inherits';\r\nexport default function TaggedLineSegment() {\r\n\tthis.parent = null;\r\n\tthis.index = null;\r\n\tif (arguments.length === 2) {\r\n\t\tlet p0 = arguments[0], p1 = arguments[1];\r\n\t\tTaggedLineSegment.call(this, p0, p1, null, -1);\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet p0 = arguments[0], p1 = arguments[1], parent = arguments[2], index = arguments[3];\r\n\t\tLineSegment.call(this, p0, p1);\r\n\t\tthis.parent = parent;\r\n\t\tthis.index = index;\r\n\t}\r\n}\r\ninherits(TaggedLineSegment, LineSegment);\r\nextend(TaggedLineSegment.prototype, {\r\n\tgetIndex: function () {\r\n\t\treturn this.index;\r\n\t},\r\n\tgetParent: function () {\r\n\t\treturn this.parent;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TaggedLineSegment;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport TaggedLineSegment from './TaggedLineSegment';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function TaggedLineString() {\r\n\tthis.parentLine = null;\r\n\tthis.segs = null;\r\n\tthis.resultSegs = new ArrayList();\r\n\tthis.minimumSize = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet parentLine = arguments[0];\r\n\t\tTaggedLineString.call(this, parentLine, 2);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet parentLine = arguments[0], minimumSize = arguments[1];\r\n\t\tthis.parentLine = parentLine;\r\n\t\tthis.minimumSize = minimumSize;\r\n\t\tthis.init();\r\n\t}\r\n}\r\nextend(TaggedLineString.prototype, {\r\n\taddToResult: function (seg) {\r\n\t\tthis.resultSegs.add(seg);\r\n\t},\r\n\tasLineString: function () {\r\n\t\treturn this.parentLine.getFactory().createLineString(TaggedLineString.extractCoordinates(this.resultSegs));\r\n\t},\r\n\tgetResultSize: function () {\r\n\t\tvar resultSegsSize = this.resultSegs.size();\r\n\t\treturn resultSegsSize === 0 ? 0 : resultSegsSize + 1;\r\n\t},\r\n\tgetParent: function () {\r\n\t\treturn this.parentLine;\r\n\t},\r\n\tgetSegment: function (i) {\r\n\t\treturn this.segs[i];\r\n\t},\r\n\tgetParentCoordinates: function () {\r\n\t\treturn this.parentLine.getCoordinates();\r\n\t},\r\n\tgetMinimumSize: function () {\r\n\t\treturn this.minimumSize;\r\n\t},\r\n\tasLinearRing: function () {\r\n\t\treturn this.parentLine.getFactory().createLinearRing(TaggedLineString.extractCoordinates(this.resultSegs));\r\n\t},\r\n\tgetSegments: function () {\r\n\t\treturn this.segs;\r\n\t},\r\n\tinit: function () {\r\n\t\tvar pts = this.parentLine.getCoordinates();\r\n\t\tthis.segs = new Array(pts.length - 1).fill(null);\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tvar seg = new TaggedLineSegment(pts[i], pts[i + 1], this.parentLine, i);\r\n\t\t\tthis.segs[i] = seg;\r\n\t\t}\r\n\t},\r\n\tgetResultCoordinates: function () {\r\n\t\treturn TaggedLineString.extractCoordinates(this.resultSegs);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TaggedLineString;\r\n\t}\r\n});\r\nTaggedLineString.extractCoordinates = function (segs) {\r\n\tvar pts = new Array(segs.size() + 1).fill(null);\r\n\tvar seg = null;\r\n\tfor (var i = 0; i < segs.size(); i++) {\r\n\t\tseg = segs.get(i);\r\n\t\tpts[i] = seg.p0;\r\n\t}\r\n\tpts[pts.length - 1] = seg.p1;\r\n\treturn pts;\r\n};\r\n","import Quadtree from '../index/quadtree/Quadtree';\r\nimport ItemVisitor from '../index/ItemVisitor';\r\nimport extend from '../../../../extend';\r\nimport LineSegment from '../geom/LineSegment';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Envelope from '../geom/Envelope';\r\nimport TaggedLineString from './TaggedLineString';\r\nexport default function LineSegmentIndex() {\r\n\tthis.index = new Quadtree();\r\n}\r\nextend(LineSegmentIndex.prototype, {\r\n\tremove: function (seg) {\r\n\t\tthis.index.remove(new Envelope(seg.p0, seg.p1), seg);\r\n\t},\r\n\tadd: function () {\r\n\t\tif (arguments[0] instanceof TaggedLineString) {\r\n\t\t\tlet line = arguments[0];\r\n\t\t\tvar segs = line.getSegments();\r\n\t\t\tfor (var i = 0; i < segs.length; i++) {\r\n\t\t\t\tvar seg = segs[i];\r\n\t\t\t\tthis.add(seg);\r\n\t\t\t}\r\n\t\t} else if (arguments[0] instanceof LineSegment) {\r\n\t\t\tlet seg = arguments[0];\r\n\t\t\tthis.index.insert(new Envelope(seg.p0, seg.p1), seg);\r\n\t\t}\r\n\t},\r\n\tquery: function (querySeg) {\r\n\t\tvar env = new Envelope(querySeg.p0, querySeg.p1);\r\n\t\tvar visitor = new LineSegmentVisitor(querySeg);\r\n\t\tthis.index.query(env, visitor);\r\n\t\tvar itemsFound = visitor.getItems();\r\n\t\treturn itemsFound;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineSegmentIndex;\r\n\t}\r\n});\r\nfunction LineSegmentVisitor() {\r\n\tthis.querySeg = null;\r\n\tthis.items = new ArrayList();\r\n\tlet querySeg = arguments[0];\r\n\tthis.querySeg = querySeg;\r\n}\r\nextend(LineSegmentVisitor.prototype, {\r\n\tvisitItem: function (item) {\r\n\t\tvar seg = item;\r\n\t\tif (Envelope.intersects(seg.p0, seg.p1, this.querySeg.p0, this.querySeg.p1)) this.items.add(item);\r\n\t},\r\n\tgetItems: function () {\r\n\t\treturn this.items;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [ItemVisitor];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineSegmentVisitor;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport LineSegment from '../geom/LineSegment';\r\nimport LineSegmentIndex from './LineSegmentIndex';\r\nimport RobustLineIntersector from '../algorithm/RobustLineIntersector';\r\nexport default function TaggedLineStringSimplifier() {\r\n\tthis.li = new RobustLineIntersector();\r\n\tthis.inputIndex = new LineSegmentIndex();\r\n\tthis.outputIndex = new LineSegmentIndex();\r\n\tthis.line = null;\r\n\tthis.linePts = null;\r\n\tthis.distanceTolerance = 0.0;\r\n\tlet inputIndex = arguments[0], outputIndex = arguments[1];\r\n\tthis.inputIndex = inputIndex;\r\n\tthis.outputIndex = outputIndex;\r\n}\r\nextend(TaggedLineStringSimplifier.prototype, {\r\n\tflatten: function (start, end) {\r\n\t\tvar p0 = this.linePts[start];\r\n\t\tvar p1 = this.linePts[end];\r\n\t\tvar newSeg = new LineSegment(p0, p1);\r\n\t\tthis.remove(this.line, start, end);\r\n\t\tthis.outputIndex.add(newSeg);\r\n\t\treturn newSeg;\r\n\t},\r\n\thasBadIntersection: function (parentLine, sectionIndex, candidateSeg) {\r\n\t\tif (this.hasBadOutputIntersection(candidateSeg)) return true;\r\n\t\tif (this.hasBadInputIntersection(parentLine, sectionIndex, candidateSeg)) return true;\r\n\t\treturn false;\r\n\t},\r\n\tsetDistanceTolerance: function (distanceTolerance) {\r\n\t\tthis.distanceTolerance = distanceTolerance;\r\n\t},\r\n\tsimplifySection: function (i, j, depth) {\r\n\t\tdepth += 1;\r\n\t\tvar sectionIndex = new Array(2).fill(null);\r\n\t\tif (i + 1 === j) {\r\n\t\t\tvar newSeg = this.line.getSegment(i);\r\n\t\t\tthis.line.addToResult(newSeg);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar isValidToSimplify = true;\r\n\t\tif (this.line.getResultSize() < this.line.getMinimumSize()) {\r\n\t\t\tvar worstCaseSize = depth + 1;\r\n\t\t\tif (worstCaseSize < this.line.getMinimumSize()) isValidToSimplify = false;\r\n\t\t}\r\n\t\tvar distance = new Array(1).fill(null);\r\n\t\tvar furthestPtIndex = this.findFurthestPoint(this.linePts, i, j, distance);\r\n\t\tif (distance[0] > this.distanceTolerance) isValidToSimplify = false;\r\n\t\tvar candidateSeg = new LineSegment();\r\n\t\tcandidateSeg.p0 = this.linePts[i];\r\n\t\tcandidateSeg.p1 = this.linePts[j];\r\n\t\tsectionIndex[0] = i;\r\n\t\tsectionIndex[1] = j;\r\n\t\tif (this.hasBadIntersection(this.line, sectionIndex, candidateSeg)) isValidToSimplify = false;\r\n\t\tif (isValidToSimplify) {\r\n\t\t\tvar newSeg = this.flatten(i, j);\r\n\t\t\tthis.line.addToResult(newSeg);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tthis.simplifySection(i, furthestPtIndex, depth);\r\n\t\tthis.simplifySection(furthestPtIndex, j, depth);\r\n\t},\r\n\thasBadOutputIntersection: function (candidateSeg) {\r\n\t\tvar querySegs = this.outputIndex.query(candidateSeg);\r\n\t\tfor (var i = querySegs.iterator(); i.hasNext(); ) {\r\n\t\t\tvar querySeg = i.next();\r\n\t\t\tif (this.hasInteriorIntersection(querySeg, candidateSeg)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tfindFurthestPoint: function (pts, i, j, maxDistance) {\r\n\t\tvar seg = new LineSegment();\r\n\t\tseg.p0 = pts[i];\r\n\t\tseg.p1 = pts[j];\r\n\t\tvar maxDist = -1.0;\r\n\t\tvar maxIndex = i;\r\n\t\tfor (var k = i + 1; k < j; k++) {\r\n\t\t\tvar midPt = pts[k];\r\n\t\t\tvar distance = seg.distance(midPt);\r\n\t\t\tif (distance > maxDist) {\r\n\t\t\t\tmaxDist = distance;\r\n\t\t\t\tmaxIndex = k;\r\n\t\t\t}\r\n\t\t}\r\n\t\tmaxDistance[0] = maxDist;\r\n\t\treturn maxIndex;\r\n\t},\r\n\tsimplify: function (line) {\r\n\t\tthis.line = line;\r\n\t\tthis.linePts = line.getParentCoordinates();\r\n\t\tthis.simplifySection(0, this.linePts.length - 1, 0);\r\n\t},\r\n\tremove: function (line, start, end) {\r\n\t\tfor (var i = start; i < end; i++) {\r\n\t\t\tvar seg = line.getSegment(i);\r\n\t\t\tthis.inputIndex.remove(seg);\r\n\t\t}\r\n\t},\r\n\thasInteriorIntersection: function (seg0, seg1) {\r\n\t\tthis.li.computeIntersection(seg0.p0, seg0.p1, seg1.p0, seg1.p1);\r\n\t\treturn this.li.isInteriorIntersection();\r\n\t},\r\n\thasBadInputIntersection: function (parentLine, sectionIndex, candidateSeg) {\r\n\t\tvar querySegs = this.inputIndex.query(candidateSeg);\r\n\t\tfor (var i = querySegs.iterator(); i.hasNext(); ) {\r\n\t\t\tvar querySeg = i.next();\r\n\t\t\tif (this.hasInteriorIntersection(querySeg, candidateSeg)) {\r\n\t\t\t\tif (TaggedLineStringSimplifier.isInLineSection(parentLine, sectionIndex, querySeg)) continue;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TaggedLineStringSimplifier;\r\n\t}\r\n});\r\nTaggedLineStringSimplifier.isInLineSection = function (line, sectionIndex, seg) {\r\n\tif (seg.getParent() !== line.getParent()) return false;\r\n\tvar segIndex = seg.getIndex();\r\n\tif (segIndex >= sectionIndex[0] && segIndex < sectionIndex[1]) return true;\r\n\treturn false;\r\n};\r\n","import extend from '../../../../extend';\r\nimport TaggedLineStringSimplifier from './TaggedLineStringSimplifier';\r\nimport LineSegmentIndex from './LineSegmentIndex';\r\nexport default function TaggedLinesSimplifier() {\r\n\tthis.inputIndex = new LineSegmentIndex();\r\n\tthis.outputIndex = new LineSegmentIndex();\r\n\tthis.distanceTolerance = 0.0;\r\n}\r\nextend(TaggedLinesSimplifier.prototype, {\r\n\tsetDistanceTolerance: function (distanceTolerance) {\r\n\t\tthis.distanceTolerance = distanceTolerance;\r\n\t},\r\n\tsimplify: function (taggedLines) {\r\n\t\tfor (var i = taggedLines.iterator(); i.hasNext(); ) {\r\n\t\t\tthis.inputIndex.add(i.next());\r\n\t\t}\r\n\t\tfor (var i = taggedLines.iterator(); i.hasNext(); ) {\r\n\t\t\tvar tlss = new TaggedLineStringSimplifier(this.inputIndex, this.outputIndex);\r\n\t\t\ttlss.setDistanceTolerance(this.distanceTolerance);\r\n\t\t\ttlss.simplify(i.next());\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TaggedLinesSimplifier;\r\n\t}\r\n});\r\n","import LineString from '../geom/LineString';\r\nimport HashMap from '../../../../java/util/HashMap';\r\nimport GeometryTransformer from '../geom/util/GeometryTransformer';\r\nimport TaggedLinesSimplifier from './TaggedLinesSimplifier';\r\nimport IllegalArgumentException from '../../../../java/lang/IllegalArgumentException';\r\nimport extend from '../../../../extend';\r\nimport GeometryComponentFilter from '../geom/GeometryComponentFilter';\r\nimport inherits from '../../../../inherits';\r\nimport TaggedLineString from './TaggedLineString';\r\nexport default function TopologyPreservingSimplifier() {\r\n\tthis.inputGeom = null;\r\n\tthis.lineSimplifier = new TaggedLinesSimplifier();\r\n\tthis.linestringMap = null;\r\n\tlet inputGeom = arguments[0];\r\n\tthis.inputGeom = inputGeom;\r\n}\r\nextend(TopologyPreservingSimplifier.prototype, {\r\n\tgetResultGeometry: function () {\r\n\t\tif (this.inputGeom.isEmpty()) return this.inputGeom.copy();\r\n\t\tthis.linestringMap = new HashMap();\r\n\t\tthis.inputGeom.apply(new LineStringMapBuilderFilter(this));\r\n\t\tthis.lineSimplifier.simplify(this.linestringMap.values());\r\n\t\tvar result = new LineStringTransformer(this.linestringMap).transform(this.inputGeom);\r\n\t\treturn result;\r\n\t},\r\n\tsetDistanceTolerance: function (distanceTolerance) {\r\n\t\tif (distanceTolerance < 0.0) throw new IllegalArgumentException(\"Tolerance must be non-negative\");\r\n\t\tthis.lineSimplifier.setDistanceTolerance(distanceTolerance);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TopologyPreservingSimplifier;\r\n\t}\r\n});\r\nTopologyPreservingSimplifier.simplify = function (geom, distanceTolerance) {\r\n\tvar tss = new TopologyPreservingSimplifier(geom);\r\n\ttss.setDistanceTolerance(distanceTolerance);\r\n\treturn tss.getResultGeometry();\r\n};\r\nfunction LineStringTransformer() {\r\n\tGeometryTransformer.apply(this);\r\n\tthis.linestringMap = null;\r\n\tlet linestringMap = arguments[0];\r\n\tthis.linestringMap = linestringMap;\r\n}\r\ninherits(LineStringTransformer, GeometryTransformer);\r\nextend(LineStringTransformer.prototype, {\r\n\ttransformCoordinates: function (coords, parent) {\r\n\t\tif (coords.size() === 0) return null;\r\n\t\tif (parent instanceof LineString) {\r\n\t\t\tvar taggedLine = this.linestringMap.get(parent);\r\n\t\t\treturn this.createCoordinateSequence(taggedLine.getResultCoordinates());\r\n\t\t}\r\n\t\treturn GeometryTransformer.prototype.transformCoordinates.call(this, coords, parent);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineStringTransformer;\r\n\t}\r\n});\r\nfunction LineStringMapBuilderFilter() {\r\n\tthis.tps = null;\r\n\tlet tps = arguments[0];\r\n\tthis.tps = tps;\r\n}\r\nextend(LineStringMapBuilderFilter.prototype, {\r\n\tfilter: function (geom) {\r\n\t\tif (geom instanceof LineString) {\r\n\t\t\tvar line = geom;\r\n\t\t\tif (line.isEmpty()) return null;\r\n\t\t\tvar minSize = line.isClosed() ? 4 : 2;\r\n\t\t\tvar taggedLine = new TaggedLineString(line, minSize);\r\n\t\t\tthis.tps.linestringMap.put(line, taggedLine);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [GeometryComponentFilter];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LineStringMapBuilderFilter;\r\n\t}\r\n});\r\nTopologyPreservingSimplifier.LineStringTransformer = LineStringTransformer;\r\nTopologyPreservingSimplifier.LineStringMapBuilderFilter = LineStringMapBuilderFilter;\r\n","import Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nexport default function SplitSegment() {\r\n\tthis.seg = null;\r\n\tthis.segLen = null;\r\n\tthis.splitPt = null;\r\n\tthis.minimumLen = 0.0;\r\n\tlet seg = arguments[0];\r\n\tthis.seg = seg;\r\n\tthis.segLen = seg.getLength();\r\n}\r\nextend(SplitSegment.prototype, {\r\n\tsplitAt: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet pt = arguments[0];\r\n\t\t\tvar minFrac = this.minimumLen / this.segLen;\r\n\t\t\tif (pt.distance(this.seg.p0) < this.minimumLen) {\r\n\t\t\t\tthis.splitPt = this.seg.pointAlong(minFrac);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (pt.distance(this.seg.p1) < this.minimumLen) {\r\n\t\t\t\tthis.splitPt = SplitSegment.pointAlongReverse(this.seg, minFrac);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tthis.splitPt = pt;\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet length = arguments[0], endPt = arguments[1];\r\n\t\t\tvar actualLen = this.getConstrainedLength(length);\r\n\t\t\tvar frac = actualLen / this.segLen;\r\n\t\t\tif (endPt.equals2D(this.seg.p0)) this.splitPt = this.seg.pointAlong(frac); else this.splitPt = SplitSegment.pointAlongReverse(this.seg, frac);\r\n\t\t}\r\n\t},\r\n\tsetMinimumLength: function (minLen) {\r\n\t\tthis.minimumLen = minLen;\r\n\t},\r\n\tgetConstrainedLength: function (len) {\r\n\t\tif (len < this.minimumLen) return this.minimumLen;\r\n\t\treturn len;\r\n\t},\r\n\tgetSplitPoint: function () {\r\n\t\treturn this.splitPt;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn SplitSegment;\r\n\t}\r\n});\r\nSplitSegment.pointAlongReverse = function (seg, segmentLengthFraction) {\r\n\tvar coord = new Coordinate();\r\n\tcoord.x = seg.p1.x - segmentLengthFraction * (seg.p1.x - seg.p0.x);\r\n\tcoord.y = seg.p1.y - segmentLengthFraction * (seg.p1.y - seg.p0.y);\r\n\treturn coord;\r\n};\r\n","import extend from '../../../../extend';\r\nexport default function ConstraintSplitPointFinder() {}\r\nextend(ConstraintSplitPointFinder.prototype, {\r\n\tfindSplitPoint: function (seg, encroachPt) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ConstraintSplitPointFinder;\r\n\t}\r\n});\r\n","import extend from '../../../../extend';\r\nimport SplitSegment from './SplitSegment';\r\nimport ConstraintSplitPointFinder from './ConstraintSplitPointFinder';\r\nexport default function NonEncroachingSplitPointFinder() {}\r\nextend(NonEncroachingSplitPointFinder.prototype, {\r\n\tfindSplitPoint: function (seg, encroachPt) {\r\n\t\tvar lineSeg = seg.getLineSegment();\r\n\t\tvar segLen = lineSeg.getLength();\r\n\t\tvar midPtLen = segLen / 2;\r\n\t\tvar splitSeg = new SplitSegment(lineSeg);\r\n\t\tvar projPt = NonEncroachingSplitPointFinder.projectedSplitPoint(seg, encroachPt);\r\n\t\tvar nonEncroachDiam = projPt.distance(encroachPt) * 2 * 0.8;\r\n\t\tvar maxSplitLen = nonEncroachDiam;\r\n\t\tif (maxSplitLen > midPtLen) {\r\n\t\t\tmaxSplitLen = midPtLen;\r\n\t\t}\r\n\t\tsplitSeg.setMinimumLength(maxSplitLen);\r\n\t\tsplitSeg.splitAt(projPt);\r\n\t\treturn splitSeg.getSplitPoint();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [ConstraintSplitPointFinder];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn NonEncroachingSplitPointFinder;\r\n\t}\r\n});\r\nNonEncroachingSplitPointFinder.projectedSplitPoint = function (seg, encroachPt) {\r\n\tvar lineSeg = seg.getLineSegment();\r\n\tvar projPt = lineSeg.project(encroachPt);\r\n\treturn projPt;\r\n};\r\n","import WKTWriter from '../../io/WKTWriter';\r\nimport CoordinateArraySequence from '../../geom/impl/CoordinateArraySequence';\r\nimport extend from '../../../../../extend';\r\nimport DD from '../../math/DD';\r\nimport System from '../../../../../java/lang/System';\r\nimport Triangle from '../../geom/Triangle';\r\nexport default function TrianglePredicate() {}\r\nextend(TrianglePredicate.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TrianglePredicate;\r\n\t}\r\n});\r\nTrianglePredicate.triArea = function (a, b, c) {\r\n\treturn (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x);\r\n};\r\nTrianglePredicate.isInCircleDDNormalized = function (a, b, c, p) {\r\n\tvar adx = DD.valueOf(a.x).selfSubtract(p.x);\r\n\tvar ady = DD.valueOf(a.y).selfSubtract(p.y);\r\n\tvar bdx = DD.valueOf(b.x).selfSubtract(p.x);\r\n\tvar bdy = DD.valueOf(b.y).selfSubtract(p.y);\r\n\tvar cdx = DD.valueOf(c.x).selfSubtract(p.x);\r\n\tvar cdy = DD.valueOf(c.y).selfSubtract(p.y);\r\n\tvar abdet = adx.multiply(bdy).selfSubtract(bdx.multiply(ady));\r\n\tvar bcdet = bdx.multiply(cdy).selfSubtract(cdx.multiply(bdy));\r\n\tvar cadet = cdx.multiply(ady).selfSubtract(adx.multiply(cdy));\r\n\tvar alift = adx.multiply(adx).selfAdd(ady.multiply(ady));\r\n\tvar blift = bdx.multiply(bdx).selfAdd(bdy.multiply(bdy));\r\n\tvar clift = cdx.multiply(cdx).selfAdd(cdy.multiply(cdy));\r\n\tvar sum = alift.selfMultiply(bcdet).selfAdd(blift.selfMultiply(cadet)).selfAdd(clift.selfMultiply(abdet));\r\n\tvar isInCircle = sum.doubleValue() > 0;\r\n\treturn isInCircle;\r\n};\r\nTrianglePredicate.checkRobustInCircle = function (a, b, c, p) {\r\n\tvar nonRobustInCircle = TrianglePredicate.isInCircleNonRobust(a, b, c, p);\r\n\tvar isInCircleDD = TrianglePredicate.isInCircleDDSlow(a, b, c, p);\r\n\tvar isInCircleCC = TrianglePredicate.isInCircleCC(a, b, c, p);\r\n\tvar circumCentre = Triangle.circumcentre(a, b, c);\r\n\tSystem.out.println(\"p radius diff a = \" + Math.abs(p.distance(circumCentre) - a.distance(circumCentre)) / a.distance(circumCentre));\r\n\tif (nonRobustInCircle !== isInCircleDD || nonRobustInCircle !== isInCircleCC) {\r\n\t\tSystem.out.println(\"inCircle robustness failure (double result = \" + nonRobustInCircle + \", DD result = \" + isInCircleDD + \", CC result = \" + isInCircleCC + \")\");\r\n\t\tSystem.out.println(WKTWriter.toLineString(new CoordinateArraySequence([a, b, c, p])));\r\n\t\tSystem.out.println(\"Circumcentre = \" + WKTWriter.toPoint(circumCentre) + \" radius = \" + a.distance(circumCentre));\r\n\t\tSystem.out.println(\"p radius diff a = \" + Math.abs(p.distance(circumCentre) / a.distance(circumCentre) - 1));\r\n\t\tSystem.out.println(\"p radius diff b = \" + Math.abs(p.distance(circumCentre) / b.distance(circumCentre) - 1));\r\n\t\tSystem.out.println(\"p radius diff c = \" + Math.abs(p.distance(circumCentre) / c.distance(circumCentre) - 1));\r\n\t\tSystem.out.println();\r\n\t}\r\n};\r\nTrianglePredicate.isInCircleDDFast = function (a, b, c, p) {\r\n\tvar aTerm = DD.sqr(a.x).selfAdd(DD.sqr(a.y)).selfMultiply(TrianglePredicate.triAreaDDFast(b, c, p));\r\n\tvar bTerm = DD.sqr(b.x).selfAdd(DD.sqr(b.y)).selfMultiply(TrianglePredicate.triAreaDDFast(a, c, p));\r\n\tvar cTerm = DD.sqr(c.x).selfAdd(DD.sqr(c.y)).selfMultiply(TrianglePredicate.triAreaDDFast(a, b, p));\r\n\tvar pTerm = DD.sqr(p.x).selfAdd(DD.sqr(p.y)).selfMultiply(TrianglePredicate.triAreaDDFast(a, b, c));\r\n\tvar sum = aTerm.selfSubtract(bTerm).selfAdd(cTerm).selfSubtract(pTerm);\r\n\tvar isInCircle = sum.doubleValue() > 0;\r\n\treturn isInCircle;\r\n};\r\nTrianglePredicate.isInCircleCC = function (a, b, c, p) {\r\n\tvar cc = Triangle.circumcentre(a, b, c);\r\n\tvar ccRadius = a.distance(cc);\r\n\tvar pRadiusDiff = p.distance(cc) - ccRadius;\r\n\treturn pRadiusDiff <= 0;\r\n};\r\nTrianglePredicate.isInCircleNormalized = function (a, b, c, p) {\r\n\tvar adx = a.x - p.x;\r\n\tvar ady = a.y - p.y;\r\n\tvar bdx = b.x - p.x;\r\n\tvar bdy = b.y - p.y;\r\n\tvar cdx = c.x - p.x;\r\n\tvar cdy = c.y - p.y;\r\n\tvar abdet = adx * bdy - bdx * ady;\r\n\tvar bcdet = bdx * cdy - cdx * bdy;\r\n\tvar cadet = cdx * ady - adx * cdy;\r\n\tvar alift = adx * adx + ady * ady;\r\n\tvar blift = bdx * bdx + bdy * bdy;\r\n\tvar clift = cdx * cdx + cdy * cdy;\r\n\tvar disc = alift * bcdet + blift * cadet + clift * abdet;\r\n\treturn disc > 0;\r\n};\r\nTrianglePredicate.isInCircleDDSlow = function (a, b, c, p) {\r\n\tvar px = DD.valueOf(p.x);\r\n\tvar py = DD.valueOf(p.y);\r\n\tvar ax = DD.valueOf(a.x);\r\n\tvar ay = DD.valueOf(a.y);\r\n\tvar bx = DD.valueOf(b.x);\r\n\tvar by = DD.valueOf(b.y);\r\n\tvar cx = DD.valueOf(c.x);\r\n\tvar cy = DD.valueOf(c.y);\r\n\tvar aTerm = ax.multiply(ax).add(ay.multiply(ay)).multiply(TrianglePredicate.triAreaDDSlow(bx, by, cx, cy, px, py));\r\n\tvar bTerm = bx.multiply(bx).add(by.multiply(by)).multiply(TrianglePredicate.triAreaDDSlow(ax, ay, cx, cy, px, py));\r\n\tvar cTerm = cx.multiply(cx).add(cy.multiply(cy)).multiply(TrianglePredicate.triAreaDDSlow(ax, ay, bx, by, px, py));\r\n\tvar pTerm = px.multiply(px).add(py.multiply(py)).multiply(TrianglePredicate.triAreaDDSlow(ax, ay, bx, by, cx, cy));\r\n\tvar sum = aTerm.subtract(bTerm).add(cTerm).subtract(pTerm);\r\n\tvar isInCircle = sum.doubleValue() > 0;\r\n\treturn isInCircle;\r\n};\r\nTrianglePredicate.isInCircleNonRobust = function (a, b, c, p) {\r\n\tvar isInCircle = (a.x * a.x + a.y * a.y) * TrianglePredicate.triArea(b, c, p) - (b.x * b.x + b.y * b.y) * TrianglePredicate.triArea(a, c, p) + (c.x * c.x + c.y * c.y) * TrianglePredicate.triArea(a, b, p) - (p.x * p.x + p.y * p.y) * TrianglePredicate.triArea(a, b, c) > 0;\r\n\treturn isInCircle;\r\n};\r\nTrianglePredicate.isInCircleRobust = function (a, b, c, p) {\r\n\treturn TrianglePredicate.isInCircleNormalized(a, b, c, p);\r\n};\r\nTrianglePredicate.triAreaDDSlow = function (ax, ay, bx, by, cx, cy) {\r\n\treturn bx.subtract(ax).multiply(cy.subtract(ay)).subtract(by.subtract(ay).multiply(cx.subtract(ax)));\r\n};\r\nTrianglePredicate.triAreaDDFast = function (a, b, c) {\r\n\tvar t1 = DD.valueOf(b.x).selfSubtract(a.x).selfMultiply(DD.valueOf(c.y).selfSubtract(a.y));\r\n\tvar t2 = DD.valueOf(b.y).selfSubtract(a.y).selfMultiply(DD.valueOf(c.x).selfSubtract(a.x));\r\n\treturn t1.selfSubtract(t2);\r\n};\r\n","import NotRepresentableException from '../../algorithm/NotRepresentableException';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport TrianglePredicate from './TrianglePredicate';\r\nimport extend from '../../../../../extend';\r\nimport System from '../../../../../java/lang/System';\r\nimport HCoordinate from '../../algorithm/HCoordinate';\r\nexport default function Vertex() {\r\n\tthis.p = null;\r\n\tif (arguments.length === 1) {\r\n\t\tlet _p = arguments[0];\r\n\t\tthis.p = new Coordinate(_p);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet _x = arguments[0], _y = arguments[1];\r\n\t\tthis.p = new Coordinate(_x, _y);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet _x = arguments[0], _y = arguments[1], _z = arguments[2];\r\n\t\tthis.p = new Coordinate(_x, _y, _z);\r\n\t}\r\n}\r\nextend(Vertex.prototype, {\r\n\tcircleCenter: function (b, c) {\r\n\t\tvar a = new Vertex(this.getX(), this.getY());\r\n\t\tvar cab = this.bisector(a, b);\r\n\t\tvar cbc = this.bisector(b, c);\r\n\t\tvar hcc = new HCoordinate(cab, cbc);\r\n\t\tvar cc = null;\r\n\t\ttry {\r\n\t\t\tcc = new Vertex(hcc.getX(), hcc.getY());\r\n\t\t} catch (nre) {\r\n\t\t\tif (nre instanceof NotRepresentableException) {\r\n\t\t\t\tSystem.err.println(\"a: \" + a + \"  b: \" + b + \"  c: \" + c);\r\n\t\t\t\tSystem.err.println(nre);\r\n\t\t\t} else throw nre;\r\n\t\t} finally {}\r\n\t\treturn cc;\r\n\t},\r\n\tdot: function (v) {\r\n\t\treturn this.p.x * v.getX() + this.p.y * v.getY();\r\n\t},\r\n\tmagn: function () {\r\n\t\treturn Math.sqrt(this.p.x * this.p.x + this.p.y * this.p.y);\r\n\t},\r\n\tgetZ: function () {\r\n\t\treturn this.p.z;\r\n\t},\r\n\tbisector: function (a, b) {\r\n\t\tvar dx = b.getX() - a.getX();\r\n\t\tvar dy = b.getY() - a.getY();\r\n\t\tvar l1 = new HCoordinate(a.getX() + dx / 2.0, a.getY() + dy / 2.0, 1.0);\r\n\t\tvar l2 = new HCoordinate(a.getX() - dy + dx / 2.0, a.getY() + dx + dy / 2.0, 1.0);\r\n\t\treturn new HCoordinate(l1, l2);\r\n\t},\r\n\tequals: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet _x = arguments[0];\r\n\t\t\tif (this.p.x === _x.getX() && this.p.y === _x.getY()) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet _x = arguments[0], tolerance = arguments[1];\r\n\t\t\tif (this.p.distance(_x.getCoordinate()) < tolerance) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.p;\r\n\t},\r\n\tisInCircle: function (a, b, c) {\r\n\t\treturn TrianglePredicate.isInCircleRobust(a.p, b.p, c.p, this.p);\r\n\t},\r\n\tinterpolateZValue: function (v0, v1, v2) {\r\n\t\tvar x0 = v0.getX();\r\n\t\tvar y0 = v0.getY();\r\n\t\tvar a = v1.getX() - x0;\r\n\t\tvar b = v2.getX() - x0;\r\n\t\tvar c = v1.getY() - y0;\r\n\t\tvar d = v2.getY() - y0;\r\n\t\tvar det = a * d - b * c;\r\n\t\tvar dx = this.getX() - x0;\r\n\t\tvar dy = this.getY() - y0;\r\n\t\tvar t = (d * dx - b * dy) / det;\r\n\t\tvar u = (-c * dx + a * dy) / det;\r\n\t\tvar z = v0.getZ() + t * (v1.getZ() - v0.getZ()) + u * (v2.getZ() - v0.getZ());\r\n\t\treturn z;\r\n\t},\r\n\tmidPoint: function (a) {\r\n\t\tvar xm = (this.p.x + a.getX()) / 2.0;\r\n\t\tvar ym = (this.p.y + a.getY()) / 2.0;\r\n\t\tvar zm = (this.p.z + a.getZ()) / 2.0;\r\n\t\treturn new Vertex(xm, ym, zm);\r\n\t},\r\n\trightOf: function (e) {\r\n\t\treturn this.isCCW(e.dest(), e.orig());\r\n\t},\r\n\tisCCW: function (b, c) {\r\n\t\treturn (b.p.x - this.p.x) * (c.p.y - this.p.y) - (b.p.y - this.p.y) * (c.p.x - this.p.x) > 0;\r\n\t},\r\n\tgetX: function () {\r\n\t\treturn this.p.x;\r\n\t},\r\n\tcrossProduct: function (v) {\r\n\t\treturn this.p.x * v.getY() - this.p.y * v.getX();\r\n\t},\r\n\tsetZ: function (_z) {\r\n\t\tthis.p.z = _z;\r\n\t},\r\n\ttimes: function (c) {\r\n\t\treturn new Vertex(c * this.p.x, c * this.p.y);\r\n\t},\r\n\tcross: function () {\r\n\t\treturn new Vertex(this.p.y, -this.p.x);\r\n\t},\r\n\tleftOf: function (e) {\r\n\t\treturn this.isCCW(e.orig(), e.dest());\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn \"POINT (\" + this.p.x + \" \" + this.p.y + \")\";\r\n\t},\r\n\tsub: function (v) {\r\n\t\treturn new Vertex(this.p.x - v.getX(), this.p.y - v.getY());\r\n\t},\r\n\tgetY: function () {\r\n\t\treturn this.p.y;\r\n\t},\r\n\tclassify: function (p0, p1) {\r\n\t\tvar p2 = this;\r\n\t\tvar a = p1.sub(p0);\r\n\t\tvar b = p2.sub(p0);\r\n\t\tvar sa = a.crossProduct(b);\r\n\t\tif (sa > 0.0) return Vertex.LEFT;\r\n\t\tif (sa < 0.0) return Vertex.RIGHT;\r\n\t\tif (a.getX() * b.getX() < 0.0 || a.getY() * b.getY() < 0.0) return Vertex.BEHIND;\r\n\t\tif (a.magn() < b.magn()) return Vertex.BEYOND;\r\n\t\tif (p0.equals(p2)) return Vertex.ORIGIN;\r\n\t\tif (p1.equals(p2)) return Vertex.DESTINATION;\r\n\t\treturn Vertex.BETWEEN;\r\n\t},\r\n\tsum: function (v) {\r\n\t\treturn new Vertex(this.p.x + v.getX(), this.p.y + v.getY());\r\n\t},\r\n\tdistance: function (v1, v2) {\r\n\t\treturn Math.sqrt(Math.pow(v2.getX() - v1.getX(), 2.0) + Math.pow(v2.getY() - v1.getY(), 2.0));\r\n\t},\r\n\tcircumRadiusRatio: function (b, c) {\r\n\t\tvar x = this.circleCenter(b, c);\r\n\t\tvar radius = this.distance(x, b);\r\n\t\tvar edgeLength = this.distance(this, b);\r\n\t\tvar el = this.distance(b, c);\r\n\t\tif (el < edgeLength) {\r\n\t\t\tedgeLength = el;\r\n\t\t}\r\n\t\tel = this.distance(c, this);\r\n\t\tif (el < edgeLength) {\r\n\t\t\tedgeLength = el;\r\n\t\t}\r\n\t\treturn radius / edgeLength;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Vertex;\r\n\t}\r\n});\r\nVertex.interpolateZ = function () {\r\n\tif (arguments.length === 3) {\r\n\t\tlet p = arguments[0], p0 = arguments[1], p1 = arguments[2];\r\n\t\tvar segLen = p0.distance(p1);\r\n\t\tvar ptLen = p.distance(p0);\r\n\t\tvar dz = p1.z - p0.z;\r\n\t\tvar pz = p0.z + dz * (ptLen / segLen);\r\n\t\treturn pz;\r\n\t} else if (arguments.length === 4) {\r\n\t\tlet p = arguments[0], v0 = arguments[1], v1 = arguments[2], v2 = arguments[3];\r\n\t\tvar x0 = v0.x;\r\n\t\tvar y0 = v0.y;\r\n\t\tvar a = v1.x - x0;\r\n\t\tvar b = v2.x - x0;\r\n\t\tvar c = v1.y - y0;\r\n\t\tvar d = v2.y - y0;\r\n\t\tvar det = a * d - b * c;\r\n\t\tvar dx = p.x - x0;\r\n\t\tvar dy = p.y - y0;\r\n\t\tvar t = (d * dx - b * dy) / det;\r\n\t\tvar u = (-c * dx + a * dy) / det;\r\n\t\tvar z = v0.z + t * (v1.z - v0.z) + u * (v2.z - v0.z);\r\n\t\treturn z;\r\n\t}\r\n};\r\nVertex.LEFT = 0;\r\nVertex.RIGHT = 1;\r\nVertex.BEYOND = 2;\r\nVertex.BEHIND = 3;\r\nVertex.BETWEEN = 4;\r\nVertex.ORIGIN = 5;\r\nVertex.DESTINATION = 6;\r\n","import extend from '../../../../extend';\r\nimport Vertex from './quadedge/Vertex';\r\nimport inherits from '../../../../inherits';\r\nexport default function ConstraintVertex() {\r\n\tthis._isOnConstraint = null;\r\n\tthis.constraint = null;\r\n\tlet p = arguments[0];\r\n\tVertex.call(this, p);\r\n}\r\ninherits(ConstraintVertex, Vertex);\r\nextend(ConstraintVertex.prototype, {\r\n\tgetConstraint: function () {\r\n\t\treturn this.constraint;\r\n\t},\r\n\tsetOnConstraint: function (isOnConstraint) {\r\n\t\tthis._isOnConstraint = isOnConstraint;\r\n\t},\r\n\tmerge: function (other) {\r\n\t\tif (other._isOnConstraint) {\r\n\t\t\tthis._isOnConstraint = true;\r\n\t\t\tthis.constraint = other.constraint;\r\n\t\t}\r\n\t},\r\n\tisOnConstraint: function () {\r\n\t\treturn this._isOnConstraint;\r\n\t},\r\n\tsetConstraint: function (constraint) {\r\n\t\tthis._isOnConstraint = true;\r\n\t\tthis.constraint = constraint;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ConstraintVertex;\r\n\t}\r\n});\r\n","import WKTWriter from '../../io/WKTWriter';\r\nimport extend from '../../../../../extend';\r\nimport LineSegment from '../../geom/LineSegment';\r\nexport default function QuadEdge() {\r\n\tthis._rot = null;\r\n\tthis.vertex = null;\r\n\tthis.next = null;\r\n\tthis.data = null;\r\n}\r\nextend(QuadEdge.prototype, {\r\n\tequalsNonOriented: function (qe) {\r\n\t\tif (this.equalsOriented(qe)) return true;\r\n\t\tif (this.equalsOriented(qe.sym())) return true;\r\n\t\treturn false;\r\n\t},\r\n\ttoLineSegment: function () {\r\n\t\treturn new LineSegment(this.vertex.getCoordinate(), this.dest().getCoordinate());\r\n\t},\r\n\tdest: function () {\r\n\t\treturn this.sym().orig();\r\n\t},\r\n\toNext: function () {\r\n\t\treturn this.next;\r\n\t},\r\n\tequalsOriented: function (qe) {\r\n\t\tif (this.orig().getCoordinate().equals2D(qe.orig().getCoordinate()) && this.dest().getCoordinate().equals2D(qe.dest().getCoordinate())) return true;\r\n\t\treturn false;\r\n\t},\r\n\tdNext: function () {\r\n\t\treturn this.sym().oNext().sym();\r\n\t},\r\n\tlPrev: function () {\r\n\t\treturn this.next.sym();\r\n\t},\r\n\trPrev: function () {\r\n\t\treturn this.sym().oNext();\r\n\t},\r\n\trot: function () {\r\n\t\treturn this._rot;\r\n\t},\r\n\toPrev: function () {\r\n\t\treturn this._rot.next._rot;\r\n\t},\r\n\tsym: function () {\r\n\t\treturn this._rot._rot;\r\n\t},\r\n\tsetOrig: function (o) {\r\n\t\tthis.vertex = o;\r\n\t},\r\n\tlNext: function () {\r\n\t\treturn this.invRot().oNext().rot();\r\n\t},\r\n\tgetLength: function () {\r\n\t\treturn this.orig().getCoordinate().distance(this.dest().getCoordinate());\r\n\t},\r\n\tinvRot: function () {\r\n\t\treturn this._rot.sym();\r\n\t},\r\n\tsetDest: function (d) {\r\n\t\tthis.sym().setOrig(d);\r\n\t},\r\n\tsetData: function (data) {\r\n\t\tthis.data = data;\r\n\t},\r\n\tgetData: function () {\r\n\t\treturn this.data;\r\n\t},\r\n\tdelete: function () {\r\n\t\tthis._rot = null;\r\n\t},\r\n\torig: function () {\r\n\t\treturn this.vertex;\r\n\t},\r\n\trNext: function () {\r\n\t\treturn this._rot.next.invRot();\r\n\t},\r\n\ttoString: function () {\r\n\t\tvar p0 = this.vertex.getCoordinate();\r\n\t\tvar p1 = this.dest().getCoordinate();\r\n\t\treturn WKTWriter.toLineString(p0, p1);\r\n\t},\r\n\tisLive: function () {\r\n\t\treturn this._rot !== null;\r\n\t},\r\n\tgetPrimary: function () {\r\n\t\tif (this.orig().getCoordinate().compareTo(this.dest().getCoordinate()) <= 0) return this; else return this.sym();\r\n\t},\r\n\tdPrev: function () {\r\n\t\treturn this.invRot().oNext().invRot();\r\n\t},\r\n\tsetNext: function (next) {\r\n\t\tthis.next = next;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn QuadEdge;\r\n\t}\r\n});\r\nQuadEdge.makeEdge = function (o, d) {\r\n\tvar q0 = new QuadEdge();\r\n\tvar q1 = new QuadEdge();\r\n\tvar q2 = new QuadEdge();\r\n\tvar q3 = new QuadEdge();\r\n\tq0._rot = q1;\r\n\tq1._rot = q2;\r\n\tq2._rot = q3;\r\n\tq3._rot = q0;\r\n\tq0.setNext(q0);\r\n\tq1.setNext(q3);\r\n\tq2.setNext(q2);\r\n\tq3.setNext(q1);\r\n\tvar base = q0;\r\n\tbase.setOrig(o);\r\n\tbase.setDest(d);\r\n\treturn base;\r\n};\r\nQuadEdge.swap = function (e) {\r\n\tvar a = e.oPrev();\r\n\tvar b = e.sym().oPrev();\r\n\tQuadEdge.splice(e, a);\r\n\tQuadEdge.splice(e.sym(), b);\r\n\tQuadEdge.splice(e, a.lNext());\r\n\tQuadEdge.splice(e.sym(), b.lNext());\r\n\te.setOrig(a.dest());\r\n\te.setDest(b.dest());\r\n};\r\nQuadEdge.splice = function (a, b) {\r\n\tvar alpha = a.oNext().rot();\r\n\tvar beta = b.oNext().rot();\r\n\tvar t1 = b.oNext();\r\n\tvar t2 = a.oNext();\r\n\tvar t3 = beta.oNext();\r\n\tvar t4 = alpha.oNext();\r\n\ta.setNext(t1);\r\n\tb.setNext(t2);\r\n\talpha.setNext(t3);\r\n\tbeta.setNext(t4);\r\n};\r\nQuadEdge.connect = function (a, b) {\r\n\tvar e = QuadEdge.makeEdge(a.dest(), b.orig());\r\n\tQuadEdge.splice(e, a.lNext());\r\n\tQuadEdge.splice(e.sym(), b);\r\n\treturn e;\r\n};\r\n","import QuadEdge from './quadedge/QuadEdge';\r\nimport extend from '../../../../extend';\r\nexport default function IncrementalDelaunayTriangulator() {\r\n\tthis.subdiv = null;\r\n\tthis.isUsingTolerance = false;\r\n\tlet subdiv = arguments[0];\r\n\tthis.subdiv = subdiv;\r\n\tthis.isUsingTolerance = subdiv.getTolerance() > 0.0;\r\n}\r\nextend(IncrementalDelaunayTriangulator.prototype, {\r\n\tinsertSite: function (v) {\r\n\t\tvar e = this.subdiv.locate(v);\r\n\t\tif (this.subdiv.isVertexOfEdge(e, v)) {\r\n\t\t\treturn e;\r\n\t\t} else if (this.subdiv.isOnEdge(e, v.getCoordinate())) {\r\n\t\t\te = e.oPrev();\r\n\t\t\tthis.subdiv.delete(e.oNext());\r\n\t\t}\r\n\t\tvar base = this.subdiv.makeEdge(e.orig(), v);\r\n\t\tQuadEdge.splice(base, e);\r\n\t\tvar startEdge = base;\r\n\t\tdo {\r\n\t\t\tbase = this.subdiv.connect(e, base.sym());\r\n\t\t\te = base.oPrev();\r\n\t\t} while (e.lNext() !== startEdge);\r\n\t\tdo {\r\n\t\t\tvar t = e.oPrev();\r\n\t\t\tif (t.dest().rightOf(e) && v.isInCircle(e.orig(), t.dest(), e.dest())) {\r\n\t\t\t\tQuadEdge.swap(e);\r\n\t\t\t\te = e.oPrev();\r\n\t\t\t} else if (e.oNext() === startEdge) {\r\n\t\t\t\treturn base;\r\n\t\t\t} else {\r\n\t\t\t\te = e.oNext().lPrev();\r\n\t\t\t}\r\n\t\t} while (true);\r\n\t},\r\n\tinsertSites: function (vertices) {\r\n\t\tfor (var i = vertices.iterator(); i.hasNext(); ) {\r\n\t\t\tvar v = i.next();\r\n\t\t\tthis.insertSite(v);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn IncrementalDelaunayTriangulator;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nexport default function QuadEdgeLocator() {}\r\nextend(QuadEdgeLocator.prototype, {\r\n\tlocate: function (v) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn QuadEdgeLocator;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport QuadEdgeLocator from './QuadEdgeLocator';\r\nexport default function LastFoundQuadEdgeLocator() {\r\n\tthis.subdiv = null;\r\n\tthis.lastEdge = null;\r\n\tlet subdiv = arguments[0];\r\n\tthis.subdiv = subdiv;\r\n\tthis.init();\r\n}\r\nextend(LastFoundQuadEdgeLocator.prototype, {\r\n\tinit: function () {\r\n\t\tthis.lastEdge = this.findEdge();\r\n\t},\r\n\tlocate: function (v) {\r\n\t\tif (!this.lastEdge.isLive()) {\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tvar e = this.subdiv.locateFromEdge(v, this.lastEdge);\r\n\t\tthis.lastEdge = e;\r\n\t\treturn e;\r\n\t},\r\n\tfindEdge: function () {\r\n\t\tvar edges = this.subdiv.getEdges();\r\n\t\treturn edges.iterator().next();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [QuadEdgeLocator];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LastFoundQuadEdgeLocator;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nimport LineSegment from '../../geom/LineSegment';\r\nimport RuntimeException from '../../../../../java/lang/RuntimeException';\r\nimport inherits from '../../../../../inherits';\r\nexport default function LocateFailureException() {\r\n\tthis.seg = null;\r\n\tif (arguments.length === 1) {\r\n\t\tif (typeof arguments[0] === \"string\") {\r\n\t\t\tlet msg = arguments[0];\r\n\t\t\tRuntimeException.call(this, msg);\r\n\t\t} else if (arguments[0] instanceof LineSegment) {\r\n\t\t\tlet seg = arguments[0];\r\n\t\t\tRuntimeException.call(this, \"Locate failed to converge (at edge: \" + seg + \").  Possible causes include invalid Subdivision topology or very close sites\");\r\n\t\t\tthis.seg = new LineSegment(seg);\r\n\t\t}\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet msg = arguments[0], seg = arguments[1];\r\n\t\tRuntimeException.call(this, LocateFailureException.msgWithSpatial(msg, seg));\r\n\t\tthis.seg = new LineSegment(seg);\r\n\t}\r\n}\r\ninherits(LocateFailureException, RuntimeException);\r\nextend(LocateFailureException.prototype, {\r\n\tgetSegment: function () {\r\n\t\treturn this.seg;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn LocateFailureException;\r\n\t}\r\n});\r\nLocateFailureException.msgWithSpatial = function (msg, seg) {\r\n\tif (seg !== null) return msg + \" [ \" + seg + \" ]\";\r\n\treturn msg;\r\n};\r\n","import extend from '../../../../../extend';\r\nexport default function TriangleVisitor() {}\r\nextend(TriangleVisitor.prototype, {\r\n\tvisit: function (triEdges) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TriangleVisitor;\r\n\t}\r\n});\r\n","import QuadEdge from './QuadEdge';\r\nimport CoordinateList from '../../geom/CoordinateList';\r\nimport HashSet from '../../../../../java/util/HashSet';\r\nimport WKTWriter from '../../io/WKTWriter';\r\nimport GeometryFactory from '../../geom/GeometryFactory';\r\nimport Coordinate from '../../geom/Coordinate';\r\nimport IllegalArgumentException from '../../../../../java/lang/IllegalArgumentException';\r\nimport Stack from '../../../../../java/util/Stack';\r\nimport extend from '../../../../../extend';\r\nimport LastFoundQuadEdgeLocator from './LastFoundQuadEdgeLocator';\r\nimport LocateFailureException from './LocateFailureException';\r\nimport Vertex from './Vertex';\r\nimport System from '../../../../../java/lang/System';\r\nimport LineSegment from '../../geom/LineSegment';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport Envelope from '../../geom/Envelope';\r\nimport Triangle from '../../geom/Triangle';\r\nimport TriangleVisitor from './TriangleVisitor';\r\nexport default function QuadEdgeSubdivision() {\r\n\tthis.visitedKey = 0;\r\n\tthis.quadEdges = new ArrayList();\r\n\tthis.startingEdge = null;\r\n\tthis.tolerance = null;\r\n\tthis.edgeCoincidenceTolerance = null;\r\n\tthis.frameVertex = new Array(3).fill(null);\r\n\tthis.frameEnv = null;\r\n\tthis.locator = null;\r\n\tthis.seg = new LineSegment();\r\n\tthis.triEdges = new Array(3).fill(null);\r\n\tlet env = arguments[0], tolerance = arguments[1];\r\n\tthis.tolerance = tolerance;\r\n\tthis.edgeCoincidenceTolerance = tolerance / QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR;\r\n\tthis.createFrame(env);\r\n\tthis.startingEdge = this.initSubdiv();\r\n\tthis.locator = new LastFoundQuadEdgeLocator(this);\r\n}\r\nextend(QuadEdgeSubdivision.prototype, {\r\n\tgetTriangleVertices: function (includeFrame) {\r\n\t\tvar visitor = new TriangleVertexListVisitor();\r\n\t\tthis.visitTriangles(visitor, includeFrame);\r\n\t\treturn visitor.getTriangleVertices();\r\n\t},\r\n\tisFrameVertex: function (v) {\r\n\t\tif (v.equals(this.frameVertex[0])) return true;\r\n\t\tif (v.equals(this.frameVertex[1])) return true;\r\n\t\tif (v.equals(this.frameVertex[2])) return true;\r\n\t\treturn false;\r\n\t},\r\n\tisVertexOfEdge: function (e, v) {\r\n\t\tif (v.equals(e.orig(), this.tolerance) || v.equals(e.dest(), this.tolerance)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tconnect: function (a, b) {\r\n\t\tvar q = QuadEdge.connect(a, b);\r\n\t\tthis.quadEdges.add(q);\r\n\t\treturn q;\r\n\t},\r\n\tgetVoronoiCellPolygon: function (qe, geomFact) {\r\n\t\tvar cellPts = new ArrayList();\r\n\t\tvar startQE = qe;\r\n\t\tdo {\r\n\t\t\tvar cc = qe.rot().orig().getCoordinate();\r\n\t\t\tcellPts.add(cc);\r\n\t\t\tqe = qe.oPrev();\r\n\t\t} while (qe !== startQE);\r\n\t\tvar coordList = new CoordinateList();\r\n\t\tcoordList.addAll(cellPts, false);\r\n\t\tcoordList.closeRing();\r\n\t\tif (coordList.size() < 4) {\r\n\t\t\tSystem.out.println(coordList);\r\n\t\t\tcoordList.add(coordList.get(coordList.size() - 1), true);\r\n\t\t}\r\n\t\tvar pts = coordList.toCoordinateArray();\r\n\t\tvar cellPoly = geomFact.createPolygon(geomFact.createLinearRing(pts), null);\r\n\t\tvar v = startQE.orig();\r\n\t\tcellPoly.setUserData(v.getCoordinate());\r\n\t\treturn cellPoly;\r\n\t},\r\n\tsetLocator: function (locator) {\r\n\t\tthis.locator = locator;\r\n\t},\r\n\tinitSubdiv: function () {\r\n\t\tvar ea = this.makeEdge(this.frameVertex[0], this.frameVertex[1]);\r\n\t\tvar eb = this.makeEdge(this.frameVertex[1], this.frameVertex[2]);\r\n\t\tQuadEdge.splice(ea.sym(), eb);\r\n\t\tvar ec = this.makeEdge(this.frameVertex[2], this.frameVertex[0]);\r\n\t\tQuadEdge.splice(eb.sym(), ec);\r\n\t\tQuadEdge.splice(ec.sym(), ea);\r\n\t\treturn ea;\r\n\t},\r\n\tisFrameBorderEdge: function (e) {\r\n\t\tvar leftTri = new Array(3).fill(null);\r\n\t\tQuadEdgeSubdivision.getTriangleEdges(e, leftTri);\r\n\t\tvar rightTri = new Array(3).fill(null);\r\n\t\tQuadEdgeSubdivision.getTriangleEdges(e.sym(), rightTri);\r\n\t\tvar vLeftTriOther = e.lNext().dest();\r\n\t\tif (this.isFrameVertex(vLeftTriOther)) return true;\r\n\t\tvar vRightTriOther = e.sym().lNext().dest();\r\n\t\tif (this.isFrameVertex(vRightTriOther)) return true;\r\n\t\treturn false;\r\n\t},\r\n\tmakeEdge: function (o, d) {\r\n\t\tvar q = QuadEdge.makeEdge(o, d);\r\n\t\tthis.quadEdges.add(q);\r\n\t\treturn q;\r\n\t},\r\n\tvisitTriangles: function (triVisitor, includeFrame) {\r\n\t\tthis.visitedKey++;\r\n\t\tvar edgeStack = new Stack();\r\n\t\tedgeStack.push(this.startingEdge);\r\n\t\tvar visitedEdges = new HashSet();\r\n\t\twhile (!edgeStack.empty()) {\r\n\t\t\tvar edge = edgeStack.pop();\r\n\t\t\tif (!visitedEdges.contains(edge)) {\r\n\t\t\t\tvar triEdges = this.fetchTriangleToVisit(edge, edgeStack, includeFrame, visitedEdges);\r\n\t\t\t\tif (triEdges !== null) triVisitor.visit(triEdges);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisFrameEdge: function (e) {\r\n\t\tif (this.isFrameVertex(e.orig()) || this.isFrameVertex(e.dest())) return true;\r\n\t\treturn false;\r\n\t},\r\n\tisOnEdge: function (e, p) {\r\n\t\tthis.seg.setCoordinates(e.orig().getCoordinate(), e.dest().getCoordinate());\r\n\t\tvar dist = this.seg.distance(p);\r\n\t\treturn dist < this.edgeCoincidenceTolerance;\r\n\t},\r\n\tgetEnvelope: function () {\r\n\t\treturn new Envelope(this.frameEnv);\r\n\t},\r\n\tcreateFrame: function (env) {\r\n\t\tvar deltaX = env.getWidth();\r\n\t\tvar deltaY = env.getHeight();\r\n\t\tvar offset = 0.0;\r\n\t\tif (deltaX > deltaY) {\r\n\t\t\toffset = deltaX * 10.0;\r\n\t\t} else {\r\n\t\t\toffset = deltaY * 10.0;\r\n\t\t}\r\n\t\tthis.frameVertex[0] = new Vertex((env.getMaxX() + env.getMinX()) / 2.0, env.getMaxY() + offset);\r\n\t\tthis.frameVertex[1] = new Vertex(env.getMinX() - offset, env.getMinY() - offset);\r\n\t\tthis.frameVertex[2] = new Vertex(env.getMaxX() + offset, env.getMinY() - offset);\r\n\t\tthis.frameEnv = new Envelope(this.frameVertex[0].getCoordinate(), this.frameVertex[1].getCoordinate());\r\n\t\tthis.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate());\r\n\t},\r\n\tgetTriangleCoordinates: function (includeFrame) {\r\n\t\tvar visitor = new TriangleCoordinatesVisitor();\r\n\t\tthis.visitTriangles(visitor, includeFrame);\r\n\t\treturn visitor.getTriangles();\r\n\t},\r\n\tgetVertices: function (includeFrame) {\r\n\t\tvar vertices = new HashSet();\r\n\t\tfor (var i = this.quadEdges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar qe = i.next();\r\n\t\t\tvar v = qe.orig();\r\n\t\t\tif (includeFrame || !this.isFrameVertex(v)) vertices.add(v);\r\n\t\t\tvar vd = qe.dest();\r\n\t\t\tif (includeFrame || !this.isFrameVertex(vd)) vertices.add(vd);\r\n\t\t}\r\n\t\treturn vertices;\r\n\t},\r\n\tfetchTriangleToVisit: function (edge, edgeStack, includeFrame, visitedEdges) {\r\n\t\tvar curr = edge;\r\n\t\tvar edgeCount = 0;\r\n\t\tvar isFrame = false;\r\n\t\tdo {\r\n\t\t\tthis.triEdges[edgeCount] = curr;\r\n\t\t\tif (this.isFrameEdge(curr)) isFrame = true;\r\n\t\t\tvar sym = curr.sym();\r\n\t\t\tif (!visitedEdges.contains(sym)) edgeStack.push(sym);\r\n\t\t\tvisitedEdges.add(curr);\r\n\t\t\tedgeCount++;\r\n\t\t\tcurr = curr.lNext();\r\n\t\t} while (curr !== edge);\r\n\t\tif (isFrame && !includeFrame) return null;\r\n\t\treturn this.triEdges;\r\n\t},\r\n\tgetEdges: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn this.quadEdges;\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet geomFact = arguments[0];\r\n\t\t\tvar quadEdges = this.getPrimaryEdges(false);\r\n\t\t\tvar edges = new Array(quadEdges.size()).fill(null);\r\n\t\t\tvar i = 0;\r\n\t\t\tfor (var it = quadEdges.iterator(); it.hasNext(); ) {\r\n\t\t\t\tvar qe = it.next();\r\n\t\t\t\tedges[i++] = geomFact.createLineString([qe.orig().getCoordinate(), qe.dest().getCoordinate()]);\r\n\t\t\t}\r\n\t\t\treturn geomFact.createMultiLineString(edges);\r\n\t\t}\r\n\t},\r\n\tgetVertexUniqueEdges: function (includeFrame) {\r\n\t\tvar edges = new ArrayList();\r\n\t\tvar visitedVertices = new HashSet();\r\n\t\tfor (var i = this.quadEdges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar qe = i.next();\r\n\t\t\tvar v = qe.orig();\r\n\t\t\tif (!visitedVertices.contains(v)) {\r\n\t\t\t\tvisitedVertices.add(v);\r\n\t\t\t\tif (includeFrame || !this.isFrameVertex(v)) {\r\n\t\t\t\t\tedges.add(qe);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar qd = qe.sym();\r\n\t\t\tvar vd = qd.orig();\r\n\t\t\tif (!visitedVertices.contains(vd)) {\r\n\t\t\t\tvisitedVertices.add(vd);\r\n\t\t\t\tif (includeFrame || !this.isFrameVertex(vd)) {\r\n\t\t\t\t\tedges.add(qd);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn edges;\r\n\t},\r\n\tgetTriangleEdges: function (includeFrame) {\r\n\t\tvar visitor = new TriangleEdgesListVisitor();\r\n\t\tthis.visitTriangles(visitor, includeFrame);\r\n\t\treturn visitor.getTriangleEdges();\r\n\t},\r\n\tgetPrimaryEdges: function (includeFrame) {\r\n\t\tthis.visitedKey++;\r\n\t\tvar edges = new ArrayList();\r\n\t\tvar edgeStack = new Stack();\r\n\t\tedgeStack.push(this.startingEdge);\r\n\t\tvar visitedEdges = new HashSet();\r\n\t\twhile (!edgeStack.empty()) {\r\n\t\t\tvar edge = edgeStack.pop();\r\n\t\t\tif (!visitedEdges.contains(edge)) {\r\n\t\t\t\tvar priQE = edge.getPrimary();\r\n\t\t\t\tif (includeFrame || !this.isFrameEdge(priQE)) edges.add(priQE);\r\n\t\t\t\tedgeStack.push(edge.oNext());\r\n\t\t\t\tedgeStack.push(edge.sym().oNext());\r\n\t\t\t\tvisitedEdges.add(edge);\r\n\t\t\t\tvisitedEdges.add(edge.sym());\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn edges;\r\n\t},\r\n\tdelete: function (e) {\r\n\t\tQuadEdge.splice(e, e.oPrev());\r\n\t\tQuadEdge.splice(e.sym(), e.sym().oPrev());\r\n\t\tvar eSym = e.sym();\r\n\t\tvar eRot = e.rot();\r\n\t\tvar eRotSym = e.rot().sym();\r\n\t\tthis.quadEdges.remove(e);\r\n\t\tthis.quadEdges.remove(eSym);\r\n\t\tthis.quadEdges.remove(eRot);\r\n\t\tthis.quadEdges.remove(eRotSym);\r\n\t\te.delete();\r\n\t\teSym.delete();\r\n\t\teRot.delete();\r\n\t\teRotSym.delete();\r\n\t},\r\n\tlocateFromEdge: function (v, startEdge) {\r\n\t\tvar iter = 0;\r\n\t\tvar maxIter = this.quadEdges.size();\r\n\t\tvar e = startEdge;\r\n\t\twhile (true) {\r\n\t\t\titer++;\r\n\t\t\tif (iter > maxIter) {\r\n\t\t\t\tthrow new LocateFailureException(e.toLineSegment());\r\n\t\t\t}\r\n\t\t\tif (v.equals(e.orig()) || v.equals(e.dest())) {\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (v.rightOf(e)) {\r\n\t\t\t\te = e.sym();\r\n\t\t\t} else if (!v.rightOf(e.oNext())) {\r\n\t\t\t\te = e.oNext();\r\n\t\t\t} else if (!v.rightOf(e.dPrev())) {\r\n\t\t\t\te = e.dPrev();\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn e;\r\n\t},\r\n\tgetTolerance: function () {\r\n\t\treturn this.tolerance;\r\n\t},\r\n\tgetVoronoiCellPolygons: function (geomFact) {\r\n\t\tthis.visitTriangles(new TriangleCircumcentreVisitor(), true);\r\n\t\tvar cells = new ArrayList();\r\n\t\tvar edges = this.getVertexUniqueEdges(false);\r\n\t\tfor (var i = edges.iterator(); i.hasNext(); ) {\r\n\t\t\tvar qe = i.next();\r\n\t\t\tcells.add(this.getVoronoiCellPolygon(qe, geomFact));\r\n\t\t}\r\n\t\treturn cells;\r\n\t},\r\n\tgetVoronoiDiagram: function (geomFact) {\r\n\t\tvar vorCells = this.getVoronoiCellPolygons(geomFact);\r\n\t\treturn geomFact.createGeometryCollection(GeometryFactory.toGeometryArray(vorCells));\r\n\t},\r\n\tgetTriangles: function (geomFact) {\r\n\t\tvar triPtsList = this.getTriangleCoordinates(false);\r\n\t\tvar tris = new Array(triPtsList.size()).fill(null);\r\n\t\tvar i = 0;\r\n\t\tfor (var it = triPtsList.iterator(); it.hasNext(); ) {\r\n\t\t\tvar triPt = it.next();\r\n\t\t\ttris[i++] = geomFact.createPolygon(geomFact.createLinearRing(triPt), null);\r\n\t\t}\r\n\t\treturn geomFact.createGeometryCollection(tris);\r\n\t},\r\n\tinsertSite: function (v) {\r\n\t\tvar e = this.locate(v);\r\n\t\tif (v.equals(e.orig(), this.tolerance) || v.equals(e.dest(), this.tolerance)) {\r\n\t\t\treturn e;\r\n\t\t}\r\n\t\tvar base = this.makeEdge(e.orig(), v);\r\n\t\tQuadEdge.splice(base, e);\r\n\t\tvar startEdge = base;\r\n\t\tdo {\r\n\t\t\tbase = this.connect(e, base.sym());\r\n\t\t\te = base.oPrev();\r\n\t\t} while (e.lNext() !== startEdge);\r\n\t\treturn startEdge;\r\n\t},\r\n\tlocate: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tif (arguments[0] instanceof Vertex) {\r\n\t\t\t\tlet v = arguments[0];\r\n\t\t\t\treturn this.locator.locate(v);\r\n\t\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\t\tlet p = arguments[0];\r\n\t\t\t\treturn this.locator.locate(new Vertex(p));\r\n\t\t\t}\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet p0 = arguments[0], p1 = arguments[1];\r\n\t\t\tvar e = this.locator.locate(new Vertex(p0));\r\n\t\t\tif (e === null) return null;\r\n\t\t\tvar base = e;\r\n\t\t\tif (e.dest().getCoordinate().equals2D(p0)) base = e.sym();\r\n\t\t\tvar locEdge = base;\r\n\t\t\tdo {\r\n\t\t\t\tif (locEdge.dest().getCoordinate().equals2D(p1)) return locEdge;\r\n\t\t\t\tlocEdge = locEdge.oNext();\r\n\t\t\t} while (locEdge !== base);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn QuadEdgeSubdivision;\r\n\t}\r\n});\r\nQuadEdgeSubdivision.getTriangleEdges = function (startQE, triEdge) {\r\n\ttriEdge[0] = startQE;\r\n\ttriEdge[1] = triEdge[0].lNext();\r\n\ttriEdge[2] = triEdge[1].lNext();\r\n\tif (triEdge[2].lNext() !== triEdge[0]) throw new IllegalArgumentException(\"Edges do not form a triangle\");\r\n};\r\nfunction TriangleCircumcentreVisitor() {}\r\nextend(TriangleCircumcentreVisitor.prototype, {\r\n\tvisit: function (triEdges) {\r\n\t\tvar a = triEdges[0].orig().getCoordinate();\r\n\t\tvar b = triEdges[1].orig().getCoordinate();\r\n\t\tvar c = triEdges[2].orig().getCoordinate();\r\n\t\tvar cc = Triangle.circumcentre(a, b, c);\r\n\t\tvar ccVertex = new Vertex(cc);\r\n\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\ttriEdges[i].rot().setOrig(ccVertex);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [TriangleVisitor];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TriangleCircumcentreVisitor;\r\n\t}\r\n});\r\nfunction TriangleEdgesListVisitor() {\r\n\tthis.triList = new ArrayList();\r\n}\r\nextend(TriangleEdgesListVisitor.prototype, {\r\n\tgetTriangleEdges: function () {\r\n\t\treturn this.triList;\r\n\t},\r\n\tvisit: function (triEdges) {\r\n\t\tthis.triList.add(triEdges.clone());\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [TriangleVisitor];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TriangleEdgesListVisitor;\r\n\t}\r\n});\r\nfunction TriangleVertexListVisitor() {\r\n\tthis.triList = new ArrayList();\r\n}\r\nextend(TriangleVertexListVisitor.prototype, {\r\n\tvisit: function (triEdges) {\r\n\t\tthis.triList.add([triEdges[0].orig(), triEdges[1].orig(), triEdges[2].orig()]);\r\n\t},\r\n\tgetTriangleVertices: function () {\r\n\t\treturn this.triList;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [TriangleVisitor];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TriangleVertexListVisitor;\r\n\t}\r\n});\r\nfunction TriangleCoordinatesVisitor() {\r\n\tthis.coordList = new CoordinateList();\r\n\tthis.triCoords = new ArrayList();\r\n}\r\nextend(TriangleCoordinatesVisitor.prototype, {\r\n\tcheckTriangleSize: function (pts) {\r\n\t\tvar loc = \"\";\r\n\t\tif (pts.length >= 2) loc = WKTWriter.toLineString(pts[0], pts[1]); else {\r\n\t\t\tif (pts.length >= 1) loc = WKTWriter.toPoint(pts[0]);\r\n\t\t}\r\n\t},\r\n\tvisit: function (triEdges) {\r\n\t\tthis.coordList.clear();\r\n\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\tvar v = triEdges[i].orig();\r\n\t\t\tthis.coordList.add(v.getCoordinate());\r\n\t\t}\r\n\t\tif (this.coordList.size() > 0) {\r\n\t\t\tthis.coordList.closeRing();\r\n\t\t\tvar pts = this.coordList.toCoordinateArray();\r\n\t\t\tif (pts.length !== 4) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tthis.triCoords.add(pts);\r\n\t\t}\r\n\t},\r\n\tgetTriangles: function () {\r\n\t\treturn this.triCoords;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [TriangleVisitor];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn TriangleCoordinatesVisitor;\r\n\t}\r\n});\r\nQuadEdgeSubdivision.TriangleCircumcentreVisitor = TriangleCircumcentreVisitor;\r\nQuadEdgeSubdivision.TriangleEdgesListVisitor = TriangleEdgesListVisitor;\r\nQuadEdgeSubdivision.TriangleVertexListVisitor = TriangleVertexListVisitor;\r\nQuadEdgeSubdivision.TriangleCoordinatesVisitor = TriangleCoordinatesVisitor;\r\nQuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR = 1000;\r\n","import Coordinate from '../geom/Coordinate';\r\nimport extend from '../../../../extend';\r\nimport LineSegment from '../geom/LineSegment';\r\nexport default function Segment() {\r\n\tthis.ls = null;\r\n\tthis.data = null;\r\n\tif (arguments.length === 2) {\r\n\t\tlet p0 = arguments[0], p1 = arguments[1];\r\n\t\tthis.ls = new LineSegment(p0, p1);\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet p0 = arguments[0], p1 = arguments[1], data = arguments[2];\r\n\t\tthis.ls = new LineSegment(p0, p1);\r\n\t\tthis.data = data;\r\n\t} else if (arguments.length === 6) {\r\n\t\tlet x1 = arguments[0], y1 = arguments[1], z1 = arguments[2], x2 = arguments[3], y2 = arguments[4], z2 = arguments[5];\r\n\t\tSegment.call(this, new Coordinate(x1, y1, z1), new Coordinate(x2, y2, z2));\r\n\t} else if (arguments.length === 7) {\r\n\t\tlet x1 = arguments[0], y1 = arguments[1], z1 = arguments[2], x2 = arguments[3], y2 = arguments[4], z2 = arguments[5], data = arguments[6];\r\n\t\tSegment.call(this, new Coordinate(x1, y1, z1), new Coordinate(x2, y2, z2), data);\r\n\t}\r\n}\r\nextend(Segment.prototype, {\r\n\tgetLineSegment: function () {\r\n\t\treturn this.ls;\r\n\t},\r\n\tgetEndZ: function () {\r\n\t\tvar p = this.ls.getCoordinate(1);\r\n\t\treturn p.z;\r\n\t},\r\n\tgetStartZ: function () {\r\n\t\tvar p = this.ls.getCoordinate(0);\r\n\t\treturn p.z;\r\n\t},\r\n\tintersection: function (s) {\r\n\t\treturn this.ls.intersection(s.getLineSegment());\r\n\t},\r\n\tgetStart: function () {\r\n\t\treturn this.ls.getCoordinate(0);\r\n\t},\r\n\tgetEnd: function () {\r\n\t\treturn this.ls.getCoordinate(1);\r\n\t},\r\n\tgetEndY: function () {\r\n\t\tvar p = this.ls.getCoordinate(1);\r\n\t\treturn p.y;\r\n\t},\r\n\tgetStartX: function () {\r\n\t\tvar p = this.ls.getCoordinate(0);\r\n\t\treturn p.x;\r\n\t},\r\n\tequalsTopo: function (s) {\r\n\t\treturn this.ls.equalsTopo(s.getLineSegment());\r\n\t},\r\n\tgetStartY: function () {\r\n\t\tvar p = this.ls.getCoordinate(0);\r\n\t\treturn p.y;\r\n\t},\r\n\tsetData: function (data) {\r\n\t\tthis.data = data;\r\n\t},\r\n\tgetData: function () {\r\n\t\treturn this.data;\r\n\t},\r\n\tgetEndX: function () {\r\n\t\tvar p = this.ls.getCoordinate(1);\r\n\t\treturn p.x;\r\n\t},\r\n\ttoString: function () {\r\n\t\treturn this.ls.toString();\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn Segment;\r\n\t}\r\n});\r\n","import extend from '../../../../../extend';\r\nexport default function KdNodeVisitor() {}\r\nextend(KdNodeVisitor.prototype, {\r\n\tvisit: function (node) {},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn KdNodeVisitor;\r\n\t}\r\n});\r\n","import Coordinate from '../../geom/Coordinate';\r\nimport extend from '../../../../../extend';\r\nexport default function KdNode() {\r\n\tthis.p = null;\r\n\tthis.data = null;\r\n\tthis.left = null;\r\n\tthis.right = null;\r\n\tthis.count = null;\r\n\tif (arguments.length === 2) {\r\n\t\tlet p = arguments[0], data = arguments[1];\r\n\t\tthis.p = new Coordinate(p);\r\n\t\tthis.left = null;\r\n\t\tthis.right = null;\r\n\t\tthis.count = 1;\r\n\t\tthis.data = data;\r\n\t} else if (arguments.length === 3) {\r\n\t\tlet _x = arguments[0], _y = arguments[1], data = arguments[2];\r\n\t\tthis.p = new Coordinate(_x, _y);\r\n\t\tthis.left = null;\r\n\t\tthis.right = null;\r\n\t\tthis.count = 1;\r\n\t\tthis.data = data;\r\n\t}\r\n}\r\nextend(KdNode.prototype, {\r\n\tisRepeated: function () {\r\n\t\treturn this.count > 1;\r\n\t},\r\n\tgetRight: function () {\r\n\t\treturn this.right;\r\n\t},\r\n\tgetCoordinate: function () {\r\n\t\treturn this.p;\r\n\t},\r\n\tsetLeft: function (_left) {\r\n\t\tthis.left = _left;\r\n\t},\r\n\tgetX: function () {\r\n\t\treturn this.p.x;\r\n\t},\r\n\tgetData: function () {\r\n\t\treturn this.data;\r\n\t},\r\n\tgetCount: function () {\r\n\t\treturn this.count;\r\n\t},\r\n\tgetLeft: function () {\r\n\t\treturn this.left;\r\n\t},\r\n\tgetY: function () {\r\n\t\treturn this.p.y;\r\n\t},\r\n\tincrement: function () {\r\n\t\tthis.count = this.count + 1;\r\n\t},\r\n\tsetRight: function (_right) {\r\n\t\tthis.right = _right;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn KdNode;\r\n\t}\r\n});\r\n","import CoordinateList from '../../geom/CoordinateList';\r\nimport hasInterface from '../../../../../hasInterface';\r\nimport extend from '../../../../../extend';\r\nimport ArrayList from '../../../../../java/util/ArrayList';\r\nimport KdNodeVisitor from './KdNodeVisitor';\r\nimport Envelope from '../../geom/Envelope';\r\nimport List from '../../../../../java/util/List';\r\nimport KdNode from './KdNode';\r\nexport default function KdTree() {\r\n\tthis.root = null;\r\n\tthis.numberOfNodes = null;\r\n\tthis.tolerance = null;\r\n\tif (arguments.length === 0) {\r\n\t\tKdTree.call(this, 0.0);\r\n\t} else if (arguments.length === 1) {\r\n\t\tlet tolerance = arguments[0];\r\n\t\tthis.tolerance = tolerance;\r\n\t}\r\n}\r\nextend(KdTree.prototype, {\r\n\tinsert: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet p = arguments[0];\r\n\t\t\treturn this.insert(p, null);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet p = arguments[0], data = arguments[1];\r\n\t\t\tif (this.root === null) {\r\n\t\t\t\tthis.root = new KdNode(p, data);\r\n\t\t\t\treturn this.root;\r\n\t\t\t}\r\n\t\t\tif (this.tolerance > 0) {\r\n\t\t\t\tvar matchNode = this.findBestMatchNode(p);\r\n\t\t\t\tif (matchNode !== null) {\r\n\t\t\t\t\tmatchNode.increment();\r\n\t\t\t\t\treturn matchNode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this.insertExact(p, data);\r\n\t\t}\r\n\t},\r\n\tquery: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet queryEnv = arguments[0];\r\n\t\t\tvar result = new ArrayList();\r\n\t\t\tthis.query(queryEnv, result);\r\n\t\t\treturn result;\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tif (arguments[0] instanceof Envelope && hasInterface(arguments[1], List)) {\r\n\t\t\t\tlet queryEnv = arguments[0], result = arguments[1];\r\n\t\t\t\tthis.queryNode(this.root, queryEnv, true, {\r\n\t\t\t\t\tinterfaces_: function () {\r\n\t\t\t\t\t\treturn [KdNodeVisitor];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvisit: function (node) {\r\n\t\t\t\t\t\tresult.add(node);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (arguments[0] instanceof Envelope && hasInterface(arguments[1], KdNodeVisitor)) {\r\n\t\t\t\tlet queryEnv = arguments[0], visitor = arguments[1];\r\n\t\t\t\tthis.queryNode(this.root, queryEnv, true, visitor);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tqueryNode: function (currentNode, queryEnv, odd, visitor) {\r\n\t\tif (currentNode === null) return null;\r\n\t\tvar min = null;\r\n\t\tvar max = null;\r\n\t\tvar discriminant = null;\r\n\t\tif (odd) {\r\n\t\t\tmin = queryEnv.getMinX();\r\n\t\t\tmax = queryEnv.getMaxX();\r\n\t\t\tdiscriminant = currentNode.getX();\r\n\t\t} else {\r\n\t\t\tmin = queryEnv.getMinY();\r\n\t\t\tmax = queryEnv.getMaxY();\r\n\t\t\tdiscriminant = currentNode.getY();\r\n\t\t}\r\n\t\tvar searchLeft = min < discriminant;\r\n\t\tvar searchRight = discriminant <= max;\r\n\t\tif (searchLeft) {\r\n\t\t\tthis.queryNode(currentNode.getLeft(), queryEnv, !odd, visitor);\r\n\t\t}\r\n\t\tif (queryEnv.contains(currentNode.getCoordinate())) {\r\n\t\t\tvisitor.visit(currentNode);\r\n\t\t}\r\n\t\tif (searchRight) {\r\n\t\t\tthis.queryNode(currentNode.getRight(), queryEnv, !odd, visitor);\r\n\t\t}\r\n\t},\r\n\tfindBestMatchNode: function (p) {\r\n\t\tvar visitor = new BestMatchVisitor(p, this.tolerance);\r\n\t\tthis.query(visitor.queryEnvelope(), visitor);\r\n\t\treturn visitor.getNode();\r\n\t},\r\n\tisEmpty: function () {\r\n\t\tif (this.root === null) return true;\r\n\t\treturn false;\r\n\t},\r\n\tinsertExact: function (p, data) {\r\n\t\tvar currentNode = this.root;\r\n\t\tvar leafNode = this.root;\r\n\t\tvar isOddLevel = true;\r\n\t\tvar isLessThan = true;\r\n\t\twhile (currentNode !== null) {\r\n\t\t\tif (currentNode !== null) {\r\n\t\t\t\tvar isInTolerance = p.distance(currentNode.getCoordinate()) <= this.tolerance;\r\n\t\t\t\tif (isInTolerance) {\r\n\t\t\t\t\tcurrentNode.increment();\r\n\t\t\t\t\treturn currentNode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (isOddLevel) {\r\n\t\t\t\tisLessThan = p.x < currentNode.getX();\r\n\t\t\t} else {\r\n\t\t\t\tisLessThan = p.y < currentNode.getY();\r\n\t\t\t}\r\n\t\t\tleafNode = currentNode;\r\n\t\t\tif (isLessThan) {\r\n\t\t\t\tcurrentNode = currentNode.getLeft();\r\n\t\t\t} else {\r\n\t\t\t\tcurrentNode = currentNode.getRight();\r\n\t\t\t}\r\n\t\t\tisOddLevel = !isOddLevel;\r\n\t\t}\r\n\t\tthis.numberOfNodes = this.numberOfNodes + 1;\r\n\t\tvar node = new KdNode(p, data);\r\n\t\tif (isLessThan) {\r\n\t\t\tleafNode.setLeft(node);\r\n\t\t} else {\r\n\t\t\tleafNode.setRight(node);\r\n\t\t}\r\n\t\treturn node;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn KdTree;\r\n\t}\r\n});\r\nKdTree.toCoordinates = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet kdnodes = arguments[0];\r\n\t\treturn KdTree.toCoordinates(kdnodes, false);\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet kdnodes = arguments[0], includeRepeated = arguments[1];\r\n\t\tvar coord = new CoordinateList();\r\n\t\tfor (var it = kdnodes.iterator(); it.hasNext(); ) {\r\n\t\t\tvar node = it.next();\r\n\t\t\tvar count = includeRepeated ? node.getCount() : 1;\r\n\t\t\tfor (var i = 0; i < count; i++) {\r\n\t\t\t\tcoord.add(node.getCoordinate(), true);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn coord.toCoordinateArray();\r\n\t}\r\n};\r\nfunction BestMatchVisitor() {\r\n\tthis.tolerance = null;\r\n\tthis.matchNode = null;\r\n\tthis.matchDist = 0.0;\r\n\tthis.p = null;\r\n\tlet p = arguments[0], tolerance = arguments[1];\r\n\tthis.p = p;\r\n\tthis.tolerance = tolerance;\r\n}\r\nextend(BestMatchVisitor.prototype, {\r\n\tvisit: function (node) {\r\n\t\tvar dist = this.p.distance(node.getCoordinate());\r\n\t\tvar isInTolerance = dist <= this.tolerance;\r\n\t\tif (!isInTolerance) return null;\r\n\t\tvar update = false;\r\n\t\tif (this.matchNode === null || dist < this.matchDist || this.matchNode !== null && dist === this.matchDist && node.getCoordinate().compareTo(this.matchNode.getCoordinate()) < 1) update = true;\r\n\t\tif (update) {\r\n\t\t\tthis.matchNode = node;\r\n\t\t\tthis.matchDist = dist;\r\n\t\t}\r\n\t},\r\n\tqueryEnvelope: function () {\r\n\t\tvar queryEnv = new Envelope(this.p);\r\n\t\tqueryEnv.expandBy(this.tolerance);\r\n\t\treturn queryEnv;\r\n\t},\r\n\tgetNode: function () {\r\n\t\treturn this.matchNode;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [KdNodeVisitor];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn BestMatchVisitor;\r\n\t}\r\n});\r\nKdTree.BestMatchVisitor = BestMatchVisitor;\r\n","import GeometryFactory from '../geom/GeometryFactory';\r\nimport NonEncroachingSplitPointFinder from './NonEncroachingSplitPointFinder';\r\nimport ConstraintVertex from './ConstraintVertex';\r\nimport Coordinate from '../geom/Coordinate';\r\nimport IncrementalDelaunayTriangulator from './IncrementalDelaunayTriangulator';\r\nimport QuadEdgeSubdivision from './quadedge/QuadEdgeSubdivision';\r\nimport Double from '../../../../java/lang/Double';\r\nimport extend from '../../../../extend';\r\nimport LastFoundQuadEdgeLocator from './quadedge/LastFoundQuadEdgeLocator';\r\nimport Segment from './Segment';\r\nimport ConvexHull from '../algorithm/ConvexHull';\r\nimport KdTree from '../index/kdtree/KdTree';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Envelope from '../geom/Envelope';\r\nexport default function ConformingDelaunayTriangulator() {\r\n\tthis.initialVertices = null;\r\n\tthis.segVertices = null;\r\n\tthis.segments = new ArrayList();\r\n\tthis.subdiv = null;\r\n\tthis.incDel = null;\r\n\tthis.convexHull = null;\r\n\tthis.splitFinder = new NonEncroachingSplitPointFinder();\r\n\tthis.kdt = null;\r\n\tthis.vertexFactory = null;\r\n\tthis.computeAreaEnv = null;\r\n\tthis.splitPt = null;\r\n\tthis.tolerance = null;\r\n\tlet initialVertices = arguments[0], tolerance = arguments[1];\r\n\tthis.initialVertices = new ArrayList(initialVertices);\r\n\tthis.tolerance = tolerance;\r\n\tthis.kdt = new KdTree(tolerance);\r\n}\r\nextend(ConformingDelaunayTriangulator.prototype, {\r\n\tgetInitialVertices: function () {\r\n\t\treturn this.initialVertices;\r\n\t},\r\n\tgetKDT: function () {\r\n\t\treturn this.kdt;\r\n\t},\r\n\tenforceConstraints: function () {\r\n\t\tthis.addConstraintVertices();\r\n\t\tvar count = 0;\r\n\t\tvar splits = 0;\r\n\t\tdo {\r\n\t\t\tsplits = this.enforceGabriel(this.segments);\r\n\t\t\tcount++;\r\n\t\t} while (splits > 0 && count < ConformingDelaunayTriangulator.MAX_SPLIT_ITER);\r\n\t},\r\n\tinsertSites: function (vertices) {\r\n\t\tfor (var i = vertices.iterator(); i.hasNext(); ) {\r\n\t\t\tvar v = i.next();\r\n\t\t\tthis.insertSite(v);\r\n\t\t}\r\n\t},\r\n\tgetVertexFactory: function () {\r\n\t\treturn this.vertexFactory;\r\n\t},\r\n\tgetPointArray: function () {\r\n\t\tvar pts = new Array(this.initialVertices.size() + this.segVertices.size()).fill(null);\r\n\t\tvar index = 0;\r\n\t\tfor (var i = this.initialVertices.iterator(); i.hasNext(); ) {\r\n\t\t\tvar v = i.next();\r\n\t\t\tpts[index++] = v.getCoordinate();\r\n\t\t}\r\n\t\tfor (var i2 = this.segVertices.iterator(); i2.hasNext(); ) {\r\n\t\t\tvar v = i2.next();\r\n\t\t\tpts[index++] = v.getCoordinate();\r\n\t\t}\r\n\t\treturn pts;\r\n\t},\r\n\tsetConstraints: function (segments, segVertices) {\r\n\t\tthis.segments = segments;\r\n\t\tthis.segVertices = segVertices;\r\n\t},\r\n\tcomputeConvexHull: function () {\r\n\t\tvar fact = new GeometryFactory();\r\n\t\tvar coords = this.getPointArray();\r\n\t\tvar hull = new ConvexHull(coords, fact);\r\n\t\tthis.convexHull = hull.getConvexHull();\r\n\t},\r\n\taddConstraintVertices: function () {\r\n\t\tthis.computeConvexHull();\r\n\t\tthis.insertSites(this.segVertices);\r\n\t},\r\n\tfindNonGabrielPoint: function (seg) {\r\n\t\tvar p = seg.getStart();\r\n\t\tvar q = seg.getEnd();\r\n\t\tvar midPt = new Coordinate((p.x + q.x) / 2.0, (p.y + q.y) / 2.0);\r\n\t\tvar segRadius = p.distance(midPt);\r\n\t\tvar env = new Envelope(midPt);\r\n\t\tenv.expandBy(segRadius);\r\n\t\tvar result = this.kdt.query(env);\r\n\t\tvar closestNonGabriel = null;\r\n\t\tvar minDist = Double.MAX_VALUE;\r\n\t\tfor (var i = result.iterator(); i.hasNext(); ) {\r\n\t\t\tvar nextNode = i.next();\r\n\t\t\tvar testPt = nextNode.getCoordinate();\r\n\t\t\tif (testPt.equals2D(p) || testPt.equals2D(q)) continue;\r\n\t\t\tvar testRadius = midPt.distance(testPt);\r\n\t\t\tif (testRadius < segRadius) {\r\n\t\t\t\tvar testDist = testRadius;\r\n\t\t\t\tif (closestNonGabriel === null || testDist < minDist) {\r\n\t\t\t\t\tclosestNonGabriel = testPt;\r\n\t\t\t\t\tminDist = testDist;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn closestNonGabriel;\r\n\t},\r\n\tgetConstraintSegments: function () {\r\n\t\treturn this.segments;\r\n\t},\r\n\tsetSplitPointFinder: function (splitFinder) {\r\n\t\tthis.splitFinder = splitFinder;\r\n\t},\r\n\tgetConvexHull: function () {\r\n\t\treturn this.convexHull;\r\n\t},\r\n\tgetTolerance: function () {\r\n\t\treturn this.tolerance;\r\n\t},\r\n\tenforceGabriel: function (segsToInsert) {\r\n\t\tvar newSegments = new ArrayList();\r\n\t\tvar splits = 0;\r\n\t\tvar segsToRemove = new ArrayList();\r\n\t\tfor (var i = segsToInsert.iterator(); i.hasNext(); ) {\r\n\t\t\tvar seg = i.next();\r\n\t\t\tvar encroachPt = this.findNonGabrielPoint(seg);\r\n\t\t\tif (encroachPt === null) continue;\r\n\t\t\tthis.splitPt = this.splitFinder.findSplitPoint(seg, encroachPt);\r\n\t\t\tvar splitVertex = this.createVertex(this.splitPt, seg);\r\n\t\t\tvar insertedVertex = this.insertSite(splitVertex);\r\n\t\t\tvar s1 = new Segment(seg.getStartX(), seg.getStartY(), seg.getStartZ(), splitVertex.getX(), splitVertex.getY(), splitVertex.getZ(), seg.getData());\r\n\t\t\tvar s2 = new Segment(splitVertex.getX(), splitVertex.getY(), splitVertex.getZ(), seg.getEndX(), seg.getEndY(), seg.getEndZ(), seg.getData());\r\n\t\t\tnewSegments.add(s1);\r\n\t\t\tnewSegments.add(s2);\r\n\t\t\tsegsToRemove.add(seg);\r\n\t\t\tsplits = splits + 1;\r\n\t\t}\r\n\t\tsegsToInsert.removeAll(segsToRemove);\r\n\t\tsegsToInsert.addAll(newSegments);\r\n\t\treturn splits;\r\n\t},\r\n\tcreateVertex: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet p = arguments[0];\r\n\t\t\tvar v = null;\r\n\t\t\tif (this.vertexFactory !== null) v = this.vertexFactory.createVertex(p, null); else v = new ConstraintVertex(p);\r\n\t\t\treturn v;\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet p = arguments[0], seg = arguments[1];\r\n\t\t\tvar v = null;\r\n\t\t\tif (this.vertexFactory !== null) v = this.vertexFactory.createVertex(p, seg); else v = new ConstraintVertex(p);\r\n\t\t\tv.setOnConstraint(true);\r\n\t\t\treturn v;\r\n\t\t}\r\n\t},\r\n\tgetSubdivision: function () {\r\n\t\treturn this.subdiv;\r\n\t},\r\n\tcomputeBoundingBox: function () {\r\n\t\tvar vertexEnv = ConformingDelaunayTriangulator.computeVertexEnvelope(this.initialVertices);\r\n\t\tvar segEnv = ConformingDelaunayTriangulator.computeVertexEnvelope(this.segVertices);\r\n\t\tvar allPointsEnv = new Envelope(vertexEnv);\r\n\t\tallPointsEnv.expandToInclude(segEnv);\r\n\t\tvar deltaX = allPointsEnv.getWidth() * 0.2;\r\n\t\tvar deltaY = allPointsEnv.getHeight() * 0.2;\r\n\t\tvar delta = Math.max(deltaX, deltaY);\r\n\t\tthis.computeAreaEnv = new Envelope(allPointsEnv);\r\n\t\tthis.computeAreaEnv.expandBy(delta);\r\n\t},\r\n\tsetVertexFactory: function (vertexFactory) {\r\n\t\tthis.vertexFactory = vertexFactory;\r\n\t},\r\n\tformInitialDelaunay: function () {\r\n\t\tthis.computeBoundingBox();\r\n\t\tthis.subdiv = new QuadEdgeSubdivision(this.computeAreaEnv, this.tolerance);\r\n\t\tthis.subdiv.setLocator(new LastFoundQuadEdgeLocator(this.subdiv));\r\n\t\tthis.incDel = new IncrementalDelaunayTriangulator(this.subdiv);\r\n\t\tthis.insertSites(this.initialVertices);\r\n\t},\r\n\tinsertSite: function () {\r\n\t\tif (arguments[0] instanceof ConstraintVertex) {\r\n\t\t\tlet v = arguments[0];\r\n\t\t\tvar kdnode = this.kdt.insert(v.getCoordinate(), v);\r\n\t\t\tif (!kdnode.isRepeated()) {\r\n\t\t\t\tthis.incDel.insertSite(v);\r\n\t\t\t} else {\r\n\t\t\t\tvar snappedV = kdnode.getData();\r\n\t\t\t\tsnappedV.merge(v);\r\n\t\t\t\treturn snappedV;\r\n\t\t\t}\r\n\t\t\treturn v;\r\n\t\t} else if (arguments[0] instanceof Coordinate) {\r\n\t\t\tlet p = arguments[0];\r\n\t\t\tthis.insertSite(this.createVertex(p));\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ConformingDelaunayTriangulator;\r\n\t}\r\n});\r\nConformingDelaunayTriangulator.computeVertexEnvelope = function (vertices) {\r\n\tvar env = new Envelope();\r\n\tfor (var i = vertices.iterator(); i.hasNext(); ) {\r\n\t\tvar v = i.next();\r\n\t\tenv.expandToInclude(v.getCoordinate());\r\n\t}\r\n\treturn env;\r\n};\r\nConformingDelaunayTriangulator.MAX_SPLIT_ITER = 99;\r\n","import CoordinateList from '../geom/CoordinateList';\r\nimport Geometry from '../geom/Geometry';\r\nimport Arrays from '../../../../java/util/Arrays';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport Collection from '../../../../java/util/Collection';\r\nimport IncrementalDelaunayTriangulator from './IncrementalDelaunayTriangulator';\r\nimport QuadEdgeSubdivision from './quadedge/QuadEdgeSubdivision';\r\nimport extend from '../../../../extend';\r\nimport Vertex from './quadedge/Vertex';\r\nimport CoordinateArrays from '../geom/CoordinateArrays';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport Envelope from '../geom/Envelope';\r\nexport default function DelaunayTriangulationBuilder() {\r\n\tthis.siteCoords = null;\r\n\tthis.tolerance = 0.0;\r\n\tthis.subdiv = null;\r\n}\r\nextend(DelaunayTriangulationBuilder.prototype, {\r\n\tcreate: function () {\r\n\t\tif (this.subdiv !== null) return null;\r\n\t\tvar siteEnv = DelaunayTriangulationBuilder.envelope(this.siteCoords);\r\n\t\tvar vertices = DelaunayTriangulationBuilder.toVertices(this.siteCoords);\r\n\t\tthis.subdiv = new QuadEdgeSubdivision(siteEnv, this.tolerance);\r\n\t\tvar triangulator = new IncrementalDelaunayTriangulator(this.subdiv);\r\n\t\ttriangulator.insertSites(vertices);\r\n\t},\r\n\tsetTolerance: function (tolerance) {\r\n\t\tthis.tolerance = tolerance;\r\n\t},\r\n\tsetSites: function () {\r\n\t\tif (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geom = arguments[0];\r\n\t\t\tthis.siteCoords = DelaunayTriangulationBuilder.extractUniqueCoordinates(geom);\r\n\t\t} else if (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet coords = arguments[0];\r\n\t\t\tthis.siteCoords = DelaunayTriangulationBuilder.unique(CoordinateArrays.toCoordinateArray(coords));\r\n\t\t}\r\n\t},\r\n\tgetEdges: function (geomFact) {\r\n\t\tthis.create();\r\n\t\treturn this.subdiv.getEdges(geomFact);\r\n\t},\r\n\tgetSubdivision: function () {\r\n\t\tthis.create();\r\n\t\treturn this.subdiv;\r\n\t},\r\n\tgetTriangles: function (geomFact) {\r\n\t\tthis.create();\r\n\t\treturn this.subdiv.getTriangles(geomFact);\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn DelaunayTriangulationBuilder;\r\n\t}\r\n});\r\nDelaunayTriangulationBuilder.extractUniqueCoordinates = function (geom) {\r\n\tif (geom === null) return new CoordinateList();\r\n\tvar coords = geom.getCoordinates();\r\n\treturn DelaunayTriangulationBuilder.unique(coords);\r\n};\r\nDelaunayTriangulationBuilder.envelope = function (coords) {\r\n\tvar env = new Envelope();\r\n\tfor (var i = coords.iterator(); i.hasNext(); ) {\r\n\t\tvar coord = i.next();\r\n\t\tenv.expandToInclude(coord);\r\n\t}\r\n\treturn env;\r\n};\r\nDelaunayTriangulationBuilder.unique = function (coords) {\r\n\tvar coordsCopy = CoordinateArrays.copyDeep(coords);\r\n\tArrays.sort(coordsCopy);\r\n\tvar coordList = new CoordinateList(coordsCopy, false);\r\n\treturn coordList;\r\n};\r\nDelaunayTriangulationBuilder.toVertices = function (coords) {\r\n\tvar verts = new ArrayList();\r\n\tfor (var i = coords.iterator(); i.hasNext(); ) {\r\n\t\tvar coord = i.next();\r\n\t\tverts.add(new Vertex(coord));\r\n\t}\r\n\treturn verts;\r\n};\r\n","import ConformingDelaunayTriangulator from './ConformingDelaunayTriangulator';\r\nimport ConstraintVertex from './ConstraintVertex';\r\nimport extend from '../../../../extend';\r\nimport DelaunayTriangulationBuilder from './DelaunayTriangulationBuilder';\r\nimport Segment from './Segment';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nimport LinearComponentExtracter from '../geom/util/LinearComponentExtracter';\r\nimport TreeMap from '../../../../java/util/TreeMap';\r\nexport default function ConformingDelaunayTriangulationBuilder() {\r\n\tthis.siteCoords = null;\r\n\tthis.constraintLines = null;\r\n\tthis.tolerance = 0.0;\r\n\tthis.subdiv = null;\r\n\tthis.constraintVertexMap = new TreeMap();\r\n}\r\nextend(ConformingDelaunayTriangulationBuilder.prototype, {\r\n\tcreateSiteVertices: function (coords) {\r\n\t\tvar verts = new ArrayList();\r\n\t\tfor (var i = coords.iterator(); i.hasNext(); ) {\r\n\t\t\tvar coord = i.next();\r\n\t\t\tif (this.constraintVertexMap.containsKey(coord)) continue;\r\n\t\t\tverts.add(new ConstraintVertex(coord));\r\n\t\t}\r\n\t\treturn verts;\r\n\t},\r\n\tcreate: function () {\r\n\t\tif (this.subdiv !== null) return null;\r\n\t\tvar siteEnv = DelaunayTriangulationBuilder.envelope(this.siteCoords);\r\n\t\tvar segments = new ArrayList();\r\n\t\tif (this.constraintLines !== null) {\r\n\t\t\tsiteEnv.expandToInclude(this.constraintLines.getEnvelopeInternal());\r\n\t\t\tthis.createVertices(this.constraintLines);\r\n\t\t\tsegments = ConformingDelaunayTriangulationBuilder.createConstraintSegments(this.constraintLines);\r\n\t\t}\r\n\t\tvar sites = this.createSiteVertices(this.siteCoords);\r\n\t\tvar cdt = new ConformingDelaunayTriangulator(sites, this.tolerance);\r\n\t\tcdt.setConstraints(segments, new ArrayList(this.constraintVertexMap.values()));\r\n\t\tcdt.formInitialDelaunay();\r\n\t\tcdt.enforceConstraints();\r\n\t\tthis.subdiv = cdt.getSubdivision();\r\n\t},\r\n\tsetTolerance: function (tolerance) {\r\n\t\tthis.tolerance = tolerance;\r\n\t},\r\n\tsetConstraints: function (constraintLines) {\r\n\t\tthis.constraintLines = constraintLines;\r\n\t},\r\n\tsetSites: function (geom) {\r\n\t\tthis.siteCoords = DelaunayTriangulationBuilder.extractUniqueCoordinates(geom);\r\n\t},\r\n\tgetEdges: function (geomFact) {\r\n\t\tthis.create();\r\n\t\treturn this.subdiv.getEdges(geomFact);\r\n\t},\r\n\tgetSubdivision: function () {\r\n\t\tthis.create();\r\n\t\treturn this.subdiv;\r\n\t},\r\n\tgetTriangles: function (geomFact) {\r\n\t\tthis.create();\r\n\t\treturn this.subdiv.getTriangles(geomFact);\r\n\t},\r\n\tcreateVertices: function (geom) {\r\n\t\tvar coords = geom.getCoordinates();\r\n\t\tfor (var i = 0; i < coords.length; i++) {\r\n\t\t\tvar v = new ConstraintVertex(coords[i]);\r\n\t\t\tthis.constraintVertexMap.put(coords[i], v);\r\n\t\t}\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn ConformingDelaunayTriangulationBuilder;\r\n\t}\r\n});\r\nConformingDelaunayTriangulationBuilder.createConstraintSegments = function () {\r\n\tif (arguments.length === 1) {\r\n\t\tlet geom = arguments[0];\r\n\t\tvar lines = LinearComponentExtracter.getLines(geom);\r\n\t\tvar constraintSegs = new ArrayList();\r\n\t\tfor (var i = lines.iterator(); i.hasNext(); ) {\r\n\t\t\tvar line = i.next();\r\n\t\t\tConformingDelaunayTriangulationBuilder.createConstraintSegments(line, constraintSegs);\r\n\t\t}\r\n\t\treturn constraintSegs;\r\n\t} else if (arguments.length === 2) {\r\n\t\tlet line = arguments[0], constraintSegs = arguments[1];\r\n\t\tvar coords = line.getCoordinates();\r\n\t\tfor (var i = 1; i < coords.length; i++) {\r\n\t\t\tconstraintSegs.add(new Segment(coords[i - 1], coords[i]));\r\n\t\t}\r\n\t}\r\n};\r\n","import Geometry from '../geom/Geometry';\r\nimport hasInterface from '../../../../hasInterface';\r\nimport GeometryFactory from '../geom/GeometryFactory';\r\nimport Collection from '../../../../java/util/Collection';\r\nimport IncrementalDelaunayTriangulator from './IncrementalDelaunayTriangulator';\r\nimport QuadEdgeSubdivision from './quadedge/QuadEdgeSubdivision';\r\nimport extend from '../../../../extend';\r\nimport DelaunayTriangulationBuilder from './DelaunayTriangulationBuilder';\r\nimport CoordinateArrays from '../geom/CoordinateArrays';\r\nimport ArrayList from '../../../../java/util/ArrayList';\r\nexport default function VoronoiDiagramBuilder() {\r\n\tthis.siteCoords = null;\r\n\tthis.tolerance = 0.0;\r\n\tthis.subdiv = null;\r\n\tthis.clipEnv = null;\r\n\tthis.diagramEnv = null;\r\n}\r\nextend(VoronoiDiagramBuilder.prototype, {\r\n\tcreate: function () {\r\n\t\tif (this.subdiv !== null) return null;\r\n\t\tvar siteEnv = DelaunayTriangulationBuilder.envelope(this.siteCoords);\r\n\t\tthis.diagramEnv = siteEnv;\r\n\t\tvar expandBy = Math.max(this.diagramEnv.getWidth(), this.diagramEnv.getHeight());\r\n\t\tthis.diagramEnv.expandBy(expandBy);\r\n\t\tif (this.clipEnv !== null) this.diagramEnv.expandToInclude(this.clipEnv);\r\n\t\tvar vertices = DelaunayTriangulationBuilder.toVertices(this.siteCoords);\r\n\t\tthis.subdiv = new QuadEdgeSubdivision(siteEnv, this.tolerance);\r\n\t\tvar triangulator = new IncrementalDelaunayTriangulator(this.subdiv);\r\n\t\ttriangulator.insertSites(vertices);\r\n\t},\r\n\tgetDiagram: function (geomFact) {\r\n\t\tthis.create();\r\n\t\tvar polys = this.subdiv.getVoronoiDiagram(geomFact);\r\n\t\treturn VoronoiDiagramBuilder.clipGeometryCollection(polys, this.diagramEnv);\r\n\t},\r\n\tsetTolerance: function (tolerance) {\r\n\t\tthis.tolerance = tolerance;\r\n\t},\r\n\tsetSites: function () {\r\n\t\tif (arguments[0] instanceof Geometry) {\r\n\t\t\tlet geom = arguments[0];\r\n\t\t\tthis.siteCoords = DelaunayTriangulationBuilder.extractUniqueCoordinates(geom);\r\n\t\t} else if (hasInterface(arguments[0], Collection)) {\r\n\t\t\tlet coords = arguments[0];\r\n\t\t\tthis.siteCoords = DelaunayTriangulationBuilder.unique(CoordinateArrays.toCoordinateArray(coords));\r\n\t\t}\r\n\t},\r\n\tsetClipEnvelope: function (clipEnv) {\r\n\t\tthis.clipEnv = clipEnv;\r\n\t},\r\n\tgetSubdivision: function () {\r\n\t\tthis.create();\r\n\t\treturn this.subdiv;\r\n\t},\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn VoronoiDiagramBuilder;\r\n\t}\r\n});\r\nVoronoiDiagramBuilder.clipGeometryCollection = function (geom, clipEnv) {\r\n\tvar clipPoly = geom.getFactory().toGeometry(clipEnv);\r\n\tvar clipped = new ArrayList();\r\n\tfor (var i = 0; i < geom.getNumGeometries(); i++) {\r\n\t\tvar g = geom.getGeometryN(i);\r\n\t\tvar result = null;\r\n\t\tif (clipEnv.contains(g.getEnvelopeInternal())) result = g; else if (clipEnv.intersects(g.getEnvelopeInternal())) {\r\n\t\t\tresult = clipPoly.intersection(g);\r\n\t\t\tresult.setUserData(g.getUserData());\r\n\t\t}\r\n\t\tif (result !== null && !result.isEmpty()) {\r\n\t\t\tclipped.add(result);\r\n\t\t}\r\n\t}\r\n\treturn geom.getFactory().createGeometryCollection(GeometryFactory.toGeometryArray(clipped));\r\n};\r\n","import SnapIfNeededOverlayOp from '../overlay/snap/SnapIfNeededOverlayOp';\r\nimport extend from '../../../../../extend';\r\nimport OverlayOp from '../overlay/OverlayOp';\r\nexport default function UnionOp() {}\r\nextend(UnionOp.prototype, {\r\n\tinterfaces_: function () {\r\n\t\treturn [];\r\n\t},\r\n\tgetClass: function () {\r\n\t\treturn UnionOp;\r\n\t}\r\n});\r\nUnionOp.union = function (g, other) {\r\n\tif (g.isEmpty() || other.isEmpty()) {\r\n\t\tif (g.isEmpty() && other.isEmpty()) return OverlayOp.createEmptyResult(OverlayOp.UNION, g, other, g.getFactory());\r\n\t\tif (g.isEmpty()) return other.copy();\r\n\t\tif (other.isEmpty()) return g.copy();\r\n\t}\r\n\tg.checkNotGeometryCollection(g);\r\n\tg.checkNotGeometryCollection(other);\r\n\treturn SnapIfNeededOverlayOp.overlayOp(g, other, OverlayOp.UNION);\r\n};\r\n","import WKTWriter from './io/WKTWriter';\r\nimport GeometryCollectionMapper from './geom/util/GeometryCollectionMapper';\r\nimport IsValidOp from './operation/valid/IsValidOp';\r\nimport InteriorPointArea from './algorithm/InteriorPointArea';\r\nimport UnaryUnionOp from './operation/union/UnaryUnionOp';\r\nimport UnionOp from './operation/union/UnionOp';\r\nimport SnapIfNeededOverlayOp from './operation/overlay/snap/SnapIfNeededOverlayOp';\r\nimport InteriorPointLine from './algorithm/InteriorPointLine';\r\nimport IsSimpleOp from './operation/IsSimpleOp';\r\nimport BufferOp from './operation/buffer/BufferOp';\r\nimport ConvexHull from './algorithm/ConvexHull';\r\nimport Centroid from './algorithm/Centroid';\r\nimport Comparable from '../../../java/lang/Comparable';\r\nimport RelateOp from './operation/relate/RelateOp';\r\nimport InteriorPointPoint from './algorithm/InteriorPointPoint';\r\nimport Cloneable from '../../../java/lang/Cloneable';\r\nimport Serializable from '../../../java/io/Serializable';\r\nimport DistanceOp from './operation/distance/DistanceOp';\r\nimport Envelope from './geom/Envelope';\r\nimport RectangleContains from './operation/predicate/RectangleContains';\r\nimport Assert from './util/Assert';\r\nimport RectangleIntersects from './operation/predicate/RectangleIntersects';\r\nimport OverlayOp from './operation/overlay/OverlayOp';\r\n\r\nimport Geometry from './geom/Geometry';\r\nimport GeometryCollection from './geom/GeometryCollection';\r\n\r\nimport extend from '../../../extend';\r\n\r\nextend(Geometry.prototype, {\r\n\tequalsTopo: function (g) {\r\n\t\tif (!this.getEnvelopeInternal().equals(g.getEnvelopeInternal())) return false;\r\n\t\treturn RelateOp.relate(this, g).isEquals(this.getDimension(), g.getDimension());\r\n\t},\r\n\tunion: function () {\r\n\t\tif (arguments.length === 0) {\r\n\t\t\treturn UnaryUnionOp.union(this);\r\n\t\t} else if (arguments.length === 1) {\r\n\t\t\tlet other = arguments[0];\r\n\t\t\treturn UnionOp.union(this, other);\r\n\t\t}\r\n\t},\r\n\tisValid: function () {\r\n\t\treturn IsValidOp.isValid(this);\r\n\t},\r\n\tintersection: function (other) {\r\n\t\tif (this.isEmpty() || other.isEmpty()) return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION, this, other, this.factory);\r\n\t\tif (this.isGeometryCollection()) {\r\n\t\t\tvar g2 = other;\r\n\t\t\treturn GeometryCollectionMapper.map(this, {\r\n\t\t\t\tinterfaces_: function () {\r\n\t\t\t\t\treturn [MapOp];\r\n\t\t\t\t},\r\n\t\t\t\tmap: function (g) {\r\n\t\t\t\t\treturn g.intersection(g2);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.checkNotGeometryCollection(this);\r\n\t\tthis.checkNotGeometryCollection(other);\r\n\t\treturn SnapIfNeededOverlayOp.overlayOp(this, other, OverlayOp.INTERSECTION);\r\n\t},\r\n\tcovers: function (g) {\r\n\t\treturn RelateOp.covers(this, g);\r\n\t},\r\n\tcoveredBy: function (g) {\r\n\t\treturn RelateOp.coveredBy(this, g);\r\n\t},\r\n\ttouches: function (g) {\r\n\t\treturn RelateOp.touches(this, g);\r\n\t},\r\n\tintersects: function (g) {\r\n\t\treturn RelateOp.intersects(this, g);\r\n\t},\r\n\twithin: function (g) {\r\n\t\treturn RelateOp.within(this, g);\r\n\t},\r\n\toverlaps: function (g) {\r\n\t\treturn RelateOp.overlaps(this, g);\r\n\t},\r\n\tdisjoint: function (g) {\r\n\t\treturn RelateOp.disjoint(this, g);\r\n\t},\r\n\tcrosses: function (g) {\r\n\t\treturn RelateOp.crosses(this, g);\r\n\t},\r\n\tbuffer: function () {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet distance = arguments[0];\r\n\t\t\treturn BufferOp.bufferOp(this, distance);\r\n\t\t} else if (arguments.length === 2) {\r\n\t\t\tlet distance = arguments[0], quadrantSegments = arguments[1];\r\n\t\t\treturn BufferOp.bufferOp(this, distance, quadrantSegments);\r\n\t\t} else if (arguments.length === 3) {\r\n\t\t\tlet distance = arguments[0], quadrantSegments = arguments[1], endCapStyle = arguments[2];\r\n\t\t\treturn BufferOp.bufferOp(this, distance, quadrantSegments, endCapStyle);\r\n\t\t}\r\n\t},\r\n\tconvexHull: function () {\r\n\t\treturn new ConvexHull(this).getConvexHull();\r\n\t},\r\n\trelate: function (...args) {\r\n\t\treturn RelateOp.relate(this, ...args);\r\n\t},\r\n\tgetCentroid: function () {\r\n\t\tif (this.isEmpty()) return this.factory.createPoint();\r\n\t\tvar centPt = Centroid.getCentroid(this);\r\n\t\treturn this.createPointFromInternalCoord(centPt, this);\r\n\t},\r\n\tgetInteriorPoint: function () {\r\n\t\tif (this.isEmpty()) return this.factory.createPoint();\r\n\t\tvar interiorPt = null;\r\n\t\tvar dim = this.getDimension();\r\n\t\tif (dim === 0) {\r\n\t\t\tvar intPt = new InteriorPointPoint(this);\r\n\t\t\tinteriorPt = intPt.getInteriorPoint();\r\n\t\t} else if (dim === 1) {\r\n\t\t\tvar intPt = new InteriorPointLine(this);\r\n\t\t\tinteriorPt = intPt.getInteriorPoint();\r\n\t\t} else {\r\n\t\t\tvar intPt = new InteriorPointArea(this);\r\n\t\t\tinteriorPt = intPt.getInteriorPoint();\r\n\t\t}\r\n\t\treturn this.createPointFromInternalCoord(interiorPt, this);\r\n\t},\r\n\tsymDifference: function (other) {\r\n\t\tif (this.isEmpty() || other.isEmpty()) {\r\n\t\t\tif (this.isEmpty() && other.isEmpty()) return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE, this, other, this.factory);\r\n\t\t\tif (this.isEmpty()) return other.copy();\r\n\t\t\tif (other.isEmpty()) return this.copy();\r\n\t\t}\r\n\t\tthis.checkNotGeometryCollection(this);\r\n\t\tthis.checkNotGeometryCollection(other);\r\n\t\treturn SnapIfNeededOverlayOp.overlayOp(this, other, OverlayOp.SYMDIFFERENCE);\r\n\t},\r\n\tcreatePointFromInternalCoord: function (coord, exemplar) {\r\n\t\texemplar.getPrecisionModel().makePrecise(coord);\r\n\t\treturn exemplar.getFactory().createPoint(coord);\r\n\t},\r\n\ttoText: function () {\r\n\t\tvar writer = new WKTWriter();\r\n\t\treturn writer.write(this);\r\n\t},\r\n\ttoString: function() {\r\n\t\tthis.toText();\r\n\t},\r\n\tcontains: function (g) {\r\n\t\treturn RelateOp.contains(this, g);\r\n\t},\r\n\tdifference: function (other) {\r\n\t\tif (this.isEmpty()) return OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE, this, other, this.factory);\r\n\t\tif (other.isEmpty()) return this.copy();\r\n\t\tthis.checkNotGeometryCollection(this);\r\n\t\tthis.checkNotGeometryCollection(other);\r\n\t\treturn SnapIfNeededOverlayOp.overlayOp(this, other, OverlayOp.DIFFERENCE);\r\n\t},\r\n\tisSimple: function () {\r\n\t\tvar op = new IsSimpleOp(this);\r\n\t\treturn op.isSimple();\r\n\t},\r\n\tisWithinDistance: function (geom, distance) {\r\n\t\tvar envDist = this.getEnvelopeInternal().distance(geom.getEnvelopeInternal());\r\n\t\tif (envDist > distance) return false;\r\n\t\treturn DistanceOp.isWithinDistance(this, geom, distance);\r\n\t},\r\n\tdistance: function (g) {\r\n\t\treturn DistanceOp.distance(this, g);\r\n\t},\r\n\tisEquivalentClass: function (other) {\r\n\t\treturn this.getClass() === other.getClass();\r\n\t}\r\n})\r\n","import './Array'\r\nimport './Number'\r\nimport './Math'\r\n\r\nimport * as geom from './org/locationtech/jts/geom'\r\nimport * as algorithm from './org/locationtech/jts/algorithm'\r\nimport * as densify from './org/locationtech/jts/densify'\r\nimport * as dissolve from './org/locationtech/jts/dissolve'\r\nimport * as geomgraph from './org/locationtech/jts/geomgraph'\r\nimport * as index from './org/locationtech/jts/index'\r\nimport * as io from './org/locationtech/jts/io'\r\nimport * as noding from './org/locationtech/jts/noding'\r\nimport * as operation from './org/locationtech/jts/operation'\r\nimport * as precision from './org/locationtech/jts/precision'\r\nimport * as simplify from './org/locationtech/jts/simplify'\r\nimport * as triangulate from './org/locationtech/jts/triangulate'\r\n\r\nimport './org/locationtech/jts/monkey'\r\n\r\nconst version = 'npm_package_version (git_hash)'\r\nexport {\r\n  version,\r\n  algorithm,\r\n  densify,\r\n  dissolve,\r\n  geom,\r\n  geomgraph,\r\n  index,\r\n  io,\r\n  noding,\r\n  operation,\r\n  precision,\r\n  simplify,\r\n  triangulate\r\n}\r\n"],"names":["Array","prototype","defineProperty","fill","value","undefined","TypeError","arrayLike","Object","length","Math","max","min","relativeStart","arguments","parseInt","Number","relativeEnd","isFinite","isInteger","val","floor","parseFloat","isNaN","trunc","x","ceil","target","source","key","hasOwnProperty","NumberUtil","extend","equalsWithTolerance","x1","x2","tolerance","abs","IllegalArgumentException","Double","n","doubleToLongBits","longBitsToDouble","isInfinite","MAX_VALUE","Comparable","Clonable","Comparator","Serializable","RuntimeException","message","name","stack","Error","call","create","constructor","c","p","AssertionFailedException","inherits","Assert","shouldNeverReachHere","isTrue","assertion","equals","expectedValue","actualValue","Coordinate","y","z","NULL_ORDINATE","ordinateIndex","X","Y","Z","other","equals2D","o","coord","e","CloneNotSupportedException","dx","dy","dz","sqrt","result","hashCode","Cloneable","f","DimensionalComparator","dimensionsToTest","o1","o2","c1","c2","compX","compare","compY","compZ","a","b","serialVersionUID","NaN","Iterator","hasNext","next","remove","Collection","add","addAll","isEmpty","iterator","size","toArray","IndexOutOfBoundsException","List","get","set","NoSuchElementException","OperationNotSupported","ArrayList","array_","ensureCapacity","interfaces_","push","splice","clear","i","index","element","oldElement","Iterator_","array","len","found","arrayList","arrayList_","position_","CoordinateList","apply","allowRepeated","coll","isChanged","clone","copy","coordArrayType","last","obj","direction","prev","start","end","inc","Envelope","minx","maxx","miny","maxy","init","env","p1","p2","y1","y2","getWidth","getHeight","otherEnvelope","isNull","getMaxX","getMaxY","getMinX","getMinY","intersects","intMinX","intMinY","intMaxX","intMaxY","covers","expandToInclude","w","h","transX","transY","distance","expandBy","deltaX","deltaY","setToNull","q","q1","q2","minq","maxq","minp","maxp","Exception","NotRepresentableException","Location","toLocationSymbol","locationValue","EXTERIOR","BOUNDARY","INTERIOR","NONE","indexOf","MathUtil","log10","ln","log","LOG_10","v1","v2","v3","v4","clamp","wrap","average","StringBuffer","str","append","setCharAt","substr","toString","Integer","intValue","compareTo","Character","isWhitespace","toUpperCase","DD","hi","lo","dd","parse","insertDecimalPoint","magnitude","mag","scale","TEN","pow","divide","gt","lt","ONE","multiply","decimalPointPos","buf","numDigits","MAX_PRINT_DIGITS","digit","rebiasBy10","digitChar","subtract","valueOf","selfAdd","continueExtractingDigits","remMag","negate","isZero","le","selfDivide","yhi","ylo","hc","tc","hy","ty","C","U","u","SPLIT","zhi","zlo","createNaN","exp","r","s","selfMultiply","sqr","reciprocal","fhi","flo","plus5","ge","isNegative","ax","axdd","diffSq","d2","H","S","T","t","hx","tx","ex","toStandardNotation","toSciNotation","specialStr","getSpecialNumberString","sigDigits","extractSignificantDigits","num","charAt","stringOfChar","numZeroes","zeroes","SCI_NOT_ZERO","digits","expStr","SCI_NOT_EXPONENT_CHAR","IllegalStateException","trailingDigits","substring","digitsWithDecimal","isPositive","strlen","signCh","numBeforeDec","ch","isDigit","d","NumberFormatException","val2","numDecPlaces","xAbs","xLog10","xMag","xApprox","PI","TWO_PI","PI_2","E","EPS","CGAlgorithmsDD","orientationIndex","orientationIndexFilter","dx1","dy1","dx2","dy2","selfSubtract","signum","signOfDet2x2","det","intersection","denom1","denom2","denom","numx1","numx2","numx","fracP","doubleValue","numy1","numy2","numy","fracQ","pa","pb","pc","detsum","detleft","detright","errbound","DP_SAFE_EPSILON","CoordinateSequence","M","System","arraycopy","src","srcPos","dest","destPos","getProperty","HCoordinate","_x","_y","_w","px","py","pw","qx","qy","qw","getX","getY","xInt","yInt","CoordinateSequenceFactory","coordinates","hasInterface","coordSeq","dimension","GeometryComponentFilter","geom","Geometry","envelope","factory","SRID","userData","getSRID","getSortIndex","SORTINDEX_GEOMETRYCOLLECTION","g","equalsTopo","equalsExact","geometryChangedFilter","norm","compareToSameClass","comp","getFactory","toGeometry","getEnvelopeInternal","normalize","getPrecisionModel","computeEnvelopeInternal","j","aElement","bElement","comparison","SORTINDEX_MULTIPOINT","SORTINDEX_MULTILINESTRING","SORTINDEX_MULTIPOLYGON","hasNonEmptyElements","geometries","hasNullElements","SORTINDEX_POINT","SORTINDEX_LINESTRING","SORTINDEX_LINEARRING","SORTINDEX_POLYGON","geometryChangedAction","CoordinateFilter","BoundaryNodeRule","boundaryCount","Mod2BoundaryNodeRule","EndPointBoundaryNodeRule","MultiValentEndPointBoundaryNodeRule","MonoValentEndPointBoundaryNodeRule","MOD2_BOUNDARY_RULE","ENDPOINT_BOUNDARY_RULE","MULTIVALENT_ENDPOINT_BOUNDARY_RULE","MONOVALENT_ENDPOINT_BOUNDARY_RULE","OGC_SFS_BOUNDARY_RULE","CoordinateArrays","isRing","pts","ptNotInList","testPts","testPt","scroll","firstCoordinate","newCoordinates","coord1","coord2","coordinateComparator","coordList","toCoordinateArray","hasRepeatedPoints","removeRepeatedPoints","reverse","mid","tmp","removeNull","nonNull","newCoord","copyDeep","srcStart","destStart","isEqualReversed","pts1","pts2","atLeastNCoordinatesOrNothing","coordinate","increasingDirection","minCoordinate","minCoord","extract","npts","extractPts","iPts","ForwardComparator","BidirectionalComparator","forwardComp","isEqualRev","dir1","dir2","i1","i2","comparePt","Map","put","values","entrySet","SortedMap","Set","contains","HashSet","javascript","util","hashSet","hashSet_","BLACK","RED","colorOf","color","parentOf","parent","setColor","leftOf","left","rightOf","right","TreeMap","root_","size_","cmp","oldValue","fixAfterInsertion","rotateLeft","rotateRight","getFirstEntry","successor","l","Lineal","SortedSet","TreeSet","treeSet","treeSet_","Arrays","sort","comparator","slice","concat","asList","Dimension","toDimensionSymbol","dimensionValue","FALSE","SYM_FALSE","TRUE","SYM_TRUE","DONTCARE","SYM_DONTCARE","P","SYM_P","L","SYM_L","A","SYM_A","toDimensionValue","dimensionSymbol","GeometryFilter","CoordinateSequenceFilter","seq","GeometryCollection","getNumPoints","k","childCoordinates","getCoordinates","area","getArea","isEquivalentClass","otherCollection","getCoordinate","getBoundaryDimension","getDimension","sum","getLength","numPoints","revGeoms","createGeometryCollection","theseElements","otherElements","gc","n1","getNumGeometries","n2","thisGeom","getGeometryN","otherGeom","holeComp","filter","isDone","isGeometryChanged","geometryChanged","checkNotGeometryCollection","MultiLineString","lineStrings","isClosed","nLines","revLines","createMultiLineString","BoundaryOp","getBoundary","geomFact","bnRule","endpointMap","mLine","getEmptyMultiPoint","bdyPts","computeBoundaryCoordinates","createPoint","createMultiPointFromCoords","LineString","boundaryLineString","boundaryMultiLineString","line","closedEndpointOnBoundary","isInBoundary","getStartPoint","createMultiPoint","getEndPoint","addEndpoint","getCoordinateN","it","entry","counter","getValue","valence","count","getKey","pt","Counter","bop","PrintStream","StringReader","DecimalFormat","ByteArrayOutputStream","IOException","LineNumberReader","StringUtil","chars","String","getStackTrace","os","ps","printStackTrace","depth","stackTrace","stringReader","lineNumberReader","readLine","NEWLINE","split","separator","separatorlen","tokenList","tmpString","pos","token","res","SIMPLE_ORDINATE_FORMAT","format","spaces","CoordinateSequences","copyCoord","minDim","dim","setOrdinate","getOrdinate","isEqual","cs1","cs2","cs1Size","cs2Size","fact","newseq","swap","cs","ensureValidRing","createClosedRing","points","expandEnvelope","isSimple","otherLineString","equal","getPointN","CGAlgorithms","computeLength","revLine","createLineString","ls","getCoordinateSequenceFactory","Puntal","Point","point","Polygonal","Polygon","shell","holes","createLinearRing","shellCoordinates","signedArea","getCoordinateSequence","getNumInteriorRing","prevX","prevY","xChanged","yChanged","otherPolygon","thisShell","otherPolygonShell","ring","clockwise","uniqueCoordinates","isCCW","poly","getExteriorRing","convexHull","otherShell","shellComp","nHole1","nHole2","thisHole","getInteriorRingN","otherHole","rings","MultiPoint","LinearRing","GeometryFactory","validateConstruction","rev","MINIMUM_VALID_SIZE","MultiPolygon","polygons","createMultiPolygon","allRings","polygon","allRingsArray","GeometryEditor","isUserDataCopied","geometry","operation","editInternal","setUserData","getUserData","editGeometryCollection","editPolygon","edit","getClass","getName","collection","collectionForType","newPolygon","createPolygon","hole","GeometryEditorOperation","NoOpGeometryOperation","CoordinateOperation","coords","editCoordinates","CoordinateSequenceOperation","CoordinateArraySequence","getCoordinateCopy","cloneCoordinates","strBuf","CoordinateArraySequenceFactory","instance","instanceObject","is","createCollection","sharedDelete","mapHas","sharedGet","sharedSet","sharedKeys","sharedValues","mapEntries","sharedForEach","sharedClear","proto","objectOnly","_keys","_values","_itp","sharedSize","forEach","has","list","sharedIterator","itp","array2","done","v","callback","context","entries","MapImpl","MapPolyfill","HashMap","map_","MapInterface","PrecisionModel","modelType","FLOATING","Type","FIXED","setScale","pm","otherPrecisionModel","getMaximumSignificantDigits","otherSigDigits","FLOATING_SINGLE","description","getScale","floatSingleVal","round","makePrecise","maxSigDigits","mostPrecise","pm1","pm2","nameToTypeMap","maximumPreciseValue","precisionModel","coordinateSequenceFactory","getDefaultCoordinateSequenceFactory","geomList","geomClass","isHeterogeneous","hasGeometryCollection","partClass","isGeometryCollectionOrDerived","toGeometryArray","geom0","isCollection","toPolygonArray","toLineStringArray","toPointArray","editor","ptSeq","toMultiPolygonArray","multiPolygons","multiPolygonArray","geometryArray","toMultiLineStringArray","multiLineStrings","multiLineStringArray","lineStringArray","toMultiPointArray","multiPoints","multiPointArray","toLinearRingArray","linearRings","linearRingArray","pointArray","polygonArray","createPointFromInternalCoord","exemplar","regExes","WKTParser","geometryFactory","wkt","type","replace","matches","typeStr","exec","search","emptyTypeStr","toLowerCase","extractGeometry","getGeometryType","wktType","data","multipoint","join","linestring","linearring","multilinestring","multipolygon","trim","components","trimParens","lines","parenComma","doubleParenComma","wktArray","read","WKTWriter","parser","write","p0","LineIntersector","inputLines","map","intPt","intLineIndex","_isProper","segmentIndex","intIndex","computeIntLineIndex","catBuf","isEndPoint","isCollinear","p3","p4","computeIntersect","dist0","getEdgeDistance","dist1","hasIntersection","isInteriorIntersection","inputLineIndex","NO_INTERSECTION","dist","computeEdgeDistance","COLLINEAR_INTERSECTION","toLineString","getTopologySummary","ptIndex","pdx","pdy","nonRobustComputeEdgeDistance","DONT_INTERSECT","DO_INTERSECT","COLLINEAR","POINT_INTERSECTION","RobustLineIntersector","env0","env1","computeIntersection","n3","n4","normPt","smallestInAbsValue","nearestEndpoint","intersectionWithNormalization","isInSegmentEnvelopes","x3","x4","xabs","intPtDD","isIn","out","println","normalizeToEnvCentre","safeHCoordinateIntersection","p1q1p2","p1q2p2","q1p1q2","q1p2q2","n00","n01","n10","n11","minX0","minY0","maxX0","maxY0","minX1","minY1","maxX1","maxY1","intMidX","intMidY","Pq1","Pq2","Qp1","Qp2","collinear","computeCollinearIntersection","nearestPt","minDist","distancePointLine","RobustDeterminant","sign","RayCrossingCounter","crossingCount","isPointOnSegment","xIntSign","getLocation","locatePointInRing","countSegment","isOnSegment","x0","distanceLineLine","B","D","noIntersection","r_num","s_num","isPointInRing","y0","nPts","hiPt","hiIndex","iPrev","iNext","disc","computeOrientation","distancePointLinePerpendicular","len2","minDistance","isOnLine","lineIntersector","CLOCKWISE","RIGHT","COUNTERCLOCKWISE","LEFT","STRAIGHT","LineSegment","seg","orient0","orient1","geomFactory","li","getIntersection","projectionFactor","pf0","pf1","newp0","project","newp1","atan2","midPoint","closestPt","close00","closestPoint","close01","close10","close11","factor","comp0","temp","segmentLengthFraction","offsetDistance","segx","segy","ux","uy","offsetx","offsety","setCoordinates","inputPt","segFrac","bits0","java","lang","hash0","bits1","hash1","IntersectionMatrix","matrix","setAll","elements","isDisjoint","hasPointInCommon","dimensionSymbols","row","col","column","minimumDimensionSymbols","setAtLeast","minimumDimensionValue","dimensionOfGeometryA","dimensionOfGeometryB","isTouches","ai","bi","requiredDimensionSymbols","im","actualDimensionValue","requiredDimensionSymbol","actualDimensionSymbols","m","Centroid","areaBasePt","triangleCent3","areasum2","cg3","lineCentSum","totalLength","ptCount","ptCentSum","basePt","lineLen","segmentLen","midx","midy","addPoint","isPositiveArea","addTriangle","addLineSegments","cent","setBasePoint","centroid3","area2","addShell","addHole","getCentroid","EmptyStackException","Stack","pop","peek","empty","UniqueCoordinateArrayFilter","filterCoordinates","ConvexHull","inputPts","extractCoordinates","RadialComparator","octPts","computeOctPts","closeRing","cleanRing","linearRing","original","cleanedRing","previousDistinctCoordinate","currentCoordinate","nextCoordinate","isBetween","cleanedRingCoordinates","c3","polyPts","computeOctRing","reducedSet","reducedPts","padArray3","reduce","sortedPts","preSort","cHS","grahamScan","cH","lineOrPolygon","pad","origin","polarCompare","dxp","dyp","dxq","dyq","orient","op","oq","GeometryTransformer","inputGeom","pruneEmptyGeometry","preserveGeometryCollectionType","preserveCollections","preserveType","transformCoordinates","isAllValidLinearRings","transformLinearRing","buildGeometry","transGeomList","transformGeom","transformLineString","transformPoint","transformPolygon","transform","transformMultiPoint","transformMultiLineString","transformMultiPolygon","transformGeometryCollection","seqSize","LineStringSnapper","snapTolerance","srcPts","allowSnappingToSourceVertices","_isClosed","srcLine","srcCoords","snapPts","srcPt","snapVert","findSnapForVertex","snapVertices","snapSegments","newPts","distinctPtCount","snapPt","findSegmentIndexToSnap","snapIndex","GeometrySnapper","srcGeom","snapGeom","extractTargetCoordinates","snapTrans","SnapTransformer","cleanResult","snappedGeom","buffer","ringPts","minSegLen","computeMinimumSegmentLength","snapTol","ptSet","segLen","snap","g0","g1","snapper0","snapTo","snapper1","computeOverlaySnapTolerance","computeSizeBasedSnapTolerance","getType","fixedSnapTol","minDimension","SNAP_PRECISION_FACTOR","snapToSelf","isSelfSnap","snapper","setAllowSnappingToSourceVertices","snapLine","CommonBits","isFirst","commonMantissaBitsCount","commonBits","commonSignExp","numBits","signExpBits","numSignExp","numCommonMostSigMantissaBits","zeroLowerBits","bits","numStr","Long","toBinaryString","padStr","bitStr","getBit","mask","nBits","invMask","zeroed","num1","num2","CommonBitsRemover","commonCoord","ccFilter","CommonCoordinateFilter","trans","Translater","invCoord","getCommonCoordinate","commonBitsX","commonBitsY","getCommon","xp","yp","GeometryCollectionIterator","atStart","subcollectionIterator","isAtomic","UnsupportedOperationException","PointLocator","boundaryRule","numBoundaries","shellLoc","locateInPolygonRing","holeLoc","ptCoord","locate","loc","updateLocationInfo","locateInternal","ml","mpoly","geomi","g2","computeLocation","Octant","octant","adx","ady","SegmentString","BasicSegmentString","Boundable","ItemBoundable","bounds","item","PriorityQueue","_size","items","minItem","reorder","child","ItemVisitor","SpatialIndex","itemEnv","searchEnv","visitor","AbstractNode","childBoundables","level","childBoundable","computeBounds","Collections","alen","BoundablePair","boundable1","boundable2","_distance","itemDistance","priQ","isComp1","isComposite","isComp2","expand","nd","bndComposite","bndOther","children","getChildBoundables","bp","getDistance","isLeaves","getBounds","AbstractSTRtree","root","built","itemBoundables","nodeCapacity","DEFAULT_NODE_CAPACITY","nodes","build","node","childToRemove","getItem","valuesTree","itemsTree","valuesTreeForNode","valuesTreeForChild","boundables","boundablesAtLevel","top","getLevel","boundable","searchBounds","getIntersectsOp","query","visitItem","createNode","createHigherLevels","removeItem","childToPrune","boundablesOfALevel","parentBoundables","createParentBoundables","maxChildDepth","childDepth","newLevel","sortedChildBoundables","getComparator","lastNode","getNodeCapacity","addChildBoundable","compareDoubles","IntersectsOp","ItemDistance","item1","item2","STRtree","verticalSlices","createParentBoundablesFromVerticalSlice","STRtreeNode","insert","intersectsOp","sliceCount","sliceCapacity","slices","boundablesAddedToSlice","yComparator","minLeafCount","xComparator","createParentBoundablesFromVerticalSlices","itemDist","getRoot","nearestNeighbour","initBndPair","POSITIVE_INFINITY","tree","maxDistance","distanceLowerBound","minPair","bndPair","poll","currentDistance","expandToQueue","getBoundable","bnd","centreX","avg","centreY","aBounds","bBounds","SegmentPointComparator","relativeSign","xSign","ySign","compareValue","compareSign0","compareSign1","SegmentNode","segString","segmentOctant","_isInterior","print","maxSegmentIndex","SegmentNodeList","nodeMap","edge","addEndpoints","eiPrev","ei","addEdgeCoordinates","collapsedVertexIndexes","findCollapsesFromInsertedNodes","findCollapsesFromExistingVertices","vertexIndex","ei0","ei1","lastSegStartPt","useIntPt1","isInterior","ipt","edgeList","addCollapsedNodes","newEdge","createSplitEdge","collapsedVertexIndex","numVerticesBetween","isCollapsed","findCollapseIndex","maxSegIndex","NodedSegmentString","getData","eiNew","getSegmentOctant","splitEdges","edgePts","split0","pt0","splitn","splitnPts","ptn","NodeVertexIterator","nodeList","nodeIt","currNode","nextNode","currSegIndex","getEdge","readNextNode","NodableSegmentString","safeOctant","addIntersectionNode","geomIndex","addIntersection","normalizedSegmentIndex","nextSegIndex","nextPt","getIntersectionNum","getNodedSubstrings","segStrings","resultEdgelist","ss","getNodeList","addSplitEdges","MonotoneChainOverlapAction","tempEnv1","tempEnv2","overlapSeg1","overlapSeg2","seg1","seg2","mc1","start1","mc2","start2","getLineSegment","overlap","MonotoneChain","id","start0","end0","mcs","select","computeSelect","mc","mco","computeOverlapsInternal","end1","p00","p01","p10","p11","mid0","mid1","Quadrant","isNorthern","quad","NE","NW","isOpposite","quad1","quad2","diff","commonHalfPlane","isInHalfPlane","halfPlane","SE","SW","quadrant","MonotoneChainBuilder","getChainStartIndices","startIndexList","findChainEnd","startIndex","toIntArray","safeStart","chainQuad","getChains","mcList","Noder","SinglePassNoder","segInt","setSegmentIntersector","MCIndexNoder","monoChains","idCounter","nodedSegStrings","nOverlaps","si","segStr","segChains","setId","getEnvelope","inputSegStrings","intersectChains","overlapAction","SegmentOverlapAction","queryChain","overlapChains","testChain","getId","computeOverlaps","ss1","getContext","ss2","processIntersections","TopologyException","msg","msgWithCoord","SegmentIntersector","e0","segIndex0","e1","segIndex1","InteriorIntersectionFinder","findAllIntersections","isCheckEndSegmentsOnly","interiorIntersection","intSegments","intersections","intersectionCount","keepIntersections","isEndSegPresent","isEndSegment","createAllIntersectionsFinder","finder","setFindAllIntersections","createAnyIntersectionFinder","createIntersectionCounter","setKeepIntersections","FastNodingValidator","_isValid","checkInteriorIntersections","getIntersections","execute","noder","computeNodes","getErrorMessage","getInteriorIntersection","intSegs","getIntersectionSegments","computeIntersections","nv","isValid","EdgeNodingValidator","edges","toSegmentStrings","checkValid","validator","GeometryCollectionMapper","mapOp","mapped","mapper","Position","opposite","position","ON","TopologyLocation","location","on","gl","locValue","newLoc","posIndex","setLocation","locIndex","setAllLocations","Label","elt","onLoc","lbl","leftLoc","rightLoc","setLocations","setAllLocationsIfNull","isLine","merge","flip","isArea","isAnyNull","side","isEqualOnSide","allPositionsEqual","toLineLabel","label","lineLabel","EdgeRing","startDe","maxNodeDegree","_isHole","computePoints","computeRing","getGeometryCount","de","isFirstEdge","getEdgeRing","getLabel","mergeLabel","addPoints","isForward","setEdgeRing","getNext","getNode","degree","getEdges","getOutgoingDegree","setInResult","getLinearRing","containsPoint","computeMaxNodeDegree","deLabel","holeLR","MinimalEdgeRing","er","setMinEdgeRing","getNextMin","MaximalEdgeRing","minEdgeRings","getMinEdgeRing","minEr","linkMinimalDirectedEdges","GraphComponent","_isInResult","_isCovered","_isCoveredSet","_isVisited","isVisited","isInResult","isCovered","computeIM","Node","label2","eltIndex","nLoc","argIndex","onLocation","setLabel","computeMergedLocation","thisLoc","setNode","NodeMap","nodeFact","bdyNodes","addNode","EdgeEnd","angle","className","lastDotPos","lastIndexOf","compareDirection","boundaryNodeRule","DirectedEdge","_isForward","sym","nextMin","edgeRing","minEdgeRing","computeDirectedLabel","depthVal","isInteriorAreaEdge","getDepthDelta","isExteriorIfArea0","isExteriorIfArea1","depthDelta","printReverse","setVisited","directionFactor","oppositePos","delta","oppositeDepth","setDepth","depthFactor","currLocation","nextLocation","NodeFactory","PlanarGraph","edgeEndList","eiList","find","nodeit","linkResultDirectedEdges","linkAllDirectedEdges","ep0","ep1","eCoord","matchInSameDirection","getEdgeEnds","ee","edgesToAdd","de1","de2","setSym","PolygonBuilder","shellList","edgeRings","freeHoleList","isHole","resultPolyList","toPolygon","getShell","findEdgeRingContaining","setShell","maxEdgeRings","getMaxNodeDegree","linkDirectedEdgesForMinimalEdgeRings","buildMinimalRings","findShell","placePolygonHoles","dirEdges","computePolygons","testEr","testRing","testEnv","minShell","minEnv","tryShell","tryRing","tryEnv","isContained","shellCount","graph","getNodes","buildMaximalEdgeRings","buildMinimalEdgeRings","sortShellsAndHoles","placeFreeHoles","LineBuilder","ptLocator","lineEdgesList","resultLineList","opCode","getGraph","collectLineEdge","collectBoundaryTouchEdge","targetIndex","getArgGeometry","findCoveredLineEdges","collectLines","buildLines","isLineEdge","OverlayOp","isResultOfOp","setVisitedEdge","isCoveredSet","isCoveredByA","setCovered","edgesList","isIsolated","labelIsolatedLine","getSym","INTERSECTION","PointBuilder","resultPointList","isCoveredByLA","isIncidentEdgeInResult","getDegree","filterCoveredNodeToPoint","extractNonCoveredResultNodes","PointOnGeometryLocator","SimplePointInAreaLocator","containsPointInPolygon","EdgeEndStar","edgeMap","ptInAreaLocation","iNextCW","startLoc","currLoc","geomGraph","computeEdgeEndLabels","getBoundaryNodeRule","checkAreaLabelsConsistent","lastEdgeIndex","startLabel","eSearch","getGeometry","computeLabel","propagateSideLabels","hasDimensionalCollapseEdge","DirectedEdgeStar","resultAreaEdgeList","SCANNING_FOR_INCOMING","LINKING_TO_OUTGOING","getResultAreaEdges","firstOut","incoming","state","nextOut","nextIn","setNext","insertEdgeEnd","de0","deLast","quad0","getQuadrant","nonHorizontalEdge","getDy","nodeLabel","prevOut","firstIn","edgeIndex","findIndex","startDepth","getDepth","targetLastDepth","nextDepth","computeDepths","lastDepth","endIndex","currDepth","nextDe","setEdgeDepths","setNextMin","computeLabelling","eLabel","eLoc","OverlayNodeFactory","mce","chainIndex","computeIntersectsForChain","SweepLineEvent","xValue","eventType","insertEvent","deleteEventIndex","DELETE","INSERT","pe","ev","EdgeSetIntersector","_hasIntersection","hasProper","hasProperInterior","properIntersectionPoint","includeProper","recordIsolated","isSelfIntersection","numIntersections","numTests","_isDone","isDoneWhenProperInt","isAdjacentSegments","isIntersection","isBoundaryPointInternal","bdyNodes0","bdyNodes1","setIsolated","isTrivialIntersection","isProper","addIntersections","isBoundaryPoint","SimpleMCSweepLineIntersector","events","isDelete","getInsertEvent","setDeleteEventIndex","prepareEvents","isInsert","processOverlaps","getDeleteEventIndex","edges0","edges1","addEdges","testAllSegments","edgeSet","getMonotoneChainEdge","getStartIndexes","ev0","mc0","getObject","ev1","isSameLabel","addEdge","IntervalRTreeNode","NEGATIVE_INFINITY","queryMin","queryMax","NodeComparator","mid2","IntervalRTreeLeafNode","IntervalRTreeBranchNode","node1","node2","buildExtent","SortedPackedIntervalRTree","leaves","buildLevel","buildTree","buildRoot","LinearComponentExtracter","isForcedToLineString","getLines","forceToLineString","geoms","ArrayListVisitor","IndexedPointInAreaLocator","IntervalIndexedGeometry","rcc","SegmentVisitor","addLine","getItems","EdgeIntersection","EdgeIntersectionList","Edge","MonotoneChainIndexer","MonotoneChainEdge","env2","mcb","chainIndex0","chainIndex1","Depth","NULL_VALUE","depthValue","minDepth","newValue","depthAtLocation","_isIsolated","newe","isEqualForward","isEqualReverse","iRev","updateIM","setAtLeastIfValid","GeometryGraph","parentGeom","lineEdgeMap","useBoundaryDeterminationRule","boundaryNodes","_hasTooFewPoints","invalidPoint","areaPtLocator","determineBoundary","computeRingSelfNodes","computeSelfNodes","isDoneIfProperInt","setIsDoneIfProperInt","esi","createEdgeSetIntersector","isRings","computeAllSegments","addSelfIntersectionNodes","edgelist","setBoundaryNodes","getBoundaryNodes","insertPoint","addPolygonRing","insertEdge","insertBoundaryPoint","isBoundaryNode","lr","cwLeft","cwRight","eiIt","addSelfIntersectionNode","addPolygon","addLineString","addCollection","findEdge","GeometryGraphOperation","resultPrecisionModel","arg","setComputationPrecision","setPrecisionModel","OrientedCoordinateArray","_orientation","orientation","oca","compareOriented","orientation1","orientation2","limit1","limit2","compPt","done1","done2","EdgeList","ocaMap","edgeColl","matchEdge","resultGeom","existingEdge","findEqualEdge","existingLabel","labelToMerge","isPointwiseEqual","opcode","createEmptyResult","mergeSymLabels","newEdges","getCollapsedEdge","overlayOpCode","computeOverlay","insertUniqueEdge","copyPoints","computeEdgeIntersections","baseSplitEdges","computeSplitEdges","insertUniqueEdges","computeLabelsFromDepths","replaceCollapsedEdges","labelIncompleteNodes","findResultAreaEdges","cancelDuplicateResultEdges","polyBuilder","getPolygons","lineBuilder","pointBuilder","computeGeometry","getNodeIterator","graphNode","newNode","getDelta","toLine","updateNodeLabelling","nodeCount","ni","labelIncompleteNode","updateLabelling","overlayOp","geom1","gov","geomOv","getResultGeometry","isGeometryCollection","MapOp","SnapIfNeededOverlayOp","symDifference","SYMDIFFERENCE","resultDimension","dim0","dim1","UNION","DIFFERENCE","difference","loc0","loc1","SnapOverlayOp","cbr","computeSnapTolerance","remGeom","removeCommonBits","addCommonBits","prepGeom","prepareResult","union","isSuccess","savedException","InteriorPointArea","interiorPoint","maxWidth","width","bisector","horizontalBisector","widestIntersection","widestGeometry","centre","bisectY","SafeBisectorFinder","getBisectorY","hiY","loY","process","updateInterval","InteriorPointLine","centroid","addInterior","InteriorPointPoint","MonotoneChainSelectAction","selectedSegment","NodeBase","subnode","hasChildren","hasItems","addAllItems","subSize","interval","resultItems","isSearchMatch","addAllItemsFromOverlapping","itemInterval","isPrunable","maxSubDepth","sqd","nodeSize","getSubnodeIndex","subnodeIndex","Interval","overlaps","DoubleBits","exponent","CVTFWD","powerOf2","NumW","Qty","Sign","Expo","Mant","Bin","Inf","ExW","Key","computeKey","computeLevel","computeInterval","getMin","getMax","searchInterval","childNode","createSubnode","getSubnode","subInt","getInterval","createExpanded","addInterval","expandInt","largerNode","IntervalSize","isZeroWidth","maxAbs","scaledInterval","MIN_BINARY_EXPONENT","Root","insertContained","isZeroArea","Bintree","minExtent","collectStats","insertInterval","ensureExtent","foundItems","del","PointInRing","MCPointInRing","crossings","buildIndex","mcEnv","rayEnv","mcSelecter","segs","MCSelecter","testMonotoneChain","mcp","testLineSegment","Angle","toDegrees","radians","PI_TIMES_2","isAcute","dx0","dy0","dotprod","isObtuse","interiorAngle","anglePrev","angleNext","normalizePositive","angleBetween","tip1","tail","tip2","a1","a2","ang1","ang2","delAngle","toRadians","angleDegrees","getTurn","crossproduct","sin","angleBetweenOriented","angDel","PI_OVER_2","PI_OVER_4","Triangle","interpolateZ","longestSideLength","circumcentre","area3D","inCentre","m00","m01","m10","m11","v0","lenAB","lenBC","lenCA","maxLen","cx","cy","ay","bx","by","ccx","ccy","perpendicularBisector","l1","l2","angleBisector","len0","frac","splitPt","uz","vx","vy","vz","crossx","crossy","crossz","absSq","len1","circum","inCentreX","inCentreY","MinimumBoundingCircle","input","extremalPts","radius","compute","hullPts","lowestPoint","Q","pointWitMinAngleWithX","R","pointWithMinAngleWithSegment","computeCirclePoints","computeCentre","centrePoint","minSin","minAngPt","minAng","ang","MinimumDiameter","isConvex","convexHullPts","minBaseSeg","minWidthPt","minPtIndex","minWidth","computeMinimumDiameter","convexGeom","computeConvexRingMinDiameter","currMaxIndex","findMaxPerpDistance","computeWidthConvex","getConvexHull","maxPerpDistance","distancePerpendicular","nextPerpDistance","maxIndex","nextIndex","minPara","maxPara","minPerp","maxPerp","paraC","computeC","perpC","maxPerpLine","computeSegmentForLine","minPerpLine","maxParaLine","minParaLine","lineIntersection","getMinimumDiameter","getDiameter","getMinimumRectangle","Densifier","distanceTolerance","DensifyTransformer","densifyPoints","precModel","densifiedSegCount","densifiedSegLen","segFract","pointAlong","densify","densifier","setDistanceTolerance","roughGeom","createValidArea","roughAreaGeom","HalfEdge","_orig","_sym","_next","orig","oNext","insertAfter","ecmp","ePrev","save","quadrant2","compareAngularDirection","MarkHalfEdge","_isMarked","isMarked","setMarkBoth","setMark","markBoth","mark","EdgeGraph","vertexMap","eAdj","eAdjDest","createEdge","isValidEdge","eSame","DissolveHalfEdge","_isStart","DissolveEdgeGraph","LineDissolver","nodeEdgeStack","ringStartEdge","isStart","computeResult","eNode","prevNode","stackEdges","eStartRing","eNext","eStart","updateRingStartEdge","buildRing","getVertexEdges","buildLine","component","lineString","doneStart","setStart","dissolve","getResult","visitItems","visit","centrex","centrey","computeQuadLevel","quadSize","dMax","sqEnv","insertNode","addEnv","expandEnv","isZeroX","isZeroY","Quadtree","insertEnv","posEnv","delX","delY","geometryTypes","GeoJSONParser","json","JSON","feature","bbox","featureCollection","features","sub","geoJson","shellGeoJson","holeGeoJson","GeoJSONReader","reducePrecision","GeoJSONWriter","WKTReader","p2c","OL3Parser","olReference","ol","convertFromPoint","convertFromLineString","convertFromLinearRing","convertFromPolygon","convertFromMultiPoint","convertFromMultiLineString","convertFromMultiPolygon","convertFromCollection","getLinearRings","multiPoint","getPoints","multiLineString","getLineStrings","multiPolygon","getGeometries","convertToPoint","convertToLineString","convertToLinearRing","convertToPolygon","convertToMultiPoint","convertToMultiLineString","convertToMultiPolygon","convertToCollection","geometryCollection","ScaledNoder","scaleFactor","offsetX","offsetY","isScaled","isIntegerPrecision","rescale","nodedSegmentStrings","roundPts","roundPtsNoDup","splitSS","intSegStrings","IsSimpleOp","isClosedEndpointsInInterior","nonSimpleLocation","mp","isSimpleLinearGeometry","endPoints","getEdgeIterator","getMaximumSegmentIndex","eiInfo","hasProperIntersection","getProperIntersectionPoint","hasNonEndpointIntersection","hasClosedEndpointIntersection","getEdgeIntersectionList","EndpointInfo","isSimpleMultiPoint","isSimplePolygonal","isSimpleGeometryCollection","computeSimple","BufferParameters","quadrantSegments","DEFAULT_QUADRANT_SEGMENTS","endCapStyle","CAP_ROUND","joinStyle","JOIN_ROUND","mitreLimit","DEFAULT_MITRE_LIMIT","_isSingleSided","simplifyFactor","DEFAULT_SIMPLIFY_FACTOR","setQuadrantSegments","setEndCapStyle","setJoinStyle","setMitreLimit","quadSegs","JOIN_BEVEL","JOIN_MITRE","isSingleSided","bufferDistanceError","alpha","cos","CAP_FLAT","CAP_SQUARE","RightmostEdgeFinder","minIndex","minDe","orientedDe","getRightmostSideOfSegment","checkForRightmostCoordinate","pPrev","pNext","usePrev","star","getRightmostEdge","dirEdgeList","findRightmostEdgeAtNode","findRightmostEdgeAtVertex","rightmostSide","getRightmostSide","LinkedList","addLast","removeFirst","shift","BufferSubgraph","rightMostCoord","startEdge","copySymDepths","outsideDepth","clearVisitedEdges","addReachable","nodesVisited","nodeQueue","startNode","computeNodeDepth","adjNode","edgeEnv","dirEdge","nodeStack","symNode","BufferInputLineSimplifier","inputLine","distanceTol","isDeleted","angleOrientation","i0","isConcave","isShallow","isShallowSampled","midIndex","findNextNonDeletedIndex","lastIndex","isMiddleVertexDeleted","isDeletable","isAngleToSimplify","NUM_PTS_TO_CHECK","deleteShallowConcavities","collapseLine","simplify","simp","INIT","KEEP","OffsetSegmentString","ptList","minimimVertexDistance","COORDINATE_ARRAY_TYPE","bufPt","isRedundant","addPt","lastPt","ptDist","startPt","last2Pt","OffsetSegmentGenerator","maxCurveSegmentError","filletAngleQuantum","closingSegLengthFactor","segList","bufParams","s0","s1","s2","seg0","offset0","offset1","_hasNarrowConcaveAngle","getQuadrantSegments","getJoinStyle","MAX_CLOSING_SEG_LEN_FACTOR","addStartPoint","computeOffsetSegment","outsideTurn","addCollinear","addOutsideTurn","addInsideTurn","offsetL","offsetR","getEndCapStyle","addFilletArc","squareCapSideOffset","squareCapLOffset","squareCapROffset","isMitreWithinLimit","mitreRatio","getMitreLimit","addLimitedMitreJoin","startAngle","endAngle","OFFSET_SEGMENT_SEPARATION_FACTOR","addMitreJoin","addBevelJoin","addFilletCorner","addPts","ang0","angDiff","angDiffHalf","midAng","mitreMidAng","mitreDist","bevelDelta","bevelHalfLen","bevelMidX","bevelMidY","bevelMidPt","mitreMidLine","bevelEndLeft","pointAlongOffset","bevelEndRight","offset","sideSign","totalAngle","nSegs","initAngle","currAngleInc","currAngle","INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR","setMinimumVertexDistance","CURVE_VERTEX_SNAP_DISTANCE_FACTOR","numInt","OffsetCurveBuilder","isRightSide","posDistance","segGen","getSegGen","computePointCurve","computeOffsetCurve","curvePts","distTol","simplifyTolerance","addSegments","simp2","initSideSegments","addFirstSegment","addNextSegment","simp1","addLastSegment","addLineEndCap","createCircle","createSquare","computeSingleSidedBufferCurve","computeLineBufferCurve","lineCoord","bufDistance","getSimplifyFactor","getLineCurve","copyCoordinates","computeRingBufferCurve","SubgraphDepthLocater","subgraphs","cga","stabbingRayLeftPt","stabbedSegments","bsg","findStabbedSegments","getDirectedEdges","isHorizontal","ds","DepthSegment","leftDepth","upwardSeg","minX","maxX","orientIndex","compare0","OffsetCurveSetBuilder","curveBuilder","curveList","curve","addCurve","offsetSide","shellCoord","isErodedCompletely","holeCoord","triangleCoord","bufferDistance","tri","distToCentre","getBufferParameters","cwLeftLoc","cwRightLoc","getRingCurve","ringCoord","minDiam","isTriangleErodedCompletely","envMinDimension","IntersectionAdder","hasInterior","numInteriorIntersections","numProperIntersections","BufferBuilder","workingPrecisionModel","workingNoder","mergeDelta","existingDelta","newDelta","setDepthDelta","subgraphList","processedGraphs","subgraph","getRightmostCoordinate","locater","computeDepth","findResultEdges","reverseOrder","emptyGeom","curveSetBuilder","bufferSegStrList","getCurves","createEmptyResultGeometry","computeNodedEdges","createSubgraphs","buildSubgraphs","getNoder","oldLabel","lLoc","rLoc","convertSegStrings","NodingValidator","checkEndPtVertexIntersections","ss0","pts0","hasInteriorIntersection","checkCollapses","checkCollapse","HotPixel","originalPt","ptScaled","p0Scaled","p1Scaled","corner","safeEnv","initCorners","segMinx","segMaxx","segMiny","segMaxy","isOutsidePixelEnv","intersectsToleranceSquare","intersectsScaled","copyScaled","pScaled","safeTolerance","SAFE_ENV_EXPANSION_FACTOR","intersectsLeft","intersectsBottom","segIndex","MCIndexPointSnapper","hotPixel","parentEdge","hotPixelVertexIndex","pixelEnv","getSafeEnvelope","hotPixelSnapAction","HotPixelSnapAction","isNodeAdded","_isNodeAdded","addSnappedNode","InteriorIntersectionFinderAdder","interiorIntersections","MCIndexSnapRounder","pointSnapper","inputSegmentStrings","resultSegStrings","findInteriorIntersections","computeIntersectionSnaps","computeVertexSnaps","intFinderAdder","getInteriorIntersections","edge0","getIndex","snapRound","BufferOp","argGeom","resultGeometry","saveException","fixedPM","bufBuilder","setWorkingPrecisionModel","setNoder","precDigits","MAX_PRECISION_DIGITS","bufferReducedPrecision","precisionDigits","sizeBasedScaleFactor","precisionScaleFactor","bufferFixedPrecision","bufferOriginalPrecision","argPM","bufferOp","gBuf","geomBuf","bufOp","params","maxPrecisionDigits","envMax","expandByDistance","bufEnvMax","bufEnvPrecisionDigits","minUnitLog10","CAP_BUTT","PolygonExtracter","comps","GeometryLocation","INSIDE_AREA","PointExtracter","singletonList","ConnectedElementLocationFilter","locations","getLocations","DistanceOp","terminateDistance","minDistanceLocation","locPtPoly","computeContainmentDistance","polyGeomIndex","locationsIndex","polys","insideLocs","locs","ptLoc","locGeom","computeMinDistance","lines0","lines1","computeMinDistanceLines","updateMinDistance","computeMinDistanceLinesPoints","computeMinDistancePoints","nearestPts","computeFacetDistance","coord0","segClosestPoint","line0","line1","closestPoints","points0","points1","pt1","distOp","isWithinDistance","nearestPoints","EdgeString","directedEdges","forwardDirectedEdges","reverseDirectedEdges","coordinateList","directedEdge","getEdgeDirection","getLine","getComponentWithVisitedState","visitedState","visited","setMarked","marked","from","to","edgeDirection","directionPt","toEdges","LineMergeDirectedEdge","getToNode","getOutEdges","setDirectedEdges","setEdge","getFromNode","addOutEdge","fromNode","outEdges","sorted","sortEdges","modi","deStar","getEdgesBetween","node0","commonEdges","retainAll","LineMergeEdge","nodesFound","nodeIterator","getDirEdge","LineMergeGraph","startCoordinate","endCoordinate","endNode","directedEdge0","directedEdge1","findNode","LineMerger","mergedLineStrings","edgeStrings","buildEdgeStringsStartingAt","buildEdgeStringsForNonDegree2Nodes","buildEdgeStringStartingWith","edgeIterator","buildEdgeStringsForObviousStartNodes","buildEdgeStringsForIsolatedLoops","edgeString","current","buildEdgeStringsForUnprocessedNodes","PolygonizeDirectedEdge","PolygonizeEdge","ConnectedInteriorTester","disconnectedRingcoord","findDifferentPoint","findEdgeInSameDirection","findEdgeEnd","intDe","visitLinkedDirectedEdges","visitInteriorRing","setInteriorEdgesInResult","buildEdgeRings","visitShellInteriors","hasUnvisitedShellEdge","EdgeEndBuilder","eiCurr","eiNext","computeEdgeEnds","createEdgeEndForPrev","createEdgeEndForNext","EdgeEndBundle","edgeEnds","getDirectedCoordinate","foundInterior","computeLabelSide","computeLabelOn","computeLabelSides","EdgeEndBundleStar","esb","eb","RelateNode","RelateNodeFactory","RelateNodeGraph","computeIntersectionNodes","copyNodesAndLabels","eeBuilder","eeList","insertEdgeEnds","edgeIt","setLabelBoundary","ConsistentAreaTester","nodeGraph","isAreaLabelsConsistent","eeb","intersector","isNodeEdgeAreaLabelsConsistent","IndexedNestedRingTester","totalEnv","nestedPt","innerRing","innerRingPts","results","searchRing","searchRingPts","innerRingPt","IsValidOp","findPtNotNode","isInside","TopologyValidationError","errorType","errMsg","locStr","getMessage","ERROR","REPEATED_POINT","HOLE_OUTSIDE_SHELL","NESTED_HOLES","DISCONNECTED_INTERIOR","SELF_INTERSECTION","RING_SELF_INTERSECTION","NESTED_SHELLS","DUPLICATE_RINGS","TOO_FEW_POINTS","INVALID_COORDINATE","RING_NOT_CLOSED","parentGeometry","isSelfTouchingRingFormingHoleValid","validErr","checkInvalidCoordinates","nestedTester","innerHole","isNonNested","getNestedPoint","cat","isValidArea","isNodeConsistentArea","getInvalidPoint","hasDuplicateRings","shellPts","holePts","shellPt","insideHole","holePt","insideShell","checkNoSelfIntersectingRing","cit","isInteriorsConnected","nodeSet","pir","outside","hasTooFewPoints","checkClosedRing","checkTooFewPoints","checkNoSelfIntersectingRings","checkClosedRings","checkConsistentArea","checkHolesInShell","checkHolesNotNested","checkConnectedInteriors","checkShellsNotNested","polyShell","insidePolyShell","badNestedPt","checkShellInsideHole","checkShellNotNested","testCoords","searchEdge","isValidOp","deList","lowestEdge","_isProcessed","_isIncludedSet","_isIncluded","getRing","startDE","setRing","isInRing","hasShell","holeER","isIncluded","adjRing","isOuterHole","getOuterHole","adjShell","isIncludedSet","setIncluded","isProcessed","findDirEdgesInRing","minShellEnv","tryShellRing","tryShellEnv","EnvelopeComparator","obj0","obj1","r0","r1","PolygonizeGraph","computeDepthParity","iNode","computeNextCWEdges","linePts","endPt","nStart","nEnd","findLabeledEdgeRings","cutLines","maximalRings","convertMaximalToMinimalEdgeRings","edgeRingList","findEdgeRing","ringEdges","intNodes","findIntersectionNodes","computeNextCCWEdges","nodesToRemove","findNodesOfDegree","dangleLines","deleteAllEdges","nodeOutEdges","toNode","getDegreeNonDeleted","edgeRingStarts","currLabel","prevDE","outDE","firstOutDE","prevInDE","inDE","Polygonizer","lineStringAdder","LineStringAdder","dangles","cutEdges","invalidRingLines","holeList","polyList","isCheckingRingsValid","extractOnlyPolygonal","polygonize","validEdgeRingList","invalidRingList","getLineString","deleteDangles","deleteCutEdges","getEdgeRings","findValidRings","findShellsAndHoles","assignHolesToShells","includeAll","findDisjointShells","extractPolygons","computeHole","findOuterShells","outerHoleER","setProcessed","getPolygon","assignHoleToShell","isMoreToScan","updateIncluded","RelateComputer","isolatedEdges","dimA","dimB","hasProperInteriorIntersection","thisIndex","labelIsolatedEdge","computeDisjointIM","labelIsolatedNodes","computeProperIntersectionIM","ee0","ee1","labelNodeEdges","labelIsolatedEdges","labelIsolatedNode","updateIMFromEdges","ga","gb","RectangleContains","rectEnv","rectangle","isPointContainedInBoundary","isLineStringContainedInBoundary","isContainedInBoundary","isLineSegmentContainedInBoundary","rc","RectangleLineIntersector","diagUp0","diagUp1","diagDown0","diagDown1","segEnv","isSegUpwards","ShortCircuitedGeometryVisitor","applyTo","RectangleIntersects","EnvelopeIntersectsVisitor","ecpVisitor","GeometryContainsPointVisitor","riVisitor","RectangleIntersectsSegmentVisitor","rp","_intersects","elementEnv","rectSeq","_containsPoint","rectPt","rectIntersector","checkIntersectionWithLineStrings","testLine","checkIntersectionWithSegments","seq1","RelateOp","_relate","isRectangle","relate","isCovers","isIntersects","touches","within","coveredBy","relOp","getIntersectionMatrix","intersectionPattern","relateWithCheck","isOverlaps","disjoint","crosses","isCrosses","isContains","GeometryCombiner","skipEmpty","inputGeoms","extractFactory","elems","elemGeom","extractElements","combine","combiner","createList","obj2","PointGeometryUnion","pointGeom","exteriorCoords","ptComp","unioner","GeometryExtracter","sortIndex","CascadedPolygonUnion","inputPolys","geomTree","unionTree","disjointGeoms","intersectingGeoms","elem","g0Env","g1Env","combo","unionActual","commonEnv","unionUsingEnvelopeIntersection","STRTREE_NODE_CAPACITY","itemTree","unionAll","binaryUnion","unionSafe","unionOptimized","restrictToPolygons","reduceToGeometries","common","disjointPolys","g0Int","extractByEnvelope","g1Int","overallUnion","gColl","UnaryUnionOp","unionPoints","ptGeom","unionNoOpt","unionLines","lineGeom","unionPolygons","unionLA","unionWithNull","PrecisionReducerCoordinateOperation","targetPM","removeCollapsed","reducedCoords","noRepeatedCoordList","noRepeatedCoords","minLength","collapsedCoords","GeometryPrecisionReducer","changePrecisionModel","isPointwise","geomToBuffer","changePM","bufGeom","finalGeom","geomEdit","newFactory","createFactory","finalRemoveCollapsed","reduceGeom","newPM","geomEditor","createEditor","inputFactory","reducePW","reducePointwise","fixPolygonalTopology","reducer","setPointwise","DouglasPeuckerLineSimplifier","usePt","simplifySection","DouglasPeuckerSimplifier","isEnsureValidTopology","DPTransformer","tss","rawGeom","rawAreaGeom","removeDegenerateRings","simpResult","TaggedLineSegment","TaggedLineString","parentLine","resultSegs","minimumSize","resultSegsSize","LineSegmentIndex","getSegments","querySeg","LineSegmentVisitor","itemsFound","TaggedLineStringSimplifier","inputIndex","outputIndex","newSeg","sectionIndex","candidateSeg","hasBadOutputIntersection","hasBadInputIntersection","getSegment","addToResult","isValidToSimplify","getResultSize","getMinimumSize","worstCaseSize","furthestPtIndex","findFurthestPoint","hasBadIntersection","flatten","querySegs","maxDist","midPt","getParentCoordinates","isInLineSection","getParent","TaggedLinesSimplifier","taggedLines","tlss","TopologyPreservingSimplifier","lineSimplifier","linestringMap","LineStringMapBuilderFilter","LineStringTransformer","taggedLine","createCoordinateSequence","getResultCoordinates","tps","minSize","SplitSegment","minimumLen","minFrac","pointAlongReverse","actualLen","getConstrainedLength","minLen","ConstraintSplitPointFinder","encroachPt","NonEncroachingSplitPointFinder","lineSeg","midPtLen","splitSeg","projPt","projectedSplitPoint","nonEncroachDiam","maxSplitLen","setMinimumLength","splitAt","getSplitPoint","TrianglePredicate","triArea","isInCircleDDNormalized","bdx","bdy","cdx","cdy","abdet","bcdet","cadet","alift","blift","clift","isInCircle","checkRobustInCircle","nonRobustInCircle","isInCircleNonRobust","isInCircleDD","isInCircleDDSlow","isInCircleCC","circumCentre","toPoint","isInCircleDDFast","aTerm","triAreaDDFast","bTerm","cTerm","pTerm","cc","ccRadius","pRadiusDiff","isInCircleNormalized","triAreaDDSlow","isInCircleRobust","t1","t2","Vertex","_p","_z","cab","cbc","hcc","nre","err","getZ","xm","ym","zm","sa","crossProduct","BEHIND","magn","BEYOND","ORIGIN","DESTINATION","BETWEEN","circleCenter","edgeLength","el","ptLen","pz","ConstraintVertex","_isOnConstraint","constraint","isOnConstraint","QuadEdge","_rot","vertex","qe","equalsOriented","invRot","rot","setOrig","makeEdge","q0","q3","base","setDest","oPrev","lNext","beta","t3","t4","connect","IncrementalDelaunayTriangulator","subdiv","isUsingTolerance","getTolerance","isVertexOfEdge","isOnEdge","delete","lPrev","vertices","insertSite","QuadEdgeLocator","LastFoundQuadEdgeLocator","lastEdge","isLive","locateFromEdge","LocateFailureException","msgWithSpatial","TriangleVisitor","triEdges","QuadEdgeSubdivision","visitedKey","quadEdges","startingEdge","edgeCoincidenceTolerance","frameVertex","frameEnv","locator","EDGE_COINCIDENCE_TOL_FACTOR","createFrame","initSubdiv","includeFrame","TriangleVertexListVisitor","visitTriangles","getTriangleVertices","cellPts","startQE","cellPoly","ea","ec","leftTri","getTriangleEdges","rightTri","vLeftTriOther","isFrameVertex","vRightTriOther","triVisitor","edgeStack","visitedEdges","fetchTriangleToVisit","TriangleCoordinatesVisitor","getTriangles","vd","curr","edgeCount","isFrame","isFrameEdge","getPrimaryEdges","visitedVertices","qd","TriangleEdgesListVisitor","priQE","getPrimary","eSym","eRot","eRotSym","iter","maxIter","toLineSegment","dPrev","TriangleCircumcentreVisitor","cells","getVertexUniqueEdges","getVoronoiCellPolygon","vorCells","getVoronoiCellPolygons","triPtsList","getTriangleCoordinates","tris","triPt","locEdge","triEdge","ccVertex","triList","triCoords","Segment","z1","z2","KdNodeVisitor","KdNode","_left","_right","KdTree","numberOfNodes","matchNode","findBestMatchNode","increment","insertExact","queryEnv","queryNode","currentNode","odd","discriminant","searchLeft","searchRight","getLeft","getRight","BestMatchVisitor","queryEnvelope","leafNode","isOddLevel","isLessThan","isInTolerance","setLeft","setRight","toCoordinates","kdnodes","includeRepeated","getCount","matchDist","update","ConformingDelaunayTriangulator","initialVertices","segVertices","segments","incDel","splitFinder","kdt","vertexFactory","computeAreaEnv","addConstraintVertices","splits","enforceGabriel","MAX_SPLIT_ITER","getPointArray","hull","computeConvexHull","insertSites","getStart","getEnd","segRadius","closestNonGabriel","testRadius","testDist","segsToInsert","newSegments","segsToRemove","findNonGabrielPoint","findSplitPoint","splitVertex","createVertex","insertedVertex","getStartX","getStartY","getStartZ","getEndX","getEndY","getEndZ","removeAll","setOnConstraint","vertexEnv","computeVertexEnvelope","allPointsEnv","computeBoundingBox","setLocator","kdnode","isRepeated","snappedV","DelaunayTriangulationBuilder","siteCoords","siteEnv","toVertices","triangulator","extractUniqueCoordinates","unique","coordsCopy","verts","ConformingDelaunayTriangulationBuilder","constraintLines","constraintVertexMap","containsKey","createVertices","createConstraintSegments","sites","createSiteVertices","cdt","setConstraints","formInitialDelaunay","enforceConstraints","getSubdivision","constraintSegs","VoronoiDiagramBuilder","clipEnv","diagramEnv","getVoronoiDiagram","clipGeometryCollection","clipPoly","clipped","UnionOp","isEquals","args","centPt","interiorPt","getInteriorPoint","writer","toText","envDist","version"],"mappings":"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"}