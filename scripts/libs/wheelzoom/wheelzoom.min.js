window.wheelzoom=function(){var e={zoom:.1},t=document.createElement("canvas"),n=function(n,o){function r(e){e.style.backgroundImage='url("'+e.src+'")',e.style.backgroundRepeat="no-repeat",t.width=e.naturalWidth,t.height=e.naturalHeight,E=t.toDataURL(),e.src=E}function a(){f>0?f=0:l-g>f&&(f=l-g),w>0?w=0:v-p>w&&(w=v-p),n.style.backgroundSize=g+"px "+p+"px",n.style.backgroundPosition=f+"px "+w+"px"}function u(){g=l,p=v,f=w=0,a()}function d(e){var t=0;e.preventDefault(),e.deltaY?t=e.deltaY:e.wheelDelta&&(t=-e.wheelDelta);var o=n.getBoundingClientRect(),r=e.pageX-o.left-window.pageXOffset,d=e.pageY-o.top-window.pageYOffset,i=r-f,s=d-w,c=i/g,m=s/p;0>t?(g+=g*y.zoom,p+=p*y.zoom):(g-=g*y.zoom,p-=p*y.zoom),f=r-g*c,w=d-p*m,l>=g||v>=p?u():a()}function i(e){e.preventDefault(),f+=e.pageX-h.pageX,w+=e.pageY-h.pageY,h=e,a()}function s(){document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",i)}function c(e){e.preventDefault(),h=e,document.addEventListener("mousemove",i),document.addEventListener("mouseup",s)}function m(){if(n.src!==E){var e=window.getComputedStyle(n,null);l=parseInt(e.width,10),v=parseInt(e.height,10),g=l,p=v,f=0,w=0,r(n),n.style.backgroundSize=l+"px "+v+"px",n.style.backgroundPosition="0 0",n.addEventListener("wheelzoom.reset",u),n.addEventListener("wheel",d),n.addEventListener("mousedown",c)}}if(n&&n.nodeName&&"IMG"===n.nodeName){var l,v,g,p,f,w,h,E,y={},L=function(e){n.removeEventListener("wheelzoom.destroy",L),n.removeEventListener("wheelzoom.reset",u),n.removeEventListener("load",m),n.removeEventListener("mouseup",s),n.removeEventListener("mousemove",i),n.removeEventListener("mousedown",c),n.removeEventListener("wheel",d),n.style.backgroundImage=e.backgroundImage,n.style.backgroundRepeat=e.backgroundRepeat,n.src=e.src}.bind(null,{backgroundImage:n.style.backgroundImage,backgroundRepeat:n.style.backgroundRepeat,src:n.src});n.addEventListener("wheelzoom.destroy",L),o=o||{},Object.keys(e).forEach(function(t){y[t]=void 0!==o[t]?o[t]:e[t]}),n.complete&&m(),n.addEventListener("load",m)}};return"function"!=typeof window.getComputedStyle?function(e){return e}:function(e,t){return e&&e.length?Array.prototype.forEach.call(e,n,t):e&&e.nodeName&&n(e,t),e}}();