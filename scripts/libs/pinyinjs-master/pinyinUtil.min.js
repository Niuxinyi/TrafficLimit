!function(){function n(n,t,e){t=t||"";for(var r=[""],o=[],a=0;a<n.length;a++){o=[];for(var f=n[a].split(t),p=0;p<f.length;p++)for(var h=0;h<r.length;h++)o.push(r[h]+(r[h]?e:"")+f[p]);r=o}return i(r)}function t(n,t,i,e){var o=window.pinyin_dict_polyphone,a=7,f=o[n];if(f){f=f.split(" ");for(var p=0;p<f.length;p++)t[p]=f[p]||t[p],e||(t[p]=r.removeTone(t[p]));return t.join(i)}for(var p=0;p<n.length;p++){f="";for(var h=0;a>h&&p+h<n.length&&/^[\u2E80-\u9FFF]+$/.test(n[p+h]);h++){f+=n[p+h];var l=o[f];if(l){l=l.split(" ");for(var v=0;h>=v;v++)l[v]&&(t[p+v]=e?l[v]:r.removeTone(l[v]));break}}}for(var p=0;p<t.length;p++)t[p]=t[p].replace(/ .*$/g,"");return t.join(i)}function i(n){for(var t=[],i={},e=0;e<n.length;e++){var r=typeof n[e]+n[e];i[r]||(t.push(n[e]),i[r]=!0)}return t}var e={},r={parseDict:function(){if(window.pinyin_dict_firstletter&&(e.firstletter=pinyin_dict_firstletter),window.pinyin_dict_notone){e.notone={},e.py2hz=pinyin_dict_notone;for(var n in pinyin_dict_notone)for(var t=pinyin_dict_notone[n],i=0,o=t.length;o>i;i++)e.notone[t[i]]=n}if(window.pinyin_dict_withtone){e.withtone={};for(var t=pinyin_dict_withtone.split(","),n=0,o=t.length;o>n;n++)e.withtone[String.fromCharCode(n+19968)]=t[n];if(window.pinyin_dict_notone)e.py2hz=pinyin_dict_notone;else{for(var a,f,p=r.removeTone(pinyin_dict_withtone).split(","),h={},n=0,o=p.length;o>n;n++){f=String.fromCharCode(n+19968),a=p[n].split(" ");for(var i=0;i<a.length;i++)h[a[i]]=(h[a[i]]||"")+f}e.py2hz=h}}},getPinyin:function(i,r,o,a){if(!i||/^ +$/g.test(i))return"";r=void 0==r?" ":r,o=void 0==o?!0:o,a=void 0==a?!1:a;var f=[];if(e.withtone)for(var p=0,h=i.length;h>p;p++){var l=e.withtone[i[p]];l&&(a||(l=l.replace(/ .*$/g,"")),o||(l=this.removeTone(l))),f.push(l||i[p])}else{if(!e.notone)throw"抱歉，未找到合适的拼音字典文件！";o&&console.warn("pinyin_dict_notone 字典文件不支持声调！"),a&&console.warn("pinyin_dict_notone 字典文件不支持多音字！");for(var p=0,h=i.length;h>p;p++){var v=i.charAt(p);f.push(e.notone[v]||v)}}return a?window.pinyin_dict_polyphone?t(i,f,r,o):n(f," ",r):f.join(r)},getFirstLetter:function(t,r){if(r=void 0==r?!1:r,!t||/^ +$/g.test(t))return"";if(e.firstletter){for(var o=[],a=0;a<t.length;a++){var f=t.charCodeAt(a),p=t.charAt(a);f>=19968&&40869>=f&&(p=e.firstletter.all.charAt(f-19968),r&&(p=e.firstletter.polyphone[f]||p)),o.push(p)}return r?n(o,"",""):o.join("")}var h=this.getPinyin(t," ",!1,r);h=h instanceof Array?h:[h];for(var o=[],a=0;a<h.length;a++)o.push(h[a].replace(/(^| )(\w)\w*/g,function(n,t,i){return i.toUpperCase()}));return r?i(o):o[0]},getHanzi:function(n){if(!e.py2hz)throw"抱歉，未找到合适的拼音字典文件！";return e.py2hz[n]||""},removeTone:function(n){var t={"ā":"a1","á":"a2","ǎ":"a3","à":"a4","ō":"o1","ó":"o2","ǒ":"o3","ò":"o4","ē":"e1","é":"e2","ě":"e3","è":"e4","ī":"i1","í":"i2","ǐ":"i3","ì":"i4","ū":"u1","ú":"u2","ǔ":"u3","ù":"u4","ü":"v0","ǖ":"v1","ǘ":"v2","ǚ":"v3","ǜ":"v4","ń":"n2","ň":"n3","":"m2"};return n.replace(/[āáǎàōóǒòēéěèīíǐìūúǔùüǖǘǚǜńň]/g,function(n){return t[n][0]})}};r.parseDict(),r.dict=e,window.pinyinUtil=r}();